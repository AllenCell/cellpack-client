function Xg(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function Yg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Jg={exports:{}},mu={},Zg={exports:{}},de={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ha=Symbol.for("react.element"),AE=Symbol.for("react.portal"),CE=Symbol.for("react.fragment"),PE=Symbol.for("react.strict_mode"),kE=Symbol.for("react.profiler"),DE=Symbol.for("react.provider"),xE=Symbol.for("react.context"),NE=Symbol.for("react.forward_ref"),VE=Symbol.for("react.suspense"),LE=Symbol.for("react.memo"),ME=Symbol.for("react.lazy"),vp=Symbol.iterator;function OE(t){return t===null||typeof t!="object"?null:(t=vp&&t[vp]||t["@@iterator"],typeof t=="function"?t:null)}var ey={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ty=Object.assign,ny={};function No(t,e,n){this.props=t,this.context=e,this.refs=ny,this.updater=n||ey}No.prototype.isReactComponent={};No.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};No.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ry(){}ry.prototype=No.prototype;function hd(t,e,n){this.props=t,this.context=e,this.refs=ny,this.updater=n||ey}var dd=hd.prototype=new ry;dd.constructor=hd;ty(dd,No.prototype);dd.isPureReactComponent=!0;var _p=Array.isArray,iy=Object.prototype.hasOwnProperty,fd={current:null},oy={key:!0,ref:!0,__self:!0,__source:!0};function sy(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)iy.call(e,r)&&!oy.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:ha,type:t,key:o,ref:s,props:i,_owner:fd.current}}function FE(t,e){return{$$typeof:ha,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function pd(t){return typeof t=="object"&&t!==null&&t.$$typeof===ha}function bE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ep=/\/+/g;function ac(t,e){return typeof t=="object"&&t!==null&&t.key!=null?bE(""+t.key):e.toString(36)}function ul(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case ha:case AE:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+ac(s,0):r,_p(i)?(n="",t!=null&&(n=t.replace(Ep,"$&/")+"/"),ul(i,e,n,"",function(h){return h})):i!=null&&(pd(i)&&(i=FE(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(Ep,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",_p(t))for(var l=0;l<t.length;l++){o=t[l];var u=r+ac(o,l);s+=ul(o,e,n,u,i)}else if(u=OE(t),typeof u=="function")for(t=u.call(t),l=0;!(o=t.next()).done;)o=o.value,u=r+ac(o,l++),s+=ul(o,e,n,u,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Ua(t,e,n){if(t==null)return t;var r=[],i=0;return ul(t,r,"","",function(o){return e.call(n,o,i++)}),r}function UE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ft={current:null},cl={transition:null},jE={ReactCurrentDispatcher:Ft,ReactCurrentBatchConfig:cl,ReactCurrentOwner:fd};function ay(){throw Error("act(...) is not supported in production builds of React.")}de.Children={map:Ua,forEach:function(t,e,n){Ua(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ua(t,function(){e++}),e},toArray:function(t){return Ua(t,function(e){return e})||[]},only:function(t){if(!pd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};de.Component=No;de.Fragment=CE;de.Profiler=kE;de.PureComponent=hd;de.StrictMode=PE;de.Suspense=VE;de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jE;de.act=ay;de.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=ty({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=fd.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)iy.call(e,u)&&!oy.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:ha,type:t.type,key:i,ref:o,props:r,_owner:s}};de.createContext=function(t){return t={$$typeof:xE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:DE,_context:t},t.Consumer=t};de.createElement=sy;de.createFactory=function(t){var e=sy.bind(null,t);return e.type=t,e};de.createRef=function(){return{current:null}};de.forwardRef=function(t){return{$$typeof:NE,render:t}};de.isValidElement=pd;de.lazy=function(t){return{$$typeof:ME,_payload:{_status:-1,_result:t},_init:UE}};de.memo=function(t,e){return{$$typeof:LE,type:t,compare:e===void 0?null:e}};de.startTransition=function(t){var e=cl.transition;cl.transition={};try{t()}finally{cl.transition=e}};de.unstable_act=ay;de.useCallback=function(t,e){return Ft.current.useCallback(t,e)};de.useContext=function(t){return Ft.current.useContext(t)};de.useDebugValue=function(){};de.useDeferredValue=function(t){return Ft.current.useDeferredValue(t)};de.useEffect=function(t,e){return Ft.current.useEffect(t,e)};de.useId=function(){return Ft.current.useId()};de.useImperativeHandle=function(t,e,n){return Ft.current.useImperativeHandle(t,e,n)};de.useInsertionEffect=function(t,e){return Ft.current.useInsertionEffect(t,e)};de.useLayoutEffect=function(t,e){return Ft.current.useLayoutEffect(t,e)};de.useMemo=function(t,e){return Ft.current.useMemo(t,e)};de.useReducer=function(t,e,n){return Ft.current.useReducer(t,e,n)};de.useRef=function(t){return Ft.current.useRef(t)};de.useState=function(t){return Ft.current.useState(t)};de.useSyncExternalStore=function(t,e,n){return Ft.current.useSyncExternalStore(t,e,n)};de.useTransition=function(){return Ft.current.useTransition()};de.version="18.3.1";Zg.exports=de;var U=Zg.exports;const zE=Yg(U),BE=Xg({__proto__:null,default:zE},[U]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $E=U,HE=Symbol.for("react.element"),qE=Symbol.for("react.fragment"),WE=Object.prototype.hasOwnProperty,GE=$E.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,KE={key:!0,ref:!0,__self:!0,__source:!0};function ly(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)WE.call(e,r)&&!KE.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:HE,type:t,key:o,ref:s,props:i,_owner:GE.current}}mu.Fragment=qE;mu.jsx=ly;mu.jsxs=ly;Jg.exports=mu;var ce=Jg.exports,uy={exports:{}},tn={},cy={exports:{}},hy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,te){var re=B.length;B.push(te);e:for(;0<re;){var we=re-1>>>1,he=B[we];if(0<i(he,te))B[we]=te,B[re]=he,re=we;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var te=B[0],re=B.pop();if(re!==te){B[0]=re;e:for(var we=0,he=B.length,Pe=he>>>1;we<Pe;){var Vt=2*(we+1)-1,We=B[Vt],dt=Vt+1,ft=B[dt];if(0>i(We,re))dt<he&&0>i(ft,We)?(B[we]=ft,B[dt]=re,we=dt):(B[we]=We,B[Vt]=re,we=Vt);else if(dt<he&&0>i(ft,re))B[we]=ft,B[dt]=re,we=dt;else break e}}return te}function i(B,te){var re=B.sortIndex-te.sortIndex;return re!==0?re:B.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],h=[],f=1,p=null,y=3,T=!1,P=!1,D=!1,V=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(B){for(var te=n(h);te!==null;){if(te.callback===null)r(h);else if(te.startTime<=B)r(h),te.sortIndex=te.expirationTime,e(u,te);else break;te=n(h)}}function M(B){if(D=!1,R(B),!P)if(n(u)!==null)P=!0,rn(z);else{var te=n(h);te!==null&&ht(M,te.startTime-B)}}function z(B,te){P=!1,D&&(D=!1,I(g),g=-1),T=!0;var re=y;try{for(R(te),p=n(u);p!==null&&(!(p.expirationTime>te)||B&&!A());){var we=p.callback;if(typeof we=="function"){p.callback=null,y=p.priorityLevel;var he=we(p.expirationTime<=te);te=t.unstable_now(),typeof he=="function"?p.callback=he:p===n(u)&&r(u),R(te)}else r(u);p=n(u)}if(p!==null)var Pe=!0;else{var Vt=n(h);Vt!==null&&ht(M,Vt.startTime-te),Pe=!1}return Pe}finally{p=null,y=re,T=!1}}var H=!1,m=null,g=-1,E=5,w=-1;function A(){return!(t.unstable_now()-w<E)}function k(){if(m!==null){var B=t.unstable_now();w=B;var te=!0;try{te=m(!0,B)}finally{te?S():(H=!1,m=null)}}else H=!1}var S;if(typeof _=="function")S=function(){_(k)};else if(typeof MessageChannel<"u"){var Ce=new MessageChannel,et=Ce.port2;Ce.port1.onmessage=k,S=function(){et.postMessage(null)}}else S=function(){V(k,0)};function rn(B){m=B,H||(H=!0,S())}function ht(B,te){g=V(function(){B(t.unstable_now())},te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){P||T||(P=!0,rn(z))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(y){case 1:case 2:case 3:var te=3;break;default:te=y}var re=y;y=te;try{return B()}finally{y=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,te){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var re=y;y=B;try{return te()}finally{y=re}},t.unstable_scheduleCallback=function(B,te,re){var we=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?we+re:we):re=we,B){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=re+he,B={id:f++,callback:te,priorityLevel:B,startTime:re,expirationTime:he,sortIndex:-1},re>we?(B.sortIndex=re,e(h,B),n(u)===null&&B===n(h)&&(D?(I(g),g=-1):D=!0,ht(M,re-we))):(B.sortIndex=he,e(u,B),P||T||(P=!0,rn(z))),B},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(B){var te=y;return function(){var re=y;y=te;try{return B.apply(this,arguments)}finally{y=re}}}})(hy);cy.exports=hy;var QE=cy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XE=U,en=QE;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var dy=new Set,Os={};function Ii(t,e){go(t,e),go(t+"Capture",e)}function go(t,e){for(Os[t]=e,t=0;t<e.length;t++)dy.add(e[t])}var ir=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Kc=Object.prototype.hasOwnProperty,YE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wp={},Tp={};function JE(t){return Kc.call(Tp,t)?!0:Kc.call(wp,t)?!1:YE.test(t)?Tp[t]=!0:(wp[t]=!0,!1)}function ZE(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ew(t,e,n,r){if(e===null||typeof e>"u"||ZE(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function bt(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var wt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){wt[t]=new bt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];wt[e]=new bt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){wt[t]=new bt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){wt[t]=new bt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){wt[t]=new bt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){wt[t]=new bt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){wt[t]=new bt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){wt[t]=new bt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){wt[t]=new bt(t,5,!1,t.toLowerCase(),null,!1,!1)});var md=/[\-:]([a-z])/g;function gd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(md,gd);wt[e]=new bt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(md,gd);wt[e]=new bt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(md,gd);wt[e]=new bt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){wt[t]=new bt(t,1,!1,t.toLowerCase(),null,!1,!1)});wt.xlinkHref=new bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){wt[t]=new bt(t,1,!1,t.toLowerCase(),null,!0,!0)});function yd(t,e,n,r){var i=wt.hasOwnProperty(e)?wt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ew(e,n,i,r)&&(n=null),r||i===null?JE(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var hr=XE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ja=Symbol.for("react.element"),Qi=Symbol.for("react.portal"),Xi=Symbol.for("react.fragment"),vd=Symbol.for("react.strict_mode"),Qc=Symbol.for("react.profiler"),fy=Symbol.for("react.provider"),py=Symbol.for("react.context"),_d=Symbol.for("react.forward_ref"),Xc=Symbol.for("react.suspense"),Yc=Symbol.for("react.suspense_list"),Ed=Symbol.for("react.memo"),Er=Symbol.for("react.lazy"),my=Symbol.for("react.offscreen"),Sp=Symbol.iterator;function is(t){return t===null||typeof t!="object"?null:(t=Sp&&t[Sp]||t["@@iterator"],typeof t=="function"?t:null)}var Be=Object.assign,lc;function ms(t){if(lc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);lc=e&&e[1]||""}return`
`+lc+t}var uc=!1;function cc(t,e){if(!t||uc)return"";uc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,l=o.length-1;1<=s&&0<=l&&i[s]!==o[l];)l--;for(;1<=s&&0<=l;s--,l--)if(i[s]!==o[l]){if(s!==1||l!==1)do if(s--,l--,0>l||i[s]!==o[l]){var u=`
`+i[s].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=s&&0<=l);break}}}finally{uc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ms(t):""}function tw(t){switch(t.tag){case 5:return ms(t.type);case 16:return ms("Lazy");case 13:return ms("Suspense");case 19:return ms("SuspenseList");case 0:case 2:case 15:return t=cc(t.type,!1),t;case 11:return t=cc(t.type.render,!1),t;case 1:return t=cc(t.type,!0),t;default:return""}}function Jc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Xi:return"Fragment";case Qi:return"Portal";case Qc:return"Profiler";case vd:return"StrictMode";case Xc:return"Suspense";case Yc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case py:return(t.displayName||"Context")+".Consumer";case fy:return(t._context.displayName||"Context")+".Provider";case _d:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ed:return e=t.displayName||null,e!==null?e:Jc(t.type)||"Memo";case Er:e=t._payload,t=t._init;try{return Jc(t(e))}catch{}}return null}function nw(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Jc(e);case 8:return e===vd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function zr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function gy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function rw(t){var e=gy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function za(t){t._valueTracker||(t._valueTracker=rw(t))}function yy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=gy(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Pl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Zc(t,e){var n=e.checked;return Be({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ip(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=zr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function vy(t,e){e=e.checked,e!=null&&yd(t,"checked",e,!1)}function eh(t,e){vy(t,e);var n=zr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?th(t,e.type,n):e.hasOwnProperty("defaultValue")&&th(t,e.type,zr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Rp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function th(t,e,n){(e!=="number"||Pl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var gs=Array.isArray;function ao(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+zr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function nh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return Be({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ap(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(gs(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:zr(n)}}function _y(t,e){var n=zr(e.value),r=zr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Cp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ey(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function rh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ey(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ba,wy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ba=Ba||document.createElement("div"),Ba.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ba.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Fs(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ss={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},iw=["Webkit","ms","Moz","O"];Object.keys(Ss).forEach(function(t){iw.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ss[e]=Ss[t]})});function Ty(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ss.hasOwnProperty(t)&&Ss[t]?(""+e).trim():e+"px"}function Sy(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Ty(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var ow=Be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ih(t,e){if(e){if(ow[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function oh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sh=null;function wd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ah=null,lo=null,uo=null;function Pp(t){if(t=pa(t)){if(typeof ah!="function")throw Error($(280));var e=t.stateNode;e&&(e=Eu(e),ah(t.stateNode,t.type,e))}}function Iy(t){lo?uo?uo.push(t):uo=[t]:lo=t}function Ry(){if(lo){var t=lo,e=uo;if(uo=lo=null,Pp(t),e)for(t=0;t<e.length;t++)Pp(e[t])}}function Ay(t,e){return t(e)}function Cy(){}var hc=!1;function Py(t,e,n){if(hc)return t(e,n);hc=!0;try{return Ay(t,e,n)}finally{hc=!1,(lo!==null||uo!==null)&&(Cy(),Ry())}}function bs(t,e){var n=t.stateNode;if(n===null)return null;var r=Eu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var lh=!1;if(ir)try{var os={};Object.defineProperty(os,"passive",{get:function(){lh=!0}}),window.addEventListener("test",os,os),window.removeEventListener("test",os,os)}catch{lh=!1}function sw(t,e,n,r,i,o,s,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(f){this.onError(f)}}var Is=!1,kl=null,Dl=!1,uh=null,aw={onError:function(t){Is=!0,kl=t}};function lw(t,e,n,r,i,o,s,l,u){Is=!1,kl=null,sw.apply(aw,arguments)}function uw(t,e,n,r,i,o,s,l,u){if(lw.apply(this,arguments),Is){if(Is){var h=kl;Is=!1,kl=null}else throw Error($(198));Dl||(Dl=!0,uh=h)}}function Ri(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function ky(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function kp(t){if(Ri(t)!==t)throw Error($(188))}function cw(t){var e=t.alternate;if(!e){if(e=Ri(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return kp(i),t;if(o===r)return kp(i),e;o=o.sibling}throw Error($(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function Dy(t){return t=cw(t),t!==null?xy(t):null}function xy(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=xy(t);if(e!==null)return e;t=t.sibling}return null}var Ny=en.unstable_scheduleCallback,Dp=en.unstable_cancelCallback,hw=en.unstable_shouldYield,dw=en.unstable_requestPaint,Ke=en.unstable_now,fw=en.unstable_getCurrentPriorityLevel,Td=en.unstable_ImmediatePriority,Vy=en.unstable_UserBlockingPriority,xl=en.unstable_NormalPriority,pw=en.unstable_LowPriority,Ly=en.unstable_IdlePriority,gu=null,jn=null;function mw(t){if(jn&&typeof jn.onCommitFiberRoot=="function")try{jn.onCommitFiberRoot(gu,t,void 0,(t.current.flags&128)===128)}catch{}}var Cn=Math.clz32?Math.clz32:vw,gw=Math.log,yw=Math.LN2;function vw(t){return t>>>=0,t===0?32:31-(gw(t)/yw|0)|0}var $a=64,Ha=4194304;function ys(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Nl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var l=s&~i;l!==0?r=ys(l):(o&=s,o!==0&&(r=ys(o)))}else s=n&~i,s!==0?r=ys(s):o!==0&&(r=ys(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Cn(e),i=1<<n,r|=t[n],e&=~i;return r}function _w(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ew(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-Cn(o),l=1<<s,u=i[s];u===-1?(!(l&n)||l&r)&&(i[s]=_w(l,e)):u<=e&&(t.expiredLanes|=l),o&=~l}}function ch(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function My(){var t=$a;return $a<<=1,!($a&4194240)&&($a=64),t}function dc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function da(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Cn(e),t[e]=n}function ww(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Cn(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function Sd(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Cn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ae=0;function Oy(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Fy,Id,by,Uy,jy,hh=!1,qa=[],Pr=null,kr=null,Dr=null,Us=new Map,js=new Map,Tr=[],Tw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xp(t,e){switch(t){case"focusin":case"focusout":Pr=null;break;case"dragenter":case"dragleave":kr=null;break;case"mouseover":case"mouseout":Dr=null;break;case"pointerover":case"pointerout":Us.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":js.delete(e.pointerId)}}function ss(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=pa(e),e!==null&&Id(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Sw(t,e,n,r,i){switch(e){case"focusin":return Pr=ss(Pr,t,e,n,r,i),!0;case"dragenter":return kr=ss(kr,t,e,n,r,i),!0;case"mouseover":return Dr=ss(Dr,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Us.set(o,ss(Us.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,js.set(o,ss(js.get(o)||null,t,e,n,r,i)),!0}return!1}function zy(t){var e=ci(t.target);if(e!==null){var n=Ri(e);if(n!==null){if(e=n.tag,e===13){if(e=ky(n),e!==null){t.blockedOn=e,jy(t.priority,function(){by(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function hl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=dh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);sh=r,n.target.dispatchEvent(r),sh=null}else return e=pa(n),e!==null&&Id(e),t.blockedOn=n,!1;e.shift()}return!0}function Np(t,e,n){hl(t)&&n.delete(e)}function Iw(){hh=!1,Pr!==null&&hl(Pr)&&(Pr=null),kr!==null&&hl(kr)&&(kr=null),Dr!==null&&hl(Dr)&&(Dr=null),Us.forEach(Np),js.forEach(Np)}function as(t,e){t.blockedOn===e&&(t.blockedOn=null,hh||(hh=!0,en.unstable_scheduleCallback(en.unstable_NormalPriority,Iw)))}function zs(t){function e(i){return as(i,t)}if(0<qa.length){as(qa[0],t);for(var n=1;n<qa.length;n++){var r=qa[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Pr!==null&&as(Pr,t),kr!==null&&as(kr,t),Dr!==null&&as(Dr,t),Us.forEach(e),js.forEach(e),n=0;n<Tr.length;n++)r=Tr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Tr.length&&(n=Tr[0],n.blockedOn===null);)zy(n),n.blockedOn===null&&Tr.shift()}var co=hr.ReactCurrentBatchConfig,Vl=!0;function Rw(t,e,n,r){var i=Ae,o=co.transition;co.transition=null;try{Ae=1,Rd(t,e,n,r)}finally{Ae=i,co.transition=o}}function Aw(t,e,n,r){var i=Ae,o=co.transition;co.transition=null;try{Ae=4,Rd(t,e,n,r)}finally{Ae=i,co.transition=o}}function Rd(t,e,n,r){if(Vl){var i=dh(t,e,n,r);if(i===null)Tc(t,e,r,Ll,n),xp(t,r);else if(Sw(i,t,e,n,r))r.stopPropagation();else if(xp(t,r),e&4&&-1<Tw.indexOf(t)){for(;i!==null;){var o=pa(i);if(o!==null&&Fy(o),o=dh(t,e,n,r),o===null&&Tc(t,e,r,Ll,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Tc(t,e,r,null,n)}}var Ll=null;function dh(t,e,n,r){if(Ll=null,t=wd(r),t=ci(t),t!==null)if(e=Ri(t),e===null)t=null;else if(n=e.tag,n===13){if(t=ky(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ll=t,null}function By(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fw()){case Td:return 1;case Vy:return 4;case xl:case pw:return 16;case Ly:return 536870912;default:return 16}default:return 16}}var Ir=null,Ad=null,dl=null;function $y(){if(dl)return dl;var t,e=Ad,n=e.length,r,i="value"in Ir?Ir.value:Ir.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return dl=i.slice(t,1<r?1-r:void 0)}function fl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Wa(){return!0}function Vp(){return!1}function nn(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Wa:Vp,this.isPropagationStopped=Vp,this}return Be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Wa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Wa)},persist:function(){},isPersistent:Wa}),e}var Vo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cd=nn(Vo),fa=Be({},Vo,{view:0,detail:0}),Cw=nn(fa),fc,pc,ls,yu=Be({},fa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ls&&(ls&&t.type==="mousemove"?(fc=t.screenX-ls.screenX,pc=t.screenY-ls.screenY):pc=fc=0,ls=t),fc)},movementY:function(t){return"movementY"in t?t.movementY:pc}}),Lp=nn(yu),Pw=Be({},yu,{dataTransfer:0}),kw=nn(Pw),Dw=Be({},fa,{relatedTarget:0}),mc=nn(Dw),xw=Be({},Vo,{animationName:0,elapsedTime:0,pseudoElement:0}),Nw=nn(xw),Vw=Be({},Vo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Lw=nn(Vw),Mw=Be({},Vo,{data:0}),Mp=nn(Mw),Ow={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Uw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=bw[t])?!!e[t]:!1}function Pd(){return Uw}var jw=Be({},fa,{key:function(t){if(t.key){var e=Ow[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=fl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Fw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pd,charCode:function(t){return t.type==="keypress"?fl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?fl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),zw=nn(jw),Bw=Be({},yu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Op=nn(Bw),$w=Be({},fa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pd}),Hw=nn($w),qw=Be({},Vo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ww=nn(qw),Gw=Be({},yu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Kw=nn(Gw),Qw=[9,13,27,32],kd=ir&&"CompositionEvent"in window,Rs=null;ir&&"documentMode"in document&&(Rs=document.documentMode);var Xw=ir&&"TextEvent"in window&&!Rs,Hy=ir&&(!kd||Rs&&8<Rs&&11>=Rs),Fp=" ",bp=!1;function qy(t,e){switch(t){case"keyup":return Qw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wy(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Yi=!1;function Yw(t,e){switch(t){case"compositionend":return Wy(e);case"keypress":return e.which!==32?null:(bp=!0,Fp);case"textInput":return t=e.data,t===Fp&&bp?null:t;default:return null}}function Jw(t,e){if(Yi)return t==="compositionend"||!kd&&qy(t,e)?(t=$y(),dl=Ad=Ir=null,Yi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Hy&&e.locale!=="ko"?null:e.data;default:return null}}var Zw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Up(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Zw[t.type]:e==="textarea"}function Gy(t,e,n,r){Iy(r),e=Ml(e,"onChange"),0<e.length&&(n=new Cd("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var As=null,Bs=null;function e1(t){iv(t,0)}function vu(t){var e=eo(t);if(yy(e))return t}function t1(t,e){if(t==="change")return e}var Ky=!1;if(ir){var gc;if(ir){var yc="oninput"in document;if(!yc){var jp=document.createElement("div");jp.setAttribute("oninput","return;"),yc=typeof jp.oninput=="function"}gc=yc}else gc=!1;Ky=gc&&(!document.documentMode||9<document.documentMode)}function zp(){As&&(As.detachEvent("onpropertychange",Qy),Bs=As=null)}function Qy(t){if(t.propertyName==="value"&&vu(Bs)){var e=[];Gy(e,Bs,t,wd(t)),Py(e1,e)}}function n1(t,e,n){t==="focusin"?(zp(),As=e,Bs=n,As.attachEvent("onpropertychange",Qy)):t==="focusout"&&zp()}function r1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return vu(Bs)}function i1(t,e){if(t==="click")return vu(e)}function o1(t,e){if(t==="input"||t==="change")return vu(e)}function s1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var kn=typeof Object.is=="function"?Object.is:s1;function $s(t,e){if(kn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Kc.call(e,i)||!kn(t[i],e[i]))return!1}return!0}function Bp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function $p(t,e){var n=Bp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Bp(n)}}function Xy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Xy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Yy(){for(var t=window,e=Pl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Pl(t.document)}return e}function Dd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function a1(t){var e=Yy(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Xy(n.ownerDocument.documentElement,n)){if(r!==null&&Dd(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=$p(n,o);var s=$p(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var l1=ir&&"documentMode"in document&&11>=document.documentMode,Ji=null,fh=null,Cs=null,ph=!1;function Hp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ph||Ji==null||Ji!==Pl(r)||(r=Ji,"selectionStart"in r&&Dd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Cs&&$s(Cs,r)||(Cs=r,r=Ml(fh,"onSelect"),0<r.length&&(e=new Cd("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ji)))}function Ga(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Zi={animationend:Ga("Animation","AnimationEnd"),animationiteration:Ga("Animation","AnimationIteration"),animationstart:Ga("Animation","AnimationStart"),transitionend:Ga("Transition","TransitionEnd")},vc={},Jy={};ir&&(Jy=document.createElement("div").style,"AnimationEvent"in window||(delete Zi.animationend.animation,delete Zi.animationiteration.animation,delete Zi.animationstart.animation),"TransitionEvent"in window||delete Zi.transitionend.transition);function _u(t){if(vc[t])return vc[t];if(!Zi[t])return t;var e=Zi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Jy)return vc[t]=e[n];return t}var Zy=_u("animationend"),ev=_u("animationiteration"),tv=_u("animationstart"),nv=_u("transitionend"),rv=new Map,qp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Kr(t,e){rv.set(t,e),Ii(e,[t])}for(var _c=0;_c<qp.length;_c++){var Ec=qp[_c],u1=Ec.toLowerCase(),c1=Ec[0].toUpperCase()+Ec.slice(1);Kr(u1,"on"+c1)}Kr(Zy,"onAnimationEnd");Kr(ev,"onAnimationIteration");Kr(tv,"onAnimationStart");Kr("dblclick","onDoubleClick");Kr("focusin","onFocus");Kr("focusout","onBlur");Kr(nv,"onTransitionEnd");go("onMouseEnter",["mouseout","mouseover"]);go("onMouseLeave",["mouseout","mouseover"]);go("onPointerEnter",["pointerout","pointerover"]);go("onPointerLeave",["pointerout","pointerover"]);Ii("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ii("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ii("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ii("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ii("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ii("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),h1=new Set("cancel close invalid load scroll toggle".split(" ").concat(vs));function Wp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,uw(r,e,void 0,t),t.currentTarget=null}function iv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var l=r[s],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==o&&i.isPropagationStopped())break e;Wp(i,l,h),o=u}else for(s=0;s<r.length;s++){if(l=r[s],u=l.instance,h=l.currentTarget,l=l.listener,u!==o&&i.isPropagationStopped())break e;Wp(i,l,h),o=u}}}if(Dl)throw t=uh,Dl=!1,uh=null,t}function Le(t,e){var n=e[_h];n===void 0&&(n=e[_h]=new Set);var r=t+"__bubble";n.has(r)||(ov(e,t,2,!1),n.add(r))}function wc(t,e,n){var r=0;e&&(r|=4),ov(n,t,r,e)}var Ka="_reactListening"+Math.random().toString(36).slice(2);function Hs(t){if(!t[Ka]){t[Ka]=!0,dy.forEach(function(n){n!=="selectionchange"&&(h1.has(n)||wc(n,!1,t),wc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ka]||(e[Ka]=!0,wc("selectionchange",!1,e))}}function ov(t,e,n,r){switch(By(e)){case 1:var i=Rw;break;case 4:i=Aw;break;default:i=Rd}n=i.bind(null,e,n,t),i=void 0,!lh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Tc(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var u=s.tag;if((u===3||u===4)&&(u=s.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;s=s.return}for(;l!==null;){if(s=ci(l),s===null)return;if(u=s.tag,u===5||u===6){r=o=s;continue e}l=l.parentNode}}r=r.return}Py(function(){var h=o,f=wd(n),p=[];e:{var y=rv.get(t);if(y!==void 0){var T=Cd,P=t;switch(t){case"keypress":if(fl(n)===0)break e;case"keydown":case"keyup":T=zw;break;case"focusin":P="focus",T=mc;break;case"focusout":P="blur",T=mc;break;case"beforeblur":case"afterblur":T=mc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=Lp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=kw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=Hw;break;case Zy:case ev:case tv:T=Nw;break;case nv:T=Ww;break;case"scroll":T=Cw;break;case"wheel":T=Kw;break;case"copy":case"cut":case"paste":T=Lw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=Op}var D=(e&4)!==0,V=!D&&t==="scroll",I=D?y!==null?y+"Capture":null:y;D=[];for(var _=h,R;_!==null;){R=_;var M=R.stateNode;if(R.tag===5&&M!==null&&(R=M,I!==null&&(M=bs(_,I),M!=null&&D.push(qs(_,M,R)))),V)break;_=_.return}0<D.length&&(y=new T(y,P,null,n,f),p.push({event:y,listeners:D}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",y&&n!==sh&&(P=n.relatedTarget||n.fromElement)&&(ci(P)||P[or]))break e;if((T||y)&&(y=f.window===f?f:(y=f.ownerDocument)?y.defaultView||y.parentWindow:window,T?(P=n.relatedTarget||n.toElement,T=h,P=P?ci(P):null,P!==null&&(V=Ri(P),P!==V||P.tag!==5&&P.tag!==6)&&(P=null)):(T=null,P=h),T!==P)){if(D=Lp,M="onMouseLeave",I="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(D=Op,M="onPointerLeave",I="onPointerEnter",_="pointer"),V=T==null?y:eo(T),R=P==null?y:eo(P),y=new D(M,_+"leave",T,n,f),y.target=V,y.relatedTarget=R,M=null,ci(f)===h&&(D=new D(I,_+"enter",P,n,f),D.target=R,D.relatedTarget=V,M=D),V=M,T&&P)t:{for(D=T,I=P,_=0,R=D;R;R=$i(R))_++;for(R=0,M=I;M;M=$i(M))R++;for(;0<_-R;)D=$i(D),_--;for(;0<R-_;)I=$i(I),R--;for(;_--;){if(D===I||I!==null&&D===I.alternate)break t;D=$i(D),I=$i(I)}D=null}else D=null;T!==null&&Gp(p,y,T,D,!1),P!==null&&V!==null&&Gp(p,V,P,D,!0)}}e:{if(y=h?eo(h):window,T=y.nodeName&&y.nodeName.toLowerCase(),T==="select"||T==="input"&&y.type==="file")var z=t1;else if(Up(y))if(Ky)z=o1;else{z=r1;var H=n1}else(T=y.nodeName)&&T.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(z=i1);if(z&&(z=z(t,h))){Gy(p,z,n,f);break e}H&&H(t,y,h),t==="focusout"&&(H=y._wrapperState)&&H.controlled&&y.type==="number"&&th(y,"number",y.value)}switch(H=h?eo(h):window,t){case"focusin":(Up(H)||H.contentEditable==="true")&&(Ji=H,fh=h,Cs=null);break;case"focusout":Cs=fh=Ji=null;break;case"mousedown":ph=!0;break;case"contextmenu":case"mouseup":case"dragend":ph=!1,Hp(p,n,f);break;case"selectionchange":if(l1)break;case"keydown":case"keyup":Hp(p,n,f)}var m;if(kd)e:{switch(t){case"compositionstart":var g="onCompositionStart";break e;case"compositionend":g="onCompositionEnd";break e;case"compositionupdate":g="onCompositionUpdate";break e}g=void 0}else Yi?qy(t,n)&&(g="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(g="onCompositionStart");g&&(Hy&&n.locale!=="ko"&&(Yi||g!=="onCompositionStart"?g==="onCompositionEnd"&&Yi&&(m=$y()):(Ir=f,Ad="value"in Ir?Ir.value:Ir.textContent,Yi=!0)),H=Ml(h,g),0<H.length&&(g=new Mp(g,t,null,n,f),p.push({event:g,listeners:H}),m?g.data=m:(m=Wy(n),m!==null&&(g.data=m)))),(m=Xw?Yw(t,n):Jw(t,n))&&(h=Ml(h,"onBeforeInput"),0<h.length&&(f=new Mp("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:h}),f.data=m))}iv(p,e)})}function qs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ml(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=bs(t,n),o!=null&&r.unshift(qs(t,o,i)),o=bs(t,e),o!=null&&r.push(qs(t,o,i))),t=t.return}return r}function $i(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Gp(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,i?(u=bs(n,o),u!=null&&s.unshift(qs(n,u,l))):i||(u=bs(n,o),u!=null&&s.push(qs(n,u,l)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var d1=/\r\n?/g,f1=/\u0000|\uFFFD/g;function Kp(t){return(typeof t=="string"?t:""+t).replace(d1,`
`).replace(f1,"")}function Qa(t,e,n){if(e=Kp(e),Kp(t)!==e&&n)throw Error($(425))}function Ol(){}var mh=null,gh=null;function yh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var vh=typeof setTimeout=="function"?setTimeout:void 0,p1=typeof clearTimeout=="function"?clearTimeout:void 0,Qp=typeof Promise=="function"?Promise:void 0,m1=typeof queueMicrotask=="function"?queueMicrotask:typeof Qp<"u"?function(t){return Qp.resolve(null).then(t).catch(g1)}:vh;function g1(t){setTimeout(function(){throw t})}function Sc(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),zs(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);zs(e)}function xr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Xp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Lo=Math.random().toString(36).slice(2),Un="__reactFiber$"+Lo,Ws="__reactProps$"+Lo,or="__reactContainer$"+Lo,_h="__reactEvents$"+Lo,y1="__reactListeners$"+Lo,v1="__reactHandles$"+Lo;function ci(t){var e=t[Un];if(e)return e;for(var n=t.parentNode;n;){if(e=n[or]||n[Un]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Xp(t);t!==null;){if(n=t[Un])return n;t=Xp(t)}return e}t=n,n=t.parentNode}return null}function pa(t){return t=t[Un]||t[or],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function eo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function Eu(t){return t[Ws]||null}var Eh=[],to=-1;function Qr(t){return{current:t}}function Oe(t){0>to||(t.current=Eh[to],Eh[to]=null,to--)}function xe(t,e){to++,Eh[to]=t.current,t.current=e}var Br={},Nt=Qr(Br),$t=Qr(!1),yi=Br;function yo(t,e){var n=t.type.contextTypes;if(!n)return Br;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ht(t){return t=t.childContextTypes,t!=null}function Fl(){Oe($t),Oe(Nt)}function Yp(t,e,n){if(Nt.current!==Br)throw Error($(168));xe(Nt,e),xe($t,n)}function sv(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error($(108,nw(t)||"Unknown",i));return Be({},n,r)}function bl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Br,yi=Nt.current,xe(Nt,t),xe($t,$t.current),!0}function Jp(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=sv(t,e,yi),r.__reactInternalMemoizedMergedChildContext=t,Oe($t),Oe(Nt),xe(Nt,t)):Oe($t),xe($t,n)}var Jn=null,wu=!1,Ic=!1;function av(t){Jn===null?Jn=[t]:Jn.push(t)}function _1(t){wu=!0,av(t)}function Xr(){if(!Ic&&Jn!==null){Ic=!0;var t=0,e=Ae;try{var n=Jn;for(Ae=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Jn=null,wu=!1}catch(i){throw Jn!==null&&(Jn=Jn.slice(t+1)),Ny(Td,Xr),i}finally{Ae=e,Ic=!1}}return null}var no=[],ro=0,Ul=null,jl=0,ln=[],un=0,vi=null,Zn=1,er="";function oi(t,e){no[ro++]=jl,no[ro++]=Ul,Ul=t,jl=e}function lv(t,e,n){ln[un++]=Zn,ln[un++]=er,ln[un++]=vi,vi=t;var r=Zn;t=er;var i=32-Cn(r)-1;r&=~(1<<i),n+=1;var o=32-Cn(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Zn=1<<32-Cn(e)+i|n<<i|r,er=o+t}else Zn=1<<o|n<<i|r,er=t}function xd(t){t.return!==null&&(oi(t,1),lv(t,1,0))}function Nd(t){for(;t===Ul;)Ul=no[--ro],no[ro]=null,jl=no[--ro],no[ro]=null;for(;t===vi;)vi=ln[--un],ln[un]=null,er=ln[--un],ln[un]=null,Zn=ln[--un],ln[un]=null}var Jt=null,Yt=null,Ue=!1,Rn=null;function uv(t,e){var n=dn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Zp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Jt=t,Yt=xr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Jt=t,Yt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=vi!==null?{id:Zn,overflow:er}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=dn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Jt=t,Yt=null,!0):!1;default:return!1}}function wh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Th(t){if(Ue){var e=Yt;if(e){var n=e;if(!Zp(t,e)){if(wh(t))throw Error($(418));e=xr(n.nextSibling);var r=Jt;e&&Zp(t,e)?uv(r,n):(t.flags=t.flags&-4097|2,Ue=!1,Jt=t)}}else{if(wh(t))throw Error($(418));t.flags=t.flags&-4097|2,Ue=!1,Jt=t}}}function em(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Jt=t}function Xa(t){if(t!==Jt)return!1;if(!Ue)return em(t),Ue=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!yh(t.type,t.memoizedProps)),e&&(e=Yt)){if(wh(t))throw cv(),Error($(418));for(;e;)uv(t,e),e=xr(e.nextSibling)}if(em(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Yt=xr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Yt=null}}else Yt=Jt?xr(t.stateNode.nextSibling):null;return!0}function cv(){for(var t=Yt;t;)t=xr(t.nextSibling)}function vo(){Yt=Jt=null,Ue=!1}function Vd(t){Rn===null?Rn=[t]:Rn.push(t)}var E1=hr.ReactCurrentBatchConfig;function us(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var l=i.refs;s===null?delete l[o]:l[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function Ya(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function tm(t){var e=t._init;return e(t._payload)}function hv(t){function e(I,_){if(t){var R=I.deletions;R===null?(I.deletions=[_],I.flags|=16):R.push(_)}}function n(I,_){if(!t)return null;for(;_!==null;)e(I,_),_=_.sibling;return null}function r(I,_){for(I=new Map;_!==null;)_.key!==null?I.set(_.key,_):I.set(_.index,_),_=_.sibling;return I}function i(I,_){return I=Mr(I,_),I.index=0,I.sibling=null,I}function o(I,_,R){return I.index=R,t?(R=I.alternate,R!==null?(R=R.index,R<_?(I.flags|=2,_):R):(I.flags|=2,_)):(I.flags|=1048576,_)}function s(I){return t&&I.alternate===null&&(I.flags|=2),I}function l(I,_,R,M){return _===null||_.tag!==6?(_=xc(R,I.mode,M),_.return=I,_):(_=i(_,R),_.return=I,_)}function u(I,_,R,M){var z=R.type;return z===Xi?f(I,_,R.props.children,M,R.key):_!==null&&(_.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===Er&&tm(z)===_.type)?(M=i(_,R.props),M.ref=us(I,_,R),M.return=I,M):(M=El(R.type,R.key,R.props,null,I.mode,M),M.ref=us(I,_,R),M.return=I,M)}function h(I,_,R,M){return _===null||_.tag!==4||_.stateNode.containerInfo!==R.containerInfo||_.stateNode.implementation!==R.implementation?(_=Nc(R,I.mode,M),_.return=I,_):(_=i(_,R.children||[]),_.return=I,_)}function f(I,_,R,M,z){return _===null||_.tag!==7?(_=gi(R,I.mode,M,z),_.return=I,_):(_=i(_,R),_.return=I,_)}function p(I,_,R){if(typeof _=="string"&&_!==""||typeof _=="number")return _=xc(""+_,I.mode,R),_.return=I,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ja:return R=El(_.type,_.key,_.props,null,I.mode,R),R.ref=us(I,null,_),R.return=I,R;case Qi:return _=Nc(_,I.mode,R),_.return=I,_;case Er:var M=_._init;return p(I,M(_._payload),R)}if(gs(_)||is(_))return _=gi(_,I.mode,R,null),_.return=I,_;Ya(I,_)}return null}function y(I,_,R,M){var z=_!==null?_.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return z!==null?null:l(I,_,""+R,M);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case ja:return R.key===z?u(I,_,R,M):null;case Qi:return R.key===z?h(I,_,R,M):null;case Er:return z=R._init,y(I,_,z(R._payload),M)}if(gs(R)||is(R))return z!==null?null:f(I,_,R,M,null);Ya(I,R)}return null}function T(I,_,R,M,z){if(typeof M=="string"&&M!==""||typeof M=="number")return I=I.get(R)||null,l(_,I,""+M,z);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case ja:return I=I.get(M.key===null?R:M.key)||null,u(_,I,M,z);case Qi:return I=I.get(M.key===null?R:M.key)||null,h(_,I,M,z);case Er:var H=M._init;return T(I,_,R,H(M._payload),z)}if(gs(M)||is(M))return I=I.get(R)||null,f(_,I,M,z,null);Ya(_,M)}return null}function P(I,_,R,M){for(var z=null,H=null,m=_,g=_=0,E=null;m!==null&&g<R.length;g++){m.index>g?(E=m,m=null):E=m.sibling;var w=y(I,m,R[g],M);if(w===null){m===null&&(m=E);break}t&&m&&w.alternate===null&&e(I,m),_=o(w,_,g),H===null?z=w:H.sibling=w,H=w,m=E}if(g===R.length)return n(I,m),Ue&&oi(I,g),z;if(m===null){for(;g<R.length;g++)m=p(I,R[g],M),m!==null&&(_=o(m,_,g),H===null?z=m:H.sibling=m,H=m);return Ue&&oi(I,g),z}for(m=r(I,m);g<R.length;g++)E=T(m,I,g,R[g],M),E!==null&&(t&&E.alternate!==null&&m.delete(E.key===null?g:E.key),_=o(E,_,g),H===null?z=E:H.sibling=E,H=E);return t&&m.forEach(function(A){return e(I,A)}),Ue&&oi(I,g),z}function D(I,_,R,M){var z=is(R);if(typeof z!="function")throw Error($(150));if(R=z.call(R),R==null)throw Error($(151));for(var H=z=null,m=_,g=_=0,E=null,w=R.next();m!==null&&!w.done;g++,w=R.next()){m.index>g?(E=m,m=null):E=m.sibling;var A=y(I,m,w.value,M);if(A===null){m===null&&(m=E);break}t&&m&&A.alternate===null&&e(I,m),_=o(A,_,g),H===null?z=A:H.sibling=A,H=A,m=E}if(w.done)return n(I,m),Ue&&oi(I,g),z;if(m===null){for(;!w.done;g++,w=R.next())w=p(I,w.value,M),w!==null&&(_=o(w,_,g),H===null?z=w:H.sibling=w,H=w);return Ue&&oi(I,g),z}for(m=r(I,m);!w.done;g++,w=R.next())w=T(m,I,g,w.value,M),w!==null&&(t&&w.alternate!==null&&m.delete(w.key===null?g:w.key),_=o(w,_,g),H===null?z=w:H.sibling=w,H=w);return t&&m.forEach(function(k){return e(I,k)}),Ue&&oi(I,g),z}function V(I,_,R,M){if(typeof R=="object"&&R!==null&&R.type===Xi&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case ja:e:{for(var z=R.key,H=_;H!==null;){if(H.key===z){if(z=R.type,z===Xi){if(H.tag===7){n(I,H.sibling),_=i(H,R.props.children),_.return=I,I=_;break e}}else if(H.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===Er&&tm(z)===H.type){n(I,H.sibling),_=i(H,R.props),_.ref=us(I,H,R),_.return=I,I=_;break e}n(I,H);break}else e(I,H);H=H.sibling}R.type===Xi?(_=gi(R.props.children,I.mode,M,R.key),_.return=I,I=_):(M=El(R.type,R.key,R.props,null,I.mode,M),M.ref=us(I,_,R),M.return=I,I=M)}return s(I);case Qi:e:{for(H=R.key;_!==null;){if(_.key===H)if(_.tag===4&&_.stateNode.containerInfo===R.containerInfo&&_.stateNode.implementation===R.implementation){n(I,_.sibling),_=i(_,R.children||[]),_.return=I,I=_;break e}else{n(I,_);break}else e(I,_);_=_.sibling}_=Nc(R,I.mode,M),_.return=I,I=_}return s(I);case Er:return H=R._init,V(I,_,H(R._payload),M)}if(gs(R))return P(I,_,R,M);if(is(R))return D(I,_,R,M);Ya(I,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,_!==null&&_.tag===6?(n(I,_.sibling),_=i(_,R),_.return=I,I=_):(n(I,_),_=xc(R,I.mode,M),_.return=I,I=_),s(I)):n(I,_)}return V}var _o=hv(!0),dv=hv(!1),zl=Qr(null),Bl=null,io=null,Ld=null;function Md(){Ld=io=Bl=null}function Od(t){var e=zl.current;Oe(zl),t._currentValue=e}function Sh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ho(t,e){Bl=t,Ld=io=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Bt=!0),t.firstContext=null)}function pn(t){var e=t._currentValue;if(Ld!==t)if(t={context:t,memoizedValue:e,next:null},io===null){if(Bl===null)throw Error($(308));io=t,Bl.dependencies={lanes:0,firstContext:t}}else io=io.next=t;return e}var hi=null;function Fd(t){hi===null?hi=[t]:hi.push(t)}function fv(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Fd(e)):(n.next=i.next,i.next=n),e.interleaved=n,sr(t,r)}function sr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var wr=!1;function bd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function tr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Nr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ee&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,sr(t,n)}return i=r.interleaved,i===null?(e.next=e,Fd(r)):(e.next=i.next,i.next=e),r.interleaved=e,sr(t,n)}function pl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Sd(t,n)}}function nm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function $l(t,e,n,r){var i=t.updateQueue;wr=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,h=u.next;u.next=null,s===null?o=h:s.next=h,s=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==s&&(l===null?f.firstBaseUpdate=h:l.next=h,f.lastBaseUpdate=u))}if(o!==null){var p=i.baseState;s=0,f=h=u=null,l=o;do{var y=l.lane,T=l.eventTime;if((r&y)===y){f!==null&&(f=f.next={eventTime:T,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var P=t,D=l;switch(y=e,T=n,D.tag){case 1:if(P=D.payload,typeof P=="function"){p=P.call(T,p,y);break e}p=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=D.payload,y=typeof P=="function"?P.call(T,p,y):P,y==null)break e;p=Be({},p,y);break e;case 2:wr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,y=i.effects,y===null?i.effects=[l]:y.push(l))}else T={eventTime:T,lane:y,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(h=f=T,u=p):f=f.next=T,s|=y;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;y=l,l=y.next,y.next=null,i.lastBaseUpdate=y,i.shared.pending=null}}while(!0);if(f===null&&(u=p),i.baseState=u,i.firstBaseUpdate=h,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Ei|=s,t.lanes=s,t.memoizedState=p}}function rm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error($(191,i));i.call(r)}}}var ma={},zn=Qr(ma),Gs=Qr(ma),Ks=Qr(ma);function di(t){if(t===ma)throw Error($(174));return t}function Ud(t,e){switch(xe(Ks,e),xe(Gs,t),xe(zn,ma),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:rh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=rh(e,t)}Oe(zn),xe(zn,e)}function Eo(){Oe(zn),Oe(Gs),Oe(Ks)}function mv(t){di(Ks.current);var e=di(zn.current),n=rh(e,t.type);e!==n&&(xe(Gs,t),xe(zn,n))}function jd(t){Gs.current===t&&(Oe(zn),Oe(Gs))}var je=Qr(0);function Hl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Rc=[];function zd(){for(var t=0;t<Rc.length;t++)Rc[t]._workInProgressVersionPrimary=null;Rc.length=0}var ml=hr.ReactCurrentDispatcher,Ac=hr.ReactCurrentBatchConfig,_i=0,ze=null,it=null,ut=null,ql=!1,Ps=!1,Qs=0,w1=0;function Rt(){throw Error($(321))}function Bd(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!kn(t[n],e[n]))return!1;return!0}function $d(t,e,n,r,i,o){if(_i=o,ze=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ml.current=t===null||t.memoizedState===null?R1:A1,t=n(r,i),Ps){o=0;do{if(Ps=!1,Qs=0,25<=o)throw Error($(301));o+=1,ut=it=null,e.updateQueue=null,ml.current=C1,t=n(r,i)}while(Ps)}if(ml.current=Wl,e=it!==null&&it.next!==null,_i=0,ut=it=ze=null,ql=!1,e)throw Error($(300));return t}function Hd(){var t=Qs!==0;return Qs=0,t}function Fn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ut===null?ze.memoizedState=ut=t:ut=ut.next=t,ut}function mn(){if(it===null){var t=ze.alternate;t=t!==null?t.memoizedState:null}else t=it.next;var e=ut===null?ze.memoizedState:ut.next;if(e!==null)ut=e,it=t;else{if(t===null)throw Error($(310));it=t,t={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},ut===null?ze.memoizedState=ut=t:ut=ut.next=t}return ut}function Xs(t,e){return typeof e=="function"?e(t):e}function Cc(t){var e=mn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=it,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var l=s=null,u=null,h=o;do{var f=h.lane;if((_i&f)===f)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var p={lane:f,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=p,s=r):u=u.next=p,ze.lanes|=f,Ei|=f}h=h.next}while(h!==null&&h!==o);u===null?s=r:u.next=l,kn(r,e.memoizedState)||(Bt=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,ze.lanes|=o,Ei|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Pc(t){var e=mn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);kn(o,e.memoizedState)||(Bt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function gv(){}function yv(t,e){var n=ze,r=mn(),i=e(),o=!kn(r.memoizedState,i);if(o&&(r.memoizedState=i,Bt=!0),r=r.queue,qd(Ev.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||ut!==null&&ut.memoizedState.tag&1){if(n.flags|=2048,Ys(9,_v.bind(null,n,r,i,e),void 0,null),ct===null)throw Error($(349));_i&30||vv(n,e,i)}return i}function vv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ze.updateQueue,e===null?(e={lastEffect:null,stores:null},ze.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function _v(t,e,n,r){e.value=n,e.getSnapshot=r,wv(e)&&Tv(t)}function Ev(t,e,n){return n(function(){wv(e)&&Tv(t)})}function wv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!kn(t,n)}catch{return!0}}function Tv(t){var e=sr(t,1);e!==null&&Pn(e,t,1,-1)}function im(t){var e=Fn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xs,lastRenderedState:t},e.queue=t,t=t.dispatch=I1.bind(null,ze,t),[e.memoizedState,t]}function Ys(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ze.updateQueue,e===null?(e={lastEffect:null,stores:null},ze.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Sv(){return mn().memoizedState}function gl(t,e,n,r){var i=Fn();ze.flags|=t,i.memoizedState=Ys(1|e,n,void 0,r===void 0?null:r)}function Tu(t,e,n,r){var i=mn();r=r===void 0?null:r;var o=void 0;if(it!==null){var s=it.memoizedState;if(o=s.destroy,r!==null&&Bd(r,s.deps)){i.memoizedState=Ys(e,n,o,r);return}}ze.flags|=t,i.memoizedState=Ys(1|e,n,o,r)}function om(t,e){return gl(8390656,8,t,e)}function qd(t,e){return Tu(2048,8,t,e)}function Iv(t,e){return Tu(4,2,t,e)}function Rv(t,e){return Tu(4,4,t,e)}function Av(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Cv(t,e,n){return n=n!=null?n.concat([t]):null,Tu(4,4,Av.bind(null,e,t),n)}function Wd(){}function Pv(t,e){var n=mn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Bd(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function kv(t,e){var n=mn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Bd(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Dv(t,e,n){return _i&21?(kn(n,e)||(n=My(),ze.lanes|=n,Ei|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Bt=!0),t.memoizedState=n)}function T1(t,e){var n=Ae;Ae=n!==0&&4>n?n:4,t(!0);var r=Ac.transition;Ac.transition={};try{t(!1),e()}finally{Ae=n,Ac.transition=r}}function xv(){return mn().memoizedState}function S1(t,e,n){var r=Lr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Nv(t))Vv(e,n);else if(n=fv(t,e,n,r),n!==null){var i=Ot();Pn(n,t,r,i),Lv(n,e,r)}}function I1(t,e,n){var r=Lr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Nv(t))Vv(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,l=o(s,n);if(i.hasEagerState=!0,i.eagerState=l,kn(l,s)){var u=e.interleaved;u===null?(i.next=i,Fd(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=fv(t,e,i,r),n!==null&&(i=Ot(),Pn(n,t,r,i),Lv(n,e,r))}}function Nv(t){var e=t.alternate;return t===ze||e!==null&&e===ze}function Vv(t,e){Ps=ql=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Lv(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Sd(t,n)}}var Wl={readContext:pn,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useInsertionEffect:Rt,useLayoutEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useMutableSource:Rt,useSyncExternalStore:Rt,useId:Rt,unstable_isNewReconciler:!1},R1={readContext:pn,useCallback:function(t,e){return Fn().memoizedState=[t,e===void 0?null:e],t},useContext:pn,useEffect:om,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,gl(4194308,4,Av.bind(null,e,t),n)},useLayoutEffect:function(t,e){return gl(4194308,4,t,e)},useInsertionEffect:function(t,e){return gl(4,2,t,e)},useMemo:function(t,e){var n=Fn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Fn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=S1.bind(null,ze,t),[r.memoizedState,t]},useRef:function(t){var e=Fn();return t={current:t},e.memoizedState=t},useState:im,useDebugValue:Wd,useDeferredValue:function(t){return Fn().memoizedState=t},useTransition:function(){var t=im(!1),e=t[0];return t=T1.bind(null,t[1]),Fn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ze,i=Fn();if(Ue){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),ct===null)throw Error($(349));_i&30||vv(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,om(Ev.bind(null,r,o,t),[t]),r.flags|=2048,Ys(9,_v.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=Fn(),e=ct.identifierPrefix;if(Ue){var n=er,r=Zn;n=(r&~(1<<32-Cn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Qs++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=w1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},A1={readContext:pn,useCallback:Pv,useContext:pn,useEffect:qd,useImperativeHandle:Cv,useInsertionEffect:Iv,useLayoutEffect:Rv,useMemo:kv,useReducer:Cc,useRef:Sv,useState:function(){return Cc(Xs)},useDebugValue:Wd,useDeferredValue:function(t){var e=mn();return Dv(e,it.memoizedState,t)},useTransition:function(){var t=Cc(Xs)[0],e=mn().memoizedState;return[t,e]},useMutableSource:gv,useSyncExternalStore:yv,useId:xv,unstable_isNewReconciler:!1},C1={readContext:pn,useCallback:Pv,useContext:pn,useEffect:qd,useImperativeHandle:Cv,useInsertionEffect:Iv,useLayoutEffect:Rv,useMemo:kv,useReducer:Pc,useRef:Sv,useState:function(){return Pc(Xs)},useDebugValue:Wd,useDeferredValue:function(t){var e=mn();return it===null?e.memoizedState=t:Dv(e,it.memoizedState,t)},useTransition:function(){var t=Pc(Xs)[0],e=mn().memoizedState;return[t,e]},useMutableSource:gv,useSyncExternalStore:yv,useId:xv,unstable_isNewReconciler:!1};function Tn(t,e){if(t&&t.defaultProps){e=Be({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ih(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Be({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Su={isMounted:function(t){return(t=t._reactInternals)?Ri(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ot(),i=Lr(t),o=tr(r,i);o.payload=e,n!=null&&(o.callback=n),e=Nr(t,o,i),e!==null&&(Pn(e,t,i,r),pl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ot(),i=Lr(t),o=tr(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Nr(t,o,i),e!==null&&(Pn(e,t,i,r),pl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ot(),r=Lr(t),i=tr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Nr(t,i,r),e!==null&&(Pn(e,t,r,n),pl(e,t,r))}};function sm(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!$s(n,r)||!$s(i,o):!0}function Mv(t,e,n){var r=!1,i=Br,o=e.contextType;return typeof o=="object"&&o!==null?o=pn(o):(i=Ht(e)?yi:Nt.current,r=e.contextTypes,o=(r=r!=null)?yo(t,i):Br),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Su,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function am(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Su.enqueueReplaceState(e,e.state,null)}function Rh(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},bd(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=pn(o):(o=Ht(e)?yi:Nt.current,i.context=yo(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Ih(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Su.enqueueReplaceState(i,i.state,null),$l(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function wo(t,e){try{var n="",r=e;do n+=tw(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function kc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ah(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var P1=typeof WeakMap=="function"?WeakMap:Map;function Ov(t,e,n){n=tr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Kl||(Kl=!0,Oh=r),Ah(t,e)},n}function Fv(t,e,n){n=tr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Ah(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Ah(t,e),typeof r!="function"&&(Vr===null?Vr=new Set([this]):Vr.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function lm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new P1;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=B1.bind(null,t,e,n),e.then(t,t))}function um(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function cm(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=tr(-1,1),e.tag=2,Nr(n,e,1))),n.lanes|=1),t)}var k1=hr.ReactCurrentOwner,Bt=!1;function Mt(t,e,n,r){e.child=t===null?dv(e,null,n,r):_o(e,t.child,n,r)}function hm(t,e,n,r,i){n=n.render;var o=e.ref;return ho(e,i),r=$d(t,e,n,r,o,i),n=Hd(),t!==null&&!Bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ar(t,e,i)):(Ue&&n&&xd(e),e.flags|=1,Mt(t,e,r,i),e.child)}function dm(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!ef(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,bv(t,e,o,r,i)):(t=El(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:$s,n(s,r)&&t.ref===e.ref)return ar(t,e,i)}return e.flags|=1,t=Mr(o,r),t.ref=e.ref,t.return=e,e.child=t}function bv(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if($s(o,r)&&t.ref===e.ref)if(Bt=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Bt=!0);else return e.lanes=t.lanes,ar(t,e,i)}return Ch(t,e,n,r,i)}function Uv(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},xe(so,Qt),Qt|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,xe(so,Qt),Qt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,xe(so,Qt),Qt|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,xe(so,Qt),Qt|=r;return Mt(t,e,i,n),e.child}function jv(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ch(t,e,n,r,i){var o=Ht(n)?yi:Nt.current;return o=yo(e,o),ho(e,i),n=$d(t,e,n,r,o,i),r=Hd(),t!==null&&!Bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ar(t,e,i)):(Ue&&r&&xd(e),e.flags|=1,Mt(t,e,n,i),e.child)}function fm(t,e,n,r,i){if(Ht(n)){var o=!0;bl(e)}else o=!1;if(ho(e,i),e.stateNode===null)yl(t,e),Mv(e,n,r),Rh(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,l=e.memoizedProps;s.props=l;var u=s.context,h=n.contextType;typeof h=="object"&&h!==null?h=pn(h):(h=Ht(n)?yi:Nt.current,h=yo(e,h));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function";p||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==r||u!==h)&&am(e,s,r,h),wr=!1;var y=e.memoizedState;s.state=y,$l(e,r,s,i),u=e.memoizedState,l!==r||y!==u||$t.current||wr?(typeof f=="function"&&(Ih(e,n,f,r),u=e.memoizedState),(l=wr||sm(e,n,l,r,y,u,h))?(p||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),s.props=r,s.state=u,s.context=h,r=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,pv(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:Tn(e.type,l),s.props=h,p=e.pendingProps,y=s.context,u=n.contextType,typeof u=="object"&&u!==null?u=pn(u):(u=Ht(n)?yi:Nt.current,u=yo(e,u));var T=n.getDerivedStateFromProps;(f=typeof T=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==p||y!==u)&&am(e,s,r,u),wr=!1,y=e.memoizedState,s.state=y,$l(e,r,s,i);var P=e.memoizedState;l!==p||y!==P||$t.current||wr?(typeof T=="function"&&(Ih(e,n,T,r),P=e.memoizedState),(h=wr||sm(e,n,h,r,y,P,u)||!1)?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,P,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,P,u)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=P),s.props=r,s.state=P,s.context=u,r=h):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),r=!1)}return Ph(t,e,n,r,o,i)}function Ph(t,e,n,r,i,o){jv(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&Jp(e,n,!1),ar(t,e,o);r=e.stateNode,k1.current=e;var l=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=_o(e,t.child,null,o),e.child=_o(e,null,l,o)):Mt(t,e,l,o),e.memoizedState=r.state,i&&Jp(e,n,!0),e.child}function zv(t){var e=t.stateNode;e.pendingContext?Yp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Yp(t,e.context,!1),Ud(t,e.containerInfo)}function pm(t,e,n,r,i){return vo(),Vd(i),e.flags|=256,Mt(t,e,n,r),e.child}var kh={dehydrated:null,treeContext:null,retryLane:0};function Dh(t){return{baseLanes:t,cachePool:null,transitions:null}}function Bv(t,e,n){var r=e.pendingProps,i=je.current,o=!1,s=(e.flags&128)!==0,l;if((l=s)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),xe(je,i&1),t===null)return Th(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Au(s,r,0,null),t=gi(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Dh(n),e.memoizedState=kh,t):Gd(e,s));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return D1(t,e,s,r,l,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Mr(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?o=Mr(l,o):(o=gi(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?Dh(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=kh,r}return o=t.child,t=o.sibling,r=Mr(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Gd(t,e){return e=Au({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ja(t,e,n,r){return r!==null&&Vd(r),_o(e,t.child,null,n),t=Gd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function D1(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=kc(Error($(422))),Ja(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Au({mode:"visible",children:r.children},i,0,null),o=gi(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&_o(e,t.child,null,s),e.child.memoizedState=Dh(s),e.memoizedState=kh,o);if(!(e.mode&1))return Ja(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error($(419)),r=kc(o,r,void 0),Ja(t,e,s,r)}if(l=(s&t.childLanes)!==0,Bt||l){if(r=ct,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,sr(t,i),Pn(r,t,i,-1))}return Zd(),r=kc(Error($(421))),Ja(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=$1.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Yt=xr(i.nextSibling),Jt=e,Ue=!0,Rn=null,t!==null&&(ln[un++]=Zn,ln[un++]=er,ln[un++]=vi,Zn=t.id,er=t.overflow,vi=e),e=Gd(e,r.children),e.flags|=4096,e)}function mm(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Sh(t.return,e,n)}function Dc(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function $v(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Mt(t,e,r.children,n),r=je.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&mm(t,n,e);else if(t.tag===19)mm(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(xe(je,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Hl(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Dc(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Hl(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Dc(e,!0,n,null,o);break;case"together":Dc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function yl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ar(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ei|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=Mr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Mr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function x1(t,e,n){switch(e.tag){case 3:zv(e),vo();break;case 5:mv(e);break;case 1:Ht(e.type)&&bl(e);break;case 4:Ud(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;xe(zl,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(xe(je,je.current&1),e.flags|=128,null):n&e.child.childLanes?Bv(t,e,n):(xe(je,je.current&1),t=ar(t,e,n),t!==null?t.sibling:null);xe(je,je.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return $v(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),xe(je,je.current),r)break;return null;case 22:case 23:return e.lanes=0,Uv(t,e,n)}return ar(t,e,n)}var Hv,xh,qv,Wv;Hv=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};xh=function(){};qv=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,di(zn.current);var o=null;switch(n){case"input":i=Zc(t,i),r=Zc(t,r),o=[];break;case"select":i=Be({},i,{value:void 0}),r=Be({},r,{value:void 0}),o=[];break;case"textarea":i=nh(t,i),r=nh(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ol)}ih(n,r);var s;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var l=i[h];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Os.hasOwnProperty(h)?o||(o=[]):(o=o||[]).push(h,null));for(h in r){var u=r[h];if(l=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(o||(o=[]),o.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(o=o||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Os.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&Le("scroll",t),o||l===u||(o=[])):(o=o||[]).push(h,u))}n&&(o=o||[]).push("style",n);var h=o;(e.updateQueue=h)&&(e.flags|=4)}};Wv=function(t,e,n,r){n!==r&&(e.flags|=4)};function cs(t,e){if(!Ue)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function At(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function N1(t,e,n){var r=e.pendingProps;switch(Nd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(e),null;case 1:return Ht(e.type)&&Fl(),At(e),null;case 3:return r=e.stateNode,Eo(),Oe($t),Oe(Nt),zd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Xa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Rn!==null&&(Uh(Rn),Rn=null))),xh(t,e),At(e),null;case 5:jd(e);var i=di(Ks.current);if(n=e.type,t!==null&&e.stateNode!=null)qv(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return At(e),null}if(t=di(zn.current),Xa(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[Un]=e,r[Ws]=o,t=(e.mode&1)!==0,n){case"dialog":Le("cancel",r),Le("close",r);break;case"iframe":case"object":case"embed":Le("load",r);break;case"video":case"audio":for(i=0;i<vs.length;i++)Le(vs[i],r);break;case"source":Le("error",r);break;case"img":case"image":case"link":Le("error",r),Le("load",r);break;case"details":Le("toggle",r);break;case"input":Ip(r,o),Le("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Le("invalid",r);break;case"textarea":Ap(r,o),Le("invalid",r)}ih(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&Qa(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Qa(r.textContent,l,t),i=["children",""+l]):Os.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&Le("scroll",r)}switch(n){case"input":za(r),Rp(r,o,!0);break;case"textarea":za(r),Cp(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Ol)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ey(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[Un]=e,t[Ws]=r,Hv(t,e,!1,!1),e.stateNode=t;e:{switch(s=oh(n,r),n){case"dialog":Le("cancel",t),Le("close",t),i=r;break;case"iframe":case"object":case"embed":Le("load",t),i=r;break;case"video":case"audio":for(i=0;i<vs.length;i++)Le(vs[i],t);i=r;break;case"source":Le("error",t),i=r;break;case"img":case"image":case"link":Le("error",t),Le("load",t),i=r;break;case"details":Le("toggle",t),i=r;break;case"input":Ip(t,r),i=Zc(t,r),Le("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Be({},r,{value:void 0}),Le("invalid",t);break;case"textarea":Ap(t,r),i=nh(t,r),Le("invalid",t);break;default:i=r}ih(n,i),l=i;for(o in l)if(l.hasOwnProperty(o)){var u=l[o];o==="style"?Sy(t,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&wy(t,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Fs(t,u):typeof u=="number"&&Fs(t,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Os.hasOwnProperty(o)?u!=null&&o==="onScroll"&&Le("scroll",t):u!=null&&yd(t,o,u,s))}switch(n){case"input":za(t),Rp(t,r,!1);break;case"textarea":za(t),Cp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+zr(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?ao(t,!!r.multiple,o,!1):r.defaultValue!=null&&ao(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ol)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return At(e),null;case 6:if(t&&e.stateNode!=null)Wv(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=di(Ks.current),di(zn.current),Xa(e)){if(r=e.stateNode,n=e.memoizedProps,r[Un]=e,(o=r.nodeValue!==n)&&(t=Jt,t!==null))switch(t.tag){case 3:Qa(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Qa(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Un]=e,e.stateNode=r}return At(e),null;case 13:if(Oe(je),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ue&&Yt!==null&&e.mode&1&&!(e.flags&128))cv(),vo(),e.flags|=98560,o=!1;else if(o=Xa(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error($(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error($(317));o[Un]=e}else vo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;At(e),o=!1}else Rn!==null&&(Uh(Rn),Rn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||je.current&1?ot===0&&(ot=3):Zd())),e.updateQueue!==null&&(e.flags|=4),At(e),null);case 4:return Eo(),xh(t,e),t===null&&Hs(e.stateNode.containerInfo),At(e),null;case 10:return Od(e.type._context),At(e),null;case 17:return Ht(e.type)&&Fl(),At(e),null;case 19:if(Oe(je),o=e.memoizedState,o===null)return At(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)cs(o,!1);else{if(ot!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Hl(t),s!==null){for(e.flags|=128,cs(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return xe(je,je.current&1|2),e.child}t=t.sibling}o.tail!==null&&Ke()>To&&(e.flags|=128,r=!0,cs(o,!1),e.lanes=4194304)}else{if(!r)if(t=Hl(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),cs(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Ue)return At(e),null}else 2*Ke()-o.renderingStartTime>To&&n!==1073741824&&(e.flags|=128,r=!0,cs(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Ke(),e.sibling=null,n=je.current,xe(je,r?n&1|2:n&1),e):(At(e),null);case 22:case 23:return Jd(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Qt&1073741824&&(At(e),e.subtreeFlags&6&&(e.flags|=8192)):At(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function V1(t,e){switch(Nd(e),e.tag){case 1:return Ht(e.type)&&Fl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Eo(),Oe($t),Oe(Nt),zd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return jd(e),null;case 13:if(Oe(je),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));vo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Oe(je),null;case 4:return Eo(),null;case 10:return Od(e.type._context),null;case 22:case 23:return Jd(),null;case 24:return null;default:return null}}var Za=!1,kt=!1,L1=typeof WeakSet=="function"?WeakSet:Set,Q=null;function oo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){qe(t,e,r)}else n.current=null}function Nh(t,e,n){try{n()}catch(r){qe(t,e,r)}}var gm=!1;function M1(t,e){if(mh=Vl,t=Yy(),Dd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,l=-1,u=-1,h=0,f=0,p=t,y=null;t:for(;;){for(var T;p!==n||i!==0&&p.nodeType!==3||(l=s+i),p!==o||r!==0&&p.nodeType!==3||(u=s+r),p.nodeType===3&&(s+=p.nodeValue.length),(T=p.firstChild)!==null;)y=p,p=T;for(;;){if(p===t)break t;if(y===n&&++h===i&&(l=s),y===o&&++f===r&&(u=s),(T=p.nextSibling)!==null)break;p=y,y=p.parentNode}p=T}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(gh={focusedElem:t,selectionRange:n},Vl=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var P=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var D=P.memoizedProps,V=P.memoizedState,I=e.stateNode,_=I.getSnapshotBeforeUpdate(e.elementType===e.type?D:Tn(e.type,D),V);I.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var R=e.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(M){qe(e,e.return,M)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return P=gm,gm=!1,P}function ks(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&Nh(e,n,o)}i=i.next}while(i!==r)}}function Iu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Vh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Gv(t){var e=t.alternate;e!==null&&(t.alternate=null,Gv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Un],delete e[Ws],delete e[_h],delete e[y1],delete e[v1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Kv(t){return t.tag===5||t.tag===3||t.tag===4}function ym(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Kv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Lh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ol));else if(r!==4&&(t=t.child,t!==null))for(Lh(t,e,n),t=t.sibling;t!==null;)Lh(t,e,n),t=t.sibling}function Mh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Mh(t,e,n),t=t.sibling;t!==null;)Mh(t,e,n),t=t.sibling}var yt=null,Sn=!1;function vr(t,e,n){for(n=n.child;n!==null;)Qv(t,e,n),n=n.sibling}function Qv(t,e,n){if(jn&&typeof jn.onCommitFiberUnmount=="function")try{jn.onCommitFiberUnmount(gu,n)}catch{}switch(n.tag){case 5:kt||oo(n,e);case 6:var r=yt,i=Sn;yt=null,vr(t,e,n),yt=r,Sn=i,yt!==null&&(Sn?(t=yt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):yt.removeChild(n.stateNode));break;case 18:yt!==null&&(Sn?(t=yt,n=n.stateNode,t.nodeType===8?Sc(t.parentNode,n):t.nodeType===1&&Sc(t,n),zs(t)):Sc(yt,n.stateNode));break;case 4:r=yt,i=Sn,yt=n.stateNode.containerInfo,Sn=!0,vr(t,e,n),yt=r,Sn=i;break;case 0:case 11:case 14:case 15:if(!kt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&Nh(n,e,s),i=i.next}while(i!==r)}vr(t,e,n);break;case 1:if(!kt&&(oo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){qe(n,e,l)}vr(t,e,n);break;case 21:vr(t,e,n);break;case 22:n.mode&1?(kt=(r=kt)||n.memoizedState!==null,vr(t,e,n),kt=r):vr(t,e,n);break;default:vr(t,e,n)}}function vm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new L1),e.forEach(function(r){var i=H1.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function En(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,l=s;e:for(;l!==null;){switch(l.tag){case 5:yt=l.stateNode,Sn=!1;break e;case 3:yt=l.stateNode.containerInfo,Sn=!0;break e;case 4:yt=l.stateNode.containerInfo,Sn=!0;break e}l=l.return}if(yt===null)throw Error($(160));Qv(o,s,i),yt=null,Sn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(h){qe(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Xv(e,t),e=e.sibling}function Xv(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(En(e,t),On(t),r&4){try{ks(3,t,t.return),Iu(3,t)}catch(D){qe(t,t.return,D)}try{ks(5,t,t.return)}catch(D){qe(t,t.return,D)}}break;case 1:En(e,t),On(t),r&512&&n!==null&&oo(n,n.return);break;case 5:if(En(e,t),On(t),r&512&&n!==null&&oo(n,n.return),t.flags&32){var i=t.stateNode;try{Fs(i,"")}catch(D){qe(t,t.return,D)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&vy(i,o),oh(l,s);var h=oh(l,o);for(s=0;s<u.length;s+=2){var f=u[s],p=u[s+1];f==="style"?Sy(i,p):f==="dangerouslySetInnerHTML"?wy(i,p):f==="children"?Fs(i,p):yd(i,f,p,h)}switch(l){case"input":eh(i,o);break;case"textarea":_y(i,o);break;case"select":var y=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var T=o.value;T!=null?ao(i,!!o.multiple,T,!1):y!==!!o.multiple&&(o.defaultValue!=null?ao(i,!!o.multiple,o.defaultValue,!0):ao(i,!!o.multiple,o.multiple?[]:"",!1))}i[Ws]=o}catch(D){qe(t,t.return,D)}}break;case 6:if(En(e,t),On(t),r&4){if(t.stateNode===null)throw Error($(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(D){qe(t,t.return,D)}}break;case 3:if(En(e,t),On(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{zs(e.containerInfo)}catch(D){qe(t,t.return,D)}break;case 4:En(e,t),On(t);break;case 13:En(e,t),On(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Xd=Ke())),r&4&&vm(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(kt=(h=kt)||f,En(e,t),kt=h):En(e,t),On(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!f&&t.mode&1)for(Q=t,f=t.child;f!==null;){for(p=Q=f;Q!==null;){switch(y=Q,T=y.child,y.tag){case 0:case 11:case 14:case 15:ks(4,y,y.return);break;case 1:oo(y,y.return);var P=y.stateNode;if(typeof P.componentWillUnmount=="function"){r=y,n=y.return;try{e=r,P.props=e.memoizedProps,P.state=e.memoizedState,P.componentWillUnmount()}catch(D){qe(r,n,D)}}break;case 5:oo(y,y.return);break;case 22:if(y.memoizedState!==null){Em(p);continue}}T!==null?(T.return=y,Q=T):Em(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{i=p.stateNode,h?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=p.stateNode,u=p.memoizedProps.style,s=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Ty("display",s))}catch(D){qe(t,t.return,D)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=h?"":p.memoizedProps}catch(D){qe(t,t.return,D)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:En(e,t),On(t),r&4&&vm(t);break;case 21:break;default:En(e,t),On(t)}}function On(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Kv(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Fs(i,""),r.flags&=-33);var o=ym(t);Mh(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,l=ym(t);Lh(t,l,s);break;default:throw Error($(161))}}catch(u){qe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function O1(t,e,n){Q=t,Yv(t)}function Yv(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var i=Q,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Za;if(!s){var l=i.alternate,u=l!==null&&l.memoizedState!==null||kt;l=Za;var h=kt;if(Za=s,(kt=u)&&!h)for(Q=i;Q!==null;)s=Q,u=s.child,s.tag===22&&s.memoizedState!==null?wm(i):u!==null?(u.return=s,Q=u):wm(i);for(;o!==null;)Q=o,Yv(o),o=o.sibling;Q=i,Za=l,kt=h}_m(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,Q=o):_m(t)}}function _m(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:kt||Iu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!kt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Tn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&rm(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}rm(e,s,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var f=h.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&zs(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}kt||e.flags&512&&Vh(e)}catch(y){qe(e,e.return,y)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function Em(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function wm(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Iu(4,e)}catch(u){qe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){qe(e,i,u)}}var o=e.return;try{Vh(e)}catch(u){qe(e,o,u)}break;case 5:var s=e.return;try{Vh(e)}catch(u){qe(e,s,u)}}}catch(u){qe(e,e.return,u)}if(e===t){Q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Q=l;break}Q=e.return}}var F1=Math.ceil,Gl=hr.ReactCurrentDispatcher,Kd=hr.ReactCurrentOwner,fn=hr.ReactCurrentBatchConfig,Ee=0,ct=null,Je=null,Et=0,Qt=0,so=Qr(0),ot=0,Js=null,Ei=0,Ru=0,Qd=0,Ds=null,zt=null,Xd=0,To=1/0,Yn=null,Kl=!1,Oh=null,Vr=null,el=!1,Rr=null,Ql=0,xs=0,Fh=null,vl=-1,_l=0;function Ot(){return Ee&6?Ke():vl!==-1?vl:vl=Ke()}function Lr(t){return t.mode&1?Ee&2&&Et!==0?Et&-Et:E1.transition!==null?(_l===0&&(_l=My()),_l):(t=Ae,t!==0||(t=window.event,t=t===void 0?16:By(t.type)),t):1}function Pn(t,e,n,r){if(50<xs)throw xs=0,Fh=null,Error($(185));da(t,n,r),(!(Ee&2)||t!==ct)&&(t===ct&&(!(Ee&2)&&(Ru|=n),ot===4&&Sr(t,Et)),qt(t,r),n===1&&Ee===0&&!(e.mode&1)&&(To=Ke()+500,wu&&Xr()))}function qt(t,e){var n=t.callbackNode;Ew(t,e);var r=Nl(t,t===ct?Et:0);if(r===0)n!==null&&Dp(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Dp(n),e===1)t.tag===0?_1(Tm.bind(null,t)):av(Tm.bind(null,t)),m1(function(){!(Ee&6)&&Xr()}),n=null;else{switch(Oy(r)){case 1:n=Td;break;case 4:n=Vy;break;case 16:n=xl;break;case 536870912:n=Ly;break;default:n=xl}n=o_(n,Jv.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Jv(t,e){if(vl=-1,_l=0,Ee&6)throw Error($(327));var n=t.callbackNode;if(fo()&&t.callbackNode!==n)return null;var r=Nl(t,t===ct?Et:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Xl(t,r);else{e=r;var i=Ee;Ee|=2;var o=e_();(ct!==t||Et!==e)&&(Yn=null,To=Ke()+500,mi(t,e));do try{j1();break}catch(l){Zv(t,l)}while(!0);Md(),Gl.current=o,Ee=i,Je!==null?e=0:(ct=null,Et=0,e=ot)}if(e!==0){if(e===2&&(i=ch(t),i!==0&&(r=i,e=bh(t,i))),e===1)throw n=Js,mi(t,0),Sr(t,r),qt(t,Ke()),n;if(e===6)Sr(t,r);else{if(i=t.current.alternate,!(r&30)&&!b1(i)&&(e=Xl(t,r),e===2&&(o=ch(t),o!==0&&(r=o,e=bh(t,o))),e===1))throw n=Js,mi(t,0),Sr(t,r),qt(t,Ke()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:si(t,zt,Yn);break;case 3:if(Sr(t,r),(r&130023424)===r&&(e=Xd+500-Ke(),10<e)){if(Nl(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ot(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=vh(si.bind(null,t,zt,Yn),e);break}si(t,zt,Yn);break;case 4:if(Sr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-Cn(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=Ke()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*F1(r/1960))-r,10<r){t.timeoutHandle=vh(si.bind(null,t,zt,Yn),r);break}si(t,zt,Yn);break;case 5:si(t,zt,Yn);break;default:throw Error($(329))}}}return qt(t,Ke()),t.callbackNode===n?Jv.bind(null,t):null}function bh(t,e){var n=Ds;return t.current.memoizedState.isDehydrated&&(mi(t,e).flags|=256),t=Xl(t,e),t!==2&&(e=zt,zt=n,e!==null&&Uh(e)),t}function Uh(t){zt===null?zt=t:zt.push.apply(zt,t)}function b1(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!kn(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Sr(t,e){for(e&=~Qd,e&=~Ru,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Cn(e),r=1<<n;t[n]=-1,e&=~r}}function Tm(t){if(Ee&6)throw Error($(327));fo();var e=Nl(t,0);if(!(e&1))return qt(t,Ke()),null;var n=Xl(t,e);if(t.tag!==0&&n===2){var r=ch(t);r!==0&&(e=r,n=bh(t,r))}if(n===1)throw n=Js,mi(t,0),Sr(t,e),qt(t,Ke()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,si(t,zt,Yn),qt(t,Ke()),null}function Yd(t,e){var n=Ee;Ee|=1;try{return t(e)}finally{Ee=n,Ee===0&&(To=Ke()+500,wu&&Xr())}}function wi(t){Rr!==null&&Rr.tag===0&&!(Ee&6)&&fo();var e=Ee;Ee|=1;var n=fn.transition,r=Ae;try{if(fn.transition=null,Ae=1,t)return t()}finally{Ae=r,fn.transition=n,Ee=e,!(Ee&6)&&Xr()}}function Jd(){Qt=so.current,Oe(so)}function mi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,p1(n)),Je!==null)for(n=Je.return;n!==null;){var r=n;switch(Nd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Fl();break;case 3:Eo(),Oe($t),Oe(Nt),zd();break;case 5:jd(r);break;case 4:Eo();break;case 13:Oe(je);break;case 19:Oe(je);break;case 10:Od(r.type._context);break;case 22:case 23:Jd()}n=n.return}if(ct=t,Je=t=Mr(t.current,null),Et=Qt=e,ot=0,Js=null,Qd=Ru=Ei=0,zt=Ds=null,hi!==null){for(e=0;e<hi.length;e++)if(n=hi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}hi=null}return t}function Zv(t,e){do{var n=Je;try{if(Md(),ml.current=Wl,ql){for(var r=ze.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ql=!1}if(_i=0,ut=it=ze=null,Ps=!1,Qs=0,Kd.current=null,n===null||n.return===null){ot=1,Js=e,Je=null;break}e:{var o=t,s=n.return,l=n,u=e;if(e=Et,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,f=l,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var y=f.alternate;y?(f.updateQueue=y.updateQueue,f.memoizedState=y.memoizedState,f.lanes=y.lanes):(f.updateQueue=null,f.memoizedState=null)}var T=um(s);if(T!==null){T.flags&=-257,cm(T,s,l,o,e),T.mode&1&&lm(o,h,e),e=T,u=h;var P=e.updateQueue;if(P===null){var D=new Set;D.add(u),e.updateQueue=D}else P.add(u);break e}else{if(!(e&1)){lm(o,h,e),Zd();break e}u=Error($(426))}}else if(Ue&&l.mode&1){var V=um(s);if(V!==null){!(V.flags&65536)&&(V.flags|=256),cm(V,s,l,o,e),Vd(wo(u,l));break e}}o=u=wo(u,l),ot!==4&&(ot=2),Ds===null?Ds=[o]:Ds.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var I=Ov(o,u,e);nm(o,I);break e;case 1:l=u;var _=o.type,R=o.stateNode;if(!(o.flags&128)&&(typeof _.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(Vr===null||!Vr.has(R)))){o.flags|=65536,e&=-e,o.lanes|=e;var M=Fv(o,l,e);nm(o,M);break e}}o=o.return}while(o!==null)}n_(n)}catch(z){e=z,Je===n&&n!==null&&(Je=n=n.return);continue}break}while(!0)}function e_(){var t=Gl.current;return Gl.current=Wl,t===null?Wl:t}function Zd(){(ot===0||ot===3||ot===2)&&(ot=4),ct===null||!(Ei&268435455)&&!(Ru&268435455)||Sr(ct,Et)}function Xl(t,e){var n=Ee;Ee|=2;var r=e_();(ct!==t||Et!==e)&&(Yn=null,mi(t,e));do try{U1();break}catch(i){Zv(t,i)}while(!0);if(Md(),Ee=n,Gl.current=r,Je!==null)throw Error($(261));return ct=null,Et=0,ot}function U1(){for(;Je!==null;)t_(Je)}function j1(){for(;Je!==null&&!hw();)t_(Je)}function t_(t){var e=i_(t.alternate,t,Qt);t.memoizedProps=t.pendingProps,e===null?n_(t):Je=e,Kd.current=null}function n_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=V1(n,e),n!==null){n.flags&=32767,Je=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ot=6,Je=null;return}}else if(n=N1(n,e,Qt),n!==null){Je=n;return}if(e=e.sibling,e!==null){Je=e;return}Je=e=t}while(e!==null);ot===0&&(ot=5)}function si(t,e,n){var r=Ae,i=fn.transition;try{fn.transition=null,Ae=1,z1(t,e,n,r)}finally{fn.transition=i,Ae=r}return null}function z1(t,e,n,r){do fo();while(Rr!==null);if(Ee&6)throw Error($(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(ww(t,o),t===ct&&(Je=ct=null,Et=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||el||(el=!0,o_(xl,function(){return fo(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=fn.transition,fn.transition=null;var s=Ae;Ae=1;var l=Ee;Ee|=4,Kd.current=null,M1(t,n),Xv(n,t),a1(gh),Vl=!!mh,gh=mh=null,t.current=n,O1(n),dw(),Ee=l,Ae=s,fn.transition=o}else t.current=n;if(el&&(el=!1,Rr=t,Ql=i),o=t.pendingLanes,o===0&&(Vr=null),mw(n.stateNode),qt(t,Ke()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Kl)throw Kl=!1,t=Oh,Oh=null,t;return Ql&1&&t.tag!==0&&fo(),o=t.pendingLanes,o&1?t===Fh?xs++:(xs=0,Fh=t):xs=0,Xr(),null}function fo(){if(Rr!==null){var t=Oy(Ql),e=fn.transition,n=Ae;try{if(fn.transition=null,Ae=16>t?16:t,Rr===null)var r=!1;else{if(t=Rr,Rr=null,Ql=0,Ee&6)throw Error($(331));var i=Ee;for(Ee|=4,Q=t.current;Q!==null;){var o=Q,s=o.child;if(Q.flags&16){var l=o.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(Q=h;Q!==null;){var f=Q;switch(f.tag){case 0:case 11:case 15:ks(8,f,o)}var p=f.child;if(p!==null)p.return=f,Q=p;else for(;Q!==null;){f=Q;var y=f.sibling,T=f.return;if(Gv(f),f===h){Q=null;break}if(y!==null){y.return=T,Q=y;break}Q=T}}}var P=o.alternate;if(P!==null){var D=P.child;if(D!==null){P.child=null;do{var V=D.sibling;D.sibling=null,D=V}while(D!==null)}}Q=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,Q=s;else e:for(;Q!==null;){if(o=Q,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ks(9,o,o.return)}var I=o.sibling;if(I!==null){I.return=o.return,Q=I;break e}Q=o.return}}var _=t.current;for(Q=_;Q!==null;){s=Q;var R=s.child;if(s.subtreeFlags&2064&&R!==null)R.return=s,Q=R;else e:for(s=_;Q!==null;){if(l=Q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Iu(9,l)}}catch(z){qe(l,l.return,z)}if(l===s){Q=null;break e}var M=l.sibling;if(M!==null){M.return=l.return,Q=M;break e}Q=l.return}}if(Ee=i,Xr(),jn&&typeof jn.onPostCommitFiberRoot=="function")try{jn.onPostCommitFiberRoot(gu,t)}catch{}r=!0}return r}finally{Ae=n,fn.transition=e}}return!1}function Sm(t,e,n){e=wo(n,e),e=Ov(t,e,1),t=Nr(t,e,1),e=Ot(),t!==null&&(da(t,1,e),qt(t,e))}function qe(t,e,n){if(t.tag===3)Sm(t,t,n);else for(;e!==null;){if(e.tag===3){Sm(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Vr===null||!Vr.has(r))){t=wo(n,t),t=Fv(e,t,1),e=Nr(e,t,1),t=Ot(),e!==null&&(da(e,1,t),qt(e,t));break}}e=e.return}}function B1(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ot(),t.pingedLanes|=t.suspendedLanes&n,ct===t&&(Et&n)===n&&(ot===4||ot===3&&(Et&130023424)===Et&&500>Ke()-Xd?mi(t,0):Qd|=n),qt(t,e)}function r_(t,e){e===0&&(t.mode&1?(e=Ha,Ha<<=1,!(Ha&130023424)&&(Ha=4194304)):e=1);var n=Ot();t=sr(t,e),t!==null&&(da(t,e,n),qt(t,n))}function $1(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),r_(t,n)}function H1(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),r_(t,n)}var i_;i_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||$t.current)Bt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Bt=!1,x1(t,e,n);Bt=!!(t.flags&131072)}else Bt=!1,Ue&&e.flags&1048576&&lv(e,jl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;yl(t,e),t=e.pendingProps;var i=yo(e,Nt.current);ho(e,n),i=$d(null,e,r,t,i,n);var o=Hd();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ht(r)?(o=!0,bl(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,bd(e),i.updater=Su,e.stateNode=i,i._reactInternals=e,Rh(e,r,t,n),e=Ph(null,e,r,!0,o,n)):(e.tag=0,Ue&&o&&xd(e),Mt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(yl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=W1(r),t=Tn(r,t),i){case 0:e=Ch(null,e,r,t,n);break e;case 1:e=fm(null,e,r,t,n);break e;case 11:e=hm(null,e,r,t,n);break e;case 14:e=dm(null,e,r,Tn(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Tn(r,i),Ch(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Tn(r,i),fm(t,e,r,i,n);case 3:e:{if(zv(e),t===null)throw Error($(387));r=e.pendingProps,o=e.memoizedState,i=o.element,pv(t,e),$l(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=wo(Error($(423)),e),e=pm(t,e,r,n,i);break e}else if(r!==i){i=wo(Error($(424)),e),e=pm(t,e,r,n,i);break e}else for(Yt=xr(e.stateNode.containerInfo.firstChild),Jt=e,Ue=!0,Rn=null,n=dv(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(vo(),r===i){e=ar(t,e,n);break e}Mt(t,e,r,n)}e=e.child}return e;case 5:return mv(e),t===null&&Th(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,yh(r,i)?s=null:o!==null&&yh(r,o)&&(e.flags|=32),jv(t,e),Mt(t,e,s,n),e.child;case 6:return t===null&&Th(e),null;case 13:return Bv(t,e,n);case 4:return Ud(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=_o(e,null,r,n):Mt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Tn(r,i),hm(t,e,r,i,n);case 7:return Mt(t,e,e.pendingProps,n),e.child;case 8:return Mt(t,e,e.pendingProps.children,n),e.child;case 12:return Mt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,xe(zl,r._currentValue),r._currentValue=s,o!==null)if(kn(o.value,s)){if(o.children===i.children&&!$t.current){e=ar(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){s=o.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=tr(-1,n&-n),u.tag=2;var h=o.updateQueue;if(h!==null){h=h.shared;var f=h.pending;f===null?u.next=u:(u.next=f.next,f.next=u),h.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),Sh(o.return,n,e),l.lanes|=n;break}u=u.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error($(341));s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Sh(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Mt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ho(e,n),i=pn(i),r=r(i),e.flags|=1,Mt(t,e,r,n),e.child;case 14:return r=e.type,i=Tn(r,e.pendingProps),i=Tn(r.type,i),dm(t,e,r,i,n);case 15:return bv(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Tn(r,i),yl(t,e),e.tag=1,Ht(r)?(t=!0,bl(e)):t=!1,ho(e,n),Mv(e,r,i),Rh(e,r,i,n),Ph(null,e,r,!0,t,n);case 19:return $v(t,e,n);case 22:return Uv(t,e,n)}throw Error($(156,e.tag))};function o_(t,e){return Ny(t,e)}function q1(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dn(t,e,n,r){return new q1(t,e,n,r)}function ef(t){return t=t.prototype,!(!t||!t.isReactComponent)}function W1(t){if(typeof t=="function")return ef(t)?1:0;if(t!=null){if(t=t.$$typeof,t===_d)return 11;if(t===Ed)return 14}return 2}function Mr(t,e){var n=t.alternate;return n===null?(n=dn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function El(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")ef(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Xi:return gi(n.children,i,o,e);case vd:s=8,i|=8;break;case Qc:return t=dn(12,n,e,i|2),t.elementType=Qc,t.lanes=o,t;case Xc:return t=dn(13,n,e,i),t.elementType=Xc,t.lanes=o,t;case Yc:return t=dn(19,n,e,i),t.elementType=Yc,t.lanes=o,t;case my:return Au(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case fy:s=10;break e;case py:s=9;break e;case _d:s=11;break e;case Ed:s=14;break e;case Er:s=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=dn(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function gi(t,e,n,r){return t=dn(7,t,r,e),t.lanes=n,t}function Au(t,e,n,r){return t=dn(22,t,r,e),t.elementType=my,t.lanes=n,t.stateNode={isHidden:!1},t}function xc(t,e,n){return t=dn(6,t,null,e),t.lanes=n,t}function Nc(t,e,n){return e=dn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function G1(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=dc(0),this.expirationTimes=dc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dc(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function tf(t,e,n,r,i,o,s,l,u){return t=new G1(t,e,n,l,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=dn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},bd(o),t}function K1(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function s_(t){if(!t)return Br;t=t._reactInternals;e:{if(Ri(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ht(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(Ht(n))return sv(t,n,e)}return e}function a_(t,e,n,r,i,o,s,l,u){return t=tf(n,r,!0,t,i,o,s,l,u),t.context=s_(null),n=t.current,r=Ot(),i=Lr(n),o=tr(r,i),o.callback=e??null,Nr(n,o,i),t.current.lanes=i,da(t,i,r),qt(t,r),t}function Cu(t,e,n,r){var i=e.current,o=Ot(),s=Lr(i);return n=s_(n),e.context===null?e.context=n:e.pendingContext=n,e=tr(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Nr(i,e,s),t!==null&&(Pn(t,i,s,o),pl(t,i,s)),s}function Yl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Im(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function nf(t,e){Im(t,e),(t=t.alternate)&&Im(t,e)}function Q1(){return null}var l_=typeof reportError=="function"?reportError:function(t){console.error(t)};function rf(t){this._internalRoot=t}Pu.prototype.render=rf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));Cu(t,e,null,null)};Pu.prototype.unmount=rf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;wi(function(){Cu(null,t,null,null)}),e[or]=null}};function Pu(t){this._internalRoot=t}Pu.prototype.unstable_scheduleHydration=function(t){if(t){var e=Uy();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Tr.length&&e!==0&&e<Tr[n].priority;n++);Tr.splice(n,0,t),n===0&&zy(t)}};function of(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ku(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Rm(){}function X1(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var h=Yl(s);o.call(h)}}var s=a_(e,r,t,0,null,!1,!1,"",Rm);return t._reactRootContainer=s,t[or]=s.current,Hs(t.nodeType===8?t.parentNode:t),wi(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var h=Yl(u);l.call(h)}}var u=tf(t,0,!1,null,null,!1,!1,"",Rm);return t._reactRootContainer=u,t[or]=u.current,Hs(t.nodeType===8?t.parentNode:t),wi(function(){Cu(e,u,n,r)}),u}function Du(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var l=i;i=function(){var u=Yl(s);l.call(u)}}Cu(e,s,t,i)}else s=X1(n,e,t,i,r);return Yl(s)}Fy=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ys(e.pendingLanes);n!==0&&(Sd(e,n|1),qt(e,Ke()),!(Ee&6)&&(To=Ke()+500,Xr()))}break;case 13:wi(function(){var r=sr(t,1);if(r!==null){var i=Ot();Pn(r,t,1,i)}}),nf(t,1)}};Id=function(t){if(t.tag===13){var e=sr(t,134217728);if(e!==null){var n=Ot();Pn(e,t,134217728,n)}nf(t,134217728)}};by=function(t){if(t.tag===13){var e=Lr(t),n=sr(t,e);if(n!==null){var r=Ot();Pn(n,t,e,r)}nf(t,e)}};Uy=function(){return Ae};jy=function(t,e){var n=Ae;try{return Ae=t,e()}finally{Ae=n}};ah=function(t,e,n){switch(e){case"input":if(eh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Eu(r);if(!i)throw Error($(90));yy(r),eh(r,i)}}}break;case"textarea":_y(t,n);break;case"select":e=n.value,e!=null&&ao(t,!!n.multiple,e,!1)}};Ay=Yd;Cy=wi;var Y1={usingClientEntryPoint:!1,Events:[pa,eo,Eu,Iy,Ry,Yd]},hs={findFiberByHostInstance:ci,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},J1={bundleType:hs.bundleType,version:hs.version,rendererPackageName:hs.rendererPackageName,rendererConfig:hs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:hr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Dy(t),t===null?null:t.stateNode},findFiberByHostInstance:hs.findFiberByHostInstance||Q1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tl.isDisabled&&tl.supportsFiber)try{gu=tl.inject(J1),jn=tl}catch{}}tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y1;tn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!of(e))throw Error($(200));return K1(t,e,null,n)};tn.createRoot=function(t,e){if(!of(t))throw Error($(299));var n=!1,r="",i=l_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=tf(t,1,!1,null,null,n,!1,r,i),t[or]=e.current,Hs(t.nodeType===8?t.parentNode:t),new rf(e)};tn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=Dy(e),t=t===null?null:t.stateNode,t};tn.flushSync=function(t){return wi(t)};tn.hydrate=function(t,e,n){if(!ku(e))throw Error($(200));return Du(null,t,e,!0,n)};tn.hydrateRoot=function(t,e,n){if(!of(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=l_;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=a_(e,null,t,1,n??null,i,!1,o,s),t[or]=e.current,Hs(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Pu(e)};tn.render=function(t,e,n){if(!ku(e))throw Error($(200));return Du(null,t,e,!1,n)};tn.unmountComponentAtNode=function(t){if(!ku(t))throw Error($(40));return t._reactRootContainer?(wi(function(){Du(null,null,t,!1,function(){t._reactRootContainer=null,t[or]=null})}),!0):!1};tn.unstable_batchedUpdates=Yd;tn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ku(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return Du(t,e,n,!1,r)};tn.version="18.3.1-next-f1338f8080-20240426";function u_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u_)}catch(t){console.error(t)}}u_(),uy.exports=tn;var sf=uy.exports;const Z1=Yg(sf),eT=Xg({__proto__:null,default:Z1},[sf]);var c_,Am=sf;c_=Am.createRoot,Am.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function be(){return be=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},be.apply(this,arguments)}var Ye;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ye||(Ye={}));const Cm="popstate";function tT(t){t===void 0&&(t={});function e(r,i){let{pathname:o,search:s,hash:l}=r.location;return Zs("",{pathname:o,search:s,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Ti(i)}return rT(e,n,null,t)}function fe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function So(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function nT(){return Math.random().toString(36).substr(2,8)}function Pm(t,e){return{usr:t.state,key:t.key,idx:e}}function Zs(t,e,n,r){return n===void 0&&(n=null),be({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Yr(e):e,{state:n,key:e&&e.key||r||nT()})}function Ti(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Yr(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function rT(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,l=Ye.Pop,u=null,h=f();h==null&&(h=0,s.replaceState(be({},s.state,{idx:h}),""));function f(){return(s.state||{idx:null}).idx}function p(){l=Ye.Pop;let V=f(),I=V==null?null:V-h;h=V,u&&u({action:l,location:D.location,delta:I})}function y(V,I){l=Ye.Push;let _=Zs(D.location,V,I);h=f()+1;let R=Pm(_,h),M=D.createHref(_);try{s.pushState(R,"",M)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;i.location.assign(M)}o&&u&&u({action:l,location:D.location,delta:1})}function T(V,I){l=Ye.Replace;let _=Zs(D.location,V,I);h=f();let R=Pm(_,h),M=D.createHref(_);s.replaceState(R,"",M),o&&u&&u({action:l,location:D.location,delta:0})}function P(V){let I=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof V=="string"?V:Ti(V);return _=_.replace(/ $/,"%20"),fe(I,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,I)}let D={get action(){return l},get location(){return t(i,s)},listen(V){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Cm,p),u=V,()=>{i.removeEventListener(Cm,p),u=null}},createHref(V){return e(i,V)},createURL:P,encodeLocation(V){let I=P(V);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:y,replace:T,go(V){return s.go(V)}};return D}var Re;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Re||(Re={}));const iT=new Set(["lazy","caseSensitive","path","id","index","children"]);function oT(t){return t.index===!0}function Jl(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,o)=>{let s=[...n,String(o)],l=typeof i.id=="string"?i.id:s.join("-");if(fe(i.index!==!0||!i.children,"Cannot specify children on an index route"),fe(!r[l],'Found a route id collision on id "'+l+`".  Route id's must be globally unique within Data Router usages`),oT(i)){let u=be({},i,e(i),{id:l});return r[l]=u,u}else{let u=be({},i,e(i),{id:l,children:void 0});return r[l]=u,i.children&&(u.children=Jl(i.children,e,s,r)),u}})}function li(t,e,n){return n===void 0&&(n="/"),wl(t,e,n,!1)}function wl(t,e,n,r){let i=typeof e=="string"?Yr(e):e,o=Mo(i.pathname||"/",n);if(o==null)return null;let s=h_(t);aT(s);let l=null;for(let u=0;l==null&&u<s.length;++u){let h=vT(o);l=gT(s[u],h,r)}return l}function sT(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function h_(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,s,l)=>{let u={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};u.relativePath.startsWith("/")&&(fe(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let h=nr([r,u.relativePath]),f=n.concat(u);o.children&&o.children.length>0&&(fe(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),h_(o.children,e,f,h)),!(o.path==null&&!o.index)&&e.push({path:h,score:pT(h,o.index),routesMeta:f})};return t.forEach((o,s)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))i(o,s);else for(let u of d_(o.path))i(o,s,u)}),e}function d_(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=d_(r.join("/")),l=[];return l.push(...s.map(u=>u===""?o:[o,u].join("/"))),i&&l.push(...s),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function aT(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:mT(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const lT=/^:[\w-]+$/,uT=3,cT=2,hT=1,dT=10,fT=-2,km=t=>t==="*";function pT(t,e){let n=t.split("/"),r=n.length;return n.some(km)&&(r+=fT),e&&(r+=cT),n.filter(i=>!km(i)).reduce((i,o)=>i+(lT.test(o)?uT:o===""?hT:dT),r)}function mT(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function gT(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},o="/",s=[];for(let l=0;l<r.length;++l){let u=r[l],h=l===r.length-1,f=o==="/"?e:e.slice(o.length)||"/",p=Dm({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},f),y=u.route;if(!p&&h&&n&&!r[r.length-1].route.index&&(p=Dm({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},f)),!p)return null;Object.assign(i,p.params),s.push({params:i,pathname:nr([o,p.pathname]),pathnameBase:wT(nr([o,p.pathnameBase])),route:y}),p.pathnameBase!=="/"&&(o=nr([o,p.pathnameBase]))}return s}function Dm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=yT(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((h,f,p)=>{let{paramName:y,isOptional:T}=f;if(y==="*"){let D=l[p]||"";s=o.slice(0,o.length-D.length).replace(/(.)\/+$/,"$1")}const P=l[p];return T&&!P?h[y]=void 0:h[y]=(P||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:s,pattern:t}}function yT(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),So(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function vT(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return So(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Mo(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function _T(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Yr(t):t;return{pathname:n?n.startsWith("/")?n:ET(n,e):e,search:TT(r),hash:ST(i)}}function ET(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Vc(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function f_(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function af(t,e){let n=f_(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function lf(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Yr(t):(i=be({},t),fe(!i.pathname||!i.pathname.includes("?"),Vc("?","pathname","search",i)),fe(!i.pathname||!i.pathname.includes("#"),Vc("#","pathname","hash",i)),fe(!i.search||!i.search.includes("#"),Vc("#","search","hash",i)));let o=t===""||i.pathname==="",s=o?"/":i.pathname,l;if(s==null)l=n;else{let p=e.length-1;if(!r&&s.startsWith("..")){let y=s.split("/");for(;y[0]==="..";)y.shift(),p-=1;i.pathname=y.join("/")}l=p>=0?e[p]:"/"}let u=_T(i,l),h=s&&s!=="/"&&s.endsWith("/"),f=(o||s===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(h||f)&&(u.pathname+="/"),u}const nr=t=>t.join("/").replace(/\/\/+/g,"/"),wT=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),TT=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,ST=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class Zl{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function ea(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const p_=["post","put","patch","delete"],IT=new Set(p_),RT=["get",...p_],AT=new Set(RT),CT=new Set([301,302,303,307,308]),PT=new Set([307,308]),Lc={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},kT={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ds={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},uf=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,DT=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),m_="remix-router-transitions";function xT(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;fe(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let C=t.detectErrorBoundary;i=x=>({hasErrorBoundary:C(x)})}else i=DT;let o={},s=Jl(t.routes,i,void 0,o),l,u=t.basename||"/",h=t.dataStrategy||MT,f=t.patchRoutesOnNavigation,p=be({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),y=null,T=new Set,P=null,D=null,V=null,I=t.hydrationData!=null,_=li(s,t.history.location,u),R=!1,M=null;if(_==null&&!f){let C=Ut(404,{pathname:t.history.location.pathname}),{matches:x,route:L}=zm(s);_=x,M={[L.id]:C}}_&&!t.hydrationData&&ni(_,s,t.history.location.pathname).active&&(_=null);let z;if(_)if(_.some(C=>C.route.lazy))z=!1;else if(!_.some(C=>C.route.loader))z=!0;else if(p.v7_partialHydration){let C=t.hydrationData?t.hydrationData.loaderData:null,x=t.hydrationData?t.hydrationData.errors:null;if(x){let L=_.findIndex(j=>x[j.route.id]!==void 0);z=_.slice(0,L+1).every(j=>!zh(j.route,C,x))}else z=_.every(L=>!zh(L.route,C,x))}else z=t.hydrationData!=null;else if(z=!1,_=[],p.v7_partialHydration){let C=ni(null,s,t.history.location.pathname);C.active&&C.matches&&(R=!0,_=C.matches)}let H,m={historyAction:t.history.action,location:t.history.location,matches:_,initialized:z,navigation:Lc,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||M,fetchers:new Map,blockers:new Map},g=Ye.Pop,E=!1,w,A=!1,k=new Map,S=null,Ce=!1,et=!1,rn=[],ht=new Set,B=new Map,te=0,re=-1,we=new Map,he=new Set,Pe=new Map,Vt=new Map,We=new Set,dt=new Map,ft=new Map,Ni;function Yu(){if(y=t.history.listen(C=>{let{action:x,location:L,delta:j}=C;if(Ni){Ni(),Ni=void 0;return}So(ft.size===0||j!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let W=Ko({currentLocation:m.location,nextLocation:L,historyAction:x});if(W&&j!=null){let Z=new Promise(ie=>{Ni=ie});t.history.go(j*-1),Zr(W,{state:"blocked",location:L,proceed(){Zr(W,{state:"proceeding",proceed:void 0,reset:void 0,location:L}),Z.then(()=>t.history.go(j))},reset(){let ie=new Map(m.blockers);ie.set(W,ds),tt({blockers:ie})}});return}return Nn(x,L)}),n){QT(e,k);let C=()=>XT(e,k);e.addEventListener("pagehide",C),S=()=>e.removeEventListener("pagehide",C)}return m.initialized||Nn(Ye.Pop,m.location,{initialHydration:!0}),H}function Vi(){y&&y(),S&&S(),T.clear(),w&&w.abort(),m.fetchers.forEach((C,x)=>Oi(x)),m.blockers.forEach((C,x)=>bi(x))}function Li(C){return T.add(C),()=>T.delete(C)}function tt(C,x){x===void 0&&(x={}),m=be({},m,C);let L=[],j=[];p.v7_fetcherPersist&&m.fetchers.forEach((W,Z)=>{W.state==="idle"&&(We.has(Z)?j.push(Z):L.push(Z))}),We.forEach(W=>{!m.fetchers.has(W)&&!B.has(W)&&j.push(W)}),[...T].forEach(W=>W(m,{deletedFetchers:j,viewTransitionOpts:x.viewTransitionOpts,flushSync:x.flushSync===!0})),p.v7_fetcherPersist?(L.forEach(W=>m.fetchers.delete(W)),j.forEach(W=>Oi(W))):j.forEach(W=>We.delete(W))}function xn(C,x,L){var j,W;let{flushSync:Z}=L===void 0?{}:L,ie=m.actionData!=null&&m.navigation.formMethod!=null&&In(m.navigation.formMethod)&&m.navigation.state==="loading"&&((j=C.state)==null?void 0:j._isRedirect)!==!0,Y;x.actionData?Object.keys(x.actionData).length>0?Y=x.actionData:Y=null:ie?Y=m.actionData:Y=null;let X=x.loaderData?Um(m.loaderData,x.loaderData,x.matches||[],x.errors):m.loaderData,K=m.blockers;K.size>0&&(K=new Map(K),K.forEach((ue,Qe)=>K.set(Qe,ds)));let ee=E===!0||m.navigation.formMethod!=null&&In(m.navigation.formMethod)&&((W=C.state)==null?void 0:W._isRedirect)!==!0;l&&(s=l,l=void 0),Ce||g===Ye.Pop||(g===Ye.Push?t.history.push(C,C.state):g===Ye.Replace&&t.history.replace(C,C.state));let se;if(g===Ye.Pop){let ue=k.get(m.location.pathname);ue&&ue.has(C.pathname)?se={currentLocation:m.location,nextLocation:C}:k.has(C.pathname)&&(se={currentLocation:C,nextLocation:m.location})}else if(A){let ue=k.get(m.location.pathname);ue?ue.add(C.pathname):(ue=new Set([C.pathname]),k.set(m.location.pathname,ue)),se={currentLocation:m.location,nextLocation:C}}tt(be({},x,{actionData:Y,loaderData:X,historyAction:g,location:C,initialized:!0,navigation:Lc,revalidation:"idle",restoreScrollPosition:ti(C,x.matches||m.matches),preventScrollReset:ee,blockers:K}),{viewTransitionOpts:se,flushSync:Z===!0}),g=Ye.Pop,E=!1,A=!1,Ce=!1,et=!1,rn=[]}async function Mi(C,x){if(typeof C=="number"){t.history.go(C);return}let L=jh(m.location,m.matches,u,p.v7_prependBasename,C,p.v7_relativeSplatPath,x==null?void 0:x.fromRouteId,x==null?void 0:x.relative),{path:j,submission:W,error:Z}=xm(p.v7_normalizeFormMethod,!1,L,x),ie=m.location,Y=Zs(m.location,j,x&&x.state);Y=be({},Y,t.history.encodeLocation(Y));let X=x&&x.replace!=null?x.replace:void 0,K=Ye.Push;X===!0?K=Ye.Replace:X===!1||W!=null&&In(W.formMethod)&&W.formAction===m.location.pathname+m.location.search&&(K=Ye.Replace);let ee=x&&"preventScrollReset"in x?x.preventScrollReset===!0:void 0,se=(x&&x.flushSync)===!0,ue=Ko({currentLocation:ie,nextLocation:Y,historyAction:K});if(ue){Zr(ue,{state:"blocked",location:Y,proceed(){Zr(ue,{state:"proceeding",proceed:void 0,reset:void 0,location:Y}),Mi(C,x)},reset(){let Qe=new Map(m.blockers);Qe.set(ue,ds),tt({blockers:Qe})}});return}return await Nn(K,Y,{submission:W,pendingError:Z,preventScrollReset:ee,replace:x&&x.replace,enableViewTransition:x&&x.viewTransition,flushSync:se})}function Bo(){if(rt(),tt({revalidation:"loading"}),m.navigation.state!=="submitting"){if(m.navigation.state==="idle"){Nn(m.historyAction,m.location,{startUninterruptedRevalidation:!0});return}Nn(g||m.historyAction,m.navigation.location,{overrideNavigation:m.navigation,enableViewTransition:A===!0})}}async function Nn(C,x,L){w&&w.abort(),w=null,g=C,Ce=(L&&L.startUninterruptedRevalidation)===!0,Ra(m.location,m.matches),E=(L&&L.preventScrollReset)===!0,A=(L&&L.enableViewTransition)===!0;let j=l||s,W=L&&L.overrideNavigation,Z=L!=null&&L.initialHydration&&m.matches&&m.matches.length>0&&!R?m.matches:li(j,x,u),ie=(L&&L.flushSync)===!0;if(Z&&m.initialized&&!et&&zT(m.location,x)&&!(L&&L.submission&&In(L.submission.formMethod))){xn(x,{matches:Z},{flushSync:ie});return}let Y=ni(Z,j,x.pathname);if(Y.active&&Y.matches&&(Z=Y.matches),!Z){let{error:Ie,notFoundMatches:me,route:De}=qn(x.pathname);xn(x,{matches:me,loaderData:{},errors:{[De.id]:Ie}},{flushSync:ie});return}w=new AbortController;let X=Hi(t.history,x,w.signal,L&&L.submission),K;if(L&&L.pendingError)K=[ui(Z).route.id,{type:Re.error,error:L.pendingError}];else if(L&&L.submission&&In(L.submission.formMethod)){let Ie=await Ju(X,x,L.submission,Z,Y.active,{replace:L.replace,flushSync:ie});if(Ie.shortCircuited)return;if(Ie.pendingActionResult){let[me,De]=Ie.pendingActionResult;if(Xt(De)&&ea(De.error)&&De.error.status===404){w=null,xn(x,{matches:Ie.matches,loaderData:{},errors:{[me]:De.error}});return}}Z=Ie.matches||Z,K=Ie.pendingActionResult,W=Mc(x,L.submission),ie=!1,Y.active=!1,X=Hi(t.history,X.url,X.signal)}let{shortCircuited:ee,matches:se,loaderData:ue,errors:Qe}=await Zu(X,x,Z,Y.active,W,L&&L.submission,L&&L.fetcherSubmission,L&&L.replace,L&&L.initialHydration===!0,ie,K);ee||(w=null,xn(x,be({matches:se||Z},jm(K),{loaderData:ue,errors:Qe})))}async function Ju(C,x,L,j,W,Z){Z===void 0&&(Z={}),rt();let ie=GT(x,L);if(tt({navigation:ie},{flushSync:Z.flushSync===!0}),W){let K=await Ln(j,x.pathname,C.signal);if(K.type==="aborted")return{shortCircuited:!0};if(K.type==="error"){let ee=ui(K.partialMatches).route.id;return{matches:K.partialMatches,pendingActionResult:[ee,{type:Re.error,error:K.error}]}}else if(K.matches)j=K.matches;else{let{notFoundMatches:ee,error:se,route:ue}=qn(x.pathname);return{matches:ee,pendingActionResult:[ue.id,{type:Re.error,error:se}]}}}let Y,X=_s(j,x);if(!X.route.action&&!X.route.lazy)Y={type:Re.error,error:Ut(405,{method:C.method,pathname:x.pathname,routeId:X.route.id})};else if(Y=(await dr("action",m,C,[X],j,null))[X.route.id],C.signal.aborted)return{shortCircuited:!0};if(fi(Y)){let K;return Z&&Z.replace!=null?K=Z.replace:K=Om(Y.response.headers.get("Location"),new URL(C.url),u)===m.location.pathname+m.location.search,await gn(C,Y,!0,{submission:L,replace:K}),{shortCircuited:!0}}if(Ar(Y))throw Ut(400,{type:"defer-action"});if(Xt(Y)){let K=ui(j,X.route.id);return(Z&&Z.replace)!==!0&&(g=Ye.Push),{matches:j,pendingActionResult:[K.route.id,Y]}}return{matches:j,pendingActionResult:[X.route.id,Y]}}async function Zu(C,x,L,j,W,Z,ie,Y,X,K,ee){let se=W||Mc(x,Z),ue=Z||ie||$m(se),Qe=!Ce&&(!p.v7_partialHydration||!X);if(j){if(Qe){let Ne=$o(ee);tt(be({navigation:se},Ne!==void 0?{actionData:Ne}:{}),{flushSync:K})}let ye=await Ln(L,x.pathname,C.signal);if(ye.type==="aborted")return{shortCircuited:!0};if(ye.type==="error"){let Ne=ui(ye.partialMatches).route.id;return{matches:ye.partialMatches,loaderData:{},errors:{[Ne]:ye.error}}}else if(ye.matches)L=ye.matches;else{let{error:Ne,notFoundMatches:Kn,route:mr}=qn(x.pathname);return{matches:Kn,loaderData:{},errors:{[mr.id]:Ne}}}}let Ie=l||s,[me,De]=Vm(t.history,m,L,ue,x,p.v7_partialHydration&&X===!0,p.v7_skipActionErrorRevalidation,et,rn,ht,We,Pe,he,Ie,u,ee);if(ei(ye=>!(L&&L.some(Ne=>Ne.route.id===ye))||me&&me.some(Ne=>Ne.route.id===ye)),re=++te,me.length===0&&De.length===0){let ye=Fi();return xn(x,be({matches:L,loaderData:{},errors:ee&&Xt(ee[1])?{[ee[0]]:ee[1].error}:null},jm(ee),ye?{fetchers:new Map(m.fetchers)}:{}),{flushSync:K}),{shortCircuited:!0}}if(Qe){let ye={};if(!j){ye.navigation=se;let Ne=$o(ee);Ne!==void 0&&(ye.actionData=Ne)}De.length>0&&(ye.fetchers=Ho(De)),tt(ye,{flushSync:K})}De.forEach(ye=>{yn(ye.key),ye.controller&&B.set(ye.key,ye.controller)});let Wn=()=>De.forEach(ye=>yn(ye.key));w&&w.signal.addEventListener("abort",Wn);let{loaderResults:fr,fetcherResults:vn}=await nt(m,L,me,De,C);if(C.signal.aborted)return{shortCircuited:!0};w&&w.signal.removeEventListener("abort",Wn),De.forEach(ye=>B.delete(ye.key));let Lt=nl(fr);if(Lt)return await gn(C,Lt.result,!0,{replace:Y}),{shortCircuited:!0};if(Lt=nl(vn),Lt)return he.add(Lt.key),await gn(C,Lt.result,!0,{replace:Y}),{shortCircuited:!0};let{loaderData:Ui,errors:Gn}=bm(m,L,fr,ee,De,vn,dt);dt.forEach((ye,Ne)=>{ye.subscribe(Kn=>{(Kn||ye.done)&&dt.delete(Ne)})}),p.v7_partialHydration&&X&&m.errors&&(Gn=be({},m.errors,Gn));let Gt=Fi(),sn=Ia(re),pr=Gt||sn||De.length>0;return be({matches:L,loaderData:Ui,errors:Gn},pr?{fetchers:new Map(m.fetchers)}:{})}function $o(C){if(C&&!Xt(C[1]))return{[C[0]]:C[1].data};if(m.actionData)return Object.keys(m.actionData).length===0?null:m.actionData}function Ho(C){return C.forEach(x=>{let L=m.fetchers.get(x.key),j=fs(void 0,L?L.data:void 0);m.fetchers.set(x.key,j)}),new Map(m.fetchers)}function Sa(C,x,L,j){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");yn(C);let W=(j&&j.flushSync)===!0,Z=l||s,ie=jh(m.location,m.matches,u,p.v7_prependBasename,L,p.v7_relativeSplatPath,x,j==null?void 0:j.relative),Y=li(Z,ie,u),X=ni(Y,Z,ie);if(X.active&&X.matches&&(Y=X.matches),!Y){on(C,x,Ut(404,{pathname:ie}),{flushSync:W});return}let{path:K,submission:ee,error:se}=xm(p.v7_normalizeFormMethod,!0,ie,j);if(se){on(C,x,se,{flushSync:W});return}let ue=_s(Y,K),Qe=(j&&j.preventScrollReset)===!0;if(ee&&In(ee.formMethod)){ec(C,x,K,ue,Y,X.active,W,Qe,ee);return}Pe.set(C,{routeId:x,path:K}),qo(C,x,K,ue,Y,X.active,W,Qe,ee)}async function ec(C,x,L,j,W,Z,ie,Y,X){rt(),Pe.delete(C);function K(Fe){if(!Fe.route.action&&!Fe.route.lazy){let Mn=Ut(405,{method:X.formMethod,pathname:L,routeId:x});return on(C,x,Mn,{flushSync:ie}),!0}return!1}if(!Z&&K(j))return;let ee=m.fetchers.get(C);Wt(C,KT(X,ee),{flushSync:ie});let se=new AbortController,ue=Hi(t.history,L,se.signal,X);if(Z){let Fe=await Ln(W,new URL(ue.url).pathname,ue.signal,C);if(Fe.type==="aborted")return;if(Fe.type==="error"){on(C,x,Fe.error,{flushSync:ie});return}else if(Fe.matches){if(W=Fe.matches,j=_s(W,L),K(j))return}else{on(C,x,Ut(404,{pathname:L}),{flushSync:ie});return}}B.set(C,se);let Qe=te,me=(await dr("action",m,ue,[j],W,C))[j.route.id];if(ue.signal.aborted){B.get(C)===se&&B.delete(C);return}if(p.v7_fetcherPersist&&We.has(C)){if(fi(me)||Xt(me)){Wt(C,_r(void 0));return}}else{if(fi(me))if(B.delete(C),re>Qe){Wt(C,_r(void 0));return}else return he.add(C),Wt(C,fs(X)),gn(ue,me,!1,{fetcherSubmission:X,preventScrollReset:Y});if(Xt(me)){on(C,x,me.error);return}}if(Ar(me))throw Ut(400,{type:"defer-action"});let De=m.navigation.location||m.location,Wn=Hi(t.history,De,se.signal),fr=l||s,vn=m.navigation.state!=="idle"?li(fr,m.navigation.location,u):m.matches;fe(vn,"Didn't find any matches after fetcher action");let Lt=++te;we.set(C,Lt);let Ui=fs(X,me.data);m.fetchers.set(C,Ui);let[Gn,Gt]=Vm(t.history,m,vn,X,De,!1,p.v7_skipActionErrorRevalidation,et,rn,ht,We,Pe,he,fr,u,[j.route.id,me]);Gt.filter(Fe=>Fe.key!==C).forEach(Fe=>{let Mn=Fe.key,Xo=m.fetchers.get(Mn),Ca=fs(void 0,Xo?Xo.data:void 0);m.fetchers.set(Mn,Ca),yn(Mn),Fe.controller&&B.set(Mn,Fe.controller)}),tt({fetchers:new Map(m.fetchers)});let sn=()=>Gt.forEach(Fe=>yn(Fe.key));se.signal.addEventListener("abort",sn);let{loaderResults:pr,fetcherResults:ye}=await nt(m,vn,Gn,Gt,Wn);if(se.signal.aborted)return;se.signal.removeEventListener("abort",sn),we.delete(C),B.delete(C),Gt.forEach(Fe=>B.delete(Fe.key));let Ne=nl(pr);if(Ne)return gn(Wn,Ne.result,!1,{preventScrollReset:Y});if(Ne=nl(ye),Ne)return he.add(Ne.key),gn(Wn,Ne.result,!1,{preventScrollReset:Y});let{loaderData:Kn,errors:mr}=bm(m,vn,pr,void 0,Gt,ye,dt);if(m.fetchers.has(C)){let Fe=_r(me.data);m.fetchers.set(C,Fe)}Ia(Lt),m.navigation.state==="loading"&&Lt>re?(fe(g,"Expected pending action"),w&&w.abort(),xn(m.navigation.location,{matches:vn,loaderData:Kn,errors:mr,fetchers:new Map(m.fetchers)})):(tt({errors:mr,loaderData:Um(m.loaderData,Kn,vn,mr),fetchers:new Map(m.fetchers)}),et=!1)}async function qo(C,x,L,j,W,Z,ie,Y,X){let K=m.fetchers.get(C);Wt(C,fs(X,K?K.data:void 0),{flushSync:ie});let ee=new AbortController,se=Hi(t.history,L,ee.signal);if(Z){let me=await Ln(W,new URL(se.url).pathname,se.signal,C);if(me.type==="aborted")return;if(me.type==="error"){on(C,x,me.error,{flushSync:ie});return}else if(me.matches)W=me.matches,j=_s(W,L);else{on(C,x,Ut(404,{pathname:L}),{flushSync:ie});return}}B.set(C,ee);let ue=te,Ie=(await dr("loader",m,se,[j],W,C))[j.route.id];if(Ar(Ie)&&(Ie=await cf(Ie,se.signal,!0)||Ie),B.get(C)===ee&&B.delete(C),!se.signal.aborted){if(We.has(C)){Wt(C,_r(void 0));return}if(fi(Ie))if(re>ue){Wt(C,_r(void 0));return}else{he.add(C),await gn(se,Ie,!1,{preventScrollReset:Y});return}if(Xt(Ie)){on(C,x,Ie.error);return}fe(!Ar(Ie),"Unhandled fetcher deferred data"),Wt(C,_r(Ie.data))}}async function gn(C,x,L,j){let{submission:W,fetcherSubmission:Z,preventScrollReset:ie,replace:Y}=j===void 0?{}:j;x.response.headers.has("X-Remix-Revalidate")&&(et=!0);let X=x.response.headers.get("Location");fe(X,"Expected a Location header on the redirect Response"),X=Om(X,new URL(C.url),u);let K=Zs(m.location,X,{_isRedirect:!0});if(n){let me=!1;if(x.response.headers.has("X-Remix-Reload-Document"))me=!0;else if(uf.test(X)){const De=t.history.createURL(X);me=De.origin!==e.location.origin||Mo(De.pathname,u)==null}if(me){Y?e.location.replace(X):e.location.assign(X);return}}w=null;let ee=Y===!0||x.response.headers.has("X-Remix-Replace")?Ye.Replace:Ye.Push,{formMethod:se,formAction:ue,formEncType:Qe}=m.navigation;!W&&!Z&&se&&ue&&Qe&&(W=$m(m.navigation));let Ie=W||Z;if(PT.has(x.response.status)&&Ie&&In(Ie.formMethod))await Nn(ee,K,{submission:be({},Ie,{formAction:X}),preventScrollReset:ie||E,enableViewTransition:L?A:void 0});else{let me=Mc(K,W);await Nn(ee,K,{overrideNavigation:me,fetcherSubmission:Z,preventScrollReset:ie||E,enableViewTransition:L?A:void 0})}}async function dr(C,x,L,j,W,Z){let ie,Y={};try{ie=await OT(h,C,x,L,j,W,Z,o,i)}catch(X){return j.forEach(K=>{Y[K.route.id]={type:Re.error,error:X}}),Y}for(let[X,K]of Object.entries(ie))if(BT(K)){let ee=K.result;Y[X]={type:Re.redirect,response:UT(ee,L,X,W,u,p.v7_relativeSplatPath)}}else Y[X]=await bT(K);return Y}async function nt(C,x,L,j,W){let Z=C.matches,ie=dr("loader",C,W,L,x,null),Y=Promise.all(j.map(async ee=>{if(ee.matches&&ee.match&&ee.controller){let ue=(await dr("loader",C,Hi(t.history,ee.path,ee.controller.signal),[ee.match],ee.matches,ee.key))[ee.match.route.id];return{[ee.key]:ue}}else return Promise.resolve({[ee.key]:{type:Re.error,error:Ut(404,{pathname:ee.path})}})})),X=await ie,K=(await Y).reduce((ee,se)=>Object.assign(ee,se),{});return await Promise.all([qT(x,X,W.signal,Z,C.loaderData),WT(x,K,j)]),{loaderResults:X,fetcherResults:K}}function rt(){et=!0,rn.push(...ei()),Pe.forEach((C,x)=>{B.has(x)&&ht.add(x),yn(x)})}function Wt(C,x,L){L===void 0&&(L={}),m.fetchers.set(C,x),tt({fetchers:new Map(m.fetchers)},{flushSync:(L&&L.flushSync)===!0})}function on(C,x,L,j){j===void 0&&(j={});let W=ui(m.matches,x);Oi(C),tt({errors:{[W.route.id]:L},fetchers:new Map(m.fetchers)},{flushSync:(j&&j.flushSync)===!0})}function Wo(C){return Vt.set(C,(Vt.get(C)||0)+1),We.has(C)&&We.delete(C),m.fetchers.get(C)||kT}function Oi(C){let x=m.fetchers.get(C);B.has(C)&&!(x&&x.state==="loading"&&we.has(C))&&yn(C),Pe.delete(C),we.delete(C),he.delete(C),p.v7_fetcherPersist&&We.delete(C),ht.delete(C),m.fetchers.delete(C)}function Jr(C){let x=(Vt.get(C)||0)-1;x<=0?(Vt.delete(C),We.add(C),p.v7_fetcherPersist||Oi(C)):Vt.set(C,x),tt({fetchers:new Map(m.fetchers)})}function yn(C){let x=B.get(C);x&&(x.abort(),B.delete(C))}function Go(C){for(let x of C){let L=Wo(x),j=_r(L.data);m.fetchers.set(x,j)}}function Fi(){let C=[],x=!1;for(let L of he){let j=m.fetchers.get(L);fe(j,"Expected fetcher: "+L),j.state==="loading"&&(he.delete(L),C.push(L),x=!0)}return Go(C),x}function Ia(C){let x=[];for(let[L,j]of we)if(j<C){let W=m.fetchers.get(L);fe(W,"Expected fetcher: "+L),W.state==="loading"&&(yn(L),we.delete(L),x.push(L))}return Go(x),x.length>0}function tc(C,x){let L=m.blockers.get(C)||ds;return ft.get(C)!==x&&ft.set(C,x),L}function bi(C){m.blockers.delete(C),ft.delete(C)}function Zr(C,x){let L=m.blockers.get(C)||ds;fe(L.state==="unblocked"&&x.state==="blocked"||L.state==="blocked"&&x.state==="blocked"||L.state==="blocked"&&x.state==="proceeding"||L.state==="blocked"&&x.state==="unblocked"||L.state==="proceeding"&&x.state==="unblocked","Invalid blocker state transition: "+L.state+" -> "+x.state);let j=new Map(m.blockers);j.set(C,x),tt({blockers:j})}function Ko(C){let{currentLocation:x,nextLocation:L,historyAction:j}=C;if(ft.size===0)return;ft.size>1&&So(!1,"A router only supports one blocker at a time");let W=Array.from(ft.entries()),[Z,ie]=W[W.length-1],Y=m.blockers.get(Z);if(!(Y&&Y.state==="proceeding")&&ie({currentLocation:x,nextLocation:L,historyAction:j}))return Z}function qn(C){let x=Ut(404,{pathname:C}),L=l||s,{matches:j,route:W}=zm(L);return ei(),{notFoundMatches:j,route:W,error:x}}function ei(C){let x=[];return dt.forEach((L,j)=>{(!C||C(j))&&(L.cancel(),x.push(j),dt.delete(j))}),x}function Qo(C,x,L){if(P=C,V=x,D=L||null,!I&&m.navigation===Lc){I=!0;let j=ti(m.location,m.matches);j!=null&&tt({restoreScrollPosition:j})}return()=>{P=null,V=null,D=null}}function Vn(C,x){return D&&D(C,x.map(j=>sT(j,m.loaderData)))||C.key}function Ra(C,x){if(P&&V){let L=Vn(C,x);P[L]=V()}}function ti(C,x){if(P){let L=Vn(C,x),j=P[L];if(typeof j=="number")return j}return null}function ni(C,x,L){if(f)if(C){if(Object.keys(C[0].params).length>0)return{active:!0,matches:wl(x,L,u,!0)}}else return{active:!0,matches:wl(x,L,u,!0)||[]};return{active:!1,matches:null}}async function Ln(C,x,L,j){if(!f)return{type:"success",matches:C};let W=C;for(;;){let Z=l==null,ie=l||s,Y=o;try{await f({signal:L,path:x,matches:W,fetcherKey:j,patch:(ee,se)=>{L.aborted||Mm(ee,se,ie,Y,i)}})}catch(ee){return{type:"error",error:ee,partialMatches:W}}finally{Z&&!L.aborted&&(s=[...s])}if(L.aborted)return{type:"aborted"};let X=li(ie,x,u);if(X)return{type:"success",matches:X};let K=wl(ie,x,u,!0);if(!K||W.length===K.length&&W.every((ee,se)=>ee.route.id===K[se].route.id))return{type:"success",matches:null};W=K}}function Aa(C){o={},l=Jl(C,i,void 0,o)}function pt(C,x){let L=l==null;Mm(C,x,l||s,o,i),L&&(s=[...s],tt({}))}return H={get basename(){return u},get future(){return p},get state(){return m},get routes(){return s},get window(){return e},initialize:Yu,subscribe:Li,enableScrollRestoration:Qo,navigate:Mi,fetch:Sa,revalidate:Bo,createHref:C=>t.history.createHref(C),encodeLocation:C=>t.history.encodeLocation(C),getFetcher:Wo,deleteFetcher:Jr,dispose:Vi,getBlocker:tc,deleteBlocker:bi,patchRoutes:pt,_internalFetchControllers:B,_internalActiveDeferreds:dt,_internalSetRoutes:Aa},H}function NT(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function jh(t,e,n,r,i,o,s,l){let u,h;if(s){u=[];for(let p of e)if(u.push(p),p.route.id===s){h=p;break}}else u=e,h=e[e.length-1];let f=lf(i||".",af(u,o),Mo(t.pathname,n)||t.pathname,l==="path");if(i==null&&(f.search=t.search,f.hash=t.hash),(i==null||i===""||i===".")&&h){let p=hf(f.search);if(h.route.index&&!p)f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index";else if(!h.route.index&&p){let y=new URLSearchParams(f.search),T=y.getAll("index");y.delete("index"),T.filter(D=>D).forEach(D=>y.append("index",D));let P=y.toString();f.search=P?"?"+P:""}}return r&&n!=="/"&&(f.pathname=f.pathname==="/"?n:nr([n,f.pathname])),Ti(f)}function xm(t,e,n,r){if(!r||!NT(r))return{path:n};if(r.formMethod&&!HT(r.formMethod))return{path:n,error:Ut(405,{method:r.formMethod})};let i=()=>({path:n,error:Ut(400,{type:"invalid-body"})}),o=r.formMethod||"get",s=t?o.toUpperCase():o.toLowerCase(),l=v_(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!In(s))return i();let y=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((T,P)=>{let[D,V]=P;return""+T+D+"="+V+`
`},""):String(r.body);return{path:n,submission:{formMethod:s,formAction:l,formEncType:r.formEncType,formData:void 0,json:void 0,text:y}}}else if(r.formEncType==="application/json"){if(!In(s))return i();try{let y=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:s,formAction:l,formEncType:r.formEncType,formData:void 0,json:y,text:void 0}}}catch{return i()}}}fe(typeof FormData=="function","FormData is not available in this environment");let u,h;if(r.formData)u=Bh(r.formData),h=r.formData;else if(r.body instanceof FormData)u=Bh(r.body),h=r.body;else if(r.body instanceof URLSearchParams)u=r.body,h=Fm(u);else if(r.body==null)u=new URLSearchParams,h=new FormData;else try{u=new URLSearchParams(r.body),h=Fm(u)}catch{return i()}let f={formMethod:s,formAction:l,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:h,json:void 0,text:void 0};if(In(f.formMethod))return{path:n,submission:f};let p=Yr(n);return e&&p.search&&hf(p.search)&&u.append("index",""),p.search="?"+u,{path:Ti(p),submission:f}}function Nm(t,e,n){n===void 0&&(n=!1);let r=t.findIndex(i=>i.route.id===e);return r>=0?t.slice(0,n?r+1:r):t}function Vm(t,e,n,r,i,o,s,l,u,h,f,p,y,T,P,D){let V=D?Xt(D[1])?D[1].error:D[1].data:void 0,I=t.createURL(e.location),_=t.createURL(i),R=n;o&&e.errors?R=Nm(n,Object.keys(e.errors)[0],!0):D&&Xt(D[1])&&(R=Nm(n,D[0]));let M=D?D[1].statusCode:void 0,z=s&&M&&M>=400,H=R.filter((g,E)=>{let{route:w}=g;if(w.lazy)return!0;if(w.loader==null)return!1;if(o)return zh(w,e.loaderData,e.errors);if(VT(e.loaderData,e.matches[E],g)||u.some(S=>S===g.route.id))return!0;let A=e.matches[E],k=g;return Lm(g,be({currentUrl:I,currentParams:A.params,nextUrl:_,nextParams:k.params},r,{actionResult:V,actionStatus:M,defaultShouldRevalidate:z?!1:l||I.pathname+I.search===_.pathname+_.search||I.search!==_.search||g_(A,k)}))}),m=[];return p.forEach((g,E)=>{if(o||!n.some(Ce=>Ce.route.id===g.routeId)||f.has(E))return;let w=li(T,g.path,P);if(!w){m.push({key:E,routeId:g.routeId,path:g.path,matches:null,match:null,controller:null});return}let A=e.fetchers.get(E),k=_s(w,g.path),S=!1;y.has(E)?S=!1:h.has(E)?(h.delete(E),S=!0):A&&A.state!=="idle"&&A.data===void 0?S=l:S=Lm(k,be({currentUrl:I,currentParams:e.matches[e.matches.length-1].params,nextUrl:_,nextParams:n[n.length-1].params},r,{actionResult:V,actionStatus:M,defaultShouldRevalidate:z?!1:l})),S&&m.push({key:E,routeId:g.routeId,path:g.path,matches:w,match:k,controller:new AbortController})}),[H,m]}function zh(t,e,n){if(t.lazy)return!0;if(!t.loader)return!1;let r=e!=null&&e[t.id]!==void 0,i=n!=null&&n[t.id]!==void 0;return!r&&i?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!r&&!i}function VT(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function g_(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function Lm(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function Mm(t,e,n,r,i){var o;let s;if(t){let h=r[t];fe(h,"No route found to patch children into: routeId = "+t),h.children||(h.children=[]),s=h.children}else s=n;let l=e.filter(h=>!s.some(f=>y_(h,f))),u=Jl(l,i,[t||"_","patch",String(((o=s)==null?void 0:o.length)||"0")],r);s.push(...u)}function y_(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,r)=>{var i;return(i=e.children)==null?void 0:i.some(o=>y_(n,o))}):!1}async function LT(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];fe(i,"No route found in manifest");let o={};for(let s in r){let u=i[s]!==void 0&&s!=="hasErrorBoundary";So(!u,'Route "'+i.id+'" has a static property "'+s+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+s+'" will be ignored.')),!u&&!iT.has(s)&&(o[s]=r[s])}Object.assign(i,o),Object.assign(i,be({},e(i),{lazy:void 0}))}async function MT(t){let{matches:e}=t,n=e.filter(i=>i.shouldLoad);return(await Promise.all(n.map(i=>i.resolve()))).reduce((i,o,s)=>Object.assign(i,{[n[s].route.id]:o}),{})}async function OT(t,e,n,r,i,o,s,l,u,h){let f=o.map(T=>T.route.lazy?LT(T.route,u,l):void 0),p=o.map((T,P)=>{let D=f[P],V=i.some(_=>_.route.id===T.route.id);return be({},T,{shouldLoad:V,resolve:async _=>(_&&r.method==="GET"&&(T.route.lazy||T.route.loader)&&(V=!0),V?FT(e,r,T,D,_,h):Promise.resolve({type:Re.data,result:void 0}))})}),y=await t({matches:p,request:r,params:o[0].params,fetcherKey:s,context:h});try{await Promise.all(f)}catch{}return y}async function FT(t,e,n,r,i,o){let s,l,u=h=>{let f,p=new Promise((P,D)=>f=D);l=()=>f(),e.signal.addEventListener("abort",l);let y=P=>typeof h!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):h({request:e,params:n.params,context:o},...P!==void 0?[P]:[]),T=(async()=>{try{return{type:"data",result:await(i?i(D=>y(D)):y())}}catch(P){return{type:"error",result:P}}})();return Promise.race([T,p])};try{let h=n.route[t];if(r)if(h){let f,[p]=await Promise.all([u(h).catch(y=>{f=y}),r]);if(f!==void 0)throw f;s=p}else if(await r,h=n.route[t],h)s=await u(h);else if(t==="action"){let f=new URL(e.url),p=f.pathname+f.search;throw Ut(405,{method:e.method,pathname:p,routeId:n.route.id})}else return{type:Re.data,result:void 0};else if(h)s=await u(h);else{let f=new URL(e.url),p=f.pathname+f.search;throw Ut(404,{pathname:p})}fe(s.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(h){return{type:Re.error,result:h}}finally{l&&e.signal.removeEventListener("abort",l)}return s}async function bT(t){let{result:e,type:n}=t;if(__(e)){let p;try{let y=e.headers.get("Content-Type");y&&/\bapplication\/json\b/.test(y)?e.body==null?p=null:p=await e.json():p=await e.text()}catch(y){return{type:Re.error,error:y}}return n===Re.error?{type:Re.error,error:new Zl(e.status,e.statusText,p),statusCode:e.status,headers:e.headers}:{type:Re.data,data:p,statusCode:e.status,headers:e.headers}}if(n===Re.error){if(Bm(e)){var r,i;if(e.data instanceof Error){var o,s;return{type:Re.error,error:e.data,statusCode:(o=e.init)==null?void 0:o.status,headers:(s=e.init)!=null&&s.headers?new Headers(e.init.headers):void 0}}return{type:Re.error,error:new Zl(((r=e.init)==null?void 0:r.status)||500,void 0,e.data),statusCode:ea(e)?e.status:void 0,headers:(i=e.init)!=null&&i.headers?new Headers(e.init.headers):void 0}}return{type:Re.error,error:e,statusCode:ea(e)?e.status:void 0}}if($T(e)){var l,u;return{type:Re.deferred,deferredData:e,statusCode:(l=e.init)==null?void 0:l.status,headers:((u=e.init)==null?void 0:u.headers)&&new Headers(e.init.headers)}}if(Bm(e)){var h,f;return{type:Re.data,data:e.data,statusCode:(h=e.init)==null?void 0:h.status,headers:(f=e.init)!=null&&f.headers?new Headers(e.init.headers):void 0}}return{type:Re.data,data:e}}function UT(t,e,n,r,i,o){let s=t.headers.get("Location");if(fe(s,"Redirects returned/thrown from loaders/actions must have a Location header"),!uf.test(s)){let l=r.slice(0,r.findIndex(u=>u.route.id===n)+1);s=jh(new URL(e.url),l,i,!0,s,o),t.headers.set("Location",s)}return t}function Om(t,e,n){if(uf.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),o=Mo(i.pathname,n)!=null;if(i.origin===e.origin&&o)return i.pathname+i.search+i.hash}return t}function Hi(t,e,n,r){let i=t.createURL(v_(e)).toString(),o={signal:n};if(r&&In(r.formMethod)){let{formMethod:s,formEncType:l}=r;o.method=s.toUpperCase(),l==="application/json"?(o.headers=new Headers({"Content-Type":l}),o.body=JSON.stringify(r.json)):l==="text/plain"?o.body=r.text:l==="application/x-www-form-urlencoded"&&r.formData?o.body=Bh(r.formData):o.body=r.formData}return new Request(i,o)}function Bh(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function Fm(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function jT(t,e,n,r,i){let o={},s=null,l,u=!1,h={},f=n&&Xt(n[1])?n[1].error:void 0;return t.forEach(p=>{if(!(p.route.id in e))return;let y=p.route.id,T=e[y];if(fe(!fi(T),"Cannot handle redirect results in processLoaderData"),Xt(T)){let P=T.error;f!==void 0&&(P=f,f=void 0),s=s||{};{let D=ui(t,y);s[D.route.id]==null&&(s[D.route.id]=P)}o[y]=void 0,u||(u=!0,l=ea(T.error)?T.error.status:500),T.headers&&(h[y]=T.headers)}else Ar(T)?(r.set(y,T.deferredData),o[y]=T.deferredData.data,T.statusCode!=null&&T.statusCode!==200&&!u&&(l=T.statusCode),T.headers&&(h[y]=T.headers)):(o[y]=T.data,T.statusCode&&T.statusCode!==200&&!u&&(l=T.statusCode),T.headers&&(h[y]=T.headers))}),f!==void 0&&n&&(s={[n[0]]:f},o[n[0]]=void 0),{loaderData:o,errors:s,statusCode:l||200,loaderHeaders:h}}function bm(t,e,n,r,i,o,s){let{loaderData:l,errors:u}=jT(e,n,r,s);return i.forEach(h=>{let{key:f,match:p,controller:y}=h,T=o[f];if(fe(T,"Did not find corresponding fetcher result"),!(y&&y.signal.aborted))if(Xt(T)){let P=ui(t.matches,p==null?void 0:p.route.id);u&&u[P.route.id]||(u=be({},u,{[P.route.id]:T.error})),t.fetchers.delete(f)}else if(fi(T))fe(!1,"Unhandled fetcher revalidation redirect");else if(Ar(T))fe(!1,"Unhandled fetcher deferred data");else{let P=_r(T.data);t.fetchers.set(f,P)}}),{loaderData:l,errors:u}}function Um(t,e,n,r){let i=be({},e);for(let o of n){let s=o.route.id;if(e.hasOwnProperty(s)?e[s]!==void 0&&(i[s]=e[s]):t[s]!==void 0&&o.route.loader&&(i[s]=t[s]),r&&r.hasOwnProperty(s))break}return i}function jm(t){return t?Xt(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function ui(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function zm(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Ut(t,e){let{pathname:n,routeId:r,method:i,type:o,message:s}=e===void 0?{}:e,l="Unknown Server Error",u="Unknown @remix-run/router error";return t===400?(l="Bad Request",i&&n&&r?u="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":o==="defer-action"?u="defer() is not supported in actions":o==="invalid-body"&&(u="Unable to encode submission body")):t===403?(l="Forbidden",u='Route "'+r+'" does not match URL "'+n+'"'):t===404?(l="Not Found",u='No route matches URL "'+n+'"'):t===405&&(l="Method Not Allowed",i&&n&&r?u="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(u='Invalid request method "'+i.toUpperCase()+'"')),new Zl(t||500,l,new Error(u),!0)}function nl(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[r,i]=e[n];if(fi(i))return{key:r,result:i}}}function v_(t){let e=typeof t=="string"?Yr(t):t;return Ti(be({},e,{hash:""}))}function zT(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function BT(t){return __(t.result)&&CT.has(t.result.status)}function Ar(t){return t.type===Re.deferred}function Xt(t){return t.type===Re.error}function fi(t){return(t&&t.type)===Re.redirect}function Bm(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function $T(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function __(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function HT(t){return AT.has(t.toLowerCase())}function In(t){return IT.has(t.toLowerCase())}async function qT(t,e,n,r,i){let o=Object.entries(e);for(let s=0;s<o.length;s++){let[l,u]=o[s],h=t.find(y=>(y==null?void 0:y.route.id)===l);if(!h)continue;let f=r.find(y=>y.route.id===h.route.id),p=f!=null&&!g_(f,h)&&(i&&i[h.route.id])!==void 0;Ar(u)&&p&&await cf(u,n,!1).then(y=>{y&&(e[l]=y)})}}async function WT(t,e,n){for(let r=0;r<n.length;r++){let{key:i,routeId:o,controller:s}=n[r],l=e[i];t.find(h=>(h==null?void 0:h.route.id)===o)&&Ar(l)&&(fe(s,"Expected an AbortController for revalidating fetcher deferred result"),await cf(l,s.signal,!0).then(h=>{h&&(e[i]=h)}))}}async function cf(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:Re.data,data:t.deferredData.unwrappedData}}catch(i){return{type:Re.error,error:i}}return{type:Re.data,data:t.deferredData.data}}}function hf(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function _s(t,e){let n=typeof e=="string"?Yr(e).search:e.search;if(t[t.length-1].route.index&&hf(n||""))return t[t.length-1];let r=f_(t);return r[r.length-1]}function $m(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:o,json:s}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(o!=null)return{formMethod:e,formAction:n,formEncType:r,formData:o,json:void 0,text:void 0};if(s!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:s,text:void 0}}}function Mc(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function GT(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function fs(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function KT(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function _r(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function QT(t,e){try{let n=t.sessionStorage.getItem(m_);if(n){let r=JSON.parse(n);for(let[i,o]of Object.entries(r||{}))o&&Array.isArray(o)&&e.set(i,new Set(o||[]))}}catch{}}function XT(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(m_,JSON.stringify(n))}catch(r){So(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function eu(){return eu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eu.apply(this,arguments)}const xu=U.createContext(null),E_=U.createContext(null),Ai=U.createContext(null),df=U.createContext(null),Ci=U.createContext({outlet:null,matches:[],isDataRoute:!1}),w_=U.createContext(null);function YT(t,e){let{relative:n}=e===void 0?{}:e;ga()||fe(!1);let{basename:r,navigator:i}=U.useContext(Ai),{hash:o,pathname:s,search:l}=S_(t,{relative:n}),u=s;return r!=="/"&&(u=s==="/"?r:nr([r,s])),i.createHref({pathname:u,search:l,hash:o})}function ga(){return U.useContext(df)!=null}function Nu(){return ga()||fe(!1),U.useContext(df).location}function T_(t){U.useContext(Ai).static||U.useLayoutEffect(t)}function JT(){let{isDataRoute:t}=U.useContext(Ci);return t?cS():ZT()}function ZT(){ga()||fe(!1);let t=U.useContext(xu),{basename:e,future:n,navigator:r}=U.useContext(Ai),{matches:i}=U.useContext(Ci),{pathname:o}=Nu(),s=JSON.stringify(af(i,n.v7_relativeSplatPath)),l=U.useRef(!1);return T_(()=>{l.current=!0}),U.useCallback(function(h,f){if(f===void 0&&(f={}),!l.current)return;if(typeof h=="number"){r.go(h);return}let p=lf(h,JSON.parse(s),o,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:nr([e,p.pathname])),(f.replace?r.replace:r.push)(p,f.state,f)},[e,r,s,o,t])}function S_(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=U.useContext(Ai),{matches:i}=U.useContext(Ci),{pathname:o}=Nu(),s=JSON.stringify(af(i,r.v7_relativeSplatPath));return U.useMemo(()=>lf(t,JSON.parse(s),o,n==="path"),[t,s,o,n])}function eS(t,e,n,r){ga()||fe(!1);let{navigator:i}=U.useContext(Ai),{matches:o}=U.useContext(Ci),s=o[o.length-1],l=s?s.params:{};s&&s.pathname;let u=s?s.pathnameBase:"/";s&&s.route;let h=Nu(),f;f=h;let p=f.pathname||"/",y=p;if(u!=="/"){let D=u.replace(/^\//,"").split("/");y="/"+p.replace(/^\//,"").split("/").slice(D.length).join("/")}let T=li(t,{pathname:y});return oS(T&&T.map(D=>Object.assign({},D,{params:Object.assign({},l,D.params),pathname:nr([u,i.encodeLocation?i.encodeLocation(D.pathname).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?u:nr([u,i.encodeLocation?i.encodeLocation(D.pathnameBase).pathname:D.pathnameBase])})),o,n,r)}function tS(){let t=uS(),e=ea(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},e),n?U.createElement("pre",{style:i},n):null,null)}const nS=U.createElement(tS,null);class rS extends U.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?U.createElement(Ci.Provider,{value:this.props.routeContext},U.createElement(w_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function iS(t){let{routeContext:e,match:n,children:r}=t,i=U.useContext(xu);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),U.createElement(Ci.Provider,{value:e},r)}function oS(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let f=s.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);f>=0||fe(!1),s=s.slice(0,Math.min(s.length,f+1))}let u=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<s.length;f++){let p=s[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=f),p.route.id){let{loaderData:y,errors:T}=n,P=p.route.loader&&y[p.route.id]===void 0&&(!T||T[p.route.id]===void 0);if(p.route.lazy||P){u=!0,h>=0?s=s.slice(0,h+1):s=[s[0]];break}}}return s.reduceRight((f,p,y)=>{let T,P=!1,D=null,V=null;n&&(T=l&&p.route.id?l[p.route.id]:void 0,D=p.route.errorElement||nS,u&&(h<0&&y===0?(hS("route-fallback"),P=!0,V=null):h===y&&(P=!0,V=p.route.hydrateFallbackElement||null)));let I=e.concat(s.slice(0,y+1)),_=()=>{let R;return T?R=D:P?R=V:p.route.Component?R=U.createElement(p.route.Component,null):p.route.element?R=p.route.element:R=f,U.createElement(iS,{match:p,routeContext:{outlet:f,matches:I,isDataRoute:n!=null},children:R})};return n&&(p.route.ErrorBoundary||p.route.errorElement||y===0)?U.createElement(rS,{location:n.location,revalidation:n.revalidation,component:D,error:T,children:_(),routeContext:{outlet:null,matches:I,isDataRoute:!0}}):_()},null)}var I_=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(I_||{}),tu=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(tu||{});function sS(t){let e=U.useContext(xu);return e||fe(!1),e}function aS(t){let e=U.useContext(E_);return e||fe(!1),e}function lS(t){let e=U.useContext(Ci);return e||fe(!1),e}function R_(t){let e=lS(),n=e.matches[e.matches.length-1];return n.route.id||fe(!1),n.route.id}function uS(){var t;let e=U.useContext(w_),n=aS(tu.UseRouteError),r=R_(tu.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function cS(){let{router:t}=sS(I_.UseNavigateStable),e=R_(tu.UseNavigateStable),n=U.useRef(!1);return T_(()=>{n.current=!0}),U.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,eu({fromRouteId:e},o)))},[t,e])}const Hm={};function hS(t,e,n){Hm[t]||(Hm[t]=!0)}function dS(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function fS(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Ye.Pop,navigator:o,static:s=!1,future:l}=t;ga()&&fe(!1);let u=e.replace(/^\/*/,"/"),h=U.useMemo(()=>({basename:u,navigator:o,static:s,future:eu({v7_relativeSplatPath:!1},l)}),[u,l,o,s]);typeof r=="string"&&(r=Yr(r));let{pathname:f="/",search:p="",hash:y="",state:T=null,key:P="default"}=r,D=U.useMemo(()=>{let V=Mo(f,u);return V==null?null:{location:{pathname:V,search:p,hash:y,state:T,key:P},navigationType:i}},[u,f,p,y,T,P,i]);return D==null?null:U.createElement(Ai.Provider,{value:h},U.createElement(df.Provider,{children:n,value:D}))}new Promise(()=>{});function pS(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:U.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:U.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:U.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ta(){return ta=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ta.apply(this,arguments)}function mS(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function gS(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function yS(t,e){return t.button===0&&(!e||e==="_self")&&!gS(t)}const vS=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],_S="6";try{window.__reactRouterVersion=_S}catch{}function ES(t,e){return xT({basename:void 0,future:ta({},void 0,{v7_prependBasename:!0}),history:tT({window:void 0}),hydrationData:wS(),routes:t,mapRouteProperties:pS,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function wS(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=ta({},e,{errors:TS(e.errors)})),e}function TS(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new Zl(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let o=window[i.__subType];if(typeof o=="function")try{let s=new o(i.message);s.stack="",n[r]=s}catch{}}if(n[r]==null){let o=new Error(i.message);o.stack="",n[r]=o}}else n[r]=i;return n}const SS=U.createContext({isTransitioning:!1}),IS=U.createContext(new Map),RS="startTransition",qm=BE[RS],AS="flushSync",Wm=eT[AS];function CS(t){qm?qm(t):t()}function ps(t){Wm?Wm(t):t()}let PS=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function kS(t){let{fallbackElement:e,router:n,future:r}=t,[i,o]=U.useState(n.state),[s,l]=U.useState(),[u,h]=U.useState({isTransitioning:!1}),[f,p]=U.useState(),[y,T]=U.useState(),[P,D]=U.useState(),V=U.useRef(new Map),{v7_startTransition:I}=r||{},_=U.useCallback(g=>{I?CS(g):g()},[I]),R=U.useCallback((g,E)=>{let{deletedFetchers:w,flushSync:A,viewTransitionOpts:k}=E;g.fetchers.forEach((Ce,et)=>{Ce.data!==void 0&&V.current.set(et,Ce.data)}),w.forEach(Ce=>V.current.delete(Ce));let S=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!k||S){A?ps(()=>o(g)):_(()=>o(g));return}if(A){ps(()=>{y&&(f&&f.resolve(),y.skipTransition()),h({isTransitioning:!0,flushSync:!0,currentLocation:k.currentLocation,nextLocation:k.nextLocation})});let Ce=n.window.document.startViewTransition(()=>{ps(()=>o(g))});Ce.finished.finally(()=>{ps(()=>{p(void 0),T(void 0),l(void 0),h({isTransitioning:!1})})}),ps(()=>T(Ce));return}y?(f&&f.resolve(),y.skipTransition(),D({state:g,currentLocation:k.currentLocation,nextLocation:k.nextLocation})):(l(g),h({isTransitioning:!0,flushSync:!1,currentLocation:k.currentLocation,nextLocation:k.nextLocation}))},[n.window,y,f,V,_]);U.useLayoutEffect(()=>n.subscribe(R),[n,R]),U.useEffect(()=>{u.isTransitioning&&!u.flushSync&&p(new PS)},[u]),U.useEffect(()=>{if(f&&s&&n.window){let g=s,E=f.promise,w=n.window.document.startViewTransition(async()=>{_(()=>o(g)),await E});w.finished.finally(()=>{p(void 0),T(void 0),l(void 0),h({isTransitioning:!1})}),T(w)}},[_,s,f,n.window]),U.useEffect(()=>{f&&s&&i.location.key===s.location.key&&f.resolve()},[f,y,i.location,s]),U.useEffect(()=>{!u.isTransitioning&&P&&(l(P.state),h({isTransitioning:!0,flushSync:!1,currentLocation:P.currentLocation,nextLocation:P.nextLocation}),D(void 0))},[u.isTransitioning,P]),U.useEffect(()=>{},[]);let M=U.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:g=>n.navigate(g),push:(g,E,w)=>n.navigate(g,{state:E,preventScrollReset:w==null?void 0:w.preventScrollReset}),replace:(g,E,w)=>n.navigate(g,{replace:!0,state:E,preventScrollReset:w==null?void 0:w.preventScrollReset})}),[n]),z=n.basename||"/",H=U.useMemo(()=>({router:n,navigator:M,static:!1,basename:z}),[n,M,z]),m=U.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return U.useEffect(()=>dS(r,n.future),[r,n.future]),U.createElement(U.Fragment,null,U.createElement(xu.Provider,{value:H},U.createElement(E_.Provider,{value:i},U.createElement(IS.Provider,{value:V.current},U.createElement(SS.Provider,{value:u},U.createElement(fS,{basename:z,location:i.location,navigationType:i.historyAction,navigator:M,future:m},i.initialized||n.future.v7_partialHydration?U.createElement(DS,{routes:n.routes,future:n.future,state:i}):e))))),null)}const DS=U.memo(xS);function xS(t){let{routes:e,future:n,state:r}=t;return eS(e,void 0,r,n)}const NS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",VS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,A_=U.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:o,replace:s,state:l,target:u,to:h,preventScrollReset:f,viewTransition:p}=e,y=mS(e,vS),{basename:T}=U.useContext(Ai),P,D=!1;if(typeof h=="string"&&VS.test(h)&&(P=h,NS))try{let R=new URL(window.location.href),M=h.startsWith("//")?new URL(R.protocol+h):new URL(h),z=Mo(M.pathname,T);M.origin===R.origin&&z!=null?h=z+M.search+M.hash:D=!0}catch{}let V=YT(h,{relative:i}),I=LS(h,{replace:s,state:l,target:u,preventScrollReset:f,relative:i,viewTransition:p});function _(R){r&&r(R),R.defaultPrevented||I(R)}return U.createElement("a",ta({},y,{href:P||V,onClick:D||o?r:_,ref:n,target:u}))});var Gm;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Gm||(Gm={}));var Km;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Km||(Km={}));function LS(t,e){let{target:n,replace:r,state:i,preventScrollReset:o,relative:s,viewTransition:l}=e===void 0?{}:e,u=JT(),h=Nu(),f=S_(t,{relative:s});return U.useCallback(p=>{if(yS(p,n)){p.preventDefault();let y=r!==void 0?r:Ti(h)===Ti(f);u(t,{replace:y,state:i,preventScrollReset:o,relative:s,viewTransition:l})}},[h,u,f,r,i,n,t,o,s,l])}var na=(t=>(t.LANDING_PAGE="/",t.PACKING_PAGE="pack",t))(na||{});function MS(){return ce.jsxs("div",{children:[ce.jsx("h1",{children:"Welcome to cellPACK"}),ce.jsx("p",{children:"This is a simple landing page for the cellPACK client. You can navigate to the viewer to see recipes in action."}),ce.jsx(A_,{to:na.PACKING_PAGE,children:"Go to Packing Page →"})]})}const gt=[];for(let t=0;t<256;++t)gt.push((t+256).toString(16).slice(1));function OS(t,e=0){return(gt[t[e+0]]+gt[t[e+1]]+gt[t[e+2]]+gt[t[e+3]]+"-"+gt[t[e+4]]+gt[t[e+5]]+"-"+gt[t[e+6]]+gt[t[e+7]]+"-"+gt[t[e+8]]+gt[t[e+9]]+"-"+gt[t[e+10]]+gt[t[e+11]]+gt[t[e+12]]+gt[t[e+13]]+gt[t[e+14]]+gt[t[e+15]]).toLowerCase()}let Oc;const FS=new Uint8Array(16);function bS(){if(!Oc){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Oc=crypto.getRandomValues.bind(crypto)}return Oc(FS)}const US=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Qm={randomUUID:US};function jS(t,e,n){var i;if(Qm.randomUUID&&!e&&!t)return Qm.randomUUID();t=t||{};const r=t.random??((i=t.rng)==null?void 0:i.call(t))??bS();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,OS(r)}var Xm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},zS=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],s=t[n++],l=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},P_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,l=s?t[i+1]:0,u=i+2<t.length,h=u?t[i+2]:0,f=o>>2,p=(o&3)<<4|l>>4;let y=(l&15)<<2|h>>6,T=h&63;u||(T=64,s||(y=64)),r.push(n[f],n[p],n[y],n[T])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(C_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):zS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||l==null||h==null||p==null)throw new BS;const y=o<<2|l>>4;if(r.push(y),h!==64){const T=l<<4&240|h>>2;if(r.push(T),p!==64){const P=h<<6&192|p;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class BS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $S=function(t){const e=C_(t);return P_.encodeByteArray(e,!0)},nu=function(t){return $S(t).replace(/\./g,"")},HS=function(t){try{return P_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS=()=>qS().__FIREBASE_DEFAULTS__,GS=()=>{if(typeof process>"u"||typeof Xm>"u")return;const t=Xm.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},KS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&HS(t[1]);return e&&JSON.parse(e)},ff=()=>{try{return WS()||GS()||KS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},QS=t=>{var e,n;return(n=(e=ff())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},XS=t=>{const e=QS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},k_=()=>{var t;return(t=ff())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[nu(JSON.stringify(n)),nu(JSON.stringify(s)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function eI(){var t;const e=(t=ff())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function tI(){return!eI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nI(){try{return typeof indexedDB=="object"}catch{return!1}}function rI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI="FirebaseError";class Oo extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=iI,Object.setPrototypeOf(this,Oo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,D_.prototype.create)}}class D_{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?oI(o,r):"Error",l=`${this.serviceName}: ${s} (${i}).`;return new Oo(i,l,r)}}function oI(t,e){return t.replace(sI,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const sI=/\{\$([^}]+)}/g;function $h(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(Ym(o)&&Ym(s)){if(!$h(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Ym(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Io(t){return t&&t._delegate?t._delegate:t}class ra{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new YS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(uI(e))try{this.getOrInitializeService({instanceIdentifier:ai})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=ai){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ai){return this.instances.has(e)}getOptions(e=ai){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(o);r===l&&s.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:lI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ai){return this.component?this.component.multipleInstances?e:ai:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function lI(t){return t===ai?void 0:t}function uI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new aI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(_e||(_e={}));const hI={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},dI=_e.INFO,fI={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},pI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=fI[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class x_{constructor(e){this.name=e,this._logLevel=dI,this._logHandler=pI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}}const mI=(t,e)=>e.some(n=>t instanceof n);let Jm,Zm;function gI(){return Jm||(Jm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yI(){return Zm||(Zm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const N_=new WeakMap,Hh=new WeakMap,V_=new WeakMap,Fc=new WeakMap,pf=new WeakMap;function vI(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Or(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&N_.set(n,t)}).catch(()=>{}),pf.set(e,t),e}function _I(t){if(Hh.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Hh.set(t,e)}let qh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Hh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||V_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Or(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function EI(t){qh=t(qh)}function wI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(bc(this),e,...n);return V_.set(r,e.sort?e.sort():[e]),Or(r)}:yI().includes(t)?function(...e){return t.apply(bc(this),e),Or(N_.get(this))}:function(...e){return Or(t.apply(bc(this),e))}}function TI(t){return typeof t=="function"?wI(t):(t instanceof IDBTransaction&&_I(t),mI(t,gI())?new Proxy(t,qh):t)}function Or(t){if(t instanceof IDBRequest)return vI(t);if(Fc.has(t))return Fc.get(t);const e=TI(t);return e!==t&&(Fc.set(t,e),pf.set(e,t)),e}const bc=t=>pf.get(t);function SI(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),l=Or(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Or(s.result),u.oldVersion,u.newVersion,Or(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const II=["get","getKey","getAll","getAllKeys","count"],RI=["put","add","delete","clear"],Uc=new Map;function eg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Uc.get(e))return Uc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=RI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||II.includes(n)))return;const o=async function(s,...l){const u=this.transaction(s,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),i&&u.done]))[0]};return Uc.set(e,o),o}EI(t=>({...t,get:(e,n,r)=>eg(e,n)||t.get(e,n,r),has:(e,n)=>!!eg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(CI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function CI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wh="@firebase/app",tg="0.10.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lr=new x_("@firebase/app"),PI="@firebase/app-compat",kI="@firebase/analytics-compat",DI="@firebase/analytics",xI="@firebase/app-check-compat",NI="@firebase/app-check",VI="@firebase/auth",LI="@firebase/auth-compat",MI="@firebase/database",OI="@firebase/data-connect",FI="@firebase/database-compat",bI="@firebase/functions",UI="@firebase/functions-compat",jI="@firebase/installations",zI="@firebase/installations-compat",BI="@firebase/messaging",$I="@firebase/messaging-compat",HI="@firebase/performance",qI="@firebase/performance-compat",WI="@firebase/remote-config",GI="@firebase/remote-config-compat",KI="@firebase/storage",QI="@firebase/storage-compat",XI="@firebase/firestore",YI="@firebase/vertexai",JI="@firebase/firestore-compat",ZI="firebase",eR="11.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gh="[DEFAULT]",tR={[Wh]:"fire-core",[PI]:"fire-core-compat",[DI]:"fire-analytics",[kI]:"fire-analytics-compat",[NI]:"fire-app-check",[xI]:"fire-app-check-compat",[VI]:"fire-auth",[LI]:"fire-auth-compat",[MI]:"fire-rtdb",[OI]:"fire-data-connect",[FI]:"fire-rtdb-compat",[bI]:"fire-fn",[UI]:"fire-fn-compat",[jI]:"fire-iid",[zI]:"fire-iid-compat",[BI]:"fire-fcm",[$I]:"fire-fcm-compat",[HI]:"fire-perf",[qI]:"fire-perf-compat",[WI]:"fire-rc",[GI]:"fire-rc-compat",[KI]:"fire-gcs",[QI]:"fire-gcs-compat",[XI]:"fire-fst",[JI]:"fire-fst-compat",[YI]:"fire-vertex","fire-js":"fire-js",[ZI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ru=new Map,nR=new Map,Kh=new Map;function ng(t,e){try{t.container.addComponent(e)}catch(n){lr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function iu(t){const e=t.name;if(Kh.has(e))return lr.debug(`There were multiple attempts to register component ${e}.`),!1;Kh.set(e,t);for(const n of ru.values())ng(n,t);for(const n of nR.values())ng(n,t);return!0}function rR(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fr=new D_("app","Firebase",iR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ra("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR=eR;function L_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Gh,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Fr.create("bad-app-name",{appName:String(i)});if(n||(n=k_()),!n)throw Fr.create("no-options");const o=ru.get(i);if(o){if($h(n,o.options)&&$h(r,o.config))return o;throw Fr.create("duplicate-app",{appName:i})}const s=new cI(i);for(const u of Kh.values())s.addComponent(u);const l=new oR(n,r,s);return ru.set(i,l),l}function aR(t=Gh){const e=ru.get(t);if(!e&&t===Gh&&k_())return L_();if(!e)throw Fr.create("no-app",{appName:t});return e}function po(t,e,n){var r;let i=(r=tR[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const l=[`Unable to register library "${i}" with version "${e}":`];o&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&l.push("and"),s&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),lr.warn(l.join(" "));return}iu(new ra(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR="firebase-heartbeat-database",uR=1,ia="firebase-heartbeat-store";let jc=null;function M_(){return jc||(jc=SI(lR,uR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ia)}catch(n){console.warn(n)}}}}).catch(t=>{throw Fr.create("idb-open",{originalErrorMessage:t.message})})),jc}async function cR(t){try{const n=(await M_()).transaction(ia),r=await n.objectStore(ia).get(O_(t));return await n.done,r}catch(e){if(e instanceof Oo)lr.warn(e.message);else{const n=Fr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});lr.warn(n.message)}}}async function rg(t,e){try{const r=(await M_()).transaction(ia,"readwrite");await r.objectStore(ia).put(e,O_(t)),await r.done}catch(n){if(n instanceof Oo)lr.warn(n.message);else{const r=Fr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});lr.warn(r.message)}}}function O_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=1024,dR=30*24*60*60*1e3;class fR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new mR(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=ig();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const l=new Date(s.date).valueOf();return Date.now()-l<=dR}),this._storage.overwrite(this._heartbeatsCache))}catch(r){lr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ig(),{heartbeatsToSend:r,unsentEntries:i}=pR(this._heartbeatsCache.heartbeats),o=nu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return lr.warn(n),""}}}function ig(){return new Date().toISOString().substring(0,10)}function pR(t,e=hR){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),og(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),og(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class mR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nI()?rI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await cR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return rg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return rg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function og(t){return nu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gR(t){iu(new ra("platform-logger",e=>new AI(e),"PRIVATE")),iu(new ra("heartbeat",e=>new fR(e),"PRIVATE")),po(Wh,tg,t),po(Wh,tg,"esm2017"),po("fire-js","")}gR("");var yR="firebase",vR="11.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */po(yR,vR,"app");var sg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var br,F_;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(m,g){function E(){}E.prototype=g.prototype,m.D=g.prototype,m.prototype=new E,m.prototype.constructor=m,m.C=function(w,A,k){for(var S=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)S[Ce-2]=arguments[Ce];return g.prototype[A].apply(w,S)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(m,g,E){E||(E=0);var w=Array(16);if(typeof g=="string")for(var A=0;16>A;++A)w[A]=g.charCodeAt(E++)|g.charCodeAt(E++)<<8|g.charCodeAt(E++)<<16|g.charCodeAt(E++)<<24;else for(A=0;16>A;++A)w[A]=g[E++]|g[E++]<<8|g[E++]<<16|g[E++]<<24;g=m.g[0],E=m.g[1],A=m.g[2];var k=m.g[3],S=g+(k^E&(A^k))+w[0]+3614090360&4294967295;g=E+(S<<7&4294967295|S>>>25),S=k+(A^g&(E^A))+w[1]+3905402710&4294967295,k=g+(S<<12&4294967295|S>>>20),S=A+(E^k&(g^E))+w[2]+606105819&4294967295,A=k+(S<<17&4294967295|S>>>15),S=E+(g^A&(k^g))+w[3]+3250441966&4294967295,E=A+(S<<22&4294967295|S>>>10),S=g+(k^E&(A^k))+w[4]+4118548399&4294967295,g=E+(S<<7&4294967295|S>>>25),S=k+(A^g&(E^A))+w[5]+1200080426&4294967295,k=g+(S<<12&4294967295|S>>>20),S=A+(E^k&(g^E))+w[6]+2821735955&4294967295,A=k+(S<<17&4294967295|S>>>15),S=E+(g^A&(k^g))+w[7]+4249261313&4294967295,E=A+(S<<22&4294967295|S>>>10),S=g+(k^E&(A^k))+w[8]+1770035416&4294967295,g=E+(S<<7&4294967295|S>>>25),S=k+(A^g&(E^A))+w[9]+2336552879&4294967295,k=g+(S<<12&4294967295|S>>>20),S=A+(E^k&(g^E))+w[10]+4294925233&4294967295,A=k+(S<<17&4294967295|S>>>15),S=E+(g^A&(k^g))+w[11]+2304563134&4294967295,E=A+(S<<22&4294967295|S>>>10),S=g+(k^E&(A^k))+w[12]+1804603682&4294967295,g=E+(S<<7&4294967295|S>>>25),S=k+(A^g&(E^A))+w[13]+4254626195&4294967295,k=g+(S<<12&4294967295|S>>>20),S=A+(E^k&(g^E))+w[14]+2792965006&4294967295,A=k+(S<<17&4294967295|S>>>15),S=E+(g^A&(k^g))+w[15]+1236535329&4294967295,E=A+(S<<22&4294967295|S>>>10),S=g+(A^k&(E^A))+w[1]+4129170786&4294967295,g=E+(S<<5&4294967295|S>>>27),S=k+(E^A&(g^E))+w[6]+3225465664&4294967295,k=g+(S<<9&4294967295|S>>>23),S=A+(g^E&(k^g))+w[11]+643717713&4294967295,A=k+(S<<14&4294967295|S>>>18),S=E+(k^g&(A^k))+w[0]+3921069994&4294967295,E=A+(S<<20&4294967295|S>>>12),S=g+(A^k&(E^A))+w[5]+3593408605&4294967295,g=E+(S<<5&4294967295|S>>>27),S=k+(E^A&(g^E))+w[10]+38016083&4294967295,k=g+(S<<9&4294967295|S>>>23),S=A+(g^E&(k^g))+w[15]+3634488961&4294967295,A=k+(S<<14&4294967295|S>>>18),S=E+(k^g&(A^k))+w[4]+3889429448&4294967295,E=A+(S<<20&4294967295|S>>>12),S=g+(A^k&(E^A))+w[9]+568446438&4294967295,g=E+(S<<5&4294967295|S>>>27),S=k+(E^A&(g^E))+w[14]+3275163606&4294967295,k=g+(S<<9&4294967295|S>>>23),S=A+(g^E&(k^g))+w[3]+4107603335&4294967295,A=k+(S<<14&4294967295|S>>>18),S=E+(k^g&(A^k))+w[8]+1163531501&4294967295,E=A+(S<<20&4294967295|S>>>12),S=g+(A^k&(E^A))+w[13]+2850285829&4294967295,g=E+(S<<5&4294967295|S>>>27),S=k+(E^A&(g^E))+w[2]+4243563512&4294967295,k=g+(S<<9&4294967295|S>>>23),S=A+(g^E&(k^g))+w[7]+1735328473&4294967295,A=k+(S<<14&4294967295|S>>>18),S=E+(k^g&(A^k))+w[12]+2368359562&4294967295,E=A+(S<<20&4294967295|S>>>12),S=g+(E^A^k)+w[5]+4294588738&4294967295,g=E+(S<<4&4294967295|S>>>28),S=k+(g^E^A)+w[8]+2272392833&4294967295,k=g+(S<<11&4294967295|S>>>21),S=A+(k^g^E)+w[11]+1839030562&4294967295,A=k+(S<<16&4294967295|S>>>16),S=E+(A^k^g)+w[14]+4259657740&4294967295,E=A+(S<<23&4294967295|S>>>9),S=g+(E^A^k)+w[1]+2763975236&4294967295,g=E+(S<<4&4294967295|S>>>28),S=k+(g^E^A)+w[4]+1272893353&4294967295,k=g+(S<<11&4294967295|S>>>21),S=A+(k^g^E)+w[7]+4139469664&4294967295,A=k+(S<<16&4294967295|S>>>16),S=E+(A^k^g)+w[10]+3200236656&4294967295,E=A+(S<<23&4294967295|S>>>9),S=g+(E^A^k)+w[13]+681279174&4294967295,g=E+(S<<4&4294967295|S>>>28),S=k+(g^E^A)+w[0]+3936430074&4294967295,k=g+(S<<11&4294967295|S>>>21),S=A+(k^g^E)+w[3]+3572445317&4294967295,A=k+(S<<16&4294967295|S>>>16),S=E+(A^k^g)+w[6]+76029189&4294967295,E=A+(S<<23&4294967295|S>>>9),S=g+(E^A^k)+w[9]+3654602809&4294967295,g=E+(S<<4&4294967295|S>>>28),S=k+(g^E^A)+w[12]+3873151461&4294967295,k=g+(S<<11&4294967295|S>>>21),S=A+(k^g^E)+w[15]+530742520&4294967295,A=k+(S<<16&4294967295|S>>>16),S=E+(A^k^g)+w[2]+3299628645&4294967295,E=A+(S<<23&4294967295|S>>>9),S=g+(A^(E|~k))+w[0]+4096336452&4294967295,g=E+(S<<6&4294967295|S>>>26),S=k+(E^(g|~A))+w[7]+1126891415&4294967295,k=g+(S<<10&4294967295|S>>>22),S=A+(g^(k|~E))+w[14]+2878612391&4294967295,A=k+(S<<15&4294967295|S>>>17),S=E+(k^(A|~g))+w[5]+4237533241&4294967295,E=A+(S<<21&4294967295|S>>>11),S=g+(A^(E|~k))+w[12]+1700485571&4294967295,g=E+(S<<6&4294967295|S>>>26),S=k+(E^(g|~A))+w[3]+2399980690&4294967295,k=g+(S<<10&4294967295|S>>>22),S=A+(g^(k|~E))+w[10]+4293915773&4294967295,A=k+(S<<15&4294967295|S>>>17),S=E+(k^(A|~g))+w[1]+2240044497&4294967295,E=A+(S<<21&4294967295|S>>>11),S=g+(A^(E|~k))+w[8]+1873313359&4294967295,g=E+(S<<6&4294967295|S>>>26),S=k+(E^(g|~A))+w[15]+4264355552&4294967295,k=g+(S<<10&4294967295|S>>>22),S=A+(g^(k|~E))+w[6]+2734768916&4294967295,A=k+(S<<15&4294967295|S>>>17),S=E+(k^(A|~g))+w[13]+1309151649&4294967295,E=A+(S<<21&4294967295|S>>>11),S=g+(A^(E|~k))+w[4]+4149444226&4294967295,g=E+(S<<6&4294967295|S>>>26),S=k+(E^(g|~A))+w[11]+3174756917&4294967295,k=g+(S<<10&4294967295|S>>>22),S=A+(g^(k|~E))+w[2]+718787259&4294967295,A=k+(S<<15&4294967295|S>>>17),S=E+(k^(A|~g))+w[9]+3951481745&4294967295,m.g[0]=m.g[0]+g&4294967295,m.g[1]=m.g[1]+(A+(S<<21&4294967295|S>>>11))&4294967295,m.g[2]=m.g[2]+A&4294967295,m.g[3]=m.g[3]+k&4294967295}r.prototype.u=function(m,g){g===void 0&&(g=m.length);for(var E=g-this.blockSize,w=this.B,A=this.h,k=0;k<g;){if(A==0)for(;k<=E;)i(this,m,k),k+=this.blockSize;if(typeof m=="string"){for(;k<g;)if(w[A++]=m.charCodeAt(k++),A==this.blockSize){i(this,w),A=0;break}}else for(;k<g;)if(w[A++]=m[k++],A==this.blockSize){i(this,w),A=0;break}}this.h=A,this.o+=g},r.prototype.v=function(){var m=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);m[0]=128;for(var g=1;g<m.length-8;++g)m[g]=0;var E=8*this.o;for(g=m.length-8;g<m.length;++g)m[g]=E&255,E/=256;for(this.u(m),m=Array(16),g=E=0;4>g;++g)for(var w=0;32>w;w+=8)m[E++]=this.g[g]>>>w&255;return m};function o(m,g){var E=l;return Object.prototype.hasOwnProperty.call(E,m)?E[m]:E[m]=g(m)}function s(m,g){this.h=g;for(var E=[],w=!0,A=m.length-1;0<=A;A--){var k=m[A]|0;w&&k==g||(E[A]=k,w=!1)}this.g=E}var l={};function u(m){return-128<=m&&128>m?o(m,function(g){return new s([g|0],0>g?-1:0)}):new s([m|0],0>m?-1:0)}function h(m){if(isNaN(m)||!isFinite(m))return p;if(0>m)return V(h(-m));for(var g=[],E=1,w=0;m>=E;w++)g[w]=m/E|0,E*=4294967296;return new s(g,0)}function f(m,g){if(m.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(m.charAt(0)=="-")return V(f(m.substring(1),g));if(0<=m.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=h(Math.pow(g,8)),w=p,A=0;A<m.length;A+=8){var k=Math.min(8,m.length-A),S=parseInt(m.substring(A,A+k),g);8>k?(k=h(Math.pow(g,k)),w=w.j(k).add(h(S))):(w=w.j(E),w=w.add(h(S)))}return w}var p=u(0),y=u(1),T=u(16777216);t=s.prototype,t.m=function(){if(D(this))return-V(this).m();for(var m=0,g=1,E=0;E<this.g.length;E++){var w=this.i(E);m+=(0<=w?w:4294967296+w)*g,g*=4294967296}return m},t.toString=function(m){if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(P(this))return"0";if(D(this))return"-"+V(this).toString(m);for(var g=h(Math.pow(m,6)),E=this,w="";;){var A=M(E,g).g;E=I(E,A.j(g));var k=((0<E.g.length?E.g[0]:E.h)>>>0).toString(m);if(E=A,P(E))return k+w;for(;6>k.length;)k="0"+k;w=k+w}},t.i=function(m){return 0>m?0:m<this.g.length?this.g[m]:this.h};function P(m){if(m.h!=0)return!1;for(var g=0;g<m.g.length;g++)if(m.g[g]!=0)return!1;return!0}function D(m){return m.h==-1}t.l=function(m){return m=I(this,m),D(m)?-1:P(m)?0:1};function V(m){for(var g=m.g.length,E=[],w=0;w<g;w++)E[w]=~m.g[w];return new s(E,~m.h).add(y)}t.abs=function(){return D(this)?V(this):this},t.add=function(m){for(var g=Math.max(this.g.length,m.g.length),E=[],w=0,A=0;A<=g;A++){var k=w+(this.i(A)&65535)+(m.i(A)&65535),S=(k>>>16)+(this.i(A)>>>16)+(m.i(A)>>>16);w=S>>>16,k&=65535,S&=65535,E[A]=S<<16|k}return new s(E,E[E.length-1]&-2147483648?-1:0)};function I(m,g){return m.add(V(g))}t.j=function(m){if(P(this)||P(m))return p;if(D(this))return D(m)?V(this).j(V(m)):V(V(this).j(m));if(D(m))return V(this.j(V(m)));if(0>this.l(T)&&0>m.l(T))return h(this.m()*m.m());for(var g=this.g.length+m.g.length,E=[],w=0;w<2*g;w++)E[w]=0;for(w=0;w<this.g.length;w++)for(var A=0;A<m.g.length;A++){var k=this.i(w)>>>16,S=this.i(w)&65535,Ce=m.i(A)>>>16,et=m.i(A)&65535;E[2*w+2*A]+=S*et,_(E,2*w+2*A),E[2*w+2*A+1]+=k*et,_(E,2*w+2*A+1),E[2*w+2*A+1]+=S*Ce,_(E,2*w+2*A+1),E[2*w+2*A+2]+=k*Ce,_(E,2*w+2*A+2)}for(w=0;w<g;w++)E[w]=E[2*w+1]<<16|E[2*w];for(w=g;w<2*g;w++)E[w]=0;return new s(E,0)};function _(m,g){for(;(m[g]&65535)!=m[g];)m[g+1]+=m[g]>>>16,m[g]&=65535,g++}function R(m,g){this.g=m,this.h=g}function M(m,g){if(P(g))throw Error("division by zero");if(P(m))return new R(p,p);if(D(m))return g=M(V(m),g),new R(V(g.g),V(g.h));if(D(g))return g=M(m,V(g)),new R(V(g.g),g.h);if(30<m.g.length){if(D(m)||D(g))throw Error("slowDivide_ only works with positive integers.");for(var E=y,w=g;0>=w.l(m);)E=z(E),w=z(w);var A=H(E,1),k=H(w,1);for(w=H(w,2),E=H(E,2);!P(w);){var S=k.add(w);0>=S.l(m)&&(A=A.add(E),k=S),w=H(w,1),E=H(E,1)}return g=I(m,A.j(g)),new R(A,g)}for(A=p;0<=m.l(g);){for(E=Math.max(1,Math.floor(m.m()/g.m())),w=Math.ceil(Math.log(E)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),k=h(E),S=k.j(g);D(S)||0<S.l(m);)E-=w,k=h(E),S=k.j(g);P(k)&&(k=y),A=A.add(k),m=I(m,S)}return new R(A,m)}t.A=function(m){return M(this,m).h},t.and=function(m){for(var g=Math.max(this.g.length,m.g.length),E=[],w=0;w<g;w++)E[w]=this.i(w)&m.i(w);return new s(E,this.h&m.h)},t.or=function(m){for(var g=Math.max(this.g.length,m.g.length),E=[],w=0;w<g;w++)E[w]=this.i(w)|m.i(w);return new s(E,this.h|m.h)},t.xor=function(m){for(var g=Math.max(this.g.length,m.g.length),E=[],w=0;w<g;w++)E[w]=this.i(w)^m.i(w);return new s(E,this.h^m.h)};function z(m){for(var g=m.g.length+1,E=[],w=0;w<g;w++)E[w]=m.i(w)<<1|m.i(w-1)>>>31;return new s(E,m.h)}function H(m,g){var E=g>>5;g%=32;for(var w=m.g.length-E,A=[],k=0;k<w;k++)A[k]=0<g?m.i(k+E)>>>g|m.i(k+E+1)<<32-g:m.i(k+E);return new s(A,m.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,F_=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=h,s.fromString=f,br=s}).apply(typeof sg<"u"?sg:typeof self<"u"?self:typeof window<"u"?window:{});var rl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var b_,Es,U_,Tl,Qh,j_,z_,B_;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,c,d){return a==Array.prototype||a==Object.prototype||(a[c]=d.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof rl=="object"&&rl];for(var c=0;c<a.length;++c){var d=a[c];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=n(this);function i(a,c){if(c)e:{var d=r;a=a.split(".");for(var v=0;v<a.length-1;v++){var N=a[v];if(!(N in d))break e;d=d[N]}a=a[a.length-1],v=d[a],c=c(v),c!=v&&c!=null&&e(d,a,{configurable:!0,writable:!0,value:c})}}function o(a,c){a instanceof String&&(a+="");var d=0,v=!1,N={next:function(){if(!v&&d<a.length){var O=d++;return{value:c(O,a[O]),done:!1}}return v=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}i("Array.prototype.values",function(a){return a||function(){return o(this,function(c,d){return d})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},l=this||self;function u(a){var c=typeof a;return c=c!="object"?c:a?Array.isArray(a)?"array":c:"null",c=="array"||c=="object"&&typeof a.length=="number"}function h(a){var c=typeof a;return c=="object"&&a!=null||c=="function"}function f(a,c,d){return a.call.apply(a.bind,arguments)}function p(a,c,d){if(!a)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,v),a.apply(c,N)}}return function(){return a.apply(c,arguments)}}function y(a,c,d){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,y.apply(null,arguments)}function T(a,c){var d=Array.prototype.slice.call(arguments,1);return function(){var v=d.slice();return v.push.apply(v,arguments),a.apply(this,v)}}function P(a,c){function d(){}d.prototype=c.prototype,a.aa=c.prototype,a.prototype=new d,a.prototype.constructor=a,a.Qb=function(v,N,O){for(var q=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)q[ke-2]=arguments[ke];return c.prototype[N].apply(v,q)}}function D(a){const c=a.length;if(0<c){const d=Array(c);for(let v=0;v<c;v++)d[v]=a[v];return d}return[]}function V(a,c){for(let d=1;d<arguments.length;d++){const v=arguments[d];if(u(v)){const N=a.length||0,O=v.length||0;a.length=N+O;for(let q=0;q<O;q++)a[N+q]=v[q]}else a.push(v)}}class I{constructor(c,d){this.i=c,this.j=d,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function _(a){return/^[\s\xa0]*$/.test(a)}function R(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function M(a){return M[" "](a),a}M[" "]=function(){};var z=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function H(a,c,d){for(const v in a)c.call(d,a[v],v,a)}function m(a,c){for(const d in a)c.call(void 0,a[d],d,a)}function g(a){const c={};for(const d in a)c[d]=a[d];return c}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(a,c){let d,v;for(let N=1;N<arguments.length;N++){v=arguments[N];for(d in v)a[d]=v[d];for(let O=0;O<E.length;O++)d=E[O],Object.prototype.hasOwnProperty.call(v,d)&&(a[d]=v[d])}}function A(a){var c=1;a=a.split(":");const d=[];for(;0<c&&a.length;)d.push(a.shift()),c--;return a.length&&d.push(a.join(":")),d}function k(a){l.setTimeout(()=>{throw a},0)}function S(){var a=te;let c=null;return a.g&&(c=a.g,a.g=a.g.next,a.g||(a.h=null),c.next=null),c}class Ce{constructor(){this.h=this.g=null}add(c,d){const v=et.get();v.set(c,d),this.h?this.h.next=v:this.g=v,this.h=v}}var et=new I(()=>new rn,a=>a.reset());class rn{constructor(){this.next=this.g=this.h=null}set(c,d){this.h=c,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let ht,B=!1,te=new Ce,re=()=>{const a=l.Promise.resolve(void 0);ht=()=>{a.then(we)}};var we=()=>{for(var a;a=S();){try{a.h.call(a.g)}catch(d){k(d)}var c=et;c.j(a),100>c.h&&(c.h++,a.next=c.g,c.g=a)}B=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Pe(a,c){this.type=a,this.g=this.target=c,this.defaultPrevented=!1}Pe.prototype.h=function(){this.defaultPrevented=!0};var Vt=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,c=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const d=()=>{};l.addEventListener("test",d,c),l.removeEventListener("test",d,c)}catch{}return a}();function We(a,c){if(Pe.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var d=this.type=a.type,v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=c,c=a.relatedTarget){if(z){e:{try{M(c.nodeName);var N=!0;break e}catch{}N=!1}N||(c=null)}}else d=="mouseover"?c=a.fromElement:d=="mouseout"&&(c=a.toElement);this.relatedTarget=c,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:dt[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&We.aa.h.call(this)}}P(We,Pe);var dt={2:"touch",3:"pen",4:"mouse"};We.prototype.h=function(){We.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var ft="closure_listenable_"+(1e6*Math.random()|0),Ni=0;function Yu(a,c,d,v,N){this.listener=a,this.proxy=null,this.src=c,this.type=d,this.capture=!!v,this.ha=N,this.key=++Ni,this.da=this.fa=!1}function Vi(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Li(a){this.src=a,this.g={},this.h=0}Li.prototype.add=function(a,c,d,v,N){var O=a.toString();a=this.g[O],a||(a=this.g[O]=[],this.h++);var q=xn(a,c,v,N);return-1<q?(c=a[q],d||(c.fa=!1)):(c=new Yu(c,this.src,O,!!v,N),c.fa=d,a.push(c)),c};function tt(a,c){var d=c.type;if(d in a.g){var v=a.g[d],N=Array.prototype.indexOf.call(v,c,void 0),O;(O=0<=N)&&Array.prototype.splice.call(v,N,1),O&&(Vi(c),a.g[d].length==0&&(delete a.g[d],a.h--))}}function xn(a,c,d,v){for(var N=0;N<a.length;++N){var O=a[N];if(!O.da&&O.listener==c&&O.capture==!!d&&O.ha==v)return N}return-1}var Mi="closure_lm_"+(1e6*Math.random()|0),Bo={};function Nn(a,c,d,v,N){if(Array.isArray(c)){for(var O=0;O<c.length;O++)Nn(a,c[O],d,v,N);return null}return d=dr(d),a&&a[ft]?a.K(c,d,h(v)?!!v.capture:!!v,N):Ju(a,c,d,!1,v,N)}function Ju(a,c,d,v,N,O){if(!c)throw Error("Invalid event type");var q=h(N)?!!N.capture:!!N,ke=qo(a);if(ke||(a[Mi]=ke=new Li(a)),d=ke.add(c,d,v,q,O),d.proxy)return d;if(v=Zu(),d.proxy=v,v.src=a,v.listener=d,a.addEventListener)Vt||(N=q),N===void 0&&(N=!1),a.addEventListener(c.toString(),v,N);else if(a.attachEvent)a.attachEvent(Sa(c.toString()),v);else if(a.addListener&&a.removeListener)a.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return d}function Zu(){function a(d){return c.call(a.src,a.listener,d)}const c=ec;return a}function $o(a,c,d,v,N){if(Array.isArray(c))for(var O=0;O<c.length;O++)$o(a,c[O],d,v,N);else v=h(v)?!!v.capture:!!v,d=dr(d),a&&a[ft]?(a=a.i,c=String(c).toString(),c in a.g&&(O=a.g[c],d=xn(O,d,v,N),-1<d&&(Vi(O[d]),Array.prototype.splice.call(O,d,1),O.length==0&&(delete a.g[c],a.h--)))):a&&(a=qo(a))&&(c=a.g[c.toString()],a=-1,c&&(a=xn(c,d,v,N)),(d=-1<a?c[a]:null)&&Ho(d))}function Ho(a){if(typeof a!="number"&&a&&!a.da){var c=a.src;if(c&&c[ft])tt(c.i,a);else{var d=a.type,v=a.proxy;c.removeEventListener?c.removeEventListener(d,v,a.capture):c.detachEvent?c.detachEvent(Sa(d),v):c.addListener&&c.removeListener&&c.removeListener(v),(d=qo(c))?(tt(d,a),d.h==0&&(d.src=null,c[Mi]=null)):Vi(a)}}}function Sa(a){return a in Bo?Bo[a]:Bo[a]="on"+a}function ec(a,c){if(a.da)a=!0;else{c=new We(c,this);var d=a.listener,v=a.ha||a.src;a.fa&&Ho(a),a=d.call(v,c)}return a}function qo(a){return a=a[Mi],a instanceof Li?a:null}var gn="__closure_events_fn_"+(1e9*Math.random()>>>0);function dr(a){return typeof a=="function"?a:(a[gn]||(a[gn]=function(c){return a.handleEvent(c)}),a[gn])}function nt(){he.call(this),this.i=new Li(this),this.M=this,this.F=null}P(nt,he),nt.prototype[ft]=!0,nt.prototype.removeEventListener=function(a,c,d,v){$o(this,a,c,d,v)};function rt(a,c){var d,v=a.F;if(v)for(d=[];v;v=v.F)d.push(v);if(a=a.M,v=c.type||c,typeof c=="string")c=new Pe(c,a);else if(c instanceof Pe)c.target=c.target||a;else{var N=c;c=new Pe(v,a),w(c,N)}if(N=!0,d)for(var O=d.length-1;0<=O;O--){var q=c.g=d[O];N=Wt(q,v,!0,c)&&N}if(q=c.g=a,N=Wt(q,v,!0,c)&&N,N=Wt(q,v,!1,c)&&N,d)for(O=0;O<d.length;O++)q=c.g=d[O],N=Wt(q,v,!1,c)&&N}nt.prototype.N=function(){if(nt.aa.N.call(this),this.i){var a=this.i,c;for(c in a.g){for(var d=a.g[c],v=0;v<d.length;v++)Vi(d[v]);delete a.g[c],a.h--}}this.F=null},nt.prototype.K=function(a,c,d,v){return this.i.add(String(a),c,!1,d,v)},nt.prototype.L=function(a,c,d,v){return this.i.add(String(a),c,!0,d,v)};function Wt(a,c,d,v){if(c=a.i.g[String(c)],!c)return!0;c=c.concat();for(var N=!0,O=0;O<c.length;++O){var q=c[O];if(q&&!q.da&&q.capture==d){var ke=q.listener,mt=q.ha||q.src;q.fa&&tt(a.i,q),N=ke.call(mt,v)!==!1&&N}}return N&&!v.defaultPrevented}function on(a,c,d){if(typeof a=="function")d&&(a=y(a,d));else if(a&&typeof a.handleEvent=="function")a=y(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(a,c||0)}function Wo(a){a.g=on(()=>{a.g=null,a.i&&(a.i=!1,Wo(a))},a.l);const c=a.h;a.h=null,a.m.apply(null,c)}class Oi extends he{constructor(c,d){super(),this.m=c,this.l=d,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Wo(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Jr(a){he.call(this),this.h=a,this.g={}}P(Jr,he);var yn=[];function Go(a){H(a.g,function(c,d){this.g.hasOwnProperty(d)&&Ho(c)},a),a.g={}}Jr.prototype.N=function(){Jr.aa.N.call(this),Go(this)},Jr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fi=l.JSON.stringify,Ia=l.JSON.parse,tc=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function bi(){}bi.prototype.h=null;function Zr(a){return a.h||(a.h=a.i())}function Ko(){}var qn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ei(){Pe.call(this,"d")}P(ei,Pe);function Qo(){Pe.call(this,"c")}P(Qo,Pe);var Vn={},Ra=null;function ti(){return Ra=Ra||new nt}Vn.La="serverreachability";function ni(a){Pe.call(this,Vn.La,a)}P(ni,Pe);function Ln(a){const c=ti();rt(c,new ni(c))}Vn.STAT_EVENT="statevent";function Aa(a,c){Pe.call(this,Vn.STAT_EVENT,a),this.stat=c}P(Aa,Pe);function pt(a){const c=ti();rt(c,new Aa(c,a))}Vn.Ma="timingevent";function C(a,c){Pe.call(this,Vn.Ma,a),this.size=c}P(C,Pe);function x(a,c){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},c)}function L(){this.g=!0}L.prototype.xa=function(){this.g=!1};function j(a,c,d,v,N,O){a.info(function(){if(a.g)if(O)for(var q="",ke=O.split("&"),mt=0;mt<ke.length;mt++){var Te=ke[mt].split("=");if(1<Te.length){var St=Te[0];Te=Te[1];var It=St.split("_");q=2<=It.length&&It[1]=="type"?q+(St+"="+Te+"&"):q+(St+"=redacted&")}}else q=null;else q=O;return"XMLHTTP REQ ("+v+") [attempt "+N+"]: "+c+`
`+d+`
`+q})}function W(a,c,d,v,N,O,q){a.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+N+"]: "+c+`
`+d+`
`+O+" "+q})}function Z(a,c,d,v){a.info(function(){return"XMLHTTP TEXT ("+c+"): "+Y(a,d)+(v?" "+v:"")})}function ie(a,c){a.info(function(){return"TIMEOUT: "+c})}L.prototype.info=function(){};function Y(a,c){if(!a.g)return c;if(!c)return null;try{var d=JSON.parse(c);if(d){for(a=0;a<d.length;a++)if(Array.isArray(d[a])){var v=d[a];if(!(2>v.length)){var N=v[1];if(Array.isArray(N)&&!(1>N.length)){var O=N[0];if(O!="noop"&&O!="stop"&&O!="close")for(var q=1;q<N.length;q++)N[q]=""}}}}return Fi(d)}catch{return c}}var X={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},K={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ee;function se(){}P(se,bi),se.prototype.g=function(){return new XMLHttpRequest},se.prototype.i=function(){return{}},ee=new se;function ue(a,c,d,v){this.j=a,this.i=c,this.l=d,this.R=v||1,this.U=new Jr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Qe}function Qe(){this.i=null,this.g="",this.h=!1}var Ie={},me={};function De(a,c,d){a.L=1,a.v=Da(Qn(c)),a.m=d,a.P=!0,Wn(a,null)}function Wn(a,c){a.F=Date.now(),Lt(a),a.A=Qn(a.v);var d=a.A,v=a.R;Array.isArray(v)||(v=[String(v)]),Xf(d.i,"t",v),a.C=0,d=a.j.J,a.h=new Qe,a.g=pp(a.j,d?c:null,!a.m),0<a.O&&(a.M=new Oi(y(a.Y,a,a.g),a.O)),c=a.U,d=a.g,v=a.ca;var N="readystatechange";Array.isArray(N)||(N&&(yn[0]=N.toString()),N=yn);for(var O=0;O<N.length;O++){var q=Nn(d,N[O],v||c.handleEvent,!1,c.h||c);if(!q)break;c.g[q.key]=q}c=a.H?g(a.H):{},a.m?(a.u||(a.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,c)):(a.u="GET",a.g.ea(a.A,a.u,null,c)),Ln(),j(a.i,a.u,a.A,a.l,a.R,a.m)}ue.prototype.ca=function(a){a=a.target;const c=this.M;c&&Xn(a)==3?c.j():this.Y(a)},ue.prototype.Y=function(a){try{if(a==this.g)e:{const It=Xn(this.g);var c=this.g.Ba();const Bi=this.g.Z();if(!(3>It)&&(It!=3||this.g&&(this.h.h||this.g.oa()||rp(this.g)))){this.J||It!=4||c==7||(c==8||0>=Bi?Ln(3):Ln(2)),Gn(this);var d=this.g.Z();this.X=d;t:if(fr(this)){var v=rp(this.g);a="";var N=v.length,O=Xn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){sn(this),Gt(this);var q="";break t}this.h.i=new l.TextDecoder}for(c=0;c<N;c++)this.h.h=!0,a+=this.h.i.decode(v[c],{stream:!(O&&c==N-1)});v.length=0,this.h.g+=a,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=d==200,W(this.i,this.u,this.A,this.l,this.R,It,d),this.o){if(this.T&&!this.K){t:{if(this.g){var ke,mt=this.g;if((ke=mt.g?mt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(ke)){var Te=ke;break t}}Te=null}if(d=Te)Z(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,pr(this,d);else{this.o=!1,this.s=3,pt(12),sn(this),Gt(this);break e}}if(this.P){d=!0;let _n;for(;!this.J&&this.C<q.length;)if(_n=vn(this,q),_n==me){It==4&&(this.s=4,pt(14),d=!1),Z(this.i,this.l,null,"[Incomplete Response]");break}else if(_n==Ie){this.s=4,pt(15),Z(this.i,this.l,q,"[Invalid Chunk]"),d=!1;break}else Z(this.i,this.l,_n,null),pr(this,_n);if(fr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),It!=4||q.length!=0||this.h.h||(this.s=1,pt(16),d=!1),this.o=this.o&&d,!d)Z(this.i,this.l,q,"[Invalid Chunked Response]"),sn(this),Gt(this);else if(0<q.length&&!this.W){this.W=!0;var St=this.j;St.g==this&&St.ba&&!St.M&&(St.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),oc(St),St.M=!0,pt(11))}}else Z(this.i,this.l,q,null),pr(this,q);It==4&&sn(this),this.o&&!this.J&&(It==4?cp(this.j,this):(this.o=!1,Lt(this)))}else IE(this.g),d==400&&0<q.indexOf("Unknown SID")?(this.s=3,pt(12)):(this.s=0,pt(13)),sn(this),Gt(this)}}}catch{}finally{}};function fr(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function vn(a,c){var d=a.C,v=c.indexOf(`
`,d);return v==-1?me:(d=Number(c.substring(d,v)),isNaN(d)?Ie:(v+=1,v+d>c.length?me:(c=c.slice(v,v+d),a.C=v+d,c)))}ue.prototype.cancel=function(){this.J=!0,sn(this)};function Lt(a){a.S=Date.now()+a.I,Ui(a,a.I)}function Ui(a,c){if(a.B!=null)throw Error("WatchDog timer not null");a.B=x(y(a.ba,a),c)}function Gn(a){a.B&&(l.clearTimeout(a.B),a.B=null)}ue.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(ie(this.i,this.A),this.L!=2&&(Ln(),pt(17)),sn(this),this.s=2,Gt(this)):Ui(this,this.S-a)};function Gt(a){a.j.G==0||a.J||cp(a.j,a)}function sn(a){Gn(a);var c=a.M;c&&typeof c.ma=="function"&&c.ma(),a.M=null,Go(a.U),a.g&&(c=a.g,a.g=null,c.abort(),c.ma())}function pr(a,c){try{var d=a.j;if(d.G!=0&&(d.g==a||Fe(d.h,a))){if(!a.K&&Fe(d.h,a)&&d.G==3){try{var v=d.Da.g.parse(c)}catch{v=null}if(Array.isArray(v)&&v.length==3){var N=v;if(N[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<a.F)Oa(d),La(d);else break e;ic(d),pt(18)}}else d.za=N[1],0<d.za-d.T&&37500>N[2]&&d.F&&d.v==0&&!d.C&&(d.C=x(y(d.Za,d),6e3));if(1>=mr(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else ii(d,11)}else if((a.K||d.g==a)&&Oa(d),!_(c))for(N=d.Da.g.parse(c),c=0;c<N.length;c++){let Te=N[c];if(d.T=Te[0],Te=Te[1],d.G==2)if(Te[0]=="c"){d.K=Te[1],d.ia=Te[2];const St=Te[3];St!=null&&(d.la=St,d.j.info("VER="+d.la));const It=Te[4];It!=null&&(d.Aa=It,d.j.info("SVER="+d.Aa));const Bi=Te[5];Bi!=null&&typeof Bi=="number"&&0<Bi&&(v=1.5*Bi,d.L=v,d.j.info("backChannelRequestTimeoutMs_="+v)),v=d;const _n=a.g;if(_n){const ba=_n.g?_n.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ba){var O=v.h;O.g||ba.indexOf("spdy")==-1&&ba.indexOf("quic")==-1&&ba.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Mn(O,O.h),O.h=null))}if(v.D){const sc=_n.g?_n.g.getResponseHeader("X-HTTP-Session-Id"):null;sc&&(v.ya=sc,Ve(v.I,v.D,sc))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-a.F,d.j.info("Handshake RTT: "+d.R+"ms")),v=d;var q=a;if(v.qa=fp(v,v.J?v.ia:null,v.W),q.K){Xo(v.h,q);var ke=q,mt=v.L;mt&&(ke.I=mt),ke.B&&(Gn(ke),Lt(ke)),v.g=q}else lp(v);0<d.i.length&&Ma(d)}else Te[0]!="stop"&&Te[0]!="close"||ii(d,7);else d.G==3&&(Te[0]=="stop"||Te[0]=="close"?Te[0]=="stop"?ii(d,7):rc(d):Te[0]!="noop"&&d.l&&d.l.ta(Te),d.v=0)}}Ln(4)}catch{}}var ye=class{constructor(a,c){this.g=a,this.map=c}};function Ne(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Kn(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function mr(a){return a.h?1:a.g?a.g.size:0}function Fe(a,c){return a.h?a.h==c:a.g?a.g.has(c):!1}function Mn(a,c){a.g?a.g.add(c):a.h=c}function Xo(a,c){a.h&&a.h==c?a.h=null:a.g&&a.g.has(c)&&a.g.delete(c)}Ne.prototype.cancel=function(){if(this.i=Ca(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Ca(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let c=a.i;for(const d of a.g.values())c=c.concat(d.D);return c}return D(a.i)}function uE(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var c=[],d=a.length,v=0;v<d;v++)c.push(a[v]);return c}c=[],d=0;for(v in a)c[d++]=a[v];return c}function cE(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var c=[];a=a.length;for(var d=0;d<a;d++)c.push(d);return c}c=[],d=0;for(const v in a)c[d++]=v;return c}}}function Hf(a,c){if(a.forEach&&typeof a.forEach=="function")a.forEach(c,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,c,void 0);else for(var d=cE(a),v=uE(a),N=v.length,O=0;O<N;O++)c.call(void 0,v[O],d&&d[O],a)}var qf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hE(a,c){if(a){a=a.split("&");for(var d=0;d<a.length;d++){var v=a[d].indexOf("="),N=null;if(0<=v){var O=a[d].substring(0,v);N=a[d].substring(v+1)}else O=a[d];c(O,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function ri(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof ri){this.h=a.h,Pa(this,a.j),this.o=a.o,this.g=a.g,ka(this,a.s),this.l=a.l;var c=a.i,d=new Zo;d.i=c.i,c.g&&(d.g=new Map(c.g),d.h=c.h),Wf(this,d),this.m=a.m}else a&&(c=String(a).match(qf))?(this.h=!1,Pa(this,c[1]||"",!0),this.o=Yo(c[2]||""),this.g=Yo(c[3]||"",!0),ka(this,c[4]),this.l=Yo(c[5]||"",!0),Wf(this,c[6]||"",!0),this.m=Yo(c[7]||"")):(this.h=!1,this.i=new Zo(null,this.h))}ri.prototype.toString=function(){var a=[],c=this.j;c&&a.push(Jo(c,Gf,!0),":");var d=this.g;return(d||c=="file")&&(a.push("//"),(c=this.o)&&a.push(Jo(c,Gf,!0),"@"),a.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&a.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&a.push("/"),a.push(Jo(d,d.charAt(0)=="/"?pE:fE,!0))),(d=this.i.toString())&&a.push("?",d),(d=this.m)&&a.push("#",Jo(d,gE)),a.join("")};function Qn(a){return new ri(a)}function Pa(a,c,d){a.j=d?Yo(c,!0):c,a.j&&(a.j=a.j.replace(/:$/,""))}function ka(a,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);a.s=c}else a.s=null}function Wf(a,c,d){c instanceof Zo?(a.i=c,yE(a.i,a.h)):(d||(c=Jo(c,mE)),a.i=new Zo(c,a.h))}function Ve(a,c,d){a.i.set(c,d)}function Da(a){return Ve(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Yo(a,c){return a?c?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Jo(a,c,d){return typeof a=="string"?(a=encodeURI(a).replace(c,dE),d&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function dE(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Gf=/[#\/\?@]/g,fE=/[#\?:]/g,pE=/[#\?]/g,mE=/[#\?@]/g,gE=/#/g;function Zo(a,c){this.h=this.g=null,this.i=a||null,this.j=!!c}function gr(a){a.g||(a.g=new Map,a.h=0,a.i&&hE(a.i,function(c,d){a.add(decodeURIComponent(c.replace(/\+/g," ")),d)}))}t=Zo.prototype,t.add=function(a,c){gr(this),this.i=null,a=ji(this,a);var d=this.g.get(a);return d||this.g.set(a,d=[]),d.push(c),this.h+=1,this};function Kf(a,c){gr(a),c=ji(a,c),a.g.has(c)&&(a.i=null,a.h-=a.g.get(c).length,a.g.delete(c))}function Qf(a,c){return gr(a),c=ji(a,c),a.g.has(c)}t.forEach=function(a,c){gr(this),this.g.forEach(function(d,v){d.forEach(function(N){a.call(c,N,v,this)},this)},this)},t.na=function(){gr(this);const a=Array.from(this.g.values()),c=Array.from(this.g.keys()),d=[];for(let v=0;v<c.length;v++){const N=a[v];for(let O=0;O<N.length;O++)d.push(c[v])}return d},t.V=function(a){gr(this);let c=[];if(typeof a=="string")Qf(this,a)&&(c=c.concat(this.g.get(ji(this,a))));else{a=Array.from(this.g.values());for(let d=0;d<a.length;d++)c=c.concat(a[d])}return c},t.set=function(a,c){return gr(this),this.i=null,a=ji(this,a),Qf(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[c]),this.h+=1,this},t.get=function(a,c){return a?(a=this.V(a),0<a.length?String(a[0]):c):c};function Xf(a,c,d){Kf(a,c),0<d.length&&(a.i=null,a.g.set(ji(a,c),D(d)),a.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],c=Array.from(this.g.keys());for(var d=0;d<c.length;d++){var v=c[d];const O=encodeURIComponent(String(v)),q=this.V(v);for(v=0;v<q.length;v++){var N=O;q[v]!==""&&(N+="="+encodeURIComponent(String(q[v]))),a.push(N)}}return this.i=a.join("&")};function ji(a,c){return c=String(c),a.j&&(c=c.toLowerCase()),c}function yE(a,c){c&&!a.j&&(gr(a),a.i=null,a.g.forEach(function(d,v){var N=v.toLowerCase();v!=N&&(Kf(this,v),Xf(this,N,d))},a)),a.j=c}function vE(a,c){const d=new L;if(l.Image){const v=new Image;v.onload=T(yr,d,"TestLoadImage: loaded",!0,c,v),v.onerror=T(yr,d,"TestLoadImage: error",!1,c,v),v.onabort=T(yr,d,"TestLoadImage: abort",!1,c,v),v.ontimeout=T(yr,d,"TestLoadImage: timeout",!1,c,v),l.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=a}else c(!1)}function _E(a,c){const d=new L,v=new AbortController,N=setTimeout(()=>{v.abort(),yr(d,"TestPingServer: timeout",!1,c)},1e4);fetch(a,{signal:v.signal}).then(O=>{clearTimeout(N),O.ok?yr(d,"TestPingServer: ok",!0,c):yr(d,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(N),yr(d,"TestPingServer: error",!1,c)})}function yr(a,c,d,v,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),v(d)}catch{}}function EE(){this.g=new tc}function wE(a,c,d){const v=d||"";try{Hf(a,function(N,O){let q=N;h(N)&&(q=Fi(N)),c.push(v+O+"="+encodeURIComponent(q))})}catch(N){throw c.push(v+"type="+encodeURIComponent("_badmap")),N}}function xa(a){this.l=a.Ub||null,this.j=a.eb||!1}P(xa,bi),xa.prototype.g=function(){return new Na(this.l,this.j)},xa.prototype.i=function(a){return function(){return a}}({});function Na(a,c){nt.call(this),this.D=a,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(Na,nt),t=Na.prototype,t.open=function(a,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=c,this.readyState=1,ts(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(c.body=a),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,es(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ts(this)),this.g&&(this.readyState=3,ts(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Yf(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Yf(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var c=a.value?a.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!a.done}))&&(this.response=this.responseText+=c)}a.done?es(this):ts(this),this.readyState==3&&Yf(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,es(this))},t.Qa=function(a){this.g&&(this.response=a,es(this))},t.ga=function(){this.g&&es(this)};function es(a){a.readyState=4,a.l=null,a.j=null,a.v=null,ts(a)}t.setRequestHeader=function(a,c){this.u.append(a,c)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],c=this.h.entries();for(var d=c.next();!d.done;)d=d.value,a.push(d[0]+": "+d[1]),d=c.next();return a.join(`\r
`)};function ts(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Na.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Jf(a){let c="";return H(a,function(d,v){c+=v,c+=":",c+=d,c+=`\r
`}),c}function nc(a,c,d){e:{for(v in d){var v=!1;break e}v=!0}v||(d=Jf(d),typeof a=="string"?d!=null&&encodeURIComponent(String(d)):Ve(a,c,d))}function He(a){nt.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(He,nt);var TE=/^https?$/i,SE=["POST","PUT"];t=He.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,c,d,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);c=c?c.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ee.g(),this.v=this.o?Zr(this.o):Zr(ee),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(c,String(a),!0),this.B=!1}catch(O){Zf(this,O);return}if(a=d||"",d=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var N in v)d.set(N,v[N]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const O of v.keys())d.set(O,v.get(O));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(d.keys()).find(O=>O.toLowerCase()=="content-type"),N=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(SE,c,void 0))||v||N||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,q]of d)this.g.setRequestHeader(O,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{np(this),this.u=!0,this.g.send(a),this.u=!1}catch(O){Zf(this,O)}};function Zf(a,c){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=c,a.m=5,ep(a),Va(a)}function ep(a){a.A||(a.A=!0,rt(a,"complete"),rt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,rt(this,"complete"),rt(this,"abort"),Va(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Va(this,!0)),He.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?tp(this):this.bb())},t.bb=function(){tp(this)};function tp(a){if(a.h&&typeof s<"u"&&(!a.v[1]||Xn(a)!=4||a.Z()!=2)){if(a.u&&Xn(a)==4)on(a.Ea,0,a);else if(rt(a,"readystatechange"),Xn(a)==4){a.h=!1;try{const q=a.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var d;if(!(d=c)){var v;if(v=q===0){var N=String(a.D).match(qf)[1]||null;!N&&l.self&&l.self.location&&(N=l.self.location.protocol.slice(0,-1)),v=!TE.test(N?N.toLowerCase():"")}d=v}if(d)rt(a,"complete"),rt(a,"success");else{a.m=6;try{var O=2<Xn(a)?a.g.statusText:""}catch{O=""}a.l=O+" ["+a.Z()+"]",ep(a)}}finally{Va(a)}}}}function Va(a,c){if(a.g){np(a);const d=a.g,v=a.v[0]?()=>{}:null;a.g=null,a.v=null,c||rt(a,"ready");try{d.onreadystatechange=v}catch{}}}function np(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Xn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Xn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var c=this.g.responseText;return a&&c.indexOf(a)==0&&(c=c.substring(a.length)),Ia(c)}};function rp(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function IE(a){const c={};a=(a.g&&2<=Xn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<a.length;v++){if(_(a[v]))continue;var d=A(a[v]);const N=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const O=c[N]||[];c[N]=O,O.push(d)}m(c,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ns(a,c,d){return d&&d.internalChannelParams&&d.internalChannelParams[a]||c}function ip(a){this.Aa=0,this.i=[],this.j=new L,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ns("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ns("baseRetryDelayMs",5e3,a),this.cb=ns("retryDelaySeedMs",1e4,a),this.Wa=ns("forwardChannelMaxRetries",2,a),this.wa=ns("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Ne(a&&a.concurrentRequestLimit),this.Da=new EE,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ip.prototype,t.la=8,t.G=1,t.connect=function(a,c,d,v){pt(0),this.W=a,this.H=c||{},d&&v!==void 0&&(this.H.OSID=d,this.H.OAID=v),this.F=this.X,this.I=fp(this,null,this.W),Ma(this)};function rc(a){if(op(a),a.G==3){var c=a.U++,d=Qn(a.I);if(Ve(d,"SID",a.K),Ve(d,"RID",c),Ve(d,"TYPE","terminate"),rs(a,d),c=new ue(a,a.j,c),c.L=2,c.v=Da(Qn(d)),d=!1,l.navigator&&l.navigator.sendBeacon)try{d=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!d&&l.Image&&(new Image().src=c.v,d=!0),d||(c.g=pp(c.j,null),c.g.ea(c.v)),c.F=Date.now(),Lt(c)}dp(a)}function La(a){a.g&&(oc(a),a.g.cancel(),a.g=null)}function op(a){La(a),a.u&&(l.clearTimeout(a.u),a.u=null),Oa(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function Ma(a){if(!Kn(a.h)&&!a.s){a.s=!0;var c=a.Ga;ht||re(),B||(ht(),B=!0),te.add(c,a),a.B=0}}function RE(a,c){return mr(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=c.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=x(y(a.Ga,a,c),hp(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const N=new ue(this,this.j,a);let O=this.o;if(this.S&&(O?(O=g(O),w(O,this.S)):O=this.S),this.m!==null||this.O||(N.H=O,O=null),this.P)e:{for(var c=0,d=0;d<this.i.length;d++){t:{var v=this.i[d];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(c+=v,4096<c){c=d;break e}if(c===4096||d===this.i.length-1){c=d+1;break e}}c=1e3}else c=1e3;c=ap(this,N,c),d=Qn(this.I),Ve(d,"RID",a),Ve(d,"CVER",22),this.D&&Ve(d,"X-HTTP-Session-Id",this.D),rs(this,d),O&&(this.O?c="headers="+encodeURIComponent(String(Jf(O)))+"&"+c:this.m&&nc(d,this.m,O)),Mn(this.h,N),this.Ua&&Ve(d,"TYPE","init"),this.P?(Ve(d,"$req",c),Ve(d,"SID","null"),N.T=!0,De(N,d,null)):De(N,d,c),this.G=2}}else this.G==3&&(a?sp(this,a):this.i.length==0||Kn(this.h)||sp(this))};function sp(a,c){var d;c?d=c.l:d=a.U++;const v=Qn(a.I);Ve(v,"SID",a.K),Ve(v,"RID",d),Ve(v,"AID",a.T),rs(a,v),a.m&&a.o&&nc(v,a.m,a.o),d=new ue(a,a.j,d,a.B+1),a.m===null&&(d.H=a.o),c&&(a.i=c.D.concat(a.i)),c=ap(a,d,1e3),d.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Mn(a.h,d),De(d,v,c)}function rs(a,c){a.H&&H(a.H,function(d,v){Ve(c,v,d)}),a.l&&Hf({},function(d,v){Ve(c,v,d)})}function ap(a,c,d){d=Math.min(a.i.length,d);var v=a.l?y(a.l.Na,a.l,a):null;e:{var N=a.i;let O=-1;for(;;){const q=["count="+d];O==-1?0<d?(O=N[0].g,q.push("ofs="+O)):O=0:q.push("ofs="+O);let ke=!0;for(let mt=0;mt<d;mt++){let Te=N[mt].g;const St=N[mt].map;if(Te-=O,0>Te)O=Math.max(0,N[mt].g-100),ke=!1;else try{wE(St,q,"req"+Te+"_")}catch{v&&v(St)}}if(ke){v=q.join("&");break e}}}return a=a.i.splice(0,d),c.D=a,v}function lp(a){if(!a.g&&!a.u){a.Y=1;var c=a.Fa;ht||re(),B||(ht(),B=!0),te.add(c,a),a.v=0}}function ic(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=x(y(a.Fa,a),hp(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,up(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=x(y(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pt(10),La(this),up(this))};function oc(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function up(a){a.g=new ue(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var c=Qn(a.qa);Ve(c,"RID","rpc"),Ve(c,"SID",a.K),Ve(c,"AID",a.T),Ve(c,"CI",a.F?"0":"1"),!a.F&&a.ja&&Ve(c,"TO",a.ja),Ve(c,"TYPE","xmlhttp"),rs(a,c),a.m&&a.o&&nc(c,a.m,a.o),a.L&&(a.g.I=a.L);var d=a.g;a=a.ia,d.L=1,d.v=Da(Qn(c)),d.m=null,d.P=!0,Wn(d,a)}t.Za=function(){this.C!=null&&(this.C=null,La(this),ic(this),pt(19))};function Oa(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function cp(a,c){var d=null;if(a.g==c){Oa(a),oc(a),a.g=null;var v=2}else if(Fe(a.h,c))d=c.D,Xo(a.h,c),v=1;else return;if(a.G!=0){if(c.o)if(v==1){d=c.m?c.m.length:0,c=Date.now()-c.F;var N=a.B;v=ti(),rt(v,new C(v,d)),Ma(a)}else lp(a);else if(N=c.s,N==3||N==0&&0<c.X||!(v==1&&RE(a,c)||v==2&&ic(a)))switch(d&&0<d.length&&(c=a.h,c.i=c.i.concat(d)),N){case 1:ii(a,5);break;case 4:ii(a,10);break;case 3:ii(a,6);break;default:ii(a,2)}}}function hp(a,c){let d=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(d*=2),d*c}function ii(a,c){if(a.j.info("Error code "+c),c==2){var d=y(a.fb,a),v=a.Xa;const N=!v;v=new ri(v||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Pa(v,"https"),Da(v),N?vE(v.toString(),d):_E(v.toString(),d)}else pt(2);a.G=0,a.l&&a.l.sa(c),dp(a),op(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function dp(a){if(a.G=0,a.ka=[],a.l){const c=Ca(a.h);(c.length!=0||a.i.length!=0)&&(V(a.ka,c),V(a.ka,a.i),a.h.i.length=0,D(a.i),a.i.length=0),a.l.ra()}}function fp(a,c,d){var v=d instanceof ri?Qn(d):new ri(d);if(v.g!="")c&&(v.g=c+"."+v.g),ka(v,v.s);else{var N=l.location;v=N.protocol,c=c?c+"."+N.hostname:N.hostname,N=+N.port;var O=new ri(null);v&&Pa(O,v),c&&(O.g=c),N&&ka(O,N),d&&(O.l=d),v=O}return d=a.D,c=a.ya,d&&c&&Ve(v,d,c),Ve(v,"VER",a.la),rs(a,v),v}function pp(a,c,d){if(c&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=a.Ca&&!a.pa?new He(new xa({eb:d})):new He(a.pa),c.Ha(a.J),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function mp(){}t=mp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Fa(){}Fa.prototype.g=function(a,c){return new Kt(a,c)};function Kt(a,c){nt.call(this),this.g=new ip(c),this.l=a,this.h=c&&c.messageUrlParams||null,a=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(a?a["X-WebChannel-Content-Type"]=c.messageContentType:a={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(a?a["X-WebChannel-Client-Profile"]=c.va:a={"X-WebChannel-Client-Profile":c.va}),this.g.S=a,(a=c&&c.Sb)&&!_(a)&&(this.g.m=a),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!_(c)&&(this.g.D=c,a=this.h,a!==null&&c in a&&(a=this.h,c in a&&delete a[c])),this.j=new zi(this)}P(Kt,nt),Kt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Kt.prototype.close=function(){rc(this.g)},Kt.prototype.o=function(a){var c=this.g;if(typeof a=="string"){var d={};d.__data__=a,a=d}else this.u&&(d={},d.__data__=Fi(a),a=d);c.i.push(new ye(c.Ya++,a)),c.G==3&&Ma(c)},Kt.prototype.N=function(){this.g.l=null,delete this.j,rc(this.g),delete this.g,Kt.aa.N.call(this)};function gp(a){ei.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var c=a.__sm__;if(c){e:{for(const d in c){a=d;break e}a=void 0}(this.i=a)&&(a=this.i,c=c!==null&&a in c?c[a]:void 0),this.data=c}else this.data=a}P(gp,ei);function yp(){Qo.call(this),this.status=1}P(yp,Qo);function zi(a){this.g=a}P(zi,mp),zi.prototype.ua=function(){rt(this.g,"a")},zi.prototype.ta=function(a){rt(this.g,new gp(a))},zi.prototype.sa=function(a){rt(this.g,new yp)},zi.prototype.ra=function(){rt(this.g,"b")},Fa.prototype.createWebChannel=Fa.prototype.g,Kt.prototype.send=Kt.prototype.o,Kt.prototype.open=Kt.prototype.m,Kt.prototype.close=Kt.prototype.close,B_=function(){return new Fa},z_=function(){return ti()},j_=Vn,Qh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},X.NO_ERROR=0,X.TIMEOUT=8,X.HTTP_ERROR=6,Tl=X,K.COMPLETE="complete",U_=K,Ko.EventType=qn,qn.OPEN="a",qn.CLOSE="b",qn.ERROR="c",qn.MESSAGE="d",nt.prototype.listen=nt.prototype.K,Es=Ko,He.prototype.listenOnce=He.prototype.L,He.prototype.getLastError=He.prototype.Ka,He.prototype.getLastErrorCode=He.prototype.Ba,He.prototype.getStatus=He.prototype.Z,He.prototype.getResponseJson=He.prototype.Oa,He.prototype.getResponseText=He.prototype.oa,He.prototype.send=He.prototype.ea,He.prototype.setWithCredentials=He.prototype.Ha,b_=He}).apply(typeof rl<"u"?rl:typeof self<"u"?self:typeof window<"u"?window:{});const ag="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Pt.UNAUTHENTICATED=new Pt(null),Pt.GOOGLE_CREDENTIALS=new Pt("google-credentials-uid"),Pt.FIRST_PARTY=new Pt("first-party-uid"),Pt.MOCK_USER=new Pt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fo="11.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si=new x_("@firebase/firestore");function qi(){return Si.logLevel}function G(t,...e){if(Si.logLevel<=_e.DEBUG){const n=e.map(mf);Si.debug(`Firestore (${Fo}): ${t}`,...n)}}function ur(t,...e){if(Si.logLevel<=_e.ERROR){const n=e.map(mf);Si.error(`Firestore (${Fo}): ${t}`,...n)}}function Ro(t,...e){if(Si.logLevel<=_e.WARN){const n=e.map(mf);Si.warn(`Firestore (${Fo}): ${t}`,...n)}}function mf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(t="Unexpected state"){const e=`FIRESTORE (${Fo}) INTERNAL ASSERTION FAILED: `+t;throw ur(e),new Error(e)}function Se(t,e){t||oe()}function le(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends Oo{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _R{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Pt.UNAUTHENTICATED))}shutdown(){}}class ER{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class wR{constructor(e){this.t=e,this.currentUser=Pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Se(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let o=new Ur;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ur,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ur)}},0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Se(typeof r.accessToken=="string"),new $_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Se(e===null||typeof e=="string"),new Pt(e)}}class TR{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Pt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class SR{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new TR(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class IR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class RR{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Se(this.o===void 0);const r=o=>{o.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,G("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Se(typeof n.token=="string"),this.R=n.token,new IR(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=AR(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}}function ge(t,e){return t<e?-1:t>e?1:0}function Ao(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{static now(){return st.fromMillis(Date.now())}static fromDate(e){return st.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new st(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new J(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new J(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new J(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{static fromTimestamp(e){return new ae(e)}static min(){return new ae(new st(0,0))}static max(){return new ae(new st(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e,n,r){n===void 0?n=0:n>e.length&&oe(),r===void 0?r=e.length-n:r>e.length-n&&oe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return bn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof bn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=bn.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return Math.sign(e.length-n.length)}static compareSegments(e,n){const r=bn.isNumericId(e),i=bn.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?bn.extractNumericId(e).compare(bn.extractNumericId(n)):e<n?-1:e>n?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return br.fromString(e.substring(4,e.length-2))}}class Me extends bn{construct(e,n,r){return new Me(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new J(b.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Me(n)}static emptyPath(){return new Me([])}}const CR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _t extends bn{construct(e,n,r){return new _t(e,n,r)}static isValidIdentifier(e){return CR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new _t(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new J(b.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new J(b.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new J(b.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(s=!s,i++):l!=="."||s?(r+=l,i++):(o(),i++)}if(o(),s)throw new J(b.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _t(n)}static emptyPath(){return new _t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.path=e}static fromPath(e){return new ne(Me.fromString(e))}static fromName(e){return new ne(Me.fromString(e).popFirst(5))}static empty(){return new ne(Me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Me.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ne(new Me(e.slice()))}}function PR(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ae.fromTimestamp(r===1e9?new st(n+1,0):new st(n,r));return new $r(i,ne.empty(),e)}function kR(t){return new $r(t.readTime,t.key,-1)}class $r{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new $r(ae.min(),ne.empty(),-1)}static max(){return new $r(ae.max(),ne.empty(),-1)}}function DR(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ne.comparator(t.documentKey,e.documentKey),n!==0?n:ge(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class NR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bo(t){if(t.code!==b.FAILED_PRECONDITION||t.message!==xR)throw t;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&oe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let i=0,o=0,s=!1;e.forEach(l=>{++i,l.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(i=>i?F.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new F((r,i)=>{const o=e.length,s=new Array(o);let l=0;for(let u=0;u<o;u++){const h=u;n(e[h]).next(f=>{s[h]=f,++l,l===o&&r(s)},f=>i(f))}})}static doWhile(e,n){return new F((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function VR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Uo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Vu.oe=-1;function Lu(t){return t==null}function ou(t){return t===0&&1/t==-1/0}function LR(t){return typeof t=="number"&&Number.isInteger(t)&&!ou(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MR(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=lg(e)),e=OR(t.get(n),e);return lg(e)}function OR(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function lg(t){return t+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ug(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Pi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function q_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e,n){this.comparator=e,this.root=n||vt.EMPTY}insert(e,n){return new $e(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,vt.BLACK,null,null))}remove(e){return new $e(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new il(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new il(this.root,e,this.comparator,!1)}getReverseIterator(){return new il(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new il(this.root,e,this.comparator,!0)}}class il{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class vt{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??vt.RED,this.left=i??vt.EMPTY,this.right=o??vt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new vt(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return vt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return vt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw oe();const e=this.left.check();if(e!==this.right.check())throw oe();return e+(this.isRed()?0:1)}}vt.EMPTY=null,vt.RED=!0,vt.BLACK=!1;vt.EMPTY=new class{constructor(){this.size=0}get key(){throw oe()}get value(){throw oe()}get color(){throw oe()}get left(){throw oe()}get right(){throw oe()}copy(e,n,r,i,o){return this}insert(e,n,r){return new vt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.comparator=e,this.data=new $e(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new cg(this.data.getIterator())}getIteratorFrom(e){return new cg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof at)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new at(this.comparator);return n.data=e,n}}class cg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.fields=e,e.sort(_t.comparator)}static empty(){return new An([])}unionWith(e){let n=new at(_t.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new An(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ao(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new W_("Invalid base64 string: "+o):o}}(e);return new Tt(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new Tt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tt.EMPTY_BYTE_STRING=new Tt("");const FR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hr(t){if(Se(!!t),typeof t=="string"){let e=0;const n=FR.exec(t);if(Se(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ge(t.seconds),nanos:Ge(t.nanos)}}function Ge(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function qr(t){return typeof t=="string"?Tt.fromBase64String(t):Tt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Mu(t){const e=t.mapValue.fields.__previous_value__;return gf(e)?Mu(e):e}function oa(t){const e=Hr(t.mapValue.fields.__local_write_time__.timestampValue);return new st(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e,n,r,i,o,s,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h}}class sa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new sa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof sa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ol={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Wr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?gf(t)?4:jR(t)?9007199254740991:UR(t)?10:11:oe()}function Hn(t,e){if(t===e)return!0;const n=Wr(t);if(n!==Wr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return oa(t).isEqual(oa(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=Hr(i.timestampValue),l=Hr(o.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return qr(i.bytesValue).isEqual(qr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Ge(i.geoPointValue.latitude)===Ge(o.geoPointValue.latitude)&&Ge(i.geoPointValue.longitude)===Ge(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ge(i.integerValue)===Ge(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=Ge(i.doubleValue),l=Ge(o.doubleValue);return s===l?ou(s)===ou(l):isNaN(s)&&isNaN(l)}return!1}(t,e);case 9:return Ao(t.arrayValue.values||[],e.arrayValue.values||[],Hn);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},l=o.mapValue.fields||{};if(ug(s)!==ug(l))return!1;for(const u in s)if(s.hasOwnProperty(u)&&(l[u]===void 0||!Hn(s[u],l[u])))return!1;return!0}(t,e);default:return oe()}}function aa(t,e){return(t.values||[]).find(n=>Hn(n,e))!==void 0}function Co(t,e){if(t===e)return 0;const n=Wr(t),r=Wr(e);if(n!==r)return ge(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ge(t.booleanValue,e.booleanValue);case 2:return function(o,s){const l=Ge(o.integerValue||o.doubleValue),u=Ge(s.integerValue||s.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return hg(t.timestampValue,e.timestampValue);case 4:return hg(oa(t),oa(e));case 5:return ge(t.stringValue,e.stringValue);case 6:return function(o,s){const l=qr(o),u=qr(s);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const l=o.split("/"),u=s.split("/");for(let h=0;h<l.length&&h<u.length;h++){const f=ge(l[h],u[h]);if(f!==0)return f}return ge(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const l=ge(Ge(o.latitude),Ge(s.latitude));return l!==0?l:ge(Ge(o.longitude),Ge(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return dg(t.arrayValue,e.arrayValue);case 10:return function(o,s){var l,u,h,f;const p=o.fields||{},y=s.fields||{},T=(l=p.value)===null||l===void 0?void 0:l.arrayValue,P=(u=y.value)===null||u===void 0?void 0:u.arrayValue,D=ge(((h=T==null?void 0:T.values)===null||h===void 0?void 0:h.length)||0,((f=P==null?void 0:P.values)===null||f===void 0?void 0:f.length)||0);return D!==0?D:dg(T,P)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===ol.mapValue&&s===ol.mapValue)return 0;if(o===ol.mapValue)return 1;if(s===ol.mapValue)return-1;const l=o.fields||{},u=Object.keys(l),h=s.fields||{},f=Object.keys(h);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){const y=ge(u[p],f[p]);if(y!==0)return y;const T=Co(l[u[p]],h[f[p]]);if(T!==0)return T}return ge(u.length,f.length)}(t.mapValue,e.mapValue);default:throw oe()}}function hg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ge(t,e);const n=Hr(t),r=Hr(e),i=ge(n.seconds,r.seconds);return i!==0?i:ge(n.nanos,r.nanos)}function dg(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=Co(n[i],r[i]);if(o)return o}return ge(n.length,r.length)}function Po(t){return Xh(t)}function Xh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Hr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return qr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ne.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=Xh(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${Xh(n.fields[s])}`;return i+"}"}(t.mapValue):oe()}function Sl(t){switch(Wr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Mu(t);return e?16+Sl(e):16;case 5:return 2*t.stringValue.length;case 6:return qr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Sl(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Pi(r.fields,(o,s)=>{i+=o.length+Sl(s)}),i}(t.mapValue);default:throw oe()}}function fg(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Yh(t){return!!t&&"integerValue"in t}function yf(t){return!!t&&"arrayValue"in t}function pg(t){return!!t&&"nullValue"in t}function mg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Il(t){return!!t&&"mapValue"in t}function UR(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ns(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Pi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ns(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ns(t.arrayValue.values[n]);return e}return Object.assign({},t)}function jR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.value=e}static empty(){return new hn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Il(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ns(n)}setAll(e){let n=_t.emptyPath(),r={},i=[];e.forEach((s,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}s?r[l.lastSegment()]=Ns(s):i.push(l.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());Il(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Hn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Il(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Pi(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new hn(Ns(this.value))}}function G_(t){const e=[];return Pi(t.fields,(n,r)=>{const i=new _t([n]);if(Il(r)){const o=G_(r.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new An(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,n,r,i,o,s,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=l}static newInvalidDocument(e){return new Dt(e,0,ae.min(),ae.min(),ae.min(),hn.empty(),0)}static newFoundDocument(e,n,r,i){return new Dt(e,1,n,ae.min(),r,i,0)}static newNoDocument(e,n){return new Dt(e,2,n,ae.min(),ae.min(),hn.empty(),0)}static newUnknownDocument(e,n){return new Dt(e,3,n,ae.min(),ae.min(),hn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,n){this.position=e,this.inclusive=n}}function gg(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(o.field.isKeyField()?r=ne.comparator(ne.fromName(s.referenceValue),n.key):r=Co(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function yg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Hn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,n="asc"){this.field=e,this.dir=n}}function zR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{}class Ze extends K_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new $R(e,n,r):n==="array-contains"?new WR(e,r):n==="in"?new GR(e,r):n==="not-in"?new KR(e,r):n==="array-contains-any"?new QR(e,r):new Ze(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new HR(e,r):new qR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Co(n,this.value)):n!==null&&Wr(this.value)===Wr(n)&&this.matchesComparison(Co(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return oe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Dn extends K_{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Dn(e,n)}matches(e){return Q_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Q_(t){return t.op==="and"}function X_(t){return BR(t)&&Q_(t)}function BR(t){for(const e of t.filters)if(e instanceof Dn)return!1;return!0}function Jh(t){if(t instanceof Ze)return t.field.canonicalString()+t.op.toString()+Po(t.value);if(X_(t))return t.filters.map(e=>Jh(e)).join(",");{const e=t.filters.map(n=>Jh(n)).join(",");return`${t.op}(${e})`}}function Y_(t,e){return t instanceof Ze?function(r,i){return i instanceof Ze&&r.op===i.op&&r.field.isEqual(i.field)&&Hn(r.value,i.value)}(t,e):t instanceof Dn?function(r,i){return i instanceof Dn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,l)=>o&&Y_(s,i.filters[l]),!0):!1}(t,e):void oe()}function J_(t){return t instanceof Ze?function(n){return`${n.field.canonicalString()} ${n.op} ${Po(n.value)}`}(t):t instanceof Dn?function(n){return n.op.toString()+" {"+n.getFilters().map(J_).join(" ,")+"}"}(t):"Filter"}class $R extends Ze{constructor(e,n,r){super(e,n,r),this.key=ne.fromName(r.referenceValue)}matches(e){const n=ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class HR extends Ze{constructor(e,n){super(e,"in",n),this.keys=Z_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class qR extends Ze{constructor(e,n){super(e,"not-in",n),this.keys=Z_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Z_(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ne.fromName(r.referenceValue))}class WR extends Ze{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return yf(n)&&aa(n.arrayValue,this.value)}}class GR extends Ze{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&aa(this.value.arrayValue,n)}}class KR extends Ze{constructor(e,n){super(e,"not-in",n)}matches(e){if(aa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!aa(this.value.arrayValue,n)}}class QR extends Ze{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!yf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>aa(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e,n=null,r=[],i=[],o=null,s=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=l,this.ue=null}}function vg(t,e=null,n=[],r=[],i=null,o=null,s=null){return new XR(t,e,n,r,i,o,s)}function vf(t){const e=le(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Jh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Lu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Po(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Po(r)).join(",")),e.ue=n}return e.ue}function _f(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!zR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Y_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!yg(t.startAt,e.startAt)&&yg(t.endAt,e.endAt)}function Zh(t){return ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e,n=null,r=[],i=[],o=null,s="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function YR(t,e,n,r,i,o,s,l){return new ya(t,e,n,r,i,o,s,l)}function e0(t){return new ya(t)}function _g(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function t0(t){return t.collectionGroup!==null}function Vs(t){const e=le(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let l=new at(_t.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new au(o,r))}),n.has(_t.keyField().canonicalString())||e.ce.push(new au(_t.keyField(),r))}return e.ce}function Bn(t){const e=le(t);return e.le||(e.le=JR(e,Vs(t))),e.le}function JR(t,e){if(t.limitType==="F")return vg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new au(i.field,o)});const n=t.endAt?new su(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new su(t.startAt.position,t.startAt.inclusive):null;return vg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ed(t,e){const n=t.filters.concat([e]);return new ya(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function td(t,e,n){return new ya(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ou(t,e){return _f(Bn(t),Bn(e))&&t.limitType===e.limitType}function n0(t){return`${vf(Bn(t))}|lt:${t.limitType}`}function Wi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>J_(i)).join(", ")}]`),Lu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Po(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Po(i)).join(",")),`Target(${r})`}(Bn(t))}; limitType=${t.limitType})`}function Fu(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ne.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of Vs(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,l,u){const h=gg(s,l,u);return s.inclusive?h<=0:h<0}(r.startAt,Vs(r),i)||r.endAt&&!function(s,l,u){const h=gg(s,l,u);return s.inclusive?h>=0:h>0}(r.endAt,Vs(r),i))}(t,e)}function ZR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function r0(t){return(e,n)=>{let r=!1;for(const i of Vs(t)){const o=eA(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function eA(t,e,n){const r=t.field.isKeyField()?ne.comparator(e.key,n.key):function(o,s,l){const u=s.data.field(o),h=l.data.field(o);return u!==null&&h!==null?Co(u,h):oe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return oe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Pi(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return q_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA=new $e(ne.comparator);function cr(){return tA}const i0=new $e(ne.comparator);function ws(...t){let e=i0;for(const n of t)e=e.insert(n.key,n);return e}function o0(t){let e=i0;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function pi(){return Ls()}function s0(){return Ls()}function Ls(){return new ki(t=>t.toString(),(t,e)=>t.isEqual(e))}const nA=new $e(ne.comparator),rA=new at(ne.comparator);function pe(...t){let e=rA;for(const n of t)e=e.add(n);return e}const iA=new at(ge);function oA(){return iA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ef(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ou(e)?"-0":e}}function a0(t){return{integerValue:""+t}}function sA(t,e){return LR(e)?a0(e):Ef(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(){this._=void 0}}function aA(t,e,n){return t instanceof lu?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&gf(o)&&(o=Mu(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof la?u0(t,e):t instanceof ua?c0(t,e):function(i,o){const s=l0(i,o),l=Eg(s)+Eg(i.Pe);return Yh(s)&&Yh(i.Pe)?a0(l):Ef(i.serializer,l)}(t,e)}function lA(t,e,n){return t instanceof la?u0(t,e):t instanceof ua?c0(t,e):n}function l0(t,e){return t instanceof uu?function(r){return Yh(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class lu extends bu{}class la extends bu{constructor(e){super(),this.elements=e}}function u0(t,e){const n=h0(e);for(const r of t.elements)n.some(i=>Hn(i,r))||n.push(r);return{arrayValue:{values:n}}}class ua extends bu{constructor(e){super(),this.elements=e}}function c0(t,e){let n=h0(e);for(const r of t.elements)n=n.filter(i=>!Hn(i,r));return{arrayValue:{values:n}}}class uu extends bu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Eg(t){return Ge(t.integerValue||t.doubleValue)}function h0(t){return yf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function uA(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof la&&i instanceof la||r instanceof ua&&i instanceof ua?Ao(r.elements,i.elements,Hn):r instanceof uu&&i instanceof uu?Hn(r.Pe,i.Pe):r instanceof lu&&i instanceof lu}(t.transform,e.transform)}class cA{constructor(e,n){this.version=e,this.transformResults=n}}class rr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new rr}static exists(e){return new rr(void 0,e)}static updateTime(e){return new rr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Uu{}function d0(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new p0(t.key,rr.none()):new va(t.key,t.data,rr.none());{const n=t.data,r=hn.empty();let i=new at(_t.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Di(t.key,r,new An(i.toArray()),rr.none())}}function hA(t,e,n){t instanceof va?function(i,o,s){const l=i.value.clone(),u=Tg(i.fieldTransforms,o,s.transformResults);l.setAll(u),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Di?function(i,o,s){if(!Rl(i.precondition,o))return void o.convertToUnknownDocument(s.version);const l=Tg(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(f0(i)),u.setAll(l),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Ms(t,e,n,r){return t instanceof va?function(o,s,l,u){if(!Rl(o.precondition,s))return l;const h=o.value.clone(),f=Sg(o.fieldTransforms,u,s);return h.setAll(f),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Di?function(o,s,l,u){if(!Rl(o.precondition,s))return l;const h=Sg(o.fieldTransforms,u,s),f=s.data;return f.setAll(f0(o)),f.setAll(h),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),l===null?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(o,s,l){return Rl(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l}(t,e,n)}function dA(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=l0(r.transform,i||null);o!=null&&(n===null&&(n=hn.empty()),n.set(r.field,o))}return n||null}function wg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ao(r,i,(o,s)=>uA(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class va extends Uu{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Di extends Uu{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function f0(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Tg(t,e,n){const r=new Map;Se(t.length===n.length);for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,l=e.data.field(o.field);r.set(o.field,lA(s,l,n[i]))}return r}function Sg(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,aA(o,s,e))}return r}class p0 extends Uu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class fA extends Uu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&hA(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ms(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ms(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=s0();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let l=this.applyToLocalView(s,o.mutatedFields);l=n.has(i.key)?null:l;const u=d0(s,l);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),pe())}isEqual(e){return this.batchId===e.batchId&&Ao(this.mutations,e.mutations,(n,r)=>wg(n,r))&&Ao(this.baseMutations,e.baseMutations,(n,r)=>wg(n,r))}}class wf{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Se(e.mutations.length===r.length);let i=function(){return nA}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new wf(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xe,ve;function yA(t){switch(t){default:return oe();case b.CANCELLED:case b.UNKNOWN:case b.DEADLINE_EXCEEDED:case b.RESOURCE_EXHAUSTED:case b.INTERNAL:case b.UNAVAILABLE:case b.UNAUTHENTICATED:return!1;case b.INVALID_ARGUMENT:case b.NOT_FOUND:case b.ALREADY_EXISTS:case b.PERMISSION_DENIED:case b.FAILED_PRECONDITION:case b.ABORTED:case b.OUT_OF_RANGE:case b.UNIMPLEMENTED:case b.DATA_LOSS:return!0}}function m0(t){if(t===void 0)return ur("GRPC error has no .code"),b.UNKNOWN;switch(t){case Xe.OK:return b.OK;case Xe.CANCELLED:return b.CANCELLED;case Xe.UNKNOWN:return b.UNKNOWN;case Xe.DEADLINE_EXCEEDED:return b.DEADLINE_EXCEEDED;case Xe.RESOURCE_EXHAUSTED:return b.RESOURCE_EXHAUSTED;case Xe.INTERNAL:return b.INTERNAL;case Xe.UNAVAILABLE:return b.UNAVAILABLE;case Xe.UNAUTHENTICATED:return b.UNAUTHENTICATED;case Xe.INVALID_ARGUMENT:return b.INVALID_ARGUMENT;case Xe.NOT_FOUND:return b.NOT_FOUND;case Xe.ALREADY_EXISTS:return b.ALREADY_EXISTS;case Xe.PERMISSION_DENIED:return b.PERMISSION_DENIED;case Xe.FAILED_PRECONDITION:return b.FAILED_PRECONDITION;case Xe.ABORTED:return b.ABORTED;case Xe.OUT_OF_RANGE:return b.OUT_OF_RANGE;case Xe.UNIMPLEMENTED:return b.UNIMPLEMENTED;case Xe.DATA_LOSS:return b.DATA_LOSS;default:return oe()}}(ve=Xe||(Xe={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A=new br([4294967295,4294967295],0);function Ig(t){const e=vA().encode(t),n=new F_;return n.update(e),new Uint8Array(n.digest())}function Rg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new br([n,r],0),new br([i,o],0)]}class Tf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ts(`Invalid padding: ${n}`);if(r<0)throw new Ts(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ts(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ts(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ie=br.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(br.fromNumber(r)));return i.compare(_A)===1&&(i=new br([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}Ee(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=Ig(e),[r,i]=Rg(n);for(let o=0;o<this.hashCount;o++){const s=this.de(r,i,o);if(!this.Ee(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new Tf(o,i,n);return r.forEach(l=>s.insert(l)),s}insert(e){if(this.Te===0)return;const n=Ig(e),[r,i]=Rg(n);for(let o=0;o<this.hashCount;o++){const s=this.de(r,i,o);this.Ae(s)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ts extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,_a.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ju(ae.min(),i,new $e(ge),cr(),pe())}}class _a{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new _a(r,n,pe(),pe(),pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class g0{constructor(e,n){this.targetId=e,this.me=n}}class y0{constructor(e,n,r=Tt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Ag{constructor(){this.fe=0,this.ge=Cg(),this.pe=Tt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=pe(),n=pe(),r=pe();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:oe()}}),new _a(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Cg()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Se(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class EA{constructor(e){this.Be=e,this.Le=new Map,this.ke=cr(),this.qe=sl(),this.Qe=sl(),this.Ke=new $e(ge)}$e(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(n,e.Ve):this.We(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.We(n,e.key,e.Ve)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.je(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.De(e.resumeToken));break;default:oe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Le.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.me.count,i=this.Ye(n);if(i){const o=i.target;if(Zh(o))if(r===0){const s=new ne(o.path);this.We(n,s,Dt.newNoDocument(s,ae.min()))}else Se(r===1);else{const s=this.Ze(n);if(s!==r){const l=this.Xe(e),u=l?this.et(l,e,s):1;if(u!==0){this.He(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,h)}}}}}Xe(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,l;try{s=qr(r).toUint8Array()}catch(u){if(u instanceof W_)return Ro("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Tf(s,i,o)}catch(u){return Ro(u instanceof Ts?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Te===0?null:l}et(e,n,r){return n.me.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Be.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.Be.nt(),l=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(l)||(this.We(n,o,null),i++)}),i}it(e){const n=new Map;this.Le.forEach((o,s)=>{const l=this.Ye(s);if(l){if(o.current&&Zh(l.target)){const u=new ne(l.target.path);this.st(u).has(s)||this.ot(s,u)||this.We(s,u,Dt.newNoDocument(u,e))}o.be&&(n.set(s,o.ve()),o.Ce())}});let r=pe();this.Qe.forEach((o,s)=>{let l=!0;s.forEachWhile(u=>{const h=this.Ye(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));const i=new ju(e,n,this.Ke,this.ke,r);return this.ke=cr(),this.qe=sl(),this.Qe=sl(),this.Ke=new $e(ge),i}Ue(e,n){if(!this.je(e))return;const r=this.ot(e,n.key)?2:0;this.ze(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.ot(e,n)?i.Fe(n,1):i.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(e)),this.Qe=this.Qe.insert(n,this._t(n).add(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Le.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let n=this.Le.get(e);return n||(n=new Ag,this.Le.set(e,n)),n}_t(e){let n=this.Qe.get(e);return n||(n=new at(ge),this.Qe=this.Qe.insert(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new at(ge),this.qe=this.qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.Le.get(e);return n&&n.Se?null:this.Be.ut(e)}He(e){this.Le.set(e,new Ag),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}ot(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}}function sl(){return new $e(ne.comparator)}function Cg(){return new $e(ne.comparator)}const wA={asc:"ASCENDING",desc:"DESCENDING"},TA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},SA={and:"AND",or:"OR"};class IA{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function nd(t,e){return t.useProto3Json||Lu(e)?e:{value:e}}function cu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function v0(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function RA(t,e){return cu(t,e.toTimestamp())}function $n(t){return Se(!!t),ae.fromTimestamp(function(n){const r=Hr(n);return new st(r.seconds,r.nanos)}(t))}function Sf(t,e){return rd(t,e).canonicalString()}function rd(t,e){const n=function(i){return new Me(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function _0(t){const e=Me.fromString(t);return Se(I0(e)),e}function id(t,e){return Sf(t.databaseId,e.path)}function zc(t,e){const n=_0(e);if(n.get(1)!==t.databaseId.projectId)throw new J(b.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new J(b.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ne(w0(n))}function E0(t,e){return Sf(t.databaseId,e)}function AA(t){const e=_0(t);return e.length===4?Me.emptyPath():w0(e)}function od(t){return new Me(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function w0(t){return Se(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Pg(t,e,n){return{name:id(t,e),fields:n.value.mapValue.fields}}function CA(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:oe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(h,f){return h.useProto3Json?(Se(f===void 0||typeof f=="string"),Tt.fromBase64String(f||"")):(Se(f===void 0||f instanceof Buffer||f instanceof Uint8Array),Tt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,l=s&&function(h){const f=h.code===void 0?b.UNKNOWN:m0(h.code);return new J(f,h.message||"")}(s);n=new y0(r,i,o,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=zc(t,r.document.name),o=$n(r.document.updateTime),s=r.document.createTime?$n(r.document.createTime):ae.min(),l=new hn({mapValue:{fields:r.document.fields}}),u=Dt.newFoundDocument(i,o,s,l),h=r.targetIds||[],f=r.removedTargetIds||[];n=new Al(h,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=zc(t,r.document),o=r.readTime?$n(r.readTime):ae.min(),s=Dt.newNoDocument(i,o),l=r.removedTargetIds||[];n=new Al([],l,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=zc(t,r.document),o=r.removedTargetIds||[];n=new Al([],o,i,null)}else{if(!("filter"in e))return oe();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new gA(i,o),l=r.targetId;n=new g0(l,s)}}return n}function PA(t,e){let n;if(e instanceof va)n={update:Pg(t,e.key,e.value)};else if(e instanceof p0)n={delete:id(t,e.key)};else if(e instanceof Di)n={update:Pg(t,e.key,e.data),updateMask:FA(e.fieldMask)};else{if(!(e instanceof fA))return oe();n={verify:id(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const l=s.transform;if(l instanceof lu)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof la)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ua)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof uu)return{fieldPath:s.field.canonicalString(),increment:l.Pe};throw oe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:RA(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:oe()}(t,e.precondition)),n}function kA(t,e){return t&&t.length>0?(Se(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?$n(i.updateTime):$n(o);return s.isEqual(ae.min())&&(s=$n(o)),new cA(s,i.transformResults||[])}(n,e))):[]}function DA(t,e){return{documents:[E0(t,e.path)]}}function xA(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=E0(t,i);const o=function(h){if(h.length!==0)return S0(Dn.create(h,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(h){if(h.length!==0)return h.map(f=>function(y){return{field:Gi(y.field),direction:LA(y.dir)}}(f))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const l=nd(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ct:n,parent:i}}function NA(t){let e=AA(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Se(r===1);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let o=[];n.where&&(o=function(p){const y=T0(p);return y instanceof Dn&&X_(y)?y.getFilters():[y]}(n.where));let s=[];n.orderBy&&(s=function(p){return p.map(y=>function(P){return new au(Ki(P.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(y))}(n.orderBy));let l=null;n.limit&&(l=function(p){let y;return y=typeof p=="object"?p.value:p,Lu(y)?null:y}(n.limit));let u=null;n.startAt&&(u=function(p){const y=!!p.before,T=p.values||[];return new su(T,y)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const y=!p.before,T=p.values||[];return new su(T,y)}(n.endAt)),YR(e,i,s,o,l,"F",u,h)}function VA(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function T0(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ki(n.unaryFilter.field);return Ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ki(n.unaryFilter.field);return Ze.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ki(n.unaryFilter.field);return Ze.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Ki(n.unaryFilter.field);return Ze.create(s,"!=",{nullValue:"NULL_VALUE"});default:return oe()}}(t):t.fieldFilter!==void 0?function(n){return Ze.create(Ki(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return oe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Dn.create(n.compositeFilter.filters.map(r=>T0(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return oe()}}(n.compositeFilter.op))}(t):oe()}function LA(t){return wA[t]}function MA(t){return TA[t]}function OA(t){return SA[t]}function Gi(t){return{fieldPath:t.canonicalString()}}function Ki(t){return _t.fromServerFormat(t.fieldPath)}function S0(t){return t instanceof Ze?function(n){if(n.op==="=="){if(mg(n.value))return{unaryFilter:{field:Gi(n.field),op:"IS_NAN"}};if(pg(n.value))return{unaryFilter:{field:Gi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(mg(n.value))return{unaryFilter:{field:Gi(n.field),op:"IS_NOT_NAN"}};if(pg(n.value))return{unaryFilter:{field:Gi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gi(n.field),op:MA(n.op),value:n.value}}}(t):t instanceof Dn?function(n){const r=n.getFilters().map(i=>S0(i));return r.length===1?r[0]:{compositeFilter:{op:OA(n.op),filters:r}}}(t):oe()}function FA(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function I0(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e,n,r,i,o=ae.min(),s=ae.min(),l=Tt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Cr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e){this.ht=e}}function UA(t){const e=NA({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?td(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(){this.ln=new zA}addToCollectionParentIndex(e,n){return this.ln.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.ln.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve($r.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve($r.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class zA{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new at(Me.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new at(Me.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class jt{static withCacheSize(e){return new jt(e,jt.DEFAULT_COLLECTION_PERCENTILE,jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jt.DEFAULT_COLLECTION_PERCENTILE=10,jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jt.DEFAULT=new jt(41943040,jt.DEFAULT_COLLECTION_PERCENTILE,jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jt.DISABLED=new jt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new ko(0)}static Qn(){return new ko(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg([t,e],[n,r]){const i=ge(t,n);return i===0?ge(e,r):i}class BA{constructor(e){this.Gn=e,this.buffer=new at(Dg),this.zn=0}jn(){return++this.zn}Hn(e){const n=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Dg(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class $A{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){G("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Uo(n)?G("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await bo(n)}await this.Yn(3e5)})}}class HA{constructor(e,n){this.Zn=e,this.params=n}calculateTargetCount(e,n){return this.Zn.Xn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return F.resolve(Vu.oe);const r=new BA(n);return this.Zn.forEachTarget(e,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(e,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(G("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(kg)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(G("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kg):this.tr(e,n))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,n){let r,i,o,s,l,u,h;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(G("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,l=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(h=Date.now(),qi()<=_e.DEBUG&&G("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(l-s)+`ms
	Removed ${o} targets in `+(u-l)+`ms
	Removed ${p} documents in `+(h-u)+`ms
Total Duration: ${h-f}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}}function qA(t,e){return new HA(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(){this.changes=new ki(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Dt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ms(r.mutation,i,An.empty(),st.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,pe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=pe()){const i=pi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=ws();return o.forEach((l,u)=>{s=s.insert(l,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=pi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,pe()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,l)=>{n.set(s,l)})})}computeViews(e,n,r,i){let o=cr();const s=Ls(),l=function(){return Ls()}();return n.forEach((u,h)=>{const f=r.get(h.key);i.has(h.key)&&(f===void 0||f.mutation instanceof Di)?o=o.insert(h.key,h):f!==void 0?(s.set(h.key,f.mutation.getFieldMask()),Ms(f.mutation,h,f.mutation.getFieldMask(),st.now())):s.set(h.key,An.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((h,f)=>s.set(h,f)),n.forEach((h,f)=>{var p;return l.set(h,new GA(f,(p=s.get(h))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Ls();let i=new $e((s,l)=>s-l),o=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const l of s)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let f=r.get(u)||An.empty();f=l.applyToLocalView(h,f),r.set(u,f);const p=(i.get(l.batchId)||pe()).add(u);i=i.insert(l.batchId,p)})}).next(()=>{const s=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,f=u.value,p=s0();f.forEach(y=>{if(!o.has(y)){const T=d0(n.get(y),r.get(y));T!==null&&p.set(y,T),o=o.add(y)}}),s.push(this.documentOverlayCache.saveOverlays(e,h,p))}return F.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return ne.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):t0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):F.resolve(pi());let l=-1,u=o;return s.next(h=>F.forEach(h,(f,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),o.get(f)?F.resolve():this.remoteDocumentCache.getEntry(e,f).next(y=>{u=u.insert(f,y)}))).next(()=>this.populateOverlays(e,h,o)).next(()=>this.computeViews(e,u,h,pe())).next(f=>({batchId:l,changes:o0(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ne(n)).next(r=>{let i=ws();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=ws();return this.indexManager.getCollectionParents(e,o).next(l=>F.forEach(l,u=>{const h=function(p,y){return new ya(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(f=>{f.forEach((p,y)=>{s=s.insert(p,y)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,h)=>{const f=h.getKey();s.get(f)===null&&(s=s.insert(f,Dt.newInvalidDocument(f)))});let l=ws();return s.forEach((u,h)=>{const f=o.get(u);f!==void 0&&Ms(f.mutation,h,An.empty(),st.now()),Fu(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,n){return F.resolve(this.Tr.get(n))}saveBundleMetadata(e,n){return this.Tr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:$n(i.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Ir.get(n))}saveNamedQuery(e,n){return this.Ir.set(n.name,function(i){return{name:i.name,query:UA(i.bundledQuery),readTime:$n(i.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(){this.overlays=new $e(ne.comparator),this.dr=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=pi();return F.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.Tt(e,n,o)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.dr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.dr.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const i=pi(),o=n.length+1,s=new ne(n.child("")),l=this.overlays.getIteratorFrom(s);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return F.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new $e((h,f)=>h-f);const s=this.overlays.getIterator();for(;s.hasNext();){const h=s.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let f=o.get(h.largestBatchId);f===null&&(f=pi(),o=o.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const l=pi(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,f)=>l.set(h,f)),!(l.size()>=i)););return F.resolve(l)}Tt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.dr.get(i.largestBatchId).delete(r.key);this.dr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new mA(n,r));let o=this.dr.get(n);o===void 0&&(o=pe(),this.dr.set(n,o)),this.dr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(){this.sessionToken=Tt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(){this.Er=new at(lt.Ar),this.Rr=new at(lt.Vr)}isEmpty(){return this.Er.isEmpty()}addReference(e,n){const r=new lt(e,n);this.Er=this.Er.add(r),this.Rr=this.Rr.add(r)}mr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.gr(new lt(e,n))}pr(e,n){e.forEach(r=>this.removeReference(r,n))}yr(e){const n=new ne(new Me([])),r=new lt(n,e),i=new lt(n,e+1),o=[];return this.Rr.forEachInRange([r,i],s=>{this.gr(s),o.push(s.key)}),o}wr(){this.Er.forEach(e=>this.gr(e))}gr(e){this.Er=this.Er.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const n=new ne(new Me([])),r=new lt(n,e),i=new lt(n,e+1);let o=pe();return this.Rr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new lt(e,0),r=this.Er.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class lt{constructor(e,n){this.key=e,this.br=n}static Ar(e,n){return ne.comparator(e.key,n.key)||ge(e.br,n.br)}static Vr(e,n){return ge(e.br,n.br)||ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new at(lt.Ar)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new pA(o,n,r,i);this.mutationQueue.push(s);for(const l of i)this.vr=this.vr.add(new lt(l.key,o)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return F.resolve(s)}lookupMutationBatch(e,n){return F.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Fr(r),o=i<0?0:i;return F.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new lt(n,0),i=new lt(n,Number.POSITIVE_INFINITY),o=[];return this.vr.forEachInRange([r,i],s=>{const l=this.Cr(s.br);o.push(l)}),F.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new at(ge);return n.forEach(i=>{const o=new lt(i,0),s=new lt(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([o,s],l=>{r=r.add(l.br)})}),F.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;ne.isDocumentKey(o)||(o=o.child(""));const s=new lt(new ne(o),0);let l=new at(ge);return this.vr.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(l=l.add(u.br)),!0)},s),F.resolve(this.Mr(l))}Mr(e){const n=[];return e.forEach(r=>{const i=this.Cr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Se(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return F.forEach(n.mutations,i=>{const o=new lt(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.vr=r})}Bn(e){}containsKey(e,n){const r=new lt(n,0),i=this.vr.firstAfterOrEqual(r);return F.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Or(e,n){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const n=this.Fr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e){this.Nr=e,this.docs=function(){return new $e(ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Nr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():Dt.newInvalidDocument(n))}getEntries(e,n){let r=cr();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Dt.newInvalidDocument(i))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=cr();const s=n.path,l=new ne(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:f}}=u.getNext();if(!s.isPrefixOf(h.path))break;h.path.length>s.length+1||DR(kR(f),r)<=0||(i.has(f.key)||Fu(n,f))&&(o=o.insert(f.key,f.mutableCopy()))}return F.resolve(o)}getAllFromCollectionGroup(e,n,r,i){oe()}Br(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new eC(this)}getSize(e){return F.resolve(this.size)}}class eC extends WA{constructor(e){super(),this.hr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.hr.addEntry(e,i)):this.hr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.hr.getEntry(e,n)}getAllFromCache(e,n){return this.hr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e){this.persistence=e,this.Lr=new ki(n=>vf(n),_f),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.kr=0,this.qr=new If,this.targetCount=0,this.Qr=ko.qn()}forEachTarget(e,n){return this.Lr.forEach((r,i)=>n(i)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.kr&&(this.kr=n),F.resolve()}Un(e){this.Lr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Qr=new ko(n),this.highestTargetId=n),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,n){return this.Un(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Un(n),F.resolve()}removeTargetData(e,n){return this.Lr.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.Lr.forEach((s,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Lr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),F.waitFor(o).next(()=>i)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Lr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.qr.mr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.qr.pr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),F.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.qr.yr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.qr.Sr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e,n){this.Kr={},this.overlays={},this.$r=new Vu(0),this.Ur=!1,this.Ur=!0,this.Wr=new YA,this.referenceDelegate=e(this),this.Gr=new tC(this),this.indexManager=new jA,this.remoteDocumentCache=function(i){return new ZA(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new bA(n),this.jr=new QA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new XA,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Kr[e.toKey()];return r||(r=new JA(n,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,n,r){G("MemoryPersistence","Starting transaction:",e);const i=new nC(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(o=>this.referenceDelegate.Jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Yr(e,n){return F.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,n)))}}class nC extends NR{constructor(e){super(),this.currentSequenceNumber=e}}class Rf{constructor(e){this.persistence=e,this.Zr=new If,this.Xr=null}static ei(e){return new Rf(e)}get ti(){if(this.Xr)return this.Xr;throw oe()}addReference(e,n,r){return this.Zr.addReference(r,n),this.ti.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Zr.removeReference(r,n),this.ti.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.ti.add(n.toString()),F.resolve()}removeTarget(e,n){this.Zr.yr(n.targetId).forEach(i=>this.ti.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.ti.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Hr(){this.Xr=new Set}Jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.ti,r=>{const i=ne.fromPath(r);return this.ni(e,i).next(o=>{o||n.removeEntry(i,ae.min())})}).next(()=>(this.Xr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ni(e,n).next(r=>{r?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(e){return 0}ni(e,n){return F.or([()=>F.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Yr(e,n)])}}class hu{constructor(e,n){this.persistence=e,this.ri=new ki(r=>MR(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=qA(this,n)}static ei(e,n){return new hu(e,n)}Hr(){}Jr(e){return F.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}Xn(e){const n=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}nr(e){let n=0;return this.er(e,r=>{n++}).next(()=>n)}er(e,n){return F.forEach(this.ri,(r,i)=>this.ir(e,r,i).next(o=>o?F.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.Br(e,s=>this.ir(e,s,n).next(l=>{l||(r++,o.removeEntry(s,ae.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.ri.set(n,e.currentSequenceNumber),F.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),F.resolve()}removeReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,n){return this.ri.set(n,e.currentSequenceNumber),F.resolve()}zr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Sl(e.data.value)),n}ir(e,n,r){return F.or([()=>this.persistence.Yr(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.ri.get(n);return F.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Wi=r,this.Gi=i}static zi(e,n){let r=pe(),i=pe();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Af(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return tI()?8:VR(ZS())>0?6:4}()}initialize(e,n){this.Zi=e,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.Xi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.es(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new rC;return this.ts(e,n,s).next(l=>{if(o.result=l,this.Hi)return this.ns(e,n,s,l.size)})}).next(()=>o.result)}ns(e,n,r,i){return r.documentReadCount<this.Ji?(qi()<=_e.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",Wi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),F.resolve()):(qi()<=_e.DEBUG&&G("QueryEngine","Query:",Wi(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(qi()<=_e.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",Wi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bn(n))):F.resolve())}Xi(e,n){if(_g(n))return F.resolve(null);let r=Bn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=td(n,null,"F"),r=Bn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=pe(...o);return this.Zi.getDocuments(e,s).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.rs(n,l);return this.ss(n,h,s,u.readTime)?this.Xi(e,td(n,null,"F")):this.os(e,h,n,u)}))})))}es(e,n,r,i){return _g(n)||i.isEqual(ae.min())?F.resolve(null):this.Zi.getDocuments(e,r).next(o=>{const s=this.rs(n,o);return this.ss(n,s,r,i)?F.resolve(null):(qi()<=_e.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Wi(n)),this.os(e,s,n,PR(i,-1)).next(l=>l))})}rs(e,n){let r=new at(r0(e));return n.forEach((i,o)=>{Fu(e,o)&&(r=r.add(o))}),r}ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ts(e,n,r){return qi()<=_e.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",Wi(n)),this.Zi.getDocumentsMatchingQuery(e,n,$r.min(),r)}os(e,n,r,i){return this.Zi.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e,n,r,i){this.persistence=e,this._s=n,this.serializer=i,this.us=new $e(ge),this.cs=new ki(o=>vf(o),_f),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new KA(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.us))}}function sC(t,e,n,r){return new oC(t,e,n,r)}async function A0(t,e){const n=le(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ps(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],l=[];let u=pe();for(const h of i){s.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}for(const h of o){l.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(h=>({Ts:h,removedBatchIds:s,addedBatchIds:l}))})})}function aC(t,e){const n=le(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.hs.newChangeBuffer({trackRemovals:!0});return function(l,u,h,f){const p=h.batch,y=p.keys();let T=F.resolve();return y.forEach(P=>{T=T.next(()=>f.getEntry(u,P)).next(D=>{const V=h.docVersions.get(P);Se(V!==null),D.version.compareTo(V)<0&&(p.applyToRemoteDocument(D,h),D.isValidDocument()&&(D.setReadTime(h.commitVersion),f.addEntry(D)))})}),T.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=pe();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function C0(t){const e=le(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Gr.getLastRemoteSnapshotVersion(n))}function lC(t,e){const n=le(t),r=e.snapshotVersion;let i=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.hs.newChangeBuffer({trackRemovals:!0});i=n.us;const l=[];e.targetChanges.forEach((f,p)=>{const y=i.get(p);if(!y)return;l.push(n.Gr.removeMatchingKeys(o,f.removedDocuments,p).next(()=>n.Gr.addMatchingKeys(o,f.addedDocuments,p)));let T=y.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?T=T.withResumeToken(Tt.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):f.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(f.resumeToken,r)),i=i.insert(p,T),function(D,V,I){return D.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=3e8?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(y,T,f)&&l.push(n.Gr.updateTargetData(o,T))});let u=cr(),h=pe();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(o,f))}),l.push(uC(o,s,e.documentUpdates).next(f=>{u=f.Is,h=f.ds})),!r.isEqual(ae.min())){const f=n.Gr.getLastRemoteSnapshotVersion(o).next(p=>n.Gr.setTargetsMetadata(o,o.currentSequenceNumber,r));l.push(f)}return F.waitFor(l).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,h)).next(()=>u)}).then(o=>(n.us=i,o))}function uC(t,e,n){let r=pe(),i=pe();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=cr();return n.forEach((l,u)=>{const h=o.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(ae.min())?(e.removeEntry(l,u.readTime),s=s.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),s=s.insert(l,u)):G("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{Is:s,ds:i}})}function cC(t,e){const n=le(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function hC(t,e){const n=le(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Gr.getTargetData(r,e).next(o=>o?(i=o,F.resolve(i)):n.Gr.allocateTargetId(r).next(s=>(i=new Cr(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.us=n.us.insert(r.targetId,r),n.cs.set(e,r.targetId)),r})}async function sd(t,e,n){const r=le(t),i=r.us.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!Uo(s))throw s;G("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.us=r.us.remove(e),r.cs.delete(i.target)}function xg(t,e,n){const r=le(t);let i=ae.min(),o=pe();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,h,f){const p=le(u),y=p.cs.get(f);return y!==void 0?F.resolve(p.us.get(y)):p.Gr.getTargetData(h,f)}(r,s,Bn(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(s,l.targetId).next(u=>{o=u})}).next(()=>r._s.getDocumentsMatchingQuery(s,e,n?i:ae.min(),n?o:pe())).next(l=>(dC(r,ZR(e),l),{documents:l,Es:o})))}function dC(t,e,n){let r=t.ls.get(e)||ae.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.ls.set(e,r)}class Ng{constructor(){this.activeTargetIds=oA()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fC{constructor(){this._o=new Ng,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,n,r){this.ao[e]=n}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new Ng,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){G("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){G("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let al=null;function Bc(){return al===null?al=function(){return 268435456+Math.round(2147483648*Math.random())}():al++,"0x"+al.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ct="WebChannelConnection";class yC extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+n.host,this.Mo=`projects/${i}/databases/${o}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Oo(n,r,i,o,s){const l=Bc(),u=this.No(n,r.toUriEncodedString());G("RestConnection",`Sending RPC '${n}' ${l}:`,u,i);const h={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Bo(h,o,s),this.Lo(n,u,h,i).then(f=>(G("RestConnection",`Received RPC '${n}' ${l}: `,f),f),f=>{throw Ro("RestConnection",`RPC '${n}' ${l} failed with error: `,f,"url: ",u,"request:",i),f})}ko(n,r,i,o,s,l){return this.Oo(n,r,i,o,s)}Bo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Fo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}No(n,r){const i=mC[n];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Lo(e,n,r,i){const o=Bc();return new Promise((s,l)=>{const u=new b_;u.setWithCredentials(!0),u.listenOnce(U_.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Tl.NO_ERROR:const f=u.getResponseJson();G(Ct,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),s(f);break;case Tl.TIMEOUT:G(Ct,`RPC '${e}' ${o} timed out`),l(new J(b.DEADLINE_EXCEEDED,"Request time out"));break;case Tl.HTTP_ERROR:const p=u.getStatus();if(G(Ct,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const T=y==null?void 0:y.error;if(T&&T.status&&T.message){const P=function(V){const I=V.toLowerCase().replace(/_/g,"-");return Object.values(b).indexOf(I)>=0?I:b.UNKNOWN}(T.status);l(new J(P,T.message))}else l(new J(b.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new J(b.UNAVAILABLE,"Connection failed."));break;default:oe()}}finally{G(Ct,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(i);G(Ct,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",h,r,15)})}qo(e,n,r){const i=Bc(),o=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=B_(),l=z_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Bo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=o.join("");G(Ct,`Creating RPC '${e}' stream ${i}: ${f}`,u);const p=s.createWebChannel(f,u);let y=!1,T=!1;const P=new gC({Eo:V=>{T?G(Ct,`Not sending because RPC '${e}' stream ${i} is closed:`,V):(y||(G(Ct,`Opening RPC '${e}' stream ${i} transport.`),p.open(),y=!0),G(Ct,`RPC '${e}' stream ${i} sending:`,V),p.send(V))},Ao:()=>p.close()}),D=(V,I,_)=>{V.listen(I,R=>{try{_(R)}catch(M){setTimeout(()=>{throw M},0)}})};return D(p,Es.EventType.OPEN,()=>{T||(G(Ct,`RPC '${e}' stream ${i} transport opened.`),P.So())}),D(p,Es.EventType.CLOSE,()=>{T||(T=!0,G(Ct,`RPC '${e}' stream ${i} transport closed`),P.Do())}),D(p,Es.EventType.ERROR,V=>{T||(T=!0,Ro(Ct,`RPC '${e}' stream ${i} transport errored:`,V),P.Do(new J(b.UNAVAILABLE,"The operation could not be completed")))}),D(p,Es.EventType.MESSAGE,V=>{var I;if(!T){const _=V.data[0];Se(!!_);const R=_,M=(R==null?void 0:R.error)||((I=R[0])===null||I===void 0?void 0:I.error);if(M){G(Ct,`RPC '${e}' stream ${i} received error:`,M);const z=M.status;let H=function(E){const w=Xe[E];if(w!==void 0)return m0(w)}(z),m=M.message;H===void 0&&(H=b.INTERNAL,m="Unknown error status: "+z+" with message "+M.message),T=!0,P.Do(new J(H,m)),p.close()}else G(Ct,`RPC '${e}' stream ${i} received:`,_),P.vo(_)}}),D(l,j_.STAT_EVENT,V=>{V.stat===Qh.PROXY?G(Ct,`RPC '${e}' stream ${i} detected buffering proxy`):V.stat===Qh.NOPROXY&&G(Ct,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{P.bo()},0),P}}function $c(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zu(t){return new IA(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e,n,r=1e3,i=1.5,o=6e4){this.li=e,this.timerId=n,this.Qo=r,this.Ko=i,this.$o=o,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const n=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,n-r);i>0&&G("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e,n,r,i,o,s,l,u){this.li=e,this.Yo=r,this.Zo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new P0(e,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():n&&n.code===b.RESOURCE_EXHAUSTED?(ur(n.toString()),ur("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===b.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(n)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===n&&this.I_(r,i)},r=>{e(()=>{const i=new J(b.UNKNOWN,"Fetching auth token failed: "+r.message);return this.d_(i)})})}I_(e,n){const r=this.T_(this.Xo);this.stream=this.E_(e,n),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.d_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}d_(e){return G("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return n=>{this.li.enqueueAndForget(()=>this.Xo===e?n():(G("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class vC extends k0{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}E_(e,n){return this.connection.qo("Listen",e,n)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const n=CA(this.serializer,e),r=function(o){if(!("targetChange"in o))return ae.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?ae.min():s.readTime?$n(s.readTime):ae.min()}(e);return this.listener.R_(n,r)}V_(e){const n={};n.database=od(this.serializer),n.addTarget=function(o,s){let l;const u=s.target;if(l=Zh(u)?{documents:DA(o,u)}:{query:xA(o,u).ct},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){l.resumeToken=v0(o,s.resumeToken);const h=nd(o,s.expectedCount);h!==null&&(l.expectedCount=h)}else if(s.snapshotVersion.compareTo(ae.min())>0){l.readTime=cu(o,s.snapshotVersion.toTimestamp());const h=nd(o,s.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=VA(this.serializer,e);r&&(n.labels=r),this.c_(n)}m_(e){const n={};n.database=od(this.serializer),n.removeTarget=e,this.c_(n)}}class _C extends k0{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}E_(e,n){return this.connection.qo("Write",e,n)}A_(e){return Se(!!e.streamToken),this.lastStreamToken=e.streamToken,Se(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){Se(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const n=kA(e.writeResults,e.commitTime),r=$n(e.commitTime);return this.listener.y_(r,n)}w_(){const e={};e.database=od(this.serializer),this.c_(e)}g_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>PA(this.serializer,r))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new J(b.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,n,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Oo(e,rd(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new J(b.UNKNOWN,o.toString())})}ko(e,n,r,i,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.connection.ko(e,rd(n,r),i,s,l,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new J(b.UNKNOWN,s.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class wC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(ur(n),this.C_=!1):G("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.B_=[],this.L_=new Map,this.k_=new Set,this.q_=[],this.Q_=o,this.Q_.uo(s=>{r.enqueueAndForget(async()=>{xi(this)&&(G("RemoteStore","Restarting streams for network reachability change."),await async function(u){const h=le(u);h.k_.add(4),await Ea(h),h.K_.set("Unknown"),h.k_.delete(4),await Bu(h)}(this))})}),this.K_=new wC(r,i)}}async function Bu(t){if(xi(t))for(const e of t.q_)await e(!0)}async function Ea(t){for(const e of t.q_)await e(!1)}function D0(t,e){const n=le(t);n.L_.has(e.targetId)||(n.L_.set(e.targetId,e),Df(n)?kf(n):jo(n).s_()&&Pf(n,e))}function Cf(t,e){const n=le(t),r=jo(n);n.L_.delete(e),r.s_()&&x0(n,e),n.L_.size===0&&(r.s_()?r.a_():xi(n)&&n.K_.set("Unknown"))}function Pf(t,e){if(t.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}jo(t).V_(e)}function x0(t,e){t.U_.xe(e),jo(t).m_(e)}function kf(t){t.U_=new EA({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>t.L_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),jo(t).start(),t.K_.F_()}function Df(t){return xi(t)&&!jo(t).i_()&&t.L_.size>0}function xi(t){return le(t).k_.size===0}function N0(t){t.U_=void 0}async function SC(t){t.K_.set("Online")}async function IC(t){t.L_.forEach((e,n)=>{Pf(t,e)})}async function RC(t,e){N0(t),Df(t)?(t.K_.O_(e),kf(t)):t.K_.set("Unknown")}async function AC(t,e,n){if(t.K_.set("Online"),e instanceof y0&&e.state===2&&e.cause)try{await async function(i,o){const s=o.cause;for(const l of o.targetIds)i.L_.has(l)&&(await i.remoteSyncer.rejectListen(l,s),i.L_.delete(l),i.U_.removeTarget(l))}(t,e)}catch(r){G("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await du(t,r)}else if(e instanceof Al?t.U_.$e(e):e instanceof g0?t.U_.Je(e):t.U_.Ge(e),!n.isEqual(ae.min()))try{const r=await C0(t.localStore);n.compareTo(r)>=0&&await function(o,s){const l=o.U_.it(s);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const f=o.L_.get(h);f&&o.L_.set(h,f.withResumeToken(u.resumeToken,s))}}),l.targetMismatches.forEach((u,h)=>{const f=o.L_.get(u);if(!f)return;o.L_.set(u,f.withResumeToken(Tt.EMPTY_BYTE_STRING,f.snapshotVersion)),x0(o,u);const p=new Cr(f.target,u,h,f.sequenceNumber);Pf(o,p)}),o.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){G("RemoteStore","Failed to raise snapshot:",r),await du(t,r)}}async function du(t,e,n){if(!Uo(e))throw e;t.k_.add(1),await Ea(t),t.K_.set("Offline"),n||(n=()=>C0(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{G("RemoteStore","Retrying IndexedDB access"),await n(),t.k_.delete(1),await Bu(t)})}function V0(t,e){return e().catch(n=>du(t,n,e))}async function $u(t){const e=le(t),n=Gr(e);let r=e.B_.length>0?e.B_[e.B_.length-1].batchId:-1;for(;CC(e);)try{const i=await cC(e.localStore,r);if(i===null){e.B_.length===0&&n.a_();break}r=i.batchId,PC(e,i)}catch(i){await du(e,i)}L0(e)&&M0(e)}function CC(t){return xi(t)&&t.B_.length<10}function PC(t,e){t.B_.push(e);const n=Gr(t);n.s_()&&n.f_&&n.g_(e.mutations)}function L0(t){return xi(t)&&!Gr(t).i_()&&t.B_.length>0}function M0(t){Gr(t).start()}async function kC(t){Gr(t).w_()}async function DC(t){const e=Gr(t);for(const n of t.B_)e.g_(n.mutations)}async function xC(t,e,n){const r=t.B_.shift(),i=wf.from(r,e,n);await V0(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await $u(t)}async function NC(t,e){e&&Gr(t).f_&&await async function(r,i){if(function(s){return yA(s)&&s!==b.ABORTED}(i.code)){const o=r.B_.shift();Gr(r).__(),await V0(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await $u(r)}}(t,e),L0(t)&&M0(t)}async function Lg(t,e){const n=le(t);n.asyncQueue.verifyOperationInProgress(),G("RemoteStore","RemoteStore received new credentials");const r=xi(n);n.k_.add(3),await Ea(n),r&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.k_.delete(3),await Bu(n)}async function VC(t,e){const n=le(t);e?(n.k_.delete(2),await Bu(n)):e||(n.k_.add(2),await Ea(n),n.K_.set("Unknown"))}function jo(t){return t.W_||(t.W_=function(n,r,i){const o=le(n);return o.b_(),new vC(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Ro:SC.bind(null,t),mo:IC.bind(null,t),po:RC.bind(null,t),R_:AC.bind(null,t)}),t.q_.push(async e=>{e?(t.W_.__(),Df(t)?kf(t):t.K_.set("Unknown")):(await t.W_.stop(),N0(t))})),t.W_}function Gr(t){return t.G_||(t.G_=function(n,r,i){const o=le(n);return o.b_(),new _C(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Ro:()=>Promise.resolve(),mo:kC.bind(null,t),po:NC.bind(null,t),p_:DC.bind(null,t),y_:xC.bind(null,t)}),t.q_.push(async e=>{e?(t.G_.__(),await $u(t)):(await t.G_.stop(),t.B_.length>0&&(G("RemoteStore",`Stopping write stream with ${t.B_.length} pending writes`),t.B_=[]))})),t.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Ur,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,l=new xf(e,n,s,i,o);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J(b.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Nf(t,e){if(ur("AsyncQueue",`${e}: ${t}`),Uo(t))return new J(b.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{static emptySet(e){return new mo(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ne.comparator(n.key,r.key):(n,r)=>ne.comparator(n.key,r.key),this.keyedMap=ws(),this.sortedSet=new $e(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof mo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new mo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(){this.z_=new $e(ne.comparator)}track(e){const n=e.doc.key,r=this.z_.get(n);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(n,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(n):e.type===1&&r.type===2?this.z_=this.z_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):oe():this.z_=this.z_.insert(n,e)}j_(){const e=[];return this.z_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Do{constructor(e,n,r,i,o,s,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(l=>{s.push({type:0,doc:l})}),new Do(e,n,mo.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ou(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class MC{constructor(){this.queries=Og(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,r){const i=le(n),o=i.queries;i.queries=Og(),o.forEach((s,l)=>{for(const u of l.J_)u.onError(r)})})(this,new J(b.ABORTED,"Firestore shutting down"))}}function Og(){return new ki(t=>n0(t),Ou)}async function OC(t,e){const n=le(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.Y_()&&e.Z_()&&(r=2):(o=new LC,r=e.Z_()?0:1);try{switch(r){case 0:o.H_=await n.onListen(i,!0);break;case 1:o.H_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const l=Nf(s,`Initialization of query '${Wi(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,o),o.J_.push(e),e.ea(n.onlineState),o.H_&&e.ta(o.H_)&&Vf(n)}async function FC(t,e){const n=le(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.J_.indexOf(e);s>=0&&(o.J_.splice(s,1),o.J_.length===0?i=e.Z_()?0:1:!o.Y_()&&e.Z_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function bC(t,e){const n=le(t);let r=!1;for(const i of e){const o=i.query,s=n.queries.get(o);if(s){for(const l of s.J_)l.ta(i)&&(r=!0);s.H_=i}}r&&Vf(n)}function UC(t,e,n){const r=le(t),i=r.queries.get(e);if(i)for(const o of i.J_)o.onError(n);r.queries.delete(e)}function Vf(t){t.X_.forEach(e=>{e.next()})}var ad,Fg;(Fg=ad||(ad={})).na="default",Fg.Cache="cache";class jC{constructor(e,n,r){this.query=e,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Do(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ia?this.oa(e)&&(this.ra.next(e),n=!0):this._a(e,this.onlineState)&&(this.aa(e),n=!0),this.sa=e,n}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),n=!0),n}_a(e,n){if(!e.fromCache||!this.Z_())return!0;const r=n!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(e){e=Do.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==ad.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(e){this.key=e}}class F0{constructor(e){this.key=e}}class zC{constructor(e,n){this.query=e,this.Ea=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=pe(),this.mutatedKeys=pe(),this.Va=r0(e),this.ma=new mo(this.Va)}get fa(){return this.Ea}ga(e,n){const r=n?n.pa:new Mg,i=n?n.ma:this.ma;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{const y=i.get(f),T=Fu(this.query,p)?p:null,P=!!y&&this.mutatedKeys.has(y.key),D=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let V=!1;y&&T?y.data.isEqual(T.data)?P!==D&&(r.track({type:3,doc:T}),V=!0):this.ya(y,T)||(r.track({type:2,doc:T}),V=!0,(u&&this.Va(T,u)>0||h&&this.Va(T,h)<0)&&(l=!0)):!y&&T?(r.track({type:0,doc:T}),V=!0):y&&!T&&(r.track({type:1,doc:y}),V=!0,(u||h)&&(l=!0)),V&&(T?(s=s.add(T),o=D?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{ma:s,pa:r,ss:l,mutatedKeys:o}}ya(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const s=e.pa.j_();s.sort((f,p)=>function(T,P){const D=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oe()}};return D(T)-D(P)}(f.type,p.type)||this.Va(f.doc,p.doc)),this.wa(r),i=i!=null&&i;const l=n&&!i?this.Sa():[],u=this.Ra.size===0&&this.current&&!i?1:0,h=u!==this.Aa;return this.Aa=u,s.length!==0||h?{snapshot:new Do(this.query,e.ma,o,s,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:l}:{ba:l}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new Mg,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.Ea.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(n=>this.Ea=this.Ea.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ea=this.Ea.delete(n)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=pe(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const n=[];return e.forEach(r=>{this.Ra.has(r)||n.push(new F0(r))}),this.Ra.forEach(r=>{e.has(r)||n.push(new O0(r))}),n}va(e){this.Ea=e.Es,this.Ra=pe();const n=this.ga(e.documents);return this.applyChanges(n,!0)}Ca(){return Do.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class BC{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class $C{constructor(e){this.key=e,this.Fa=!1}}class HC{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ma={},this.xa=new ki(l=>n0(l),Ou),this.Oa=new Map,this.Na=new Set,this.Ba=new $e(ne.comparator),this.La=new Map,this.ka=new If,this.qa={},this.Qa=new Map,this.Ka=ko.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function qC(t,e,n=!0){const r=$0(t);let i;const o=r.xa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Ca()):i=await b0(r,e,n,!0),i}async function WC(t,e){const n=$0(t);await b0(n,e,!0,!1)}async function b0(t,e,n,r){const i=await hC(t.localStore,Bn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let l;return r&&(l=await GC(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&D0(t.remoteStore,i),l}async function GC(t,e,n,r,i){t.Ua=(p,y,T)=>async function(D,V,I,_){let R=V.view.ga(I);R.ss&&(R=await xg(D.localStore,V.query,!1).then(({documents:m})=>V.view.ga(m,R)));const M=_&&_.targetChanges.get(V.targetId),z=_&&_.targetMismatches.get(V.targetId)!=null,H=V.view.applyChanges(R,D.isPrimaryClient,M,z);return Ug(D,V.targetId,H.ba),H.snapshot}(t,p,y,T);const o=await xg(t.localStore,e,!0),s=new zC(e,o.Es),l=s.ga(o.documents),u=_a.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=s.applyChanges(l,t.isPrimaryClient,u);Ug(t,n,h.ba);const f=new BC(e,n,s);return t.xa.set(e,f),t.Oa.has(n)?t.Oa.get(n).push(e):t.Oa.set(n,[e]),h.snapshot}async function KC(t,e,n){const r=le(t),i=r.xa.get(e),o=r.Oa.get(i.targetId);if(o.length>1)return r.Oa.set(i.targetId,o.filter(s=>!Ou(s,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await sd(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Cf(r.remoteStore,i.targetId),ld(r,i.targetId)}).catch(bo)):(ld(r,i.targetId),await sd(r.localStore,i.targetId,!0))}async function QC(t,e){const n=le(t),r=n.xa.get(e),i=n.Oa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Cf(n.remoteStore,r.targetId))}async function XC(t,e,n){const r=rP(t);try{const i=await function(s,l){const u=le(s),h=st.now(),f=l.reduce((T,P)=>T.add(P.key),pe());let p,y;return u.persistence.runTransaction("Locally write mutations","readwrite",T=>{let P=cr(),D=pe();return u.hs.getEntries(T,f).next(V=>{P=V,P.forEach((I,_)=>{_.isValidDocument()||(D=D.add(I))})}).next(()=>u.localDocuments.getOverlayedDocuments(T,P)).next(V=>{p=V;const I=[];for(const _ of l){const R=dA(_,p.get(_.key).overlayedDocument);R!=null&&I.push(new Di(_.key,R,G_(R.value.mapValue),rr.exists(!0)))}return u.mutationQueue.addMutationBatch(T,h,I,l)}).next(V=>{y=V;const I=V.applyToLocalDocumentSet(p,D);return u.documentOverlayCache.saveOverlays(T,V.batchId,I)})}).then(()=>({batchId:y.batchId,changes:o0(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,l,u){let h=s.qa[s.currentUser.toKey()];h||(h=new $e(ge)),h=h.insert(l,u),s.qa[s.currentUser.toKey()]=h}(r,i.batchId,n),await wa(r,i.changes),await $u(r.remoteStore)}catch(i){const o=Nf(i,"Failed to persist write");n.reject(o)}}async function U0(t,e){const n=le(t);try{const r=await lC(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.La.get(o);s&&(Se(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.Fa=!0:i.modifiedDocuments.size>0?Se(s.Fa):i.removedDocuments.size>0&&(Se(s.Fa),s.Fa=!1))}),await wa(n,r,e)}catch(r){await bo(r)}}function bg(t,e,n){const r=le(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.xa.forEach((o,s)=>{const l=s.view.ea(e);l.snapshot&&i.push(l.snapshot)}),function(s,l){const u=le(s);u.onlineState=l;let h=!1;u.queries.forEach((f,p)=>{for(const y of p.J_)y.ea(l)&&(h=!0)}),h&&Vf(u)}(r.eventManager,e),i.length&&r.Ma.R_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function YC(t,e,n){const r=le(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.La.get(e),o=i&&i.key;if(o){let s=new $e(ne.comparator);s=s.insert(o,Dt.newNoDocument(o,ae.min()));const l=pe().add(o),u=new ju(ae.min(),new Map,new $e(ge),s,l);await U0(r,u),r.Ba=r.Ba.remove(o),r.La.delete(e),Lf(r)}else await sd(r.localStore,e,!1).then(()=>ld(r,e,n)).catch(bo)}async function JC(t,e){const n=le(t),r=e.batch.batchId;try{const i=await aC(n.localStore,e);z0(n,r,null),j0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await wa(n,i)}catch(i){await bo(i)}}async function ZC(t,e,n){const r=le(t);try{const i=await function(s,l){const u=le(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return u.mutationQueue.lookupMutationBatch(h,l).next(p=>(Se(p!==null),f=p.keys(),u.mutationQueue.removeMutationBatch(h,p))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>u.localDocuments.getDocuments(h,f))})}(r.localStore,e);z0(r,e,n),j0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await wa(r,i)}catch(i){await bo(i)}}function j0(t,e){(t.Qa.get(e)||[]).forEach(n=>{n.resolve()}),t.Qa.delete(e)}function z0(t,e,n){const r=le(t);let i=r.qa[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.qa[r.currentUser.toKey()]=i}}function ld(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Oa.get(e))t.xa.delete(r),n&&t.Ma.Wa(r,n);t.Oa.delete(e),t.isPrimaryClient&&t.ka.yr(e).forEach(r=>{t.ka.containsKey(r)||B0(t,r)})}function B0(t,e){t.Na.delete(e.path.canonicalString());const n=t.Ba.get(e);n!==null&&(Cf(t.remoteStore,n),t.Ba=t.Ba.remove(e),t.La.delete(n),Lf(t))}function Ug(t,e,n){for(const r of n)r instanceof O0?(t.ka.addReference(r.key,e),eP(t,r)):r instanceof F0?(G("SyncEngine","Document no longer in limbo: "+r.key),t.ka.removeReference(r.key,e),t.ka.containsKey(r.key)||B0(t,r.key)):oe()}function eP(t,e){const n=e.key,r=n.path.canonicalString();t.Ba.get(n)||t.Na.has(r)||(G("SyncEngine","New document in limbo: "+n),t.Na.add(r),Lf(t))}function Lf(t){for(;t.Na.size>0&&t.Ba.size<t.maxConcurrentLimboResolutions;){const e=t.Na.values().next().value;t.Na.delete(e);const n=new ne(Me.fromString(e)),r=t.Ka.next();t.La.set(r,new $C(n)),t.Ba=t.Ba.insert(n,r),D0(t.remoteStore,new Cr(Bn(e0(n.path)),r,"TargetPurposeLimboResolution",Vu.oe))}}async function wa(t,e,n){const r=le(t),i=[],o=[],s=[];r.xa.isEmpty()||(r.xa.forEach((l,u)=>{s.push(r.Ua(u,e,n).then(h=>{var f;if((h||n)&&r.isPrimaryClient){const p=h?!h.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(h){i.push(h);const p=Af.zi(u.targetId,h);o.push(p)}}))}),await Promise.all(s),r.Ma.R_(i),await async function(u,h){const f=le(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>F.forEach(h,y=>F.forEach(y.Wi,T=>f.persistence.referenceDelegate.addReference(p,y.targetId,T)).next(()=>F.forEach(y.Gi,T=>f.persistence.referenceDelegate.removeReference(p,y.targetId,T)))))}catch(p){if(!Uo(p))throw p;G("LocalStore","Failed to update sequence numbers: "+p)}for(const p of h){const y=p.targetId;if(!p.fromCache){const T=f.us.get(y),P=T.snapshotVersion,D=T.withLastLimboFreeSnapshotVersion(P);f.us=f.us.insert(y,D)}}}(r.localStore,o))}async function tP(t,e){const n=le(t);if(!n.currentUser.isEqual(e)){G("SyncEngine","User change. New user:",e.toKey());const r=await A0(n.localStore,e);n.currentUser=e,function(o,s){o.Qa.forEach(l=>{l.forEach(u=>{u.reject(new J(b.CANCELLED,s))})}),o.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await wa(n,r.Ts)}}function nP(t,e){const n=le(t),r=n.La.get(e);if(r&&r.Fa)return pe().add(r.key);{let i=pe();const o=n.Oa.get(e);if(!o)return i;for(const s of o){const l=n.xa.get(s);i=i.unionWith(l.view.fa)}return i}}function $0(t){const e=le(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=U0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=YC.bind(null,e),e.Ma.R_=bC.bind(null,e.eventManager),e.Ma.Wa=UC.bind(null,e.eventManager),e}function rP(t){const e=le(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=JC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ZC.bind(null,e),e}class fu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zu(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,n){return null}Ya(e,n){return null}Ha(e){return sC(this.persistence,new iC,e.initialUser,this.serializer)}ja(e){return new R0(Rf.ei,this.serializer)}za(e){return new fC}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}fu.provider={build:()=>new fu};class iP extends fu{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,n){Se(this.persistence.referenceDelegate instanceof hu);const r=this.persistence.referenceDelegate.garbageCollector;return new $A(r,e.asyncQueue,n)}ja(e){const n=this.cacheSizeBytes!==void 0?jt.withCacheSize(this.cacheSizeBytes):jt.DEFAULT;return new R0(r=>hu.ei(r,n),this.serializer)}}class ud{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>bg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=tP.bind(null,this.syncEngine),await VC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new MC}()}createDatastore(e){const n=zu(e.databaseInfo.databaseId),r=function(o){return new yC(o)}(e.databaseInfo);return function(o,s,l,u){return new EC(o,s,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,l){return new TC(r,i,o,s,l)}(this.localStore,this.datastore,e.asyncQueue,n=>bg(this.syncEngine,n,0),function(){return Vg.p()?new Vg:new pC}())}createSyncEngine(e,n){return function(i,o,s,l,u,h,f){const p=new HC(i,o,s,l,u,h);return f&&(p.$a=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=le(i);G("RemoteStore","RemoteStore shutting down."),o.k_.add(5),await Ea(o),o.Q_.shutdown(),o.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}ud.provider={build:()=>new ud};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):ur("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Pt.UNAUTHENTICATED,this.clientId=H_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{G("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(G("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ur;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Nf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Hc(t,e){t.asyncQueue.verifyOperationInProgress(),G("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await A0(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function jg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await aP(t);G("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Lg(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Lg(e.remoteStore,i)),t._onlineComponents=e}async function aP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G("FirestoreClient","Using user provided OfflineComponentProvider");try{await Hc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===b.FAILED_PRECONDITION||i.code===b.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ro("Error using user provided cache. Falling back to memory cache: "+n),await Hc(t,new fu)}}else G("FirestoreClient","Using default OfflineComponentProvider"),await Hc(t,new iP(void 0));return t._offlineComponents}async function H0(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G("FirestoreClient","Using user provided OnlineComponentProvider"),await jg(t,t._uninitializedComponentsProvider._online)):(G("FirestoreClient","Using default OnlineComponentProvider"),await jg(t,new ud))),t._onlineComponents}function lP(t){return H0(t).then(e=>e.syncEngine)}async function uP(t){const e=await H0(t),n=e.eventManager;return n.onListen=qC.bind(null,e.syncEngine),n.onUnlisten=KC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=WC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=QC.bind(null,e.syncEngine),n}function cP(t,e,n={}){const r=new Ur;return t.asyncQueue.enqueueAndForget(async()=>function(o,s,l,u,h){const f=new oP({next:y=>{f.eu(),s.enqueueAndForget(()=>FC(o,p)),y.fromCache&&u.source==="server"?h.reject(new J(b.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(y)},error:y=>h.reject(y)}),p=new jC(l,f,{includeMetadataChanges:!0,ua:!0});return OC(o,p)}(await uP(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q0(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zg=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W0(t,e,n){if(!n)throw new J(b.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function hP(t,e,n,r){if(e===!0&&r===!0)throw new J(b.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Bg(t){if(!ne.isDocumentKey(t))throw new J(b.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function $g(t){if(ne.isDocumentKey(t))throw new J(b.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Hu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":oe()}function ca(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new J(b.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Hu(t);throw new J(b.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new J(b.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new J(b.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=q0((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new J(b.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new J(b.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new J(b.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qu{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hg({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new J(b.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new J(b.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hg(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new _R;switch(r.type){case"firstParty":return new SR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J(b.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=zg.get(n);r&&(G("ComponentProvider","Removing Datastore"),zg.delete(n),r.terminate())}(this),Promise.resolve()}}function dP(t,e,n,r={}){var i;const o=(t=ca(t,qu))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Ro("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=Pt.MOCK_USER;else{l=JS(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new J(b.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Pt(h)}t._authCredentials=new ER(new $_(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zo(this.firestore,e,this._query)}}class Zt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new jr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zt(this.firestore,e,this._key)}}class jr extends zo{constructor(e,n,r){super(e,n,e0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zt(this.firestore,null,new ne(e))}withConverter(e){return new jr(this.firestore,e,this._path)}}function Wu(t,e,...n){if(t=Io(t),W0("collection","path",e),t instanceof qu){const r=Me.fromString(e,...n);return $g(r),new jr(t,null,r)}{if(!(t instanceof Zt||t instanceof jr))throw new J(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Me.fromString(e,...n));return $g(r),new jr(t.firestore,null,r)}}function fP(t,e,...n){if(t=Io(t),arguments.length===1&&(e=H_.newId()),W0("doc","path",e),t instanceof qu){const r=Me.fromString(e,...n);return Bg(r),new Zt(t,null,new ne(r))}{if(!(t instanceof Zt||t instanceof jr))throw new J(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Me.fromString(e,...n));return Bg(r),new Zt(t.firestore,t instanceof jr?t.converter:null,new ne(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e=Promise.resolve()){this.Iu=[],this.du=!1,this.Eu=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new P0(this,"async_queue_retry"),this.fu=()=>{const r=$c();r&&G("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;const n=$c();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.du}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.du){this.du=!0,this.Vu=e||!1;const n=$c();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.du)return new Promise(()=>{});const n=new Ur;return this.yu(()=>this.du&&this.Vu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Uo(e))throw e;G("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const n=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;const i=function(s){let l=s.message||"";return s.stack&&(l=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),l}(r);throw ur("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=n,n}enqueueAfterDelay(e,n,r){this.pu(),this.mu.indexOf(e)>-1&&(n=0);const i=xf.createAndSchedule(this,e,n,r,o=>this.Su(o));return this.Eu.push(i),i}pu(){this.Au&&oe()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const n of this.Eu)if(n.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.Eu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Eu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const n=this.Eu.indexOf(e);this.Eu.splice(n,1)}}class Mf extends qu{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new qg,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new qg(e),this._firestoreClient=void 0,await e}}}function pP(t,e){const n=typeof t=="object"?t:aR(),r=typeof t=="string"?t:"(default)",i=rR(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=XS("firestore");o&&dP(i,...o)}return i}function G0(t){if(t._terminated)throw new J(b.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||mP(t),t._firestoreClient}function mP(t){var e,n,r;const i=t._freezeSettings(),o=function(l,u,h,f){return new bR(l,u,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,q0(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new sP(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xo(Tt.fromBase64String(e))}catch(n){throw new J(b.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new xo(Tt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new J(b.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function K0(){return new Gu("__name__")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new J(b.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new J(b.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP=/^__.*__$/;class yP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Di(e,this.data,this.fieldMask,n,this.fieldTransforms):new va(e,this.data,n,this.fieldTransforms)}}function X0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oe()}}class bf{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Fu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new bf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.xu({path:r,Nu:!1});return i.Bu(e),i}Lu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.xu({path:r,Nu:!1});return i.Fu(),i}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return pu(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Bu(this.path.get(e))}Bu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(X0(this.Mu)&&gP.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class vP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||zu(e)}$u(e,n,r,i=!1){return new bf({Mu:e,methodName:n,Ku:r,path:_t.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Y0(t){const e=t._freezeSettings(),n=zu(t._databaseId);return new vP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function _P(t,e,n,r,i,o={}){const s=t.$u(o.merge||o.mergeFields?2:0,e,n,i);eE("Data must be an object, but it was:",s,r);const l=J0(r,s);let u,h;if(o.merge)u=new An(s.fieldMask),h=s.fieldTransforms;else if(o.mergeFields){const f=[];for(const p of o.mergeFields){const y=wP(e,p,n);if(!s.contains(y))throw new J(b.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);SP(f,y)||f.push(y)}u=new An(f),h=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,h=s.fieldTransforms;return new yP(new hn(l),u,h)}function EP(t,e,n,r=!1){return Uf(n,t.$u(r?4:3,e))}function Uf(t,e){if(Z0(t=Io(t)))return eE("Unsupported field value:",e,t),J0(t,e);if(t instanceof Q0)return function(r,i){if(!X0(i.Mu))throw i.qu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const l of r){let u=Uf(l,i.ku(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=Io(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return sA(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=st.fromDate(r);return{timestampValue:cu(i.serializer,o)}}if(r instanceof st){const o=new st(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:cu(i.serializer,o)}}if(r instanceof Of)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof xo)return{bytesValue:v0(i.serializer,r._byteString)};if(r instanceof Zt){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.qu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Sf(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ff)return function(s,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw l.qu("VectorValues must only contain numeric values.");return Ef(l.serializer,u)})}}}}}}(r,i);throw i.qu(`Unsupported field value: ${Hu(r)}`)}(t,e)}function J0(t,e){const n={};return q_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Pi(t,(r,i)=>{const o=Uf(i,e.Ou(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function Z0(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof st||t instanceof Of||t instanceof xo||t instanceof Zt||t instanceof Q0||t instanceof Ff)}function eE(t,e,n){if(!Z0(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Hu(n);throw r==="an object"?e.qu(t+" a custom object"):e.qu(t+" "+r)}}function wP(t,e,n){if((e=Io(e))instanceof Gu)return e._internalPath;if(typeof e=="string")return tE(t,e);throw pu("Field path arguments must be of type string or ",t,!1,void 0,n)}const TP=new RegExp("[~\\*/\\[\\]]");function tE(t,e,n){if(e.search(TP)>=0)throw pu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Gu(...e.split("."))._internalPath}catch{throw pu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function pu(t,e,n,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new J(b.INVALID_ARGUMENT,l+t+u)}function SP(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new IP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(jf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class IP extends nE{data(){return super.data()}}function jf(t,e){return typeof e=="string"?tE(t,e):e instanceof Gu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new J(b.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zf{}class AP extends zf{}function Ku(t,e,...n){let r=[];e instanceof zf&&r.push(e),r=r.concat(n),function(o){const s=o.filter(u=>u instanceof $f).length,l=o.filter(u=>u instanceof Qu).length;if(s>1||s>0&&l>0)throw new J(b.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Qu extends AP{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Qu(e,n,r)}_apply(e){const n=this._parse(e);return rE(e._query,n),new zo(e.firestore,e.converter,ed(e._query,n))}_parse(e){const n=Y0(e.firestore);return function(o,s,l,u,h,f,p){let y;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new J(b.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Gg(p,f);const T=[];for(const P of p)T.push(Wg(u,o,P));y={arrayValue:{values:T}}}else y=Wg(u,o,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Gg(p,f),y=EP(l,s,p,f==="in"||f==="not-in");return Ze.create(h,f,y)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Bf(t,e,n){const r=e,i=jf("where",t);return Qu._create(i,r,n)}class $f extends zf{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new $f(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Dn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i;const l=o.getFlattenedFilters();for(const u of l)rE(s,u),s=ed(s,u)}(e._query,n),new zo(e.firestore,e.converter,ed(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Wg(t,e,n){if(typeof(n=Io(n))=="string"){if(n==="")throw new J(b.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!t0(e)&&n.indexOf("/")!==-1)throw new J(b.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Me.fromString(n));if(!ne.isDocumentKey(r))throw new J(b.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return fg(t,new ne(r))}if(n instanceof Zt)return fg(t,n._key);throw new J(b.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hu(n)}.`)}function Gg(t,e){if(!Array.isArray(t)||t.length===0)throw new J(b.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function rE(t,e){const n=function(i,o){for(const s of i)for(const l of s.getFlattenedFilters())if(o.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new J(b.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new J(b.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class CP{convertValue(e,n="none"){switch(Wr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ge(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(qr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw oe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Pi(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;const o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ge(s.doubleValue));return new Ff(o)}convertGeoPoint(e){return new Of(Ge(e.latitude),Ge(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Mu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(oa(e));default:return null}}convertTimestamp(e){const n=Hr(e);return new st(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Me.fromString(e);Se(I0(r));const i=new sa(r.get(1),r.get(3)),o=new ne(r.popFirst(5));return i.isEqual(n)||ur(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PP(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class kP extends nE{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Cl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(jf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Cl extends kP{data(e={}){return super.data(e)}}class DP{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ll(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Cl(this._firestore,this._userDataWriter,r.key,r,new ll(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new J(b.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(l=>{const u=new Cl(i._firestore,i._userDataWriter,l.doc.key,l.doc,new ll(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>o||l.type!==3).map(l=>{const u=new Cl(i._firestore,i._userDataWriter,l.doc.key,l.doc,new ll(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,f=-1;return l.type!==0&&(h=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),l.type!==1&&(s=s.add(l.doc),f=s.indexOf(l.doc.key)),{type:xP(l.type),doc:u,oldIndex:h,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function xP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oe()}}class NP extends CP{constructor(e){super(),this.firestore=e}convertBytes(e){return new xo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Zt(this.firestore,null,n)}}function Xu(t){t=ca(t,zo);const e=ca(t.firestore,Mf),n=G0(e),r=new NP(e);return RP(t._query),cP(n,t._query).then(i=>new DP(e,r,t,i))}function VP(t,e,n){t=ca(t,Zt);const r=ca(t.firestore,Mf),i=PP(t.converter,e);return LP(r,[_P(Y0(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,rr.none())])}function LP(t,e){return function(r,i){const o=new Ur;return r.asyncQueue.enqueueAndForget(async()=>XC(await lP(r),i,o)),o.promise}(G0(t),e)}(function(e,n=!0){(function(i){Fo=i})(sR),iu(new ra("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),l=new Mf(new wR(r.getProvider("auth-internal")),new RR(r.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new J(b.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sa(h.options.projectId,f)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),po(ag,"4.7.6",e),po(ag,"4.7.6","esm2017")})();const qc={AUTH_DOMAIN:"cell-pack-database.firebaseapp.com",PROJECT_ID:"cell-pack-database",STORAGE_BUCKET:"cell-pack-database.firebasestorage.app"},xt={RESULTS:"results",RECIPES:"recipes",CONFIGS:"configs",OBJECTS:"objects",GRADIENTS:"gradients",COMPOSITION:"composition",EXAMPLE_RECIPES:"example_recipes",EDITED_RECIPES:"recipes_edited",JOB_STATUS:"job_status"},an={NAME:"name",BATCH_JOB_ID:"batch_job_id",ORIGINAL_LOCATION:"original_location",RECIPE_PATH:"recipe_path",INHERIT:"inherit",COMPOSITION:"composition",OBJECT:"object",REGIONS:"regions",INTERIOR:"interior",GRADIENT:"gradient"},cn=t=>t!=null&&typeof t=="string"&&t.startsWith("firebase"),MP=(t,e,n)=>{let r={};if(e===xt.RECIPES)r=n.recipes;else if(e===xt.COMPOSITION)r=n.composition;else if(e===xt.OBJECTS)r=n.objects;else if(e===xt.GRADIENTS)r=n.gradients;else return!1;return t in r},OP=(t,e,n,r)=>(e===xt.RECIPES?r.recipes[t]=n:e===xt.COMPOSITION?r.composition[t]=n:e===xt.OBJECTS?r.objects[t]=n:e===xt.GRADIENTS&&(r.gradients[t]=n),r),FP=t=>{if(typeof t=="object"&&Object.keys(t).length>0){for(const[e,n]of Object.entries(t))if(isNaN(Number(e))||!Array.isArray(n))return!1;return!0}return!1},cd=(t,e,n)=>{if(cn(t.gradient)){const r=e.gradients[t.gradient];t.gradient=r.name,n.gradients??(n.gradients={}),n.gradients[r.name]=r}if(cn(t.inherit)){const r=e.objects[t.inherit];t.inherit=r.name,n.objects??(n.objects={}),n.objects[r.name]=cd(r,e,n)}return t},bP=(t,e,n)=>{if(cn(t.object)){const r=e.objects[t.object];t.object=r.name,n.objects??(n.objects={}),n.objects[r.name]=cd(r,e,n)}if(t.regions)for(const r of Object.values(t.regions))for(let i=0;i<r.length;i++){const o=r[i];if(typeof o=="string"&&cn(o)){const s=e.composition[o];r[i]=s.name}else if(o instanceof Object&&cn(o.object)){const s=e.objects[o.object];n.objects??(n.objects={}),o.object=s.name,n.objects[s.name]=cd(s,e,n)}}return t},UP=t=>{const{name:e,id:n,dedup_hash:r,...i}=t;return i},Wc=t=>{if(!t)return{};const e={};for(const n in t)e[n]=UP(t[n]);return e},jP=t=>({name:t.name,version:t.version,format_version:t.format_version,bounding_box:t.bounding_box,grid_file_path:t.grid_file_path,composition:Wc(t.composition),objects:Wc(t.objects),gradients:Wc(t.gradients)}),zP=(t,e)=>{for(const r in t.composition){const i=t.composition[r].inherit;if(cn(i)){const o=e.composition[i];t.composition[r]=bP(o,e,t)}}if(t.bounding_box&&FP(t.bounding_box)){const r=[[]];for(const[i,o]of Object.entries(t.bounding_box))r[Number(i)]=o;t.bounding_box=r}return jP(t)},BP={apiKey:void 0,authDomain:qc.AUTH_DOMAIN,projectId:qc.PROJECT_ID,storageBucket:qc.STORAGE_BUCKET,messagingSenderId:void 0,appId:void 0,measurementId:void 0},$P=L_(BP),Ta=pP($P),iE=async(t,e)=>{const n=Ku(Wu(Ta,t),Bf(K0(),"==",e));return await Xu(n)},HP=async(t,e)=>{const n=Ku(Wu(Ta,t),Bf(K0(),"in",e));return await Xu(n)},qP=async(t,e,n)=>{const r=Ku(Wu(Ta,t),Bf(e,"==",n));return await Xu(r)},WP=async t=>{const e=Ku(Wu(Ta,t));return await Xu(e)},GP=t=>t.docs.map(e=>({id:e.id,...e.data()})),oE=(t,e)=>{let n="";return t.forEach(r=>{n=e?r.data()[e]:r.data()}),n},KP=async t=>{const e=await qP(xt.RESULTS,an.BATCH_JOB_ID,t);return oE(e,"url")},Kg=async t=>{const e=await iE(xt.JOB_STATUS,t);return oE(e,"status")},sE=async t=>{const e=await WP(t);return GP(e)},Qg=async t=>(await sE(t)).reduce((r,i)=>{const o=i[an.NAME],s=i.id;return o&&(r[o]={firebaseId:s}),r},{}),aE=async(t,e)=>{const r=(await sE(t)).find(i=>i.id===e);return JSON.stringify(r,null,2)},QP=async t=>{const n=(await iE(xt.RECIPES,t)).docs.map(r=>({id:r.id,name:r.data().name,dedup_hash:r.data().dedup_hash,...r.data()}));if(n.length===0)throw new Error(`Recipe with ID ${t} not found`);return n[0]},XP=async(t,e)=>(await HP(t,e)).docs.map(i=>({id:i.id,name:i.data().name,dedup_hash:i.data().dedup_hash,...i.data()})),Gc=async(t,e)=>{const n={};t.forEach(r=>{const i=r.split(/:|\//),o=i[1];MP(r,o,e)||(o in n||(n[o]=[]),i[2]in n[o]||n[o].push(i[2]))});for(const r in n)(await XP(r,n[r])).forEach(o=>{const s="firebase:"+r+"/"+o.id;e=OP(s,r,o,e)});return e},YP=async t=>{let e=[];if(t.composition){const i=t.composition;for(const o of Object.values(i))cn(o.inherit)&&typeof o.inherit=="string"&&e.push(o.inherit)}let n={recipes:{},composition:{},gradients:{},objects:{}};n=await Gc(e,n),e=[];for(const i in n.composition)for(const[o,s]of Object.entries(n.composition[i]))if(o===an.OBJECT)cn(s)&&e.push(s);else if(o===an.REGIONS)for(const l in s){const u=s[l];u&&u.forEach(h=>{typeof h=="string"&&cn(h)?e.push(h):h instanceof Object&&cn(h[an.OBJECT])&&e.push(h[an.OBJECT])})}n=await Gc(e,n),e=[];for(const i in n.composition)for(const[o,s]of Object.entries(n.composition[i]))(o===an.OBJECT||o===an.INHERIT)&&cn(s)&&!(s in n.composition)&&e.push(s);for(const i in n.objects)for(const[o,s]of Object.entries(n.objects[i]))(o===an.GRADIENT||o===an.INHERIT)&&cn(s)&&!(s in n.objects)&&e.push(s);n=await Gc(e,n);const r=zP(t,n);return JSON.stringify(r,null,2)},lE=async t=>{const e=await QP(t);return await YP(e)},JP=async(t,e)=>{await VP(fP(Ta,xt.EDITED_RECIPES,t),e)},ZP="https://bda21vau5c.execute-api.us-west-2.amazonaws.com/production/start-packing",ek=(t,e)=>{let n=`${ZP}?recipe=${t}`;return e&&(n+=`&config=${e}`),n};var wn=(t=>(t.SUBMITTED="SUBMITTED",t.STARTING="STARTING",t.RUNNING="RUNNING",t.DONE="DONE",t.FAILED="FAILED",t))(wn||{});const tk="https://simularium.allencell.org/embed?trajUrl=",nk=t=>{const{startPacking:e}=t,[n,r]=U.useState(""),[i,o]=U.useState(""),[s,l]=U.useState({}),[u,h]=U.useState({}),[f,p]=U.useState(""),[y,T]=U.useState(""),[P,D]=U.useState(!0),[V,I]=U.useState(!0);U.useEffect(()=>{(async()=>{const g=await Qg(xt.RECIPES),E=await Qg(xt.CONFIGS);l(g),h(E)})()},[]);const _=async m=>{r(m);const g=await lE(m);p(g)},R=async m=>{o(m);const g=await aE(xt.CONFIGS,m);T(g)},M=async()=>{I(!1),D(!1),e(n,i,f)},z=()=>{D(!P)},H=()=>{I(!V)};return ce.jsxs("div",{children:[ce.jsxs("div",{className:"input-container",children:[ce.jsxs("select",{value:n,onChange:m=>_(m.target.value),children:[ce.jsx("option",{value:"",disabled:!0,children:"Select a recipe"}),Object.entries(s).map(([m,g])=>ce.jsx("option",{value:g.firebaseId,children:m},m))]}),ce.jsxs("select",{value:i,onChange:m=>R(m.target.value),children:[ce.jsx("option",{value:"",disabled:!0,children:"Select a config"}),Object.entries(u).map(([m,g])=>ce.jsx("option",{value:g.firebaseId,children:m},m))]}),ce.jsx("button",{onClick:M,disabled:!n,children:"Pack"})]}),ce.jsxs("div",{className:"box",children:[f.length>0&&ce.jsxs("div",{className:"recipe-box",children:[ce.jsx("button",{type:"button",className:"collapsible",onClick:z,children:"Recipe"}),ce.jsx("div",{className:"recipe-json",children:P&&ce.jsx("textarea",{value:f,onChange:m=>p(m.target.value)})})]}),y.length>0&&ce.jsxs("div",{className:"config-box",children:[ce.jsx("button",{type:"button",className:"collapsible",onClick:H,children:"Config"}),ce.jsx("div",{className:"config-json",children:V&&ce.jsx("pre",{children:y})})]})]})]})},rk=t=>{const{resultUrl:e}=t;return ce.jsx("div",{children:ce.jsx("iframe",{className:"simularium-embed",src:e})})},ik=t=>{const{errorLogs:e,getLogs:n}=t,[r,i]=U.useState(!0),o=async()=>{e.length===0?await n():i(!r)};return ce.jsxs("div",{children:[ce.jsx("button",{className:"collapsible",onClick:o,children:"Logs"}),r&&e.length>0&&ce.jsx("div",{className:"log-box",children:ce.jsx("pre",{children:e})})]})};function ok(){const[t,e]=U.useState(""),[n,r]=U.useState(""),[i,o]=U.useState(""),[s,l]=U.useState(""),[u,h]=U.useState(!1),[f,p]=U.useState(0);let y=0;async function T(E){return new Promise(w=>setTimeout(w,E))}const P=async(E,w)=>await lE(E)!=w,D=(E,w,A)=>{const k=JSON.parse(E);if(k.bounding_box){const S=Object.assign({},k.bounding_box);k.bounding_box=S}return k[an.RECIPE_PATH]=w,k[an.NAME]=A,k},V=async(E,w,A)=>{l(""),p(0);let k="firebase:recipes/"+E;const S="firebase:configs/"+w;if(await P(E,A)){const te=jS();k="firebase:recipes_edited/"+te;const re=D(A,k,te);try{await JP(te,re)}catch(we){r(wn.FAILED),o(String(we));return}}const et=ek(k,S),rn=new Request(et,{method:"POST"});y=Date.now();const ht=await fetch(rn);r(wn.SUBMITTED);const B=await ht.json();if(ht.ok)return e(B.jobId),r(wn.STARTING),B.jobId;r(wn.FAILED),o(JSON.stringify(B))},I=async(E,w,A)=>{V(E,w,A).then(k=>_(k))},_=async E=>{const w=E||t;let A=await Kg(w);for(;A!==wn.DONE&&A!==wn.FAILED;){await T(500);const S=await Kg(w);A!==S&&(A=S,r(S))}const k=(Date.now()-y)/1e3;p(k),A==wn.DONE?R(w):A==wn.FAILED&&M(w)},R=async E=>{const A=await KP(E||t);l(tk+A)},M=async E=>{const w=E||t,A=await aE(xt.JOB_STATUS,w);o(A)},z=()=>{s==""&&R(),h(!u)},H=n==wn.DONE,m=n==wn.FAILED,g=s&&u;return ce.jsxs("div",{className:"app",children:[ce.jsx("h1",{children:"Welcome to cellPACK"}),ce.jsx(nk,{startPacking:I}),ce.jsxs("h3",{children:["Job Status: ",n]}),H&&ce.jsxs("div",{children:[f>0&&ce.jsxs("h4",{children:["Time to Run: ",f," sec"]}),ce.jsx("button",{onClick:z,children:"Results"})]}),g&&ce.jsx(rk,{resultUrl:s}),m&&ce.jsx(ik,{errorLogs:i,getLogs:M}),ce.jsx("div",{children:ce.jsx(A_,{to:na.LANDING_PAGE,children:"← Back to Home"})})]})}const sk=ES([{path:na.LANDING_PAGE,element:ce.jsx(MS,{})},{path:na.PACKING_PAGE,element:ce.jsx(ok,{})}]);c_(document.getElementById("root")).render(ce.jsx(U.StrictMode,{children:ce.jsx(kS,{router:sk})}));
