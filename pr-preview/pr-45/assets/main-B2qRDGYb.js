import{i as CE,t as PE,d as kE}from"./gh_routing-Ccc8RuuD.js";function Zg(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}function ey(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ty={exports:{}},_u={},ny={exports:{}},fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ga=Symbol.for("react.element"),DE=Symbol.for("react.portal"),xE=Symbol.for("react.fragment"),NE=Symbol.for("react.strict_mode"),VE=Symbol.for("react.profiler"),LE=Symbol.for("react.provider"),ME=Symbol.for("react.context"),OE=Symbol.for("react.forward_ref"),FE=Symbol.for("react.suspense"),bE=Symbol.for("react.memo"),UE=Symbol.for("react.lazy"),_p=Symbol.iterator;function jE(t){return t===null||typeof t!="object"?null:(t=_p&&t[_p]||t["@@iterator"],typeof t=="function"?t:null)}var ry={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},iy=Object.assign,oy={};function Uo(t,e,n){this.props=t,this.context=e,this.refs=oy,this.updater=n||ry}Uo.prototype.isReactComponent={};Uo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Uo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function sy(){}sy.prototype=Uo.prototype;function dd(t,e,n){this.props=t,this.context=e,this.refs=oy,this.updater=n||ry}var fd=dd.prototype=new sy;fd.constructor=dd;iy(fd,Uo.prototype);fd.isPureReactComponent=!0;var Ep=Array.isArray,ay=Object.prototype.hasOwnProperty,pd={current:null},ly={key:!0,ref:!0,__self:!0,__source:!0};function uy(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)ay.call(e,r)&&!ly.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:ga,type:t,key:o,ref:s,props:i,_owner:pd.current}}function zE(t,e){return{$$typeof:ga,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function md(t){return typeof t=="object"&&t!==null&&t.$$typeof===ga}function BE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var wp=/\/+/g;function ac(t,e){return typeof t=="object"&&t!==null&&t.key!=null?BE(""+t.key):e.toString(36)}function fl(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case ga:case DE:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+ac(s,0):r,Ep(i)?(n="",t!=null&&(n=t.replace(wp,"$&/")+"/"),fl(i,e,n,"",function(h){return h})):i!=null&&(md(i)&&(i=zE(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(wp,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",Ep(t))for(var l=0;l<t.length;l++){o=t[l];var u=r+ac(o,l);s+=fl(o,e,n,u,i)}else if(u=jE(t),typeof u=="function")for(t=u.call(t),l=0;!(o=t.next()).done;)o=o.value,u=r+ac(o,l++),s+=fl(o,e,n,u,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function $a(t,e,n){if(t==null)return t;var r=[],i=0;return fl(t,r,"","",function(o){return e.call(n,o,i++)}),r}function $E(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var jt={current:null},pl={transition:null},HE={ReactCurrentDispatcher:jt,ReactCurrentBatchConfig:pl,ReactCurrentOwner:pd};function cy(){throw Error("act(...) is not supported in production builds of React.")}fe.Children={map:$a,forEach:function(t,e,n){$a(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return $a(t,function(){e++}),e},toArray:function(t){return $a(t,function(e){return e})||[]},only:function(t){if(!md(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};fe.Component=Uo;fe.Fragment=xE;fe.Profiler=VE;fe.PureComponent=dd;fe.StrictMode=NE;fe.Suspense=FE;fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HE;fe.act=cy;fe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=iy({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=pd.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)ay.call(e,u)&&!ly.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:ga,type:t.type,key:i,ref:o,props:r,_owner:s}};fe.createContext=function(t){return t={$$typeof:ME,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:LE,_context:t},t.Consumer=t};fe.createElement=uy;fe.createFactory=function(t){var e=uy.bind(null,t);return e.type=t,e};fe.createRef=function(){return{current:null}};fe.forwardRef=function(t){return{$$typeof:OE,render:t}};fe.isValidElement=md;fe.lazy=function(t){return{$$typeof:UE,_payload:{_status:-1,_result:t},_init:$E}};fe.memo=function(t,e){return{$$typeof:bE,type:t,compare:e===void 0?null:e}};fe.startTransition=function(t){var e=pl.transition;pl.transition={};try{t()}finally{pl.transition=e}};fe.unstable_act=cy;fe.useCallback=function(t,e){return jt.current.useCallback(t,e)};fe.useContext=function(t){return jt.current.useContext(t)};fe.useDebugValue=function(){};fe.useDeferredValue=function(t){return jt.current.useDeferredValue(t)};fe.useEffect=function(t,e){return jt.current.useEffect(t,e)};fe.useId=function(){return jt.current.useId()};fe.useImperativeHandle=function(t,e,n){return jt.current.useImperativeHandle(t,e,n)};fe.useInsertionEffect=function(t,e){return jt.current.useInsertionEffect(t,e)};fe.useLayoutEffect=function(t,e){return jt.current.useLayoutEffect(t,e)};fe.useMemo=function(t,e){return jt.current.useMemo(t,e)};fe.useReducer=function(t,e,n){return jt.current.useReducer(t,e,n)};fe.useRef=function(t){return jt.current.useRef(t)};fe.useState=function(t){return jt.current.useState(t)};fe.useSyncExternalStore=function(t,e,n){return jt.current.useSyncExternalStore(t,e,n)};fe.useTransition=function(){return jt.current.useTransition()};fe.version="18.3.1";ny.exports=fe;var U=ny.exports;const qE=ey(U),WE=Zg({__proto__:null,default:qE},[U]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GE=U,KE=Symbol.for("react.element"),QE=Symbol.for("react.fragment"),XE=Object.prototype.hasOwnProperty,YE=GE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,JE={key:!0,ref:!0,__self:!0,__source:!0};function hy(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)XE.call(e,r)&&!JE.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:KE,type:t,key:o,ref:s,props:i,_owner:YE.current}}_u.Fragment=QE;_u.jsx=hy;_u.jsxs=hy;ty.exports=_u;var de=ty.exports,dy={exports:{}},sn={},fy={exports:{}},py={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,ne){var re=$.length;$.push(ne);e:for(;0<re;){var Te=re-1>>>1,he=$[Te];if(0<i(he,ne))$[Te]=ne,$[re]=he,re=Te;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var ne=$[0],re=$.pop();if(re!==ne){$[0]=re;e:for(var Te=0,he=$.length,Ie=he>>>1;Te<Ie;){var gt=2*(Te+1)-1,$e=$[gt],ot=gt+1,st=$[ot];if(0>i($e,re))ot<he&&0>i(st,$e)?($[Te]=st,$[ot]=re,Te=ot):($[Te]=$e,$[gt]=re,Te=gt);else if(ot<he&&0>i(st,re))$[Te]=st,$[ot]=re,Te=ot;else break e}}return ne}function i($,ne){var re=$.sortIndex-ne.sortIndex;return re!==0?re:$.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],h=[],f=1,p=null,y=3,T=!1,P=!1,k=!1,V=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R($){for(var ne=n(h);ne!==null;){if(ne.callback===null)r(h);else if(ne.startTime<=$)r(h),ne.sortIndex=ne.expirationTime,e(u,ne);else break;ne=n(h)}}function M($){if(k=!1,R($),!P)if(n(u)!==null)P=!0,ln(z);else{var ne=n(h);ne!==null&&At(M,ne.startTime-$)}}function z($,ne){P=!1,k&&(k=!1,I(g),g=-1),T=!0;var re=y;try{for(R(ne),p=n(u);p!==null&&(!(p.expirationTime>ne)||$&&!C());){var Te=p.callback;if(typeof Te=="function"){p.callback=null,y=p.priorityLevel;var he=Te(p.expirationTime<=ne);ne=t.unstable_now(),typeof he=="function"?p.callback=he:p===n(u)&&r(u),R(ne)}else r(u);p=n(u)}if(p!==null)var Ie=!0;else{var gt=n(h);gt!==null&&At(M,gt.startTime-ne),Ie=!1}return Ie}finally{p=null,y=re,T=!1}}var H=!1,m=null,g=-1,E=5,w=-1;function C(){return!(t.unstable_now()-w<E)}function D(){if(m!==null){var $=t.unstable_now();w=$;var ne=!0;try{ne=m(!0,$)}finally{ne?S():(H=!1,m=null)}}else H=!1}var S;if(typeof _=="function")S=function(){_(D)};else if(typeof MessageChannel<"u"){var Ae=new MessageChannel,it=Ae.port2;Ae.port1.onmessage=D,S=function(){it.postMessage(null)}}else S=function(){V(D,0)};function ln($){m=$,H||(H=!0,S())}function At($,ne){g=V(function(){$(t.unstable_now())},ne)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){P||T||(P=!0,ln(z))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function($){switch(y){case 1:case 2:case 3:var ne=3;break;default:ne=y}var re=y;y=ne;try{return $()}finally{y=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,ne){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var re=y;y=$;try{return ne()}finally{y=re}},t.unstable_scheduleCallback=function($,ne,re){var Te=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?Te+re:Te):re=Te,$){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=re+he,$={id:f++,callback:ne,priorityLevel:$,startTime:re,expirationTime:he,sortIndex:-1},re>Te?($.sortIndex=re,e(h,$),n(u)===null&&$===n(h)&&(k?(I(g),g=-1):k=!0,At(M,re-Te))):($.sortIndex=he,e(u,$),P||T||(P=!0,ln(z))),$},t.unstable_shouldYield=C,t.unstable_wrapCallback=function($){var ne=y;return function(){var re=y;y=ne;try{return $.apply(this,arguments)}finally{y=re}}}})(py);fy.exports=py;var ZE=fy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ew=U,on=ZE;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var my=new Set,zs={};function Mi(t,e){So(t,e),So(t+"Capture",e)}function So(t,e){for(zs[t]=e,t=0;t<e.length;t++)my.add(e[t])}var ur=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qc=Object.prototype.hasOwnProperty,tw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Tp={},Sp={};function nw(t){return Qc.call(Sp,t)?!0:Qc.call(Tp,t)?!1:tw.test(t)?Sp[t]=!0:(Tp[t]=!0,!1)}function rw(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function iw(t,e,n,r){if(e===null||typeof e>"u"||rw(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function zt(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var It={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){It[t]=new zt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];It[e]=new zt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){It[t]=new zt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){It[t]=new zt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){It[t]=new zt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){It[t]=new zt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){It[t]=new zt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){It[t]=new zt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){It[t]=new zt(t,5,!1,t.toLowerCase(),null,!1,!1)});var gd=/[\-:]([a-z])/g;function yd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(gd,yd);It[e]=new zt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(gd,yd);It[e]=new zt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(gd,yd);It[e]=new zt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){It[t]=new zt(t,1,!1,t.toLowerCase(),null,!1,!1)});It.xlinkHref=new zt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){It[t]=new zt(t,1,!1,t.toLowerCase(),null,!0,!0)});function vd(t,e,n,r){var i=It.hasOwnProperty(e)?It[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(iw(e,n,i,r)&&(n=null),r||i===null?nw(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var gr=ew.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ha=Symbol.for("react.element"),no=Symbol.for("react.portal"),ro=Symbol.for("react.fragment"),_d=Symbol.for("react.strict_mode"),Xc=Symbol.for("react.profiler"),gy=Symbol.for("react.provider"),yy=Symbol.for("react.context"),Ed=Symbol.for("react.forward_ref"),Yc=Symbol.for("react.suspense"),Jc=Symbol.for("react.suspense_list"),wd=Symbol.for("react.memo"),Dr=Symbol.for("react.lazy"),vy=Symbol.for("react.offscreen"),Ip=Symbol.iterator;function us(t){return t===null||typeof t!="object"?null:(t=Ip&&t[Ip]||t["@@iterator"],typeof t=="function"?t:null)}var We=Object.assign,lc;function Es(t){if(lc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);lc=e&&e[1]||""}return`
`+lc+t}var uc=!1;function cc(t,e){if(!t||uc)return"";uc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,l=o.length-1;1<=s&&0<=l&&i[s]!==o[l];)l--;for(;1<=s&&0<=l;s--,l--)if(i[s]!==o[l]){if(s!==1||l!==1)do if(s--,l--,0>l||i[s]!==o[l]){var u=`
`+i[s].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=s&&0<=l);break}}}finally{uc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Es(t):""}function ow(t){switch(t.tag){case 5:return Es(t.type);case 16:return Es("Lazy");case 13:return Es("Suspense");case 19:return Es("SuspenseList");case 0:case 2:case 15:return t=cc(t.type,!1),t;case 11:return t=cc(t.type.render,!1),t;case 1:return t=cc(t.type,!0),t;default:return""}}function Zc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ro:return"Fragment";case no:return"Portal";case Xc:return"Profiler";case _d:return"StrictMode";case Yc:return"Suspense";case Jc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case yy:return(t.displayName||"Context")+".Consumer";case gy:return(t._context.displayName||"Context")+".Provider";case Ed:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case wd:return e=t.displayName||null,e!==null?e:Zc(t.type)||"Memo";case Dr:e=t._payload,t=t._init;try{return Zc(t(e))}catch{}}return null}function sw(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Zc(e);case 8:return e===_d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Yr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function _y(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function aw(t){var e=_y(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function qa(t){t._valueTracker||(t._valueTracker=aw(t))}function Ey(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=_y(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Nl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function eh(t,e){var n=e.checked;return We({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Rp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Yr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function wy(t,e){e=e.checked,e!=null&&vd(t,"checked",e,!1)}function th(t,e){wy(t,e);var n=Yr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?nh(t,e.type,n):e.hasOwnProperty("defaultValue")&&nh(t,e.type,Yr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ap(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function nh(t,e,n){(e!=="number"||Nl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ws=Array.isArray;function mo(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Yr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function rh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return We({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Cp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(ws(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Yr(n)}}function Ty(t,e){var n=Yr(e.value),r=Yr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Pp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Sy(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ih(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Sy(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Wa,Iy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Wa=Wa||document.createElement("div"),Wa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Wa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Bs(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ps={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lw=["Webkit","ms","Moz","O"];Object.keys(Ps).forEach(function(t){lw.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ps[e]=Ps[t]})});function Ry(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ps.hasOwnProperty(t)&&Ps[t]?(""+e).trim():e+"px"}function Ay(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Ry(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var uw=We({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function oh(t,e){if(e){if(uw[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function sh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ah=null;function Td(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var lh=null,go=null,yo=null;function kp(t){if(t=_a(t)){if(typeof lh!="function")throw Error(B(280));var e=t.stateNode;e&&(e=Iu(e),lh(t.stateNode,t.type,e))}}function Cy(t){go?yo?yo.push(t):yo=[t]:go=t}function Py(){if(go){var t=go,e=yo;if(yo=go=null,kp(t),e)for(t=0;t<e.length;t++)kp(e[t])}}function ky(t,e){return t(e)}function Dy(){}var hc=!1;function xy(t,e,n){if(hc)return t(e,n);hc=!0;try{return ky(t,e,n)}finally{hc=!1,(go!==null||yo!==null)&&(Dy(),Py())}}function $s(t,e){var n=t.stateNode;if(n===null)return null;var r=Iu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var uh=!1;if(ur)try{var cs={};Object.defineProperty(cs,"passive",{get:function(){uh=!0}}),window.addEventListener("test",cs,cs),window.removeEventListener("test",cs,cs)}catch{uh=!1}function cw(t,e,n,r,i,o,s,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(f){this.onError(f)}}var ks=!1,Vl=null,Ll=!1,ch=null,hw={onError:function(t){ks=!0,Vl=t}};function dw(t,e,n,r,i,o,s,l,u){ks=!1,Vl=null,cw.apply(hw,arguments)}function fw(t,e,n,r,i,o,s,l,u){if(dw.apply(this,arguments),ks){if(ks){var h=Vl;ks=!1,Vl=null}else throw Error(B(198));Ll||(Ll=!0,ch=h)}}function Oi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ny(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Dp(t){if(Oi(t)!==t)throw Error(B(188))}function pw(t){var e=t.alternate;if(!e){if(e=Oi(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Dp(i),t;if(o===r)return Dp(i),e;o=o.sibling}throw Error(B(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function Vy(t){return t=pw(t),t!==null?Ly(t):null}function Ly(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ly(t);if(e!==null)return e;t=t.sibling}return null}var My=on.unstable_scheduleCallback,xp=on.unstable_cancelCallback,mw=on.unstable_shouldYield,gw=on.unstable_requestPaint,Je=on.unstable_now,yw=on.unstable_getCurrentPriorityLevel,Sd=on.unstable_ImmediatePriority,Oy=on.unstable_UserBlockingPriority,Ml=on.unstable_NormalPriority,vw=on.unstable_LowPriority,Fy=on.unstable_IdlePriority,Eu=null,Hn=null;function _w(t){if(Hn&&typeof Hn.onCommitFiberRoot=="function")try{Hn.onCommitFiberRoot(Eu,t,void 0,(t.current.flags&128)===128)}catch{}}var Vn=Math.clz32?Math.clz32:Tw,Ew=Math.log,ww=Math.LN2;function Tw(t){return t>>>=0,t===0?32:31-(Ew(t)/ww|0)|0}var Ga=64,Ka=4194304;function Ts(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ol(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var l=s&~i;l!==0?r=Ts(l):(o&=s,o!==0&&(r=Ts(o)))}else s=n&~i,s!==0?r=Ts(s):o!==0&&(r=Ts(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Vn(e),i=1<<n,r|=t[n],e&=~i;return r}function Sw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Iw(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-Vn(o),l=1<<s,u=i[s];u===-1?(!(l&n)||l&r)&&(i[s]=Sw(l,e)):u<=e&&(t.expiredLanes|=l),o&=~l}}function hh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function by(){var t=Ga;return Ga<<=1,!(Ga&4194240)&&(Ga=64),t}function dc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ya(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Vn(e),t[e]=n}function Rw(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Vn(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function Id(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Vn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var De=0;function Uy(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var jy,Rd,zy,By,$y,dh=!1,Qa=[],br=null,Ur=null,jr=null,Hs=new Map,qs=new Map,Nr=[],Aw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Np(t,e){switch(t){case"focusin":case"focusout":br=null;break;case"dragenter":case"dragleave":Ur=null;break;case"mouseover":case"mouseout":jr=null;break;case"pointerover":case"pointerout":Hs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":qs.delete(e.pointerId)}}function hs(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=_a(e),e!==null&&Rd(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Cw(t,e,n,r,i){switch(e){case"focusin":return br=hs(br,t,e,n,r,i),!0;case"dragenter":return Ur=hs(Ur,t,e,n,r,i),!0;case"mouseover":return jr=hs(jr,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Hs.set(o,hs(Hs.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,qs.set(o,hs(qs.get(o)||null,t,e,n,r,i)),!0}return!1}function Hy(t){var e=wi(t.target);if(e!==null){var n=Oi(e);if(n!==null){if(e=n.tag,e===13){if(e=Ny(n),e!==null){t.blockedOn=e,$y(t.priority,function(){zy(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ml(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=fh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ah=r,n.target.dispatchEvent(r),ah=null}else return e=_a(n),e!==null&&Rd(e),t.blockedOn=n,!1;e.shift()}return!0}function Vp(t,e,n){ml(t)&&n.delete(e)}function Pw(){dh=!1,br!==null&&ml(br)&&(br=null),Ur!==null&&ml(Ur)&&(Ur=null),jr!==null&&ml(jr)&&(jr=null),Hs.forEach(Vp),qs.forEach(Vp)}function ds(t,e){t.blockedOn===e&&(t.blockedOn=null,dh||(dh=!0,on.unstable_scheduleCallback(on.unstable_NormalPriority,Pw)))}function Ws(t){function e(i){return ds(i,t)}if(0<Qa.length){ds(Qa[0],t);for(var n=1;n<Qa.length;n++){var r=Qa[n];r.blockedOn===t&&(r.blockedOn=null)}}for(br!==null&&ds(br,t),Ur!==null&&ds(Ur,t),jr!==null&&ds(jr,t),Hs.forEach(e),qs.forEach(e),n=0;n<Nr.length;n++)r=Nr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Nr.length&&(n=Nr[0],n.blockedOn===null);)Hy(n),n.blockedOn===null&&Nr.shift()}var vo=gr.ReactCurrentBatchConfig,Fl=!0;function kw(t,e,n,r){var i=De,o=vo.transition;vo.transition=null;try{De=1,Ad(t,e,n,r)}finally{De=i,vo.transition=o}}function Dw(t,e,n,r){var i=De,o=vo.transition;vo.transition=null;try{De=4,Ad(t,e,n,r)}finally{De=i,vo.transition=o}}function Ad(t,e,n,r){if(Fl){var i=fh(t,e,n,r);if(i===null)Tc(t,e,r,bl,n),Np(t,r);else if(Cw(i,t,e,n,r))r.stopPropagation();else if(Np(t,r),e&4&&-1<Aw.indexOf(t)){for(;i!==null;){var o=_a(i);if(o!==null&&jy(o),o=fh(t,e,n,r),o===null&&Tc(t,e,r,bl,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Tc(t,e,r,null,n)}}var bl=null;function fh(t,e,n,r){if(bl=null,t=Td(r),t=wi(t),t!==null)if(e=Oi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ny(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return bl=t,null}function qy(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yw()){case Sd:return 1;case Oy:return 4;case Ml:case vw:return 16;case Fy:return 536870912;default:return 16}default:return 16}}var Lr=null,Cd=null,gl=null;function Wy(){if(gl)return gl;var t,e=Cd,n=e.length,r,i="value"in Lr?Lr.value:Lr.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return gl=i.slice(t,1<r?1-r:void 0)}function yl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Xa(){return!0}function Lp(){return!1}function an(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Xa:Lp,this.isPropagationStopped=Lp,this}return We(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Xa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Xa)},persist:function(){},isPersistent:Xa}),e}var jo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pd=an(jo),va=We({},jo,{view:0,detail:0}),xw=an(va),fc,pc,fs,wu=We({},va,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==fs&&(fs&&t.type==="mousemove"?(fc=t.screenX-fs.screenX,pc=t.screenY-fs.screenY):pc=fc=0,fs=t),fc)},movementY:function(t){return"movementY"in t?t.movementY:pc}}),Mp=an(wu),Nw=We({},wu,{dataTransfer:0}),Vw=an(Nw),Lw=We({},va,{relatedTarget:0}),mc=an(Lw),Mw=We({},jo,{animationName:0,elapsedTime:0,pseudoElement:0}),Ow=an(Mw),Fw=We({},jo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),bw=an(Fw),Uw=We({},jo,{data:0}),Op=an(Uw),jw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $w(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Bw[t])?!!e[t]:!1}function kd(){return $w}var Hw=We({},va,{key:function(t){if(t.key){var e=jw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=yl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?zw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kd,charCode:function(t){return t.type==="keypress"?yl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?yl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),qw=an(Hw),Ww=We({},wu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fp=an(Ww),Gw=We({},va,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kd}),Kw=an(Gw),Qw=We({},jo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xw=an(Qw),Yw=We({},wu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Jw=an(Yw),Zw=[9,13,27,32],Dd=ur&&"CompositionEvent"in window,Ds=null;ur&&"documentMode"in document&&(Ds=document.documentMode);var e1=ur&&"TextEvent"in window&&!Ds,Gy=ur&&(!Dd||Ds&&8<Ds&&11>=Ds),bp=" ",Up=!1;function Ky(t,e){switch(t){case"keyup":return Zw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qy(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var io=!1;function t1(t,e){switch(t){case"compositionend":return Qy(e);case"keypress":return e.which!==32?null:(Up=!0,bp);case"textInput":return t=e.data,t===bp&&Up?null:t;default:return null}}function n1(t,e){if(io)return t==="compositionend"||!Dd&&Ky(t,e)?(t=Wy(),gl=Cd=Lr=null,io=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Gy&&e.locale!=="ko"?null:e.data;default:return null}}var r1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!r1[t.type]:e==="textarea"}function Xy(t,e,n,r){Cy(r),e=Ul(e,"onChange"),0<e.length&&(n=new Pd("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var xs=null,Gs=null;function i1(t){av(t,0)}function Tu(t){var e=ao(t);if(Ey(e))return t}function o1(t,e){if(t==="change")return e}var Yy=!1;if(ur){var gc;if(ur){var yc="oninput"in document;if(!yc){var zp=document.createElement("div");zp.setAttribute("oninput","return;"),yc=typeof zp.oninput=="function"}gc=yc}else gc=!1;Yy=gc&&(!document.documentMode||9<document.documentMode)}function Bp(){xs&&(xs.detachEvent("onpropertychange",Jy),Gs=xs=null)}function Jy(t){if(t.propertyName==="value"&&Tu(Gs)){var e=[];Xy(e,Gs,t,Td(t)),xy(i1,e)}}function s1(t,e,n){t==="focusin"?(Bp(),xs=e,Gs=n,xs.attachEvent("onpropertychange",Jy)):t==="focusout"&&Bp()}function a1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Tu(Gs)}function l1(t,e){if(t==="click")return Tu(e)}function u1(t,e){if(t==="input"||t==="change")return Tu(e)}function c1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Mn=typeof Object.is=="function"?Object.is:c1;function Ks(t,e){if(Mn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Qc.call(e,i)||!Mn(t[i],e[i]))return!1}return!0}function $p(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Hp(t,e){var n=$p(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=$p(n)}}function Zy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Zy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ev(){for(var t=window,e=Nl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Nl(t.document)}return e}function xd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function h1(t){var e=ev(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Zy(n.ownerDocument.documentElement,n)){if(r!==null&&xd(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=Hp(n,o);var s=Hp(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var d1=ur&&"documentMode"in document&&11>=document.documentMode,oo=null,ph=null,Ns=null,mh=!1;function qp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;mh||oo==null||oo!==Nl(r)||(r=oo,"selectionStart"in r&&xd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ns&&Ks(Ns,r)||(Ns=r,r=Ul(ph,"onSelect"),0<r.length&&(e=new Pd("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=oo)))}function Ya(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var so={animationend:Ya("Animation","AnimationEnd"),animationiteration:Ya("Animation","AnimationIteration"),animationstart:Ya("Animation","AnimationStart"),transitionend:Ya("Transition","TransitionEnd")},vc={},tv={};ur&&(tv=document.createElement("div").style,"AnimationEvent"in window||(delete so.animationend.animation,delete so.animationiteration.animation,delete so.animationstart.animation),"TransitionEvent"in window||delete so.transitionend.transition);function Su(t){if(vc[t])return vc[t];if(!so[t])return t;var e=so[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in tv)return vc[t]=e[n];return t}var nv=Su("animationend"),rv=Su("animationiteration"),iv=Su("animationstart"),ov=Su("transitionend"),sv=new Map,Wp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ii(t,e){sv.set(t,e),Mi(e,[t])}for(var _c=0;_c<Wp.length;_c++){var Ec=Wp[_c],f1=Ec.toLowerCase(),p1=Ec[0].toUpperCase()+Ec.slice(1);ii(f1,"on"+p1)}ii(nv,"onAnimationEnd");ii(rv,"onAnimationIteration");ii(iv,"onAnimationStart");ii("dblclick","onDoubleClick");ii("focusin","onFocus");ii("focusout","onBlur");ii(ov,"onTransitionEnd");So("onMouseEnter",["mouseout","mouseover"]);So("onMouseLeave",["mouseout","mouseover"]);So("onPointerEnter",["pointerout","pointerover"]);So("onPointerLeave",["pointerout","pointerover"]);Mi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Mi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Mi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Mi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Mi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Mi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ss="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),m1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ss));function Gp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,fw(r,e,void 0,t),t.currentTarget=null}function av(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var l=r[s],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==o&&i.isPropagationStopped())break e;Gp(i,l,h),o=u}else for(s=0;s<r.length;s++){if(l=r[s],u=l.instance,h=l.currentTarget,l=l.listener,u!==o&&i.isPropagationStopped())break e;Gp(i,l,h),o=u}}}if(Ll)throw t=ch,Ll=!1,ch=null,t}function Oe(t,e){var n=e[Eh];n===void 0&&(n=e[Eh]=new Set);var r=t+"__bubble";n.has(r)||(lv(e,t,2,!1),n.add(r))}function wc(t,e,n){var r=0;e&&(r|=4),lv(n,t,r,e)}var Ja="_reactListening"+Math.random().toString(36).slice(2);function Qs(t){if(!t[Ja]){t[Ja]=!0,my.forEach(function(n){n!=="selectionchange"&&(m1.has(n)||wc(n,!1,t),wc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ja]||(e[Ja]=!0,wc("selectionchange",!1,e))}}function lv(t,e,n,r){switch(qy(e)){case 1:var i=kw;break;case 4:i=Dw;break;default:i=Ad}n=i.bind(null,e,n,t),i=void 0,!uh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Tc(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var u=s.tag;if((u===3||u===4)&&(u=s.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;s=s.return}for(;l!==null;){if(s=wi(l),s===null)return;if(u=s.tag,u===5||u===6){r=o=s;continue e}l=l.parentNode}}r=r.return}xy(function(){var h=o,f=Td(n),p=[];e:{var y=sv.get(t);if(y!==void 0){var T=Pd,P=t;switch(t){case"keypress":if(yl(n)===0)break e;case"keydown":case"keyup":T=qw;break;case"focusin":P="focus",T=mc;break;case"focusout":P="blur",T=mc;break;case"beforeblur":case"afterblur":T=mc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=Mp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=Vw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=Kw;break;case nv:case rv:case iv:T=Ow;break;case ov:T=Xw;break;case"scroll":T=xw;break;case"wheel":T=Jw;break;case"copy":case"cut":case"paste":T=bw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=Fp}var k=(e&4)!==0,V=!k&&t==="scroll",I=k?y!==null?y+"Capture":null:y;k=[];for(var _=h,R;_!==null;){R=_;var M=R.stateNode;if(R.tag===5&&M!==null&&(R=M,I!==null&&(M=$s(_,I),M!=null&&k.push(Xs(_,M,R)))),V)break;_=_.return}0<k.length&&(y=new T(y,P,null,n,f),p.push({event:y,listeners:k}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",y&&n!==ah&&(P=n.relatedTarget||n.fromElement)&&(wi(P)||P[cr]))break e;if((T||y)&&(y=f.window===f?f:(y=f.ownerDocument)?y.defaultView||y.parentWindow:window,T?(P=n.relatedTarget||n.toElement,T=h,P=P?wi(P):null,P!==null&&(V=Oi(P),P!==V||P.tag!==5&&P.tag!==6)&&(P=null)):(T=null,P=h),T!==P)){if(k=Mp,M="onMouseLeave",I="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(k=Fp,M="onPointerLeave",I="onPointerEnter",_="pointer"),V=T==null?y:ao(T),R=P==null?y:ao(P),y=new k(M,_+"leave",T,n,f),y.target=V,y.relatedTarget=R,M=null,wi(f)===h&&(k=new k(I,_+"enter",P,n,f),k.target=R,k.relatedTarget=V,M=k),V=M,T&&P)t:{for(k=T,I=P,_=0,R=k;R;R=Xi(R))_++;for(R=0,M=I;M;M=Xi(M))R++;for(;0<_-R;)k=Xi(k),_--;for(;0<R-_;)I=Xi(I),R--;for(;_--;){if(k===I||I!==null&&k===I.alternate)break t;k=Xi(k),I=Xi(I)}k=null}else k=null;T!==null&&Kp(p,y,T,k,!1),P!==null&&V!==null&&Kp(p,V,P,k,!0)}}e:{if(y=h?ao(h):window,T=y.nodeName&&y.nodeName.toLowerCase(),T==="select"||T==="input"&&y.type==="file")var z=o1;else if(jp(y))if(Yy)z=u1;else{z=a1;var H=s1}else(T=y.nodeName)&&T.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(z=l1);if(z&&(z=z(t,h))){Xy(p,z,n,f);break e}H&&H(t,y,h),t==="focusout"&&(H=y._wrapperState)&&H.controlled&&y.type==="number"&&nh(y,"number",y.value)}switch(H=h?ao(h):window,t){case"focusin":(jp(H)||H.contentEditable==="true")&&(oo=H,ph=h,Ns=null);break;case"focusout":Ns=ph=oo=null;break;case"mousedown":mh=!0;break;case"contextmenu":case"mouseup":case"dragend":mh=!1,qp(p,n,f);break;case"selectionchange":if(d1)break;case"keydown":case"keyup":qp(p,n,f)}var m;if(Dd)e:{switch(t){case"compositionstart":var g="onCompositionStart";break e;case"compositionend":g="onCompositionEnd";break e;case"compositionupdate":g="onCompositionUpdate";break e}g=void 0}else io?Ky(t,n)&&(g="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(g="onCompositionStart");g&&(Gy&&n.locale!=="ko"&&(io||g!=="onCompositionStart"?g==="onCompositionEnd"&&io&&(m=Wy()):(Lr=f,Cd="value"in Lr?Lr.value:Lr.textContent,io=!0)),H=Ul(h,g),0<H.length&&(g=new Op(g,t,null,n,f),p.push({event:g,listeners:H}),m?g.data=m:(m=Qy(n),m!==null&&(g.data=m)))),(m=e1?t1(t,n):n1(t,n))&&(h=Ul(h,"onBeforeInput"),0<h.length&&(f=new Op("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:h}),f.data=m))}av(p,e)})}function Xs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ul(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=$s(t,n),o!=null&&r.unshift(Xs(t,o,i)),o=$s(t,e),o!=null&&r.push(Xs(t,o,i))),t=t.return}return r}function Xi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Kp(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,i?(u=$s(n,o),u!=null&&s.unshift(Xs(n,u,l))):i||(u=$s(n,o),u!=null&&s.push(Xs(n,u,l)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var g1=/\r\n?/g,y1=/\u0000|\uFFFD/g;function Qp(t){return(typeof t=="string"?t:""+t).replace(g1,`
`).replace(y1,"")}function Za(t,e,n){if(e=Qp(e),Qp(t)!==e&&n)throw Error(B(425))}function jl(){}var gh=null,yh=null;function vh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var _h=typeof setTimeout=="function"?setTimeout:void 0,v1=typeof clearTimeout=="function"?clearTimeout:void 0,Xp=typeof Promise=="function"?Promise:void 0,_1=typeof queueMicrotask=="function"?queueMicrotask:typeof Xp<"u"?function(t){return Xp.resolve(null).then(t).catch(E1)}:_h;function E1(t){setTimeout(function(){throw t})}function Sc(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ws(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ws(e)}function zr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Yp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var zo=Math.random().toString(36).slice(2),$n="__reactFiber$"+zo,Ys="__reactProps$"+zo,cr="__reactContainer$"+zo,Eh="__reactEvents$"+zo,w1="__reactListeners$"+zo,T1="__reactHandles$"+zo;function wi(t){var e=t[$n];if(e)return e;for(var n=t.parentNode;n;){if(e=n[cr]||n[$n]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Yp(t);t!==null;){if(n=t[$n])return n;t=Yp(t)}return e}t=n,n=t.parentNode}return null}function _a(t){return t=t[$n]||t[cr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ao(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function Iu(t){return t[Ys]||null}var wh=[],lo=-1;function oi(t){return{current:t}}function be(t){0>lo||(t.current=wh[lo],wh[lo]=null,lo--)}function Ve(t,e){lo++,wh[lo]=t.current,t.current=e}var Jr={},Ot=oi(Jr),Gt=oi(!1),Pi=Jr;function Io(t,e){var n=t.type.contextTypes;if(!n)return Jr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Kt(t){return t=t.childContextTypes,t!=null}function zl(){be(Gt),be(Ot)}function Jp(t,e,n){if(Ot.current!==Jr)throw Error(B(168));Ve(Ot,e),Ve(Gt,n)}function uv(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(B(108,sw(t)||"Unknown",i));return We({},n,r)}function Bl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Jr,Pi=Ot.current,Ve(Ot,t),Ve(Gt,Gt.current),!0}function Zp(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=uv(t,e,Pi),r.__reactInternalMemoizedMergedChildContext=t,be(Gt),be(Ot),Ve(Ot,t)):be(Gt),Ve(Gt,n)}var rr=null,Ru=!1,Ic=!1;function cv(t){rr===null?rr=[t]:rr.push(t)}function S1(t){Ru=!0,cv(t)}function si(){if(!Ic&&rr!==null){Ic=!0;var t=0,e=De;try{var n=rr;for(De=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}rr=null,Ru=!1}catch(i){throw rr!==null&&(rr=rr.slice(t+1)),My(Sd,si),i}finally{De=e,Ic=!1}}return null}var uo=[],co=0,$l=null,Hl=0,fn=[],pn=0,ki=null,ir=1,or="";function gi(t,e){uo[co++]=Hl,uo[co++]=$l,$l=t,Hl=e}function hv(t,e,n){fn[pn++]=ir,fn[pn++]=or,fn[pn++]=ki,ki=t;var r=ir;t=or;var i=32-Vn(r)-1;r&=~(1<<i),n+=1;var o=32-Vn(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,ir=1<<32-Vn(e)+i|n<<i|r,or=o+t}else ir=1<<o|n<<i|r,or=t}function Nd(t){t.return!==null&&(gi(t,1),hv(t,1,0))}function Vd(t){for(;t===$l;)$l=uo[--co],uo[co]=null,Hl=uo[--co],uo[co]=null;for(;t===ki;)ki=fn[--pn],fn[pn]=null,or=fn[--pn],fn[pn]=null,ir=fn[--pn],fn[pn]=null}var nn=null,tn=null,Be=!1,xn=null;function dv(t,e){var n=yn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function em(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,nn=t,tn=zr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,nn=t,tn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ki!==null?{id:ir,overflow:or}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=yn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,nn=t,tn=null,!0):!1;default:return!1}}function Th(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Sh(t){if(Be){var e=tn;if(e){var n=e;if(!em(t,e)){if(Th(t))throw Error(B(418));e=zr(n.nextSibling);var r=nn;e&&em(t,e)?dv(r,n):(t.flags=t.flags&-4097|2,Be=!1,nn=t)}}else{if(Th(t))throw Error(B(418));t.flags=t.flags&-4097|2,Be=!1,nn=t}}}function tm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;nn=t}function el(t){if(t!==nn)return!1;if(!Be)return tm(t),Be=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!vh(t.type,t.memoizedProps)),e&&(e=tn)){if(Th(t))throw fv(),Error(B(418));for(;e;)dv(t,e),e=zr(e.nextSibling)}if(tm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){tn=zr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}tn=null}}else tn=nn?zr(t.stateNode.nextSibling):null;return!0}function fv(){for(var t=tn;t;)t=zr(t.nextSibling)}function Ro(){tn=nn=null,Be=!1}function Ld(t){xn===null?xn=[t]:xn.push(t)}var I1=gr.ReactCurrentBatchConfig;function ps(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var l=i.refs;s===null?delete l[o]:l[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function tl(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function nm(t){var e=t._init;return e(t._payload)}function pv(t){function e(I,_){if(t){var R=I.deletions;R===null?(I.deletions=[_],I.flags|=16):R.push(_)}}function n(I,_){if(!t)return null;for(;_!==null;)e(I,_),_=_.sibling;return null}function r(I,_){for(I=new Map;_!==null;)_.key!==null?I.set(_.key,_):I.set(_.index,_),_=_.sibling;return I}function i(I,_){return I=qr(I,_),I.index=0,I.sibling=null,I}function o(I,_,R){return I.index=R,t?(R=I.alternate,R!==null?(R=R.index,R<_?(I.flags|=2,_):R):(I.flags|=2,_)):(I.flags|=1048576,_)}function s(I){return t&&I.alternate===null&&(I.flags|=2),I}function l(I,_,R,M){return _===null||_.tag!==6?(_=xc(R,I.mode,M),_.return=I,_):(_=i(_,R),_.return=I,_)}function u(I,_,R,M){var z=R.type;return z===ro?f(I,_,R.props.children,M,R.key):_!==null&&(_.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===Dr&&nm(z)===_.type)?(M=i(_,R.props),M.ref=ps(I,_,R),M.return=I,M):(M=Il(R.type,R.key,R.props,null,I.mode,M),M.ref=ps(I,_,R),M.return=I,M)}function h(I,_,R,M){return _===null||_.tag!==4||_.stateNode.containerInfo!==R.containerInfo||_.stateNode.implementation!==R.implementation?(_=Nc(R,I.mode,M),_.return=I,_):(_=i(_,R.children||[]),_.return=I,_)}function f(I,_,R,M,z){return _===null||_.tag!==7?(_=Ci(R,I.mode,M,z),_.return=I,_):(_=i(_,R),_.return=I,_)}function p(I,_,R){if(typeof _=="string"&&_!==""||typeof _=="number")return _=xc(""+_,I.mode,R),_.return=I,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ha:return R=Il(_.type,_.key,_.props,null,I.mode,R),R.ref=ps(I,null,_),R.return=I,R;case no:return _=Nc(_,I.mode,R),_.return=I,_;case Dr:var M=_._init;return p(I,M(_._payload),R)}if(ws(_)||us(_))return _=Ci(_,I.mode,R,null),_.return=I,_;tl(I,_)}return null}function y(I,_,R,M){var z=_!==null?_.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return z!==null?null:l(I,_,""+R,M);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Ha:return R.key===z?u(I,_,R,M):null;case no:return R.key===z?h(I,_,R,M):null;case Dr:return z=R._init,y(I,_,z(R._payload),M)}if(ws(R)||us(R))return z!==null?null:f(I,_,R,M,null);tl(I,R)}return null}function T(I,_,R,M,z){if(typeof M=="string"&&M!==""||typeof M=="number")return I=I.get(R)||null,l(_,I,""+M,z);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Ha:return I=I.get(M.key===null?R:M.key)||null,u(_,I,M,z);case no:return I=I.get(M.key===null?R:M.key)||null,h(_,I,M,z);case Dr:var H=M._init;return T(I,_,R,H(M._payload),z)}if(ws(M)||us(M))return I=I.get(R)||null,f(_,I,M,z,null);tl(_,M)}return null}function P(I,_,R,M){for(var z=null,H=null,m=_,g=_=0,E=null;m!==null&&g<R.length;g++){m.index>g?(E=m,m=null):E=m.sibling;var w=y(I,m,R[g],M);if(w===null){m===null&&(m=E);break}t&&m&&w.alternate===null&&e(I,m),_=o(w,_,g),H===null?z=w:H.sibling=w,H=w,m=E}if(g===R.length)return n(I,m),Be&&gi(I,g),z;if(m===null){for(;g<R.length;g++)m=p(I,R[g],M),m!==null&&(_=o(m,_,g),H===null?z=m:H.sibling=m,H=m);return Be&&gi(I,g),z}for(m=r(I,m);g<R.length;g++)E=T(m,I,g,R[g],M),E!==null&&(t&&E.alternate!==null&&m.delete(E.key===null?g:E.key),_=o(E,_,g),H===null?z=E:H.sibling=E,H=E);return t&&m.forEach(function(C){return e(I,C)}),Be&&gi(I,g),z}function k(I,_,R,M){var z=us(R);if(typeof z!="function")throw Error(B(150));if(R=z.call(R),R==null)throw Error(B(151));for(var H=z=null,m=_,g=_=0,E=null,w=R.next();m!==null&&!w.done;g++,w=R.next()){m.index>g?(E=m,m=null):E=m.sibling;var C=y(I,m,w.value,M);if(C===null){m===null&&(m=E);break}t&&m&&C.alternate===null&&e(I,m),_=o(C,_,g),H===null?z=C:H.sibling=C,H=C,m=E}if(w.done)return n(I,m),Be&&gi(I,g),z;if(m===null){for(;!w.done;g++,w=R.next())w=p(I,w.value,M),w!==null&&(_=o(w,_,g),H===null?z=w:H.sibling=w,H=w);return Be&&gi(I,g),z}for(m=r(I,m);!w.done;g++,w=R.next())w=T(m,I,g,w.value,M),w!==null&&(t&&w.alternate!==null&&m.delete(w.key===null?g:w.key),_=o(w,_,g),H===null?z=w:H.sibling=w,H=w);return t&&m.forEach(function(D){return e(I,D)}),Be&&gi(I,g),z}function V(I,_,R,M){if(typeof R=="object"&&R!==null&&R.type===ro&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case Ha:e:{for(var z=R.key,H=_;H!==null;){if(H.key===z){if(z=R.type,z===ro){if(H.tag===7){n(I,H.sibling),_=i(H,R.props.children),_.return=I,I=_;break e}}else if(H.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===Dr&&nm(z)===H.type){n(I,H.sibling),_=i(H,R.props),_.ref=ps(I,H,R),_.return=I,I=_;break e}n(I,H);break}else e(I,H);H=H.sibling}R.type===ro?(_=Ci(R.props.children,I.mode,M,R.key),_.return=I,I=_):(M=Il(R.type,R.key,R.props,null,I.mode,M),M.ref=ps(I,_,R),M.return=I,I=M)}return s(I);case no:e:{for(H=R.key;_!==null;){if(_.key===H)if(_.tag===4&&_.stateNode.containerInfo===R.containerInfo&&_.stateNode.implementation===R.implementation){n(I,_.sibling),_=i(_,R.children||[]),_.return=I,I=_;break e}else{n(I,_);break}else e(I,_);_=_.sibling}_=Nc(R,I.mode,M),_.return=I,I=_}return s(I);case Dr:return H=R._init,V(I,_,H(R._payload),M)}if(ws(R))return P(I,_,R,M);if(us(R))return k(I,_,R,M);tl(I,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,_!==null&&_.tag===6?(n(I,_.sibling),_=i(_,R),_.return=I,I=_):(n(I,_),_=xc(R,I.mode,M),_.return=I,I=_),s(I)):n(I,_)}return V}var Ao=pv(!0),mv=pv(!1),ql=oi(null),Wl=null,ho=null,Md=null;function Od(){Md=ho=Wl=null}function Fd(t){var e=ql.current;be(ql),t._currentValue=e}function Ih(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function _o(t,e){Wl=t,Md=ho=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Wt=!0),t.firstContext=null)}function _n(t){var e=t._currentValue;if(Md!==t)if(t={context:t,memoizedValue:e,next:null},ho===null){if(Wl===null)throw Error(B(308));ho=t,Wl.dependencies={lanes:0,firstContext:t}}else ho=ho.next=t;return e}var Ti=null;function bd(t){Ti===null?Ti=[t]:Ti.push(t)}function gv(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,bd(e)):(n.next=i.next,i.next=n),e.interleaved=n,hr(t,r)}function hr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var xr=!1;function Ud(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function sr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Br(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,we&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,hr(t,n)}return i=r.interleaved,i===null?(e.next=e,bd(r)):(e.next=i.next,i.next=e),r.interleaved=e,hr(t,n)}function vl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Id(t,n)}}function rm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Gl(t,e,n,r){var i=t.updateQueue;xr=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,h=u.next;u.next=null,s===null?o=h:s.next=h,s=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==s&&(l===null?f.firstBaseUpdate=h:l.next=h,f.lastBaseUpdate=u))}if(o!==null){var p=i.baseState;s=0,f=h=u=null,l=o;do{var y=l.lane,T=l.eventTime;if((r&y)===y){f!==null&&(f=f.next={eventTime:T,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var P=t,k=l;switch(y=e,T=n,k.tag){case 1:if(P=k.payload,typeof P=="function"){p=P.call(T,p,y);break e}p=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=k.payload,y=typeof P=="function"?P.call(T,p,y):P,y==null)break e;p=We({},p,y);break e;case 2:xr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,y=i.effects,y===null?i.effects=[l]:y.push(l))}else T={eventTime:T,lane:y,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(h=f=T,u=p):f=f.next=T,s|=y;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;y=l,l=y.next,y.next=null,i.lastBaseUpdate=y,i.shared.pending=null}}while(!0);if(f===null&&(u=p),i.baseState=u,i.firstBaseUpdate=h,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);xi|=s,t.lanes=s,t.memoizedState=p}}function im(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(B(191,i));i.call(r)}}}var Ea={},qn=oi(Ea),Js=oi(Ea),Zs=oi(Ea);function Si(t){if(t===Ea)throw Error(B(174));return t}function jd(t,e){switch(Ve(Zs,e),Ve(Js,t),Ve(qn,Ea),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ih(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ih(e,t)}be(qn),Ve(qn,e)}function Co(){be(qn),be(Js),be(Zs)}function vv(t){Si(Zs.current);var e=Si(qn.current),n=ih(e,t.type);e!==n&&(Ve(Js,t),Ve(qn,n))}function zd(t){Js.current===t&&(be(qn),be(Js))}var He=oi(0);function Kl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Rc=[];function Bd(){for(var t=0;t<Rc.length;t++)Rc[t]._workInProgressVersionPrimary=null;Rc.length=0}var _l=gr.ReactCurrentDispatcher,Ac=gr.ReactCurrentBatchConfig,Di=0,qe=null,ut=null,pt=null,Ql=!1,Vs=!1,ea=0,R1=0;function kt(){throw Error(B(321))}function $d(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Mn(t[n],e[n]))return!1;return!0}function Hd(t,e,n,r,i,o){if(Di=o,qe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,_l.current=t===null||t.memoizedState===null?k1:D1,t=n(r,i),Vs){o=0;do{if(Vs=!1,ea=0,25<=o)throw Error(B(301));o+=1,pt=ut=null,e.updateQueue=null,_l.current=x1,t=n(r,i)}while(Vs)}if(_l.current=Xl,e=ut!==null&&ut.next!==null,Di=0,pt=ut=qe=null,Ql=!1,e)throw Error(B(300));return t}function qd(){var t=ea!==0;return ea=0,t}function zn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pt===null?qe.memoizedState=pt=t:pt=pt.next=t,pt}function En(){if(ut===null){var t=qe.alternate;t=t!==null?t.memoizedState:null}else t=ut.next;var e=pt===null?qe.memoizedState:pt.next;if(e!==null)pt=e,ut=t;else{if(t===null)throw Error(B(310));ut=t,t={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},pt===null?qe.memoizedState=pt=t:pt=pt.next=t}return pt}function ta(t,e){return typeof e=="function"?e(t):e}function Cc(t){var e=En(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=ut,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var l=s=null,u=null,h=o;do{var f=h.lane;if((Di&f)===f)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var p={lane:f,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=p,s=r):u=u.next=p,qe.lanes|=f,xi|=f}h=h.next}while(h!==null&&h!==o);u===null?s=r:u.next=l,Mn(r,e.memoizedState)||(Wt=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,qe.lanes|=o,xi|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Pc(t){var e=En(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);Mn(o,e.memoizedState)||(Wt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function _v(){}function Ev(t,e){var n=qe,r=En(),i=e(),o=!Mn(r.memoizedState,i);if(o&&(r.memoizedState=i,Wt=!0),r=r.queue,Wd(Sv.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||pt!==null&&pt.memoizedState.tag&1){if(n.flags|=2048,na(9,Tv.bind(null,n,r,i,e),void 0,null),mt===null)throw Error(B(349));Di&30||wv(n,e,i)}return i}function wv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=qe.updateQueue,e===null?(e={lastEffect:null,stores:null},qe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Tv(t,e,n,r){e.value=n,e.getSnapshot=r,Iv(e)&&Rv(t)}function Sv(t,e,n){return n(function(){Iv(e)&&Rv(t)})}function Iv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Mn(t,n)}catch{return!0}}function Rv(t){var e=hr(t,1);e!==null&&Ln(e,t,1,-1)}function om(t){var e=zn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ta,lastRenderedState:t},e.queue=t,t=t.dispatch=P1.bind(null,qe,t),[e.memoizedState,t]}function na(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=qe.updateQueue,e===null?(e={lastEffect:null,stores:null},qe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Av(){return En().memoizedState}function El(t,e,n,r){var i=zn();qe.flags|=t,i.memoizedState=na(1|e,n,void 0,r===void 0?null:r)}function Au(t,e,n,r){var i=En();r=r===void 0?null:r;var o=void 0;if(ut!==null){var s=ut.memoizedState;if(o=s.destroy,r!==null&&$d(r,s.deps)){i.memoizedState=na(e,n,o,r);return}}qe.flags|=t,i.memoizedState=na(1|e,n,o,r)}function sm(t,e){return El(8390656,8,t,e)}function Wd(t,e){return Au(2048,8,t,e)}function Cv(t,e){return Au(4,2,t,e)}function Pv(t,e){return Au(4,4,t,e)}function kv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Dv(t,e,n){return n=n!=null?n.concat([t]):null,Au(4,4,kv.bind(null,e,t),n)}function Gd(){}function xv(t,e){var n=En();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&$d(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Nv(t,e){var n=En();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&$d(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Vv(t,e,n){return Di&21?(Mn(n,e)||(n=by(),qe.lanes|=n,xi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Wt=!0),t.memoizedState=n)}function A1(t,e){var n=De;De=n!==0&&4>n?n:4,t(!0);var r=Ac.transition;Ac.transition={};try{t(!1),e()}finally{De=n,Ac.transition=r}}function Lv(){return En().memoizedState}function C1(t,e,n){var r=Hr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Mv(t))Ov(e,n);else if(n=gv(t,e,n,r),n!==null){var i=Ut();Ln(n,t,r,i),Fv(n,e,r)}}function P1(t,e,n){var r=Hr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Mv(t))Ov(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,l=o(s,n);if(i.hasEagerState=!0,i.eagerState=l,Mn(l,s)){var u=e.interleaved;u===null?(i.next=i,bd(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=gv(t,e,i,r),n!==null&&(i=Ut(),Ln(n,t,r,i),Fv(n,e,r))}}function Mv(t){var e=t.alternate;return t===qe||e!==null&&e===qe}function Ov(t,e){Vs=Ql=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Fv(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Id(t,n)}}var Xl={readContext:_n,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useInsertionEffect:kt,useLayoutEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useMutableSource:kt,useSyncExternalStore:kt,useId:kt,unstable_isNewReconciler:!1},k1={readContext:_n,useCallback:function(t,e){return zn().memoizedState=[t,e===void 0?null:e],t},useContext:_n,useEffect:sm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,El(4194308,4,kv.bind(null,e,t),n)},useLayoutEffect:function(t,e){return El(4194308,4,t,e)},useInsertionEffect:function(t,e){return El(4,2,t,e)},useMemo:function(t,e){var n=zn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=zn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=C1.bind(null,qe,t),[r.memoizedState,t]},useRef:function(t){var e=zn();return t={current:t},e.memoizedState=t},useState:om,useDebugValue:Gd,useDeferredValue:function(t){return zn().memoizedState=t},useTransition:function(){var t=om(!1),e=t[0];return t=A1.bind(null,t[1]),zn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=qe,i=zn();if(Be){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),mt===null)throw Error(B(349));Di&30||wv(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,sm(Sv.bind(null,r,o,t),[t]),r.flags|=2048,na(9,Tv.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=zn(),e=mt.identifierPrefix;if(Be){var n=or,r=ir;n=(r&~(1<<32-Vn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ea++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=R1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},D1={readContext:_n,useCallback:xv,useContext:_n,useEffect:Wd,useImperativeHandle:Dv,useInsertionEffect:Cv,useLayoutEffect:Pv,useMemo:Nv,useReducer:Cc,useRef:Av,useState:function(){return Cc(ta)},useDebugValue:Gd,useDeferredValue:function(t){var e=En();return Vv(e,ut.memoizedState,t)},useTransition:function(){var t=Cc(ta)[0],e=En().memoizedState;return[t,e]},useMutableSource:_v,useSyncExternalStore:Ev,useId:Lv,unstable_isNewReconciler:!1},x1={readContext:_n,useCallback:xv,useContext:_n,useEffect:Wd,useImperativeHandle:Dv,useInsertionEffect:Cv,useLayoutEffect:Pv,useMemo:Nv,useReducer:Pc,useRef:Av,useState:function(){return Pc(ta)},useDebugValue:Gd,useDeferredValue:function(t){var e=En();return ut===null?e.memoizedState=t:Vv(e,ut.memoizedState,t)},useTransition:function(){var t=Pc(ta)[0],e=En().memoizedState;return[t,e]},useMutableSource:_v,useSyncExternalStore:Ev,useId:Lv,unstable_isNewReconciler:!1};function Pn(t,e){if(t&&t.defaultProps){e=We({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Rh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:We({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Cu={isMounted:function(t){return(t=t._reactInternals)?Oi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ut(),i=Hr(t),o=sr(r,i);o.payload=e,n!=null&&(o.callback=n),e=Br(t,o,i),e!==null&&(Ln(e,t,i,r),vl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ut(),i=Hr(t),o=sr(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Br(t,o,i),e!==null&&(Ln(e,t,i,r),vl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ut(),r=Hr(t),i=sr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Br(t,i,r),e!==null&&(Ln(e,t,r,n),vl(e,t,r))}};function am(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!Ks(n,r)||!Ks(i,o):!0}function bv(t,e,n){var r=!1,i=Jr,o=e.contextType;return typeof o=="object"&&o!==null?o=_n(o):(i=Kt(e)?Pi:Ot.current,r=e.contextTypes,o=(r=r!=null)?Io(t,i):Jr),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Cu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function lm(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Cu.enqueueReplaceState(e,e.state,null)}function Ah(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Ud(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=_n(o):(o=Kt(e)?Pi:Ot.current,i.context=Io(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Rh(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Cu.enqueueReplaceState(i,i.state,null),Gl(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Po(t,e){try{var n="",r=e;do n+=ow(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function kc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ch(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var N1=typeof WeakMap=="function"?WeakMap:Map;function Uv(t,e,n){n=sr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Jl||(Jl=!0,Fh=r),Ch(t,e)},n}function jv(t,e,n){n=sr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Ch(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Ch(t,e),typeof r!="function"&&($r===null?$r=new Set([this]):$r.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function um(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new N1;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=W1.bind(null,t,e,n),e.then(t,t))}function cm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function hm(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=sr(-1,1),e.tag=2,Br(n,e,1))),n.lanes|=1),t)}var V1=gr.ReactCurrentOwner,Wt=!1;function bt(t,e,n,r){e.child=t===null?mv(e,null,n,r):Ao(e,t.child,n,r)}function dm(t,e,n,r,i){n=n.render;var o=e.ref;return _o(e,i),r=Hd(t,e,n,r,o,i),n=qd(),t!==null&&!Wt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,dr(t,e,i)):(Be&&n&&Nd(e),e.flags|=1,bt(t,e,r,i),e.child)}function fm(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!tf(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,zv(t,e,o,r,i)):(t=Il(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ks,n(s,r)&&t.ref===e.ref)return dr(t,e,i)}return e.flags|=1,t=qr(o,r),t.ref=e.ref,t.return=e,e.child=t}function zv(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Ks(o,r)&&t.ref===e.ref)if(Wt=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Wt=!0);else return e.lanes=t.lanes,dr(t,e,i)}return Ph(t,e,n,r,i)}function Bv(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ve(po,Zt),Zt|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ve(po,Zt),Zt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Ve(po,Zt),Zt|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,Ve(po,Zt),Zt|=r;return bt(t,e,i,n),e.child}function $v(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ph(t,e,n,r,i){var o=Kt(n)?Pi:Ot.current;return o=Io(e,o),_o(e,i),n=Hd(t,e,n,r,o,i),r=qd(),t!==null&&!Wt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,dr(t,e,i)):(Be&&r&&Nd(e),e.flags|=1,bt(t,e,n,i),e.child)}function pm(t,e,n,r,i){if(Kt(n)){var o=!0;Bl(e)}else o=!1;if(_o(e,i),e.stateNode===null)wl(t,e),bv(e,n,r),Ah(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,l=e.memoizedProps;s.props=l;var u=s.context,h=n.contextType;typeof h=="object"&&h!==null?h=_n(h):(h=Kt(n)?Pi:Ot.current,h=Io(e,h));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function";p||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==r||u!==h)&&lm(e,s,r,h),xr=!1;var y=e.memoizedState;s.state=y,Gl(e,r,s,i),u=e.memoizedState,l!==r||y!==u||Gt.current||xr?(typeof f=="function"&&(Rh(e,n,f,r),u=e.memoizedState),(l=xr||am(e,n,l,r,y,u,h))?(p||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),s.props=r,s.state=u,s.context=h,r=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,yv(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:Pn(e.type,l),s.props=h,p=e.pendingProps,y=s.context,u=n.contextType,typeof u=="object"&&u!==null?u=_n(u):(u=Kt(n)?Pi:Ot.current,u=Io(e,u));var T=n.getDerivedStateFromProps;(f=typeof T=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==p||y!==u)&&lm(e,s,r,u),xr=!1,y=e.memoizedState,s.state=y,Gl(e,r,s,i);var P=e.memoizedState;l!==p||y!==P||Gt.current||xr?(typeof T=="function"&&(Rh(e,n,T,r),P=e.memoizedState),(h=xr||am(e,n,h,r,y,P,u)||!1)?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,P,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,P,u)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=P),s.props=r,s.state=P,s.context=u,r=h):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),r=!1)}return kh(t,e,n,r,o,i)}function kh(t,e,n,r,i,o){$v(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&Zp(e,n,!1),dr(t,e,o);r=e.stateNode,V1.current=e;var l=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=Ao(e,t.child,null,o),e.child=Ao(e,null,l,o)):bt(t,e,l,o),e.memoizedState=r.state,i&&Zp(e,n,!0),e.child}function Hv(t){var e=t.stateNode;e.pendingContext?Jp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Jp(t,e.context,!1),jd(t,e.containerInfo)}function mm(t,e,n,r,i){return Ro(),Ld(i),e.flags|=256,bt(t,e,n,r),e.child}var Dh={dehydrated:null,treeContext:null,retryLane:0};function xh(t){return{baseLanes:t,cachePool:null,transitions:null}}function qv(t,e,n){var r=e.pendingProps,i=He.current,o=!1,s=(e.flags&128)!==0,l;if((l=s)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ve(He,i&1),t===null)return Sh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Du(s,r,0,null),t=Ci(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=xh(n),e.memoizedState=Dh,t):Kd(e,s));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return L1(t,e,s,r,l,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=qr(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?o=qr(l,o):(o=Ci(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?xh(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=Dh,r}return o=t.child,t=o.sibling,r=qr(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Kd(t,e){return e=Du({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function nl(t,e,n,r){return r!==null&&Ld(r),Ao(e,t.child,null,n),t=Kd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function L1(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=kc(Error(B(422))),nl(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Du({mode:"visible",children:r.children},i,0,null),o=Ci(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Ao(e,t.child,null,s),e.child.memoizedState=xh(s),e.memoizedState=Dh,o);if(!(e.mode&1))return nl(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(B(419)),r=kc(o,r,void 0),nl(t,e,s,r)}if(l=(s&t.childLanes)!==0,Wt||l){if(r=mt,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,hr(t,i),Ln(r,t,i,-1))}return ef(),r=kc(Error(B(421))),nl(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=G1.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,tn=zr(i.nextSibling),nn=e,Be=!0,xn=null,t!==null&&(fn[pn++]=ir,fn[pn++]=or,fn[pn++]=ki,ir=t.id,or=t.overflow,ki=e),e=Kd(e,r.children),e.flags|=4096,e)}function gm(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ih(t.return,e,n)}function Dc(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Wv(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(bt(t,e,r.children,n),r=He.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&gm(t,n,e);else if(t.tag===19)gm(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ve(He,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Kl(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Dc(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Kl(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Dc(e,!0,n,null,o);break;case"together":Dc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function wl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function dr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),xi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=qr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=qr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function M1(t,e,n){switch(e.tag){case 3:Hv(e),Ro();break;case 5:vv(e);break;case 1:Kt(e.type)&&Bl(e);break;case 4:jd(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ve(ql,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ve(He,He.current&1),e.flags|=128,null):n&e.child.childLanes?qv(t,e,n):(Ve(He,He.current&1),t=dr(t,e,n),t!==null?t.sibling:null);Ve(He,He.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Wv(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ve(He,He.current),r)break;return null;case 22:case 23:return e.lanes=0,Bv(t,e,n)}return dr(t,e,n)}var Gv,Nh,Kv,Qv;Gv=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Nh=function(){};Kv=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Si(qn.current);var o=null;switch(n){case"input":i=eh(t,i),r=eh(t,r),o=[];break;case"select":i=We({},i,{value:void 0}),r=We({},r,{value:void 0}),o=[];break;case"textarea":i=rh(t,i),r=rh(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=jl)}oh(n,r);var s;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var l=i[h];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(zs.hasOwnProperty(h)?o||(o=[]):(o=o||[]).push(h,null));for(h in r){var u=r[h];if(l=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(o||(o=[]),o.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(o=o||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(zs.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&Oe("scroll",t),o||l===u||(o=[])):(o=o||[]).push(h,u))}n&&(o=o||[]).push("style",n);var h=o;(e.updateQueue=h)&&(e.flags|=4)}};Qv=function(t,e,n,r){n!==r&&(e.flags|=4)};function ms(t,e){if(!Be)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Dt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function O1(t,e,n){var r=e.pendingProps;switch(Vd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(e),null;case 1:return Kt(e.type)&&zl(),Dt(e),null;case 3:return r=e.stateNode,Co(),be(Gt),be(Ot),Bd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(el(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,xn!==null&&(jh(xn),xn=null))),Nh(t,e),Dt(e),null;case 5:zd(e);var i=Si(Zs.current);if(n=e.type,t!==null&&e.stateNode!=null)Kv(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return Dt(e),null}if(t=Si(qn.current),el(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[$n]=e,r[Ys]=o,t=(e.mode&1)!==0,n){case"dialog":Oe("cancel",r),Oe("close",r);break;case"iframe":case"object":case"embed":Oe("load",r);break;case"video":case"audio":for(i=0;i<Ss.length;i++)Oe(Ss[i],r);break;case"source":Oe("error",r);break;case"img":case"image":case"link":Oe("error",r),Oe("load",r);break;case"details":Oe("toggle",r);break;case"input":Rp(r,o),Oe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Oe("invalid",r);break;case"textarea":Cp(r,o),Oe("invalid",r)}oh(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&Za(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Za(r.textContent,l,t),i=["children",""+l]):zs.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&Oe("scroll",r)}switch(n){case"input":qa(r),Ap(r,o,!0);break;case"textarea":qa(r),Pp(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=jl)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Sy(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[$n]=e,t[Ys]=r,Gv(t,e,!1,!1),e.stateNode=t;e:{switch(s=sh(n,r),n){case"dialog":Oe("cancel",t),Oe("close",t),i=r;break;case"iframe":case"object":case"embed":Oe("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ss.length;i++)Oe(Ss[i],t);i=r;break;case"source":Oe("error",t),i=r;break;case"img":case"image":case"link":Oe("error",t),Oe("load",t),i=r;break;case"details":Oe("toggle",t),i=r;break;case"input":Rp(t,r),i=eh(t,r),Oe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=We({},r,{value:void 0}),Oe("invalid",t);break;case"textarea":Cp(t,r),i=rh(t,r),Oe("invalid",t);break;default:i=r}oh(n,i),l=i;for(o in l)if(l.hasOwnProperty(o)){var u=l[o];o==="style"?Ay(t,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Iy(t,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Bs(t,u):typeof u=="number"&&Bs(t,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(zs.hasOwnProperty(o)?u!=null&&o==="onScroll"&&Oe("scroll",t):u!=null&&vd(t,o,u,s))}switch(n){case"input":qa(t),Ap(t,r,!1);break;case"textarea":qa(t),Pp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Yr(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?mo(t,!!r.multiple,o,!1):r.defaultValue!=null&&mo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=jl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Dt(e),null;case 6:if(t&&e.stateNode!=null)Qv(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=Si(Zs.current),Si(qn.current),el(e)){if(r=e.stateNode,n=e.memoizedProps,r[$n]=e,(o=r.nodeValue!==n)&&(t=nn,t!==null))switch(t.tag){case 3:Za(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Za(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[$n]=e,e.stateNode=r}return Dt(e),null;case 13:if(be(He),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Be&&tn!==null&&e.mode&1&&!(e.flags&128))fv(),Ro(),e.flags|=98560,o=!1;else if(o=el(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(B(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(B(317));o[$n]=e}else Ro(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Dt(e),o=!1}else xn!==null&&(jh(xn),xn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||He.current&1?ct===0&&(ct=3):ef())),e.updateQueue!==null&&(e.flags|=4),Dt(e),null);case 4:return Co(),Nh(t,e),t===null&&Qs(e.stateNode.containerInfo),Dt(e),null;case 10:return Fd(e.type._context),Dt(e),null;case 17:return Kt(e.type)&&zl(),Dt(e),null;case 19:if(be(He),o=e.memoizedState,o===null)return Dt(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)ms(o,!1);else{if(ct!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Kl(t),s!==null){for(e.flags|=128,ms(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ve(He,He.current&1|2),e.child}t=t.sibling}o.tail!==null&&Je()>ko&&(e.flags|=128,r=!0,ms(o,!1),e.lanes=4194304)}else{if(!r)if(t=Kl(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ms(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Be)return Dt(e),null}else 2*Je()-o.renderingStartTime>ko&&n!==1073741824&&(e.flags|=128,r=!0,ms(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Je(),e.sibling=null,n=He.current,Ve(He,r?n&1|2:n&1),e):(Dt(e),null);case 22:case 23:return Zd(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Zt&1073741824&&(Dt(e),e.subtreeFlags&6&&(e.flags|=8192)):Dt(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function F1(t,e){switch(Vd(e),e.tag){case 1:return Kt(e.type)&&zl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Co(),be(Gt),be(Ot),Bd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return zd(e),null;case 13:if(be(He),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));Ro()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return be(He),null;case 4:return Co(),null;case 10:return Fd(e.type._context),null;case 22:case 23:return Zd(),null;case 24:return null;default:return null}}var rl=!1,Vt=!1,b1=typeof WeakSet=="function"?WeakSet:Set,Q=null;function fo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Qe(t,e,r)}else n.current=null}function Vh(t,e,n){try{n()}catch(r){Qe(t,e,r)}}var ym=!1;function U1(t,e){if(gh=Fl,t=ev(),xd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,l=-1,u=-1,h=0,f=0,p=t,y=null;t:for(;;){for(var T;p!==n||i!==0&&p.nodeType!==3||(l=s+i),p!==o||r!==0&&p.nodeType!==3||(u=s+r),p.nodeType===3&&(s+=p.nodeValue.length),(T=p.firstChild)!==null;)y=p,p=T;for(;;){if(p===t)break t;if(y===n&&++h===i&&(l=s),y===o&&++f===r&&(u=s),(T=p.nextSibling)!==null)break;p=y,y=p.parentNode}p=T}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(yh={focusedElem:t,selectionRange:n},Fl=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var P=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var k=P.memoizedProps,V=P.memoizedState,I=e.stateNode,_=I.getSnapshotBeforeUpdate(e.elementType===e.type?k:Pn(e.type,k),V);I.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var R=e.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(M){Qe(e,e.return,M)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return P=ym,ym=!1,P}function Ls(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&Vh(e,n,o)}i=i.next}while(i!==r)}}function Pu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Lh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Xv(t){var e=t.alternate;e!==null&&(t.alternate=null,Xv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[$n],delete e[Ys],delete e[Eh],delete e[w1],delete e[T1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Yv(t){return t.tag===5||t.tag===3||t.tag===4}function vm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Yv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Mh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=jl));else if(r!==4&&(t=t.child,t!==null))for(Mh(t,e,n),t=t.sibling;t!==null;)Mh(t,e,n),t=t.sibling}function Oh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Oh(t,e,n),t=t.sibling;t!==null;)Oh(t,e,n),t=t.sibling}var Et=null,kn=!1;function Pr(t,e,n){for(n=n.child;n!==null;)Jv(t,e,n),n=n.sibling}function Jv(t,e,n){if(Hn&&typeof Hn.onCommitFiberUnmount=="function")try{Hn.onCommitFiberUnmount(Eu,n)}catch{}switch(n.tag){case 5:Vt||fo(n,e);case 6:var r=Et,i=kn;Et=null,Pr(t,e,n),Et=r,kn=i,Et!==null&&(kn?(t=Et,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Et.removeChild(n.stateNode));break;case 18:Et!==null&&(kn?(t=Et,n=n.stateNode,t.nodeType===8?Sc(t.parentNode,n):t.nodeType===1&&Sc(t,n),Ws(t)):Sc(Et,n.stateNode));break;case 4:r=Et,i=kn,Et=n.stateNode.containerInfo,kn=!0,Pr(t,e,n),Et=r,kn=i;break;case 0:case 11:case 14:case 15:if(!Vt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&Vh(n,e,s),i=i.next}while(i!==r)}Pr(t,e,n);break;case 1:if(!Vt&&(fo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Qe(n,e,l)}Pr(t,e,n);break;case 21:Pr(t,e,n);break;case 22:n.mode&1?(Vt=(r=Vt)||n.memoizedState!==null,Pr(t,e,n),Vt=r):Pr(t,e,n);break;default:Pr(t,e,n)}}function _m(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new b1),e.forEach(function(r){var i=K1.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function An(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,l=s;e:for(;l!==null;){switch(l.tag){case 5:Et=l.stateNode,kn=!1;break e;case 3:Et=l.stateNode.containerInfo,kn=!0;break e;case 4:Et=l.stateNode.containerInfo,kn=!0;break e}l=l.return}if(Et===null)throw Error(B(160));Jv(o,s,i),Et=null,kn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(h){Qe(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Zv(e,t),e=e.sibling}function Zv(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(An(e,t),jn(t),r&4){try{Ls(3,t,t.return),Pu(3,t)}catch(k){Qe(t,t.return,k)}try{Ls(5,t,t.return)}catch(k){Qe(t,t.return,k)}}break;case 1:An(e,t),jn(t),r&512&&n!==null&&fo(n,n.return);break;case 5:if(An(e,t),jn(t),r&512&&n!==null&&fo(n,n.return),t.flags&32){var i=t.stateNode;try{Bs(i,"")}catch(k){Qe(t,t.return,k)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&wy(i,o),sh(l,s);var h=sh(l,o);for(s=0;s<u.length;s+=2){var f=u[s],p=u[s+1];f==="style"?Ay(i,p):f==="dangerouslySetInnerHTML"?Iy(i,p):f==="children"?Bs(i,p):vd(i,f,p,h)}switch(l){case"input":th(i,o);break;case"textarea":Ty(i,o);break;case"select":var y=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var T=o.value;T!=null?mo(i,!!o.multiple,T,!1):y!==!!o.multiple&&(o.defaultValue!=null?mo(i,!!o.multiple,o.defaultValue,!0):mo(i,!!o.multiple,o.multiple?[]:"",!1))}i[Ys]=o}catch(k){Qe(t,t.return,k)}}break;case 6:if(An(e,t),jn(t),r&4){if(t.stateNode===null)throw Error(B(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(k){Qe(t,t.return,k)}}break;case 3:if(An(e,t),jn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ws(e.containerInfo)}catch(k){Qe(t,t.return,k)}break;case 4:An(e,t),jn(t);break;case 13:An(e,t),jn(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Yd=Je())),r&4&&_m(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Vt=(h=Vt)||f,An(e,t),Vt=h):An(e,t),jn(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!f&&t.mode&1)for(Q=t,f=t.child;f!==null;){for(p=Q=f;Q!==null;){switch(y=Q,T=y.child,y.tag){case 0:case 11:case 14:case 15:Ls(4,y,y.return);break;case 1:fo(y,y.return);var P=y.stateNode;if(typeof P.componentWillUnmount=="function"){r=y,n=y.return;try{e=r,P.props=e.memoizedProps,P.state=e.memoizedState,P.componentWillUnmount()}catch(k){Qe(r,n,k)}}break;case 5:fo(y,y.return);break;case 22:if(y.memoizedState!==null){wm(p);continue}}T!==null?(T.return=y,Q=T):wm(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{i=p.stateNode,h?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=p.stateNode,u=p.memoizedProps.style,s=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Ry("display",s))}catch(k){Qe(t,t.return,k)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=h?"":p.memoizedProps}catch(k){Qe(t,t.return,k)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:An(e,t),jn(t),r&4&&_m(t);break;case 21:break;default:An(e,t),jn(t)}}function jn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Yv(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Bs(i,""),r.flags&=-33);var o=vm(t);Oh(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,l=vm(t);Mh(t,l,s);break;default:throw Error(B(161))}}catch(u){Qe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function j1(t,e,n){Q=t,e_(t)}function e_(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var i=Q,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||rl;if(!s){var l=i.alternate,u=l!==null&&l.memoizedState!==null||Vt;l=rl;var h=Vt;if(rl=s,(Vt=u)&&!h)for(Q=i;Q!==null;)s=Q,u=s.child,s.tag===22&&s.memoizedState!==null?Tm(i):u!==null?(u.return=s,Q=u):Tm(i);for(;o!==null;)Q=o,e_(o),o=o.sibling;Q=i,rl=l,Vt=h}Em(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,Q=o):Em(t)}}function Em(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Vt||Pu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Vt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Pn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&im(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}im(e,s,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var f=h.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&Ws(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}Vt||e.flags&512&&Lh(e)}catch(y){Qe(e,e.return,y)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function wm(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function Tm(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Pu(4,e)}catch(u){Qe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Qe(e,i,u)}}var o=e.return;try{Lh(e)}catch(u){Qe(e,o,u)}break;case 5:var s=e.return;try{Lh(e)}catch(u){Qe(e,s,u)}}}catch(u){Qe(e,e.return,u)}if(e===t){Q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Q=l;break}Q=e.return}}var z1=Math.ceil,Yl=gr.ReactCurrentDispatcher,Qd=gr.ReactCurrentOwner,vn=gr.ReactCurrentBatchConfig,we=0,mt=null,nt=null,St=0,Zt=0,po=oi(0),ct=0,ra=null,xi=0,ku=0,Xd=0,Ms=null,qt=null,Yd=0,ko=1/0,nr=null,Jl=!1,Fh=null,$r=null,il=!1,Mr=null,Zl=0,Os=0,bh=null,Tl=-1,Sl=0;function Ut(){return we&6?Je():Tl!==-1?Tl:Tl=Je()}function Hr(t){return t.mode&1?we&2&&St!==0?St&-St:I1.transition!==null?(Sl===0&&(Sl=by()),Sl):(t=De,t!==0||(t=window.event,t=t===void 0?16:qy(t.type)),t):1}function Ln(t,e,n,r){if(50<Os)throw Os=0,bh=null,Error(B(185));ya(t,n,r),(!(we&2)||t!==mt)&&(t===mt&&(!(we&2)&&(ku|=n),ct===4&&Vr(t,St)),Qt(t,r),n===1&&we===0&&!(e.mode&1)&&(ko=Je()+500,Ru&&si()))}function Qt(t,e){var n=t.callbackNode;Iw(t,e);var r=Ol(t,t===mt?St:0);if(r===0)n!==null&&xp(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&xp(n),e===1)t.tag===0?S1(Sm.bind(null,t)):cv(Sm.bind(null,t)),_1(function(){!(we&6)&&si()}),n=null;else{switch(Uy(r)){case 1:n=Sd;break;case 4:n=Oy;break;case 16:n=Ml;break;case 536870912:n=Fy;break;default:n=Ml}n=l_(n,t_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function t_(t,e){if(Tl=-1,Sl=0,we&6)throw Error(B(327));var n=t.callbackNode;if(Eo()&&t.callbackNode!==n)return null;var r=Ol(t,t===mt?St:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=eu(t,r);else{e=r;var i=we;we|=2;var o=r_();(mt!==t||St!==e)&&(nr=null,ko=Je()+500,Ai(t,e));do try{H1();break}catch(l){n_(t,l)}while(!0);Od(),Yl.current=o,we=i,nt!==null?e=0:(mt=null,St=0,e=ct)}if(e!==0){if(e===2&&(i=hh(t),i!==0&&(r=i,e=Uh(t,i))),e===1)throw n=ra,Ai(t,0),Vr(t,r),Qt(t,Je()),n;if(e===6)Vr(t,r);else{if(i=t.current.alternate,!(r&30)&&!B1(i)&&(e=eu(t,r),e===2&&(o=hh(t),o!==0&&(r=o,e=Uh(t,o))),e===1))throw n=ra,Ai(t,0),Vr(t,r),Qt(t,Je()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:yi(t,qt,nr);break;case 3:if(Vr(t,r),(r&130023424)===r&&(e=Yd+500-Je(),10<e)){if(Ol(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ut(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=_h(yi.bind(null,t,qt,nr),e);break}yi(t,qt,nr);break;case 4:if(Vr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-Vn(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=Je()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*z1(r/1960))-r,10<r){t.timeoutHandle=_h(yi.bind(null,t,qt,nr),r);break}yi(t,qt,nr);break;case 5:yi(t,qt,nr);break;default:throw Error(B(329))}}}return Qt(t,Je()),t.callbackNode===n?t_.bind(null,t):null}function Uh(t,e){var n=Ms;return t.current.memoizedState.isDehydrated&&(Ai(t,e).flags|=256),t=eu(t,e),t!==2&&(e=qt,qt=n,e!==null&&jh(e)),t}function jh(t){qt===null?qt=t:qt.push.apply(qt,t)}function B1(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Mn(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Vr(t,e){for(e&=~Xd,e&=~ku,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Vn(e),r=1<<n;t[n]=-1,e&=~r}}function Sm(t){if(we&6)throw Error(B(327));Eo();var e=Ol(t,0);if(!(e&1))return Qt(t,Je()),null;var n=eu(t,e);if(t.tag!==0&&n===2){var r=hh(t);r!==0&&(e=r,n=Uh(t,r))}if(n===1)throw n=ra,Ai(t,0),Vr(t,e),Qt(t,Je()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,yi(t,qt,nr),Qt(t,Je()),null}function Jd(t,e){var n=we;we|=1;try{return t(e)}finally{we=n,we===0&&(ko=Je()+500,Ru&&si())}}function Ni(t){Mr!==null&&Mr.tag===0&&!(we&6)&&Eo();var e=we;we|=1;var n=vn.transition,r=De;try{if(vn.transition=null,De=1,t)return t()}finally{De=r,vn.transition=n,we=e,!(we&6)&&si()}}function Zd(){Zt=po.current,be(po)}function Ai(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,v1(n)),nt!==null)for(n=nt.return;n!==null;){var r=n;switch(Vd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&zl();break;case 3:Co(),be(Gt),be(Ot),Bd();break;case 5:zd(r);break;case 4:Co();break;case 13:be(He);break;case 19:be(He);break;case 10:Fd(r.type._context);break;case 22:case 23:Zd()}n=n.return}if(mt=t,nt=t=qr(t.current,null),St=Zt=e,ct=0,ra=null,Xd=ku=xi=0,qt=Ms=null,Ti!==null){for(e=0;e<Ti.length;e++)if(n=Ti[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}Ti=null}return t}function n_(t,e){do{var n=nt;try{if(Od(),_l.current=Xl,Ql){for(var r=qe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ql=!1}if(Di=0,pt=ut=qe=null,Vs=!1,ea=0,Qd.current=null,n===null||n.return===null){ct=1,ra=e,nt=null;break}e:{var o=t,s=n.return,l=n,u=e;if(e=St,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,f=l,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var y=f.alternate;y?(f.updateQueue=y.updateQueue,f.memoizedState=y.memoizedState,f.lanes=y.lanes):(f.updateQueue=null,f.memoizedState=null)}var T=cm(s);if(T!==null){T.flags&=-257,hm(T,s,l,o,e),T.mode&1&&um(o,h,e),e=T,u=h;var P=e.updateQueue;if(P===null){var k=new Set;k.add(u),e.updateQueue=k}else P.add(u);break e}else{if(!(e&1)){um(o,h,e),ef();break e}u=Error(B(426))}}else if(Be&&l.mode&1){var V=cm(s);if(V!==null){!(V.flags&65536)&&(V.flags|=256),hm(V,s,l,o,e),Ld(Po(u,l));break e}}o=u=Po(u,l),ct!==4&&(ct=2),Ms===null?Ms=[o]:Ms.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var I=Uv(o,u,e);rm(o,I);break e;case 1:l=u;var _=o.type,R=o.stateNode;if(!(o.flags&128)&&(typeof _.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&($r===null||!$r.has(R)))){o.flags|=65536,e&=-e,o.lanes|=e;var M=jv(o,l,e);rm(o,M);break e}}o=o.return}while(o!==null)}o_(n)}catch(z){e=z,nt===n&&n!==null&&(nt=n=n.return);continue}break}while(!0)}function r_(){var t=Yl.current;return Yl.current=Xl,t===null?Xl:t}function ef(){(ct===0||ct===3||ct===2)&&(ct=4),mt===null||!(xi&268435455)&&!(ku&268435455)||Vr(mt,St)}function eu(t,e){var n=we;we|=2;var r=r_();(mt!==t||St!==e)&&(nr=null,Ai(t,e));do try{$1();break}catch(i){n_(t,i)}while(!0);if(Od(),we=n,Yl.current=r,nt!==null)throw Error(B(261));return mt=null,St=0,ct}function $1(){for(;nt!==null;)i_(nt)}function H1(){for(;nt!==null&&!mw();)i_(nt)}function i_(t){var e=a_(t.alternate,t,Zt);t.memoizedProps=t.pendingProps,e===null?o_(t):nt=e,Qd.current=null}function o_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=F1(n,e),n!==null){n.flags&=32767,nt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ct=6,nt=null;return}}else if(n=O1(n,e,Zt),n!==null){nt=n;return}if(e=e.sibling,e!==null){nt=e;return}nt=e=t}while(e!==null);ct===0&&(ct=5)}function yi(t,e,n){var r=De,i=vn.transition;try{vn.transition=null,De=1,q1(t,e,n,r)}finally{vn.transition=i,De=r}return null}function q1(t,e,n,r){do Eo();while(Mr!==null);if(we&6)throw Error(B(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(Rw(t,o),t===mt&&(nt=mt=null,St=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||il||(il=!0,l_(Ml,function(){return Eo(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=vn.transition,vn.transition=null;var s=De;De=1;var l=we;we|=4,Qd.current=null,U1(t,n),Zv(n,t),h1(yh),Fl=!!gh,yh=gh=null,t.current=n,j1(n),gw(),we=l,De=s,vn.transition=o}else t.current=n;if(il&&(il=!1,Mr=t,Zl=i),o=t.pendingLanes,o===0&&($r=null),_w(n.stateNode),Qt(t,Je()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Jl)throw Jl=!1,t=Fh,Fh=null,t;return Zl&1&&t.tag!==0&&Eo(),o=t.pendingLanes,o&1?t===bh?Os++:(Os=0,bh=t):Os=0,si(),null}function Eo(){if(Mr!==null){var t=Uy(Zl),e=vn.transition,n=De;try{if(vn.transition=null,De=16>t?16:t,Mr===null)var r=!1;else{if(t=Mr,Mr=null,Zl=0,we&6)throw Error(B(331));var i=we;for(we|=4,Q=t.current;Q!==null;){var o=Q,s=o.child;if(Q.flags&16){var l=o.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(Q=h;Q!==null;){var f=Q;switch(f.tag){case 0:case 11:case 15:Ls(8,f,o)}var p=f.child;if(p!==null)p.return=f,Q=p;else for(;Q!==null;){f=Q;var y=f.sibling,T=f.return;if(Xv(f),f===h){Q=null;break}if(y!==null){y.return=T,Q=y;break}Q=T}}}var P=o.alternate;if(P!==null){var k=P.child;if(k!==null){P.child=null;do{var V=k.sibling;k.sibling=null,k=V}while(k!==null)}}Q=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,Q=s;else e:for(;Q!==null;){if(o=Q,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Ls(9,o,o.return)}var I=o.sibling;if(I!==null){I.return=o.return,Q=I;break e}Q=o.return}}var _=t.current;for(Q=_;Q!==null;){s=Q;var R=s.child;if(s.subtreeFlags&2064&&R!==null)R.return=s,Q=R;else e:for(s=_;Q!==null;){if(l=Q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Pu(9,l)}}catch(z){Qe(l,l.return,z)}if(l===s){Q=null;break e}var M=l.sibling;if(M!==null){M.return=l.return,Q=M;break e}Q=l.return}}if(we=i,si(),Hn&&typeof Hn.onPostCommitFiberRoot=="function")try{Hn.onPostCommitFiberRoot(Eu,t)}catch{}r=!0}return r}finally{De=n,vn.transition=e}}return!1}function Im(t,e,n){e=Po(n,e),e=Uv(t,e,1),t=Br(t,e,1),e=Ut(),t!==null&&(ya(t,1,e),Qt(t,e))}function Qe(t,e,n){if(t.tag===3)Im(t,t,n);else for(;e!==null;){if(e.tag===3){Im(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&($r===null||!$r.has(r))){t=Po(n,t),t=jv(e,t,1),e=Br(e,t,1),t=Ut(),e!==null&&(ya(e,1,t),Qt(e,t));break}}e=e.return}}function W1(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ut(),t.pingedLanes|=t.suspendedLanes&n,mt===t&&(St&n)===n&&(ct===4||ct===3&&(St&130023424)===St&&500>Je()-Yd?Ai(t,0):Xd|=n),Qt(t,e)}function s_(t,e){e===0&&(t.mode&1?(e=Ka,Ka<<=1,!(Ka&130023424)&&(Ka=4194304)):e=1);var n=Ut();t=hr(t,e),t!==null&&(ya(t,e,n),Qt(t,n))}function G1(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),s_(t,n)}function K1(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),s_(t,n)}var a_;a_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Gt.current)Wt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Wt=!1,M1(t,e,n);Wt=!!(t.flags&131072)}else Wt=!1,Be&&e.flags&1048576&&hv(e,Hl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;wl(t,e),t=e.pendingProps;var i=Io(e,Ot.current);_o(e,n),i=Hd(null,e,r,t,i,n);var o=qd();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Kt(r)?(o=!0,Bl(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ud(e),i.updater=Cu,e.stateNode=i,i._reactInternals=e,Ah(e,r,t,n),e=kh(null,e,r,!0,o,n)):(e.tag=0,Be&&o&&Nd(e),bt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(wl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=X1(r),t=Pn(r,t),i){case 0:e=Ph(null,e,r,t,n);break e;case 1:e=pm(null,e,r,t,n);break e;case 11:e=dm(null,e,r,t,n);break e;case 14:e=fm(null,e,r,Pn(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Pn(r,i),Ph(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Pn(r,i),pm(t,e,r,i,n);case 3:e:{if(Hv(e),t===null)throw Error(B(387));r=e.pendingProps,o=e.memoizedState,i=o.element,yv(t,e),Gl(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Po(Error(B(423)),e),e=mm(t,e,r,n,i);break e}else if(r!==i){i=Po(Error(B(424)),e),e=mm(t,e,r,n,i);break e}else for(tn=zr(e.stateNode.containerInfo.firstChild),nn=e,Be=!0,xn=null,n=mv(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ro(),r===i){e=dr(t,e,n);break e}bt(t,e,r,n)}e=e.child}return e;case 5:return vv(e),t===null&&Sh(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,vh(r,i)?s=null:o!==null&&vh(r,o)&&(e.flags|=32),$v(t,e),bt(t,e,s,n),e.child;case 6:return t===null&&Sh(e),null;case 13:return qv(t,e,n);case 4:return jd(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ao(e,null,r,n):bt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Pn(r,i),dm(t,e,r,i,n);case 7:return bt(t,e,e.pendingProps,n),e.child;case 8:return bt(t,e,e.pendingProps.children,n),e.child;case 12:return bt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,Ve(ql,r._currentValue),r._currentValue=s,o!==null)if(Mn(o.value,s)){if(o.children===i.children&&!Gt.current){e=dr(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){s=o.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=sr(-1,n&-n),u.tag=2;var h=o.updateQueue;if(h!==null){h=h.shared;var f=h.pending;f===null?u.next=u:(u.next=f.next,f.next=u),h.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),Ih(o.return,n,e),l.lanes|=n;break}u=u.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(B(341));s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Ih(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}bt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,_o(e,n),i=_n(i),r=r(i),e.flags|=1,bt(t,e,r,n),e.child;case 14:return r=e.type,i=Pn(r,e.pendingProps),i=Pn(r.type,i),fm(t,e,r,i,n);case 15:return zv(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Pn(r,i),wl(t,e),e.tag=1,Kt(r)?(t=!0,Bl(e)):t=!1,_o(e,n),bv(e,r,i),Ah(e,r,i,n),kh(null,e,r,!0,t,n);case 19:return Wv(t,e,n);case 22:return Bv(t,e,n)}throw Error(B(156,e.tag))};function l_(t,e){return My(t,e)}function Q1(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yn(t,e,n,r){return new Q1(t,e,n,r)}function tf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function X1(t){if(typeof t=="function")return tf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ed)return 11;if(t===wd)return 14}return 2}function qr(t,e){var n=t.alternate;return n===null?(n=yn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Il(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")tf(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case ro:return Ci(n.children,i,o,e);case _d:s=8,i|=8;break;case Xc:return t=yn(12,n,e,i|2),t.elementType=Xc,t.lanes=o,t;case Yc:return t=yn(13,n,e,i),t.elementType=Yc,t.lanes=o,t;case Jc:return t=yn(19,n,e,i),t.elementType=Jc,t.lanes=o,t;case vy:return Du(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case gy:s=10;break e;case yy:s=9;break e;case Ed:s=11;break e;case wd:s=14;break e;case Dr:s=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=yn(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Ci(t,e,n,r){return t=yn(7,t,r,e),t.lanes=n,t}function Du(t,e,n,r){return t=yn(22,t,r,e),t.elementType=vy,t.lanes=n,t.stateNode={isHidden:!1},t}function xc(t,e,n){return t=yn(6,t,null,e),t.lanes=n,t}function Nc(t,e,n){return e=yn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Y1(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=dc(0),this.expirationTimes=dc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dc(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function nf(t,e,n,r,i,o,s,l,u){return t=new Y1(t,e,n,l,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=yn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ud(o),t}function J1(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:no,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function u_(t){if(!t)return Jr;t=t._reactInternals;e:{if(Oi(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Kt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(Kt(n))return uv(t,n,e)}return e}function c_(t,e,n,r,i,o,s,l,u){return t=nf(n,r,!0,t,i,o,s,l,u),t.context=u_(null),n=t.current,r=Ut(),i=Hr(n),o=sr(r,i),o.callback=e??null,Br(n,o,i),t.current.lanes=i,ya(t,i,r),Qt(t,r),t}function xu(t,e,n,r){var i=e.current,o=Ut(),s=Hr(i);return n=u_(n),e.context===null?e.context=n:e.pendingContext=n,e=sr(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Br(i,e,s),t!==null&&(Ln(t,i,s,o),vl(t,i,s)),s}function tu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Rm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function rf(t,e){Rm(t,e),(t=t.alternate)&&Rm(t,e)}function Z1(){return null}var h_=typeof reportError=="function"?reportError:function(t){console.error(t)};function of(t){this._internalRoot=t}Nu.prototype.render=of.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));xu(t,e,null,null)};Nu.prototype.unmount=of.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ni(function(){xu(null,t,null,null)}),e[cr]=null}};function Nu(t){this._internalRoot=t}Nu.prototype.unstable_scheduleHydration=function(t){if(t){var e=By();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Nr.length&&e!==0&&e<Nr[n].priority;n++);Nr.splice(n,0,t),n===0&&Hy(t)}};function sf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Vu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Am(){}function eT(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var h=tu(s);o.call(h)}}var s=c_(e,r,t,0,null,!1,!1,"",Am);return t._reactRootContainer=s,t[cr]=s.current,Qs(t.nodeType===8?t.parentNode:t),Ni(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var h=tu(u);l.call(h)}}var u=nf(t,0,!1,null,null,!1,!1,"",Am);return t._reactRootContainer=u,t[cr]=u.current,Qs(t.nodeType===8?t.parentNode:t),Ni(function(){xu(e,u,n,r)}),u}function Lu(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var l=i;i=function(){var u=tu(s);l.call(u)}}xu(e,s,t,i)}else s=eT(n,e,t,i,r);return tu(s)}jy=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ts(e.pendingLanes);n!==0&&(Id(e,n|1),Qt(e,Je()),!(we&6)&&(ko=Je()+500,si()))}break;case 13:Ni(function(){var r=hr(t,1);if(r!==null){var i=Ut();Ln(r,t,1,i)}}),rf(t,1)}};Rd=function(t){if(t.tag===13){var e=hr(t,134217728);if(e!==null){var n=Ut();Ln(e,t,134217728,n)}rf(t,134217728)}};zy=function(t){if(t.tag===13){var e=Hr(t),n=hr(t,e);if(n!==null){var r=Ut();Ln(n,t,e,r)}rf(t,e)}};By=function(){return De};$y=function(t,e){var n=De;try{return De=t,e()}finally{De=n}};lh=function(t,e,n){switch(e){case"input":if(th(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Iu(r);if(!i)throw Error(B(90));Ey(r),th(r,i)}}}break;case"textarea":Ty(t,n);break;case"select":e=n.value,e!=null&&mo(t,!!n.multiple,e,!1)}};ky=Jd;Dy=Ni;var tT={usingClientEntryPoint:!1,Events:[_a,ao,Iu,Cy,Py,Jd]},gs={findFiberByHostInstance:wi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nT={bundleType:gs.bundleType,version:gs.version,rendererPackageName:gs.rendererPackageName,rendererConfig:gs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Vy(t),t===null?null:t.stateNode},findFiberByHostInstance:gs.findFiberByHostInstance||Z1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ol=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ol.isDisabled&&ol.supportsFiber)try{Eu=ol.inject(nT),Hn=ol}catch{}}sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tT;sn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sf(e))throw Error(B(200));return J1(t,e,null,n)};sn.createRoot=function(t,e){if(!sf(t))throw Error(B(299));var n=!1,r="",i=h_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=nf(t,1,!1,null,null,n,!1,r,i),t[cr]=e.current,Qs(t.nodeType===8?t.parentNode:t),new of(e)};sn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=Vy(e),t=t===null?null:t.stateNode,t};sn.flushSync=function(t){return Ni(t)};sn.hydrate=function(t,e,n){if(!Vu(e))throw Error(B(200));return Lu(null,t,e,!0,n)};sn.hydrateRoot=function(t,e,n){if(!sf(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=h_;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=c_(e,null,t,1,n??null,i,!1,o,s),t[cr]=e.current,Qs(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Nu(e)};sn.render=function(t,e,n){if(!Vu(e))throw Error(B(200));return Lu(null,t,e,!1,n)};sn.unmountComponentAtNode=function(t){if(!Vu(t))throw Error(B(40));return t._reactRootContainer?(Ni(function(){Lu(null,null,t,!1,function(){t._reactRootContainer=null,t[cr]=null})}),!0):!1};sn.unstable_batchedUpdates=Jd;sn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Vu(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return Lu(t,e,n,!1,r)};sn.version="18.3.1-next-f1338f8080-20240426";function d_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d_)}catch(t){console.error(t)}}d_(),dy.exports=sn;var af=dy.exports;const rT=ey(af),iT=Zg({__proto__:null,default:rT},[af]);var f_,Cm=af;f_=Cm.createRoot,Cm.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ze(){return ze=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ze.apply(this,arguments)}var tt;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(tt||(tt={}));const Pm="popstate";function oT(t){t===void 0&&(t={});function e(r,i){let{pathname:o,search:s,hash:l}=r.location;return ia("",{pathname:o,search:s,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Vi(i)}return aT(e,n,null,t)}function pe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Do(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function sT(){return Math.random().toString(36).substr(2,8)}function km(t,e){return{usr:t.state,key:t.key,idx:e}}function ia(t,e,n,r){return n===void 0&&(n=null),ze({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ai(e):e,{state:n,key:e&&e.key||r||sT()})}function Vi(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ai(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function aT(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,l=tt.Pop,u=null,h=f();h==null&&(h=0,s.replaceState(ze({},s.state,{idx:h}),""));function f(){return(s.state||{idx:null}).idx}function p(){l=tt.Pop;let V=f(),I=V==null?null:V-h;h=V,u&&u({action:l,location:k.location,delta:I})}function y(V,I){l=tt.Push;let _=ia(k.location,V,I);h=f()+1;let R=km(_,h),M=k.createHref(_);try{s.pushState(R,"",M)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;i.location.assign(M)}o&&u&&u({action:l,location:k.location,delta:1})}function T(V,I){l=tt.Replace;let _=ia(k.location,V,I);h=f();let R=km(_,h),M=k.createHref(_);s.replaceState(R,"",M),o&&u&&u({action:l,location:k.location,delta:0})}function P(V){let I=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof V=="string"?V:Vi(V);return _=_.replace(/ $/,"%20"),pe(I,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,I)}let k={get action(){return l},get location(){return t(i,s)},listen(V){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Pm,p),u=V,()=>{i.removeEventListener(Pm,p),u=null}},createHref(V){return e(i,V)},createURL:P,encodeLocation(V){let I=P(V);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:y,replace:T,go(V){return s.go(V)}};return k}var ke;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ke||(ke={}));const lT=new Set(["lazy","caseSensitive","path","id","index","children"]);function uT(t){return t.index===!0}function nu(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,o)=>{let s=[...n,String(o)],l=typeof i.id=="string"?i.id:s.join("-");if(pe(i.index!==!0||!i.children,"Cannot specify children on an index route"),pe(!r[l],'Found a route id collision on id "'+l+`".  Route id's must be globally unique within Data Router usages`),uT(i)){let u=ze({},i,e(i),{id:l});return r[l]=u,u}else{let u=ze({},i,e(i),{id:l,children:void 0});return r[l]=u,i.children&&(u.children=nu(i.children,e,s,r)),u}})}function _i(t,e,n){return n===void 0&&(n="/"),Rl(t,e,n,!1)}function Rl(t,e,n,r){let i=typeof e=="string"?ai(e):e,o=Bo(i.pathname||"/",n);if(o==null)return null;let s=p_(t);hT(s);let l=null;for(let u=0;l==null&&u<s.length;++u){let h=TT(o);l=ET(s[u],h,r)}return l}function cT(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function p_(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,s,l)=>{let u={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};u.relativePath.startsWith("/")&&(pe(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let h=ar([r,u.relativePath]),f=n.concat(u);o.children&&o.children.length>0&&(pe(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),p_(o.children,e,f,h)),!(o.path==null&&!o.index)&&e.push({path:h,score:vT(h,o.index),routesMeta:f})};return t.forEach((o,s)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))i(o,s);else for(let u of m_(o.path))i(o,s,u)}),e}function m_(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=m_(r.join("/")),l=[];return l.push(...s.map(u=>u===""?o:[o,u].join("/"))),i&&l.push(...s),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function hT(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:_T(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const dT=/^:[\w-]+$/,fT=3,pT=2,mT=1,gT=10,yT=-2,Dm=t=>t==="*";function vT(t,e){let n=t.split("/"),r=n.length;return n.some(Dm)&&(r+=yT),e&&(r+=pT),n.filter(i=>!Dm(i)).reduce((i,o)=>i+(dT.test(o)?fT:o===""?mT:gT),r)}function _T(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function ET(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},o="/",s=[];for(let l=0;l<r.length;++l){let u=r[l],h=l===r.length-1,f=o==="/"?e:e.slice(o.length)||"/",p=xm({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},f),y=u.route;if(!p&&h&&n&&!r[r.length-1].route.index&&(p=xm({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},f)),!p)return null;Object.assign(i,p.params),s.push({params:i,pathname:ar([o,p.pathname]),pathnameBase:RT(ar([o,p.pathnameBase])),route:y}),p.pathnameBase!=="/"&&(o=ar([o,p.pathnameBase]))}return s}function xm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=wT(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((h,f,p)=>{let{paramName:y,isOptional:T}=f;if(y==="*"){let k=l[p]||"";s=o.slice(0,o.length-k.length).replace(/(.)\/+$/,"$1")}const P=l[p];return T&&!P?h[y]=void 0:h[y]=(P||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:s,pattern:t}}function wT(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Do(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function TT(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Do(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Bo(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function ST(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ai(t):t;return{pathname:n?n.startsWith("/")?n:IT(n,e):e,search:AT(r),hash:CT(i)}}function IT(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Vc(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function g_(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function lf(t,e){let n=g_(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function uf(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=ai(t):(i=ze({},t),pe(!i.pathname||!i.pathname.includes("?"),Vc("?","pathname","search",i)),pe(!i.pathname||!i.pathname.includes("#"),Vc("#","pathname","hash",i)),pe(!i.search||!i.search.includes("#"),Vc("#","search","hash",i)));let o=t===""||i.pathname==="",s=o?"/":i.pathname,l;if(s==null)l=n;else{let p=e.length-1;if(!r&&s.startsWith("..")){let y=s.split("/");for(;y[0]==="..";)y.shift(),p-=1;i.pathname=y.join("/")}l=p>=0?e[p]:"/"}let u=ST(i,l),h=s&&s!=="/"&&s.endsWith("/"),f=(o||s===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(h||f)&&(u.pathname+="/"),u}const ar=t=>t.join("/").replace(/\/\/+/g,"/"),RT=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),AT=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,CT=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class ru{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function oa(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const y_=["post","put","patch","delete"],PT=new Set(y_),kT=["get",...y_],DT=new Set(kT),xT=new Set([301,302,303,307,308]),NT=new Set([307,308]),Lc={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},VT={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ys={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},cf=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,LT=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),v_="remix-router-transitions";function MT(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;pe(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let A=t.detectErrorBoundary;i=x=>({hasErrorBoundary:A(x)})}else i=LT;let o={},s=nu(t.routes,i,void 0,o),l,u=t.basename||"/",h=t.dataStrategy||UT,f=t.patchRoutesOnNavigation,p=ze({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),y=null,T=new Set,P=null,k=null,V=null,I=t.hydrationData!=null,_=_i(s,t.history.location,u),R=!1,M=null;if(_==null&&!f){let A=$t(404,{pathname:t.history.location.pathname}),{matches:x,route:L}=Bm(s);_=x,M={[L.id]:A}}_&&!t.hydrationData&&fi(_,s,t.history.location.pathname).active&&(_=null);let z;if(_)if(_.some(A=>A.route.lazy))z=!1;else if(!_.some(A=>A.route.loader))z=!0;else if(p.v7_partialHydration){let A=t.hydrationData?t.hydrationData.loaderData:null,x=t.hydrationData?t.hydrationData.errors:null;if(x){let L=_.findIndex(j=>x[j.route.id]!==void 0);z=_.slice(0,L+1).every(j=>!Bh(j.route,A,x))}else z=_.every(L=>!Bh(L.route,A,x))}else z=t.hydrationData!=null;else if(z=!1,_=[],p.v7_partialHydration){let A=fi(null,s,t.history.location.pathname);A.active&&A.matches&&(R=!0,_=A.matches)}let H,m={historyAction:t.history.action,location:t.history.location,matches:_,initialized:z,navigation:Lc,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||M,fetchers:new Map,blockers:new Map},g=tt.Pop,E=!1,w,C=!1,D=new Map,S=null,Ae=!1,it=!1,ln=[],At=new Set,$=new Map,ne=0,re=-1,Te=new Map,he=new Set,Ie=new Map,gt=new Map,$e=new Set,ot=new Map,st=new Map,yr;function Qo(){if(y=t.history.listen(A=>{let{action:x,location:L,delta:j}=A;if(yr){yr(),yr=void 0;return}Do(st.size===0||j!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let W=Zo({currentLocation:m.location,nextLocation:L,historyAction:x});if(W&&j!=null){let Z=new Promise(ie=>{yr=ie});t.history.go(j*-1),ci(W,{state:"blocked",location:L,proceed(){ci(W,{state:"proceeding",proceed:void 0,reset:void 0,location:L}),Z.then(()=>t.history.go(j))},reset(){let ie=new Map(m.blockers);ie.set(W,ys),Xe({blockers:ie})}});return}return Ue(x,L)}),n){ZT(e,D);let A=()=>eS(e,D);e.addEventListener("pagehide",A),S=()=>e.removeEventListener("pagehide",A)}return m.initialized||Ue(tt.Pop,m.location,{initialHydration:!0}),H}function vr(){y&&y(),S&&S(),T.clear(),w&&w.abort(),m.fetchers.forEach((A,x)=>$i(x)),m.blockers.forEach((A,x)=>qi(x))}function _r(A){return T.add(A),()=>T.delete(A)}function Xe(A,x){x===void 0&&(x={}),m=ze({},m,A);let L=[],j=[];p.v7_fetcherPersist&&m.fetchers.forEach((W,Z)=>{W.state==="idle"&&($e.has(Z)?j.push(Z):L.push(Z))}),$e.forEach(W=>{!m.fetchers.has(W)&&!$.has(W)&&j.push(W)}),[...T].forEach(W=>W(m,{deletedFetchers:j,viewTransitionOpts:x.viewTransitionOpts,flushSync:x.flushSync===!0})),p.v7_fetcherPersist?(L.forEach(W=>m.fetchers.delete(W)),j.forEach(W=>$i(W))):j.forEach(W=>$e.delete(W))}function un(A,x,L){var j,W;let{flushSync:Z}=L===void 0?{}:L,ie=m.actionData!=null&&m.navigation.formMethod!=null&&Dn(m.navigation.formMethod)&&m.navigation.state==="loading"&&((j=A.state)==null?void 0:j._isRedirect)!==!0,Y;x.actionData?Object.keys(x.actionData).length>0?Y=x.actionData:Y=null:ie?Y=m.actionData:Y=null;let X=x.loaderData?jm(m.loaderData,x.loaderData,x.matches||[],x.errors):m.loaderData,K=m.blockers;K.size>0&&(K=new Map(K),K.forEach((ce,Ze)=>K.set(Ze,ys)));let ee=E===!0||m.navigation.formMethod!=null&&Dn(m.navigation.formMethod)&&((W=A.state)==null?void 0:W._isRedirect)!==!0;l&&(s=l,l=void 0),Ae||g===tt.Pop||(g===tt.Push?t.history.push(A,A.state):g===tt.Replace&&t.history.replace(A,A.state));let se;if(g===tt.Pop){let ce=D.get(m.location.pathname);ce&&ce.has(A.pathname)?se={currentLocation:m.location,nextLocation:A}:D.has(A.pathname)&&(se={currentLocation:A,nextLocation:m.location})}else if(C){let ce=D.get(m.location.pathname);ce?ce.add(A.pathname):(ce=new Set([A.pathname]),D.set(m.location.pathname,ce)),se={currentLocation:m.location,nextLocation:A}}Xe(ze({},x,{actionData:Y,loaderData:X,historyAction:g,location:A,initialized:!0,navigation:Lc,revalidation:"idle",restoreScrollPosition:di(A,x.matches||m.matches),preventScrollReset:ee,blockers:K}),{viewTransitionOpts:se,flushSync:Z===!0}),g=tt.Pop,E=!1,C=!1,Ae=!1,it=!1,ln=[]}async function ae(A,x){if(typeof A=="number"){t.history.go(A);return}let L=zh(m.location,m.matches,u,p.v7_prependBasename,A,p.v7_relativeSplatPath,x==null?void 0:x.fromRouteId,x==null?void 0:x.relative),{path:j,submission:W,error:Z}=Nm(p.v7_normalizeFormMethod,!1,L,x),ie=m.location,Y=ia(m.location,j,x&&x.state);Y=ze({},Y,t.history.encodeLocation(Y));let X=x&&x.replace!=null?x.replace:void 0,K=tt.Push;X===!0?K=tt.Replace:X===!1||W!=null&&Dn(W.formMethod)&&W.formAction===m.location.pathname+m.location.search&&(K=tt.Replace);let ee=x&&"preventScrollReset"in x?x.preventScrollReset===!0:void 0,se=(x&&x.flushSync)===!0,ce=Zo({currentLocation:ie,nextLocation:Y,historyAction:K});if(ce){ci(ce,{state:"blocked",location:Y,proceed(){ci(ce,{state:"proceeding",proceed:void 0,reset:void 0,location:Y}),ae(A,x)},reset(){let Ze=new Map(m.blockers);Ze.set(ce,ys),Xe({blockers:Ze})}});return}return await Ue(K,Y,{submission:W,pendingError:Z,preventScrollReset:ee,replace:x&&x.replace,enableViewTransition:x&&x.viewTransition,flushSync:se})}function Re(){if(lt(),Xe({revalidation:"loading"}),m.navigation.state!=="submitting"){if(m.navigation.state==="idle"){Ue(m.historyAction,m.location,{startUninterruptedRevalidation:!0});return}Ue(g||m.historyAction,m.navigation.location,{overrideNavigation:m.navigation,enableViewTransition:C===!0})}}async function Ue(A,x,L){w&&w.abort(),w=null,g=A,Ae=(L&&L.startUninterruptedRevalidation)===!0,ka(m.location,m.matches),E=(L&&L.preventScrollReset)===!0,C=(L&&L.enableViewTransition)===!0;let j=l||s,W=L&&L.overrideNavigation,Z=L!=null&&L.initialHydration&&m.matches&&m.matches.length>0&&!R?m.matches:_i(j,x,u),ie=(L&&L.flushSync)===!0;if(Z&&m.initialized&&!it&&qT(m.location,x)&&!(L&&L.submission&&Dn(L.submission.formMethod))){un(x,{matches:Z},{flushSync:ie});return}let Y=fi(Z,j,x.pathname);if(Y.active&&Y.matches&&(Z=Y.matches),!Z){let{error:Pe,notFoundMatches:ge,route:Ne}=Xn(x.pathname);un(x,{matches:ge,loaderData:{},errors:{[Ne.id]:Pe}},{flushSync:ie});return}w=new AbortController;let X=Yi(t.history,x,w.signal,L&&L.submission),K;if(L&&L.pendingError)K=[Ei(Z).route.id,{type:ke.error,error:L.pendingError}];else if(L&&L.submission&&Dn(L.submission.formMethod)){let Pe=await Bt(X,x,L.submission,Z,Y.active,{replace:L.replace,flushSync:ie});if(Pe.shortCircuited)return;if(Pe.pendingActionResult){let[ge,Ne]=Pe.pendingActionResult;if(en(Ne)&&oa(Ne.error)&&Ne.error.status===404){w=null,un(x,{matches:Pe.matches,loaderData:{},errors:{[ge]:Ne.error}});return}}Z=Pe.matches||Z,K=Pe.pendingActionResult,W=Mc(x,L.submission),ie=!1,Y.active=!1,X=Yi(t.history,X.url,X.signal)}let{shortCircuited:ee,matches:se,loaderData:ce,errors:Ze}=await wn(X,x,Z,Y.active,W,L&&L.submission,L&&L.fetcherSubmission,L&&L.replace,L&&L.initialHydration===!0,ie,K);ee||(w=null,un(x,ze({matches:se||Z},zm(K),{loaderData:ce,errors:Ze})))}async function Bt(A,x,L,j,W,Z){Z===void 0&&(Z={}),lt();let ie=YT(x,L);if(Xe({navigation:ie},{flushSync:Z.flushSync===!0}),W){let K=await bn(j,x.pathname,A.signal);if(K.type==="aborted")return{shortCircuited:!0};if(K.type==="error"){let ee=Ei(K.partialMatches).route.id;return{matches:K.partialMatches,pendingActionResult:[ee,{type:ke.error,error:K.error}]}}else if(K.matches)j=K.matches;else{let{notFoundMatches:ee,error:se,route:ce}=Xn(x.pathname);return{matches:ee,pendingActionResult:[ce.id,{type:ke.error,error:se}]}}}let Y,X=Is(j,x);if(!X.route.action&&!X.route.lazy)Y={type:ke.error,error:$t(405,{method:A.method,pathname:x.pathname,routeId:X.route.id})};else if(Y=(await Tr("action",m,A,[X],j,null))[X.route.id],A.signal.aborted)return{shortCircuited:!0};if(Ii(Y)){let K;return Z&&Z.replace!=null?K=Z.replace:K=Fm(Y.response.headers.get("Location"),new URL(A.url),u)===m.location.pathname+m.location.search,await Tn(A,Y,!0,{submission:L,replace:K}),{shortCircuited:!0}}if(Or(Y))throw $t(400,{type:"defer-action"});if(en(Y)){let K=Ei(j,X.route.id);return(Z&&Z.replace)!==!0&&(g=tt.Push),{matches:j,pendingActionResult:[K.route.id,Y]}}return{matches:j,pendingActionResult:[X.route.id,Y]}}async function wn(A,x,L,j,W,Z,ie,Y,X,K,ee){let se=W||Mc(x,Z),ce=Z||ie||Hm(se),Ze=!Ae&&(!p.v7_partialHydration||!X);if(j){if(Ze){let Le=Er(ee);Xe(ze({navigation:se},Le!==void 0?{actionData:Le}:{}),{flushSync:K})}let ve=await bn(L,x.pathname,A.signal);if(ve.type==="aborted")return{shortCircuited:!0};if(ve.type==="error"){let Le=Ei(ve.partialMatches).route.id;return{matches:ve.partialMatches,loaderData:{},errors:{[Le]:ve.error}}}else if(ve.matches)L=ve.matches;else{let{error:Le,notFoundMatches:Zn,route:Rr}=Xn(x.pathname);return{matches:Zn,loaderData:{},errors:{[Rr.id]:Le}}}}let Pe=l||s,[ge,Ne]=Lm(t.history,m,L,ce,x,p.v7_partialHydration&&X===!0,p.v7_skipActionErrorRevalidation,it,ln,At,$e,Ie,he,Pe,u,ee);if(hi(ve=>!(L&&L.some(Le=>Le.route.id===ve))||ge&&ge.some(Le=>Le.route.id===ve)),re=++ne,ge.length===0&&Ne.length===0){let ve=Hi();return un(x,ze({matches:L,loaderData:{},errors:ee&&en(ee[1])?{[ee[0]]:ee[1].error}:null},zm(ee),ve?{fetchers:new Map(m.fetchers)}:{}),{flushSync:K}),{shortCircuited:!0}}if(Ze){let ve={};if(!j){ve.navigation=se;let Le=Er(ee);Le!==void 0&&(ve.actionData=Le)}Ne.length>0&&(ve.fetchers=Qn(Ne)),Xe(ve,{flushSync:K})}Ne.forEach(ve=>{Sn(ve.key),ve.controller&&$.set(ve.key,ve.controller)});let Yn=()=>Ne.forEach(ve=>Sn(ve.key));w&&w.signal.addEventListener("abort",Yn);let{loaderResults:Sr,fetcherResults:In}=await at(m,L,ge,Ne,A);if(A.signal.aborted)return{shortCircuited:!0};w&&w.signal.removeEventListener("abort",Yn),Ne.forEach(ve=>$.delete(ve.key));let Ft=sl(Sr);if(Ft)return await Tn(A,Ft.result,!0,{replace:Y}),{shortCircuited:!0};if(Ft=sl(In),Ft)return he.add(Ft.key),await Tn(A,Ft.result,!0,{replace:Y}),{shortCircuited:!0};let{loaderData:Wi,errors:Jn}=Um(m,L,Sr,ee,Ne,In,ot);ot.forEach((ve,Le)=>{ve.subscribe(Zn=>{(Zn||ve.done)&&ot.delete(Le)})}),p.v7_partialHydration&&X&&m.errors&&(Jn=ze({},m.errors,Jn));let Yt=Hi(),hn=Pa(re),Ir=Yt||hn||Ne.length>0;return ze({matches:L,loaderData:Wi,errors:Jn},Ir?{fetchers:new Map(m.fetchers)}:{})}function Er(A){if(A&&!en(A[1]))return{[A[0]]:A[1].data};if(m.actionData)return Object.keys(m.actionData).length===0?null:m.actionData}function Qn(A){return A.forEach(x=>{let L=m.fetchers.get(x.key),j=vs(void 0,L?L.data:void 0);m.fetchers.set(x.key,j)}),new Map(m.fetchers)}function wr(A,x,L,j){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Sn(A);let W=(j&&j.flushSync)===!0,Z=l||s,ie=zh(m.location,m.matches,u,p.v7_prependBasename,L,p.v7_relativeSplatPath,x,j==null?void 0:j.relative),Y=_i(Z,ie,u),X=fi(Y,Z,ie);if(X.active&&X.matches&&(Y=X.matches),!Y){cn(A,x,$t(404,{pathname:ie}),{flushSync:W});return}let{path:K,submission:ee,error:se}=Nm(p.v7_normalizeFormMethod,!0,ie,j);if(se){cn(A,x,se,{flushSync:W});return}let ce=Is(Y,K),Ze=(j&&j.preventScrollReset)===!0;if(ee&&Dn(ee.formMethod)){Xo(A,x,K,ce,Y,X.active,W,Ze,ee);return}Ie.set(A,{routeId:x,path:K}),li(A,x,K,ce,Y,X.active,W,Ze,ee)}async function Xo(A,x,L,j,W,Z,ie,Y,X){lt(),Ie.delete(A);function K(je){if(!je.route.action&&!je.route.lazy){let Un=$t(405,{method:X.formMethod,pathname:L,routeId:x});return cn(A,x,Un,{flushSync:ie}),!0}return!1}if(!Z&&K(j))return;let ee=m.fetchers.get(A);Xt(A,JT(X,ee),{flushSync:ie});let se=new AbortController,ce=Yi(t.history,L,se.signal,X);if(Z){let je=await bn(W,new URL(ce.url).pathname,ce.signal,A);if(je.type==="aborted")return;if(je.type==="error"){cn(A,x,je.error,{flushSync:ie});return}else if(je.matches){if(W=je.matches,j=Is(W,L),K(j))return}else{cn(A,x,$t(404,{pathname:L}),{flushSync:ie});return}}$.set(A,se);let Ze=ne,ge=(await Tr("action",m,ce,[j],W,A))[j.route.id];if(ce.signal.aborted){$.get(A)===se&&$.delete(A);return}if(p.v7_fetcherPersist&&$e.has(A)){if(Ii(ge)||en(ge)){Xt(A,kr(void 0));return}}else{if(Ii(ge))if($.delete(A),re>Ze){Xt(A,kr(void 0));return}else return he.add(A),Xt(A,vs(X)),Tn(ce,ge,!1,{fetcherSubmission:X,preventScrollReset:Y});if(en(ge)){cn(A,x,ge.error);return}}if(Or(ge))throw $t(400,{type:"defer-action"});let Ne=m.navigation.location||m.location,Yn=Yi(t.history,Ne,se.signal),Sr=l||s,In=m.navigation.state!=="idle"?_i(Sr,m.navigation.location,u):m.matches;pe(In,"Didn't find any matches after fetcher action");let Ft=++ne;Te.set(A,Ft);let Wi=vs(X,ge.data);m.fetchers.set(A,Wi);let[Jn,Yt]=Lm(t.history,m,In,X,Ne,!1,p.v7_skipActionErrorRevalidation,it,ln,At,$e,Ie,he,Sr,u,[j.route.id,ge]);Yt.filter(je=>je.key!==A).forEach(je=>{let Un=je.key,ts=m.fetchers.get(Un),xa=vs(void 0,ts?ts.data:void 0);m.fetchers.set(Un,xa),Sn(Un),je.controller&&$.set(Un,je.controller)}),Xe({fetchers:new Map(m.fetchers)});let hn=()=>Yt.forEach(je=>Sn(je.key));se.signal.addEventListener("abort",hn);let{loaderResults:Ir,fetcherResults:ve}=await at(m,In,Jn,Yt,Yn);if(se.signal.aborted)return;se.signal.removeEventListener("abort",hn),Te.delete(A),$.delete(A),Yt.forEach(je=>$.delete(je.key));let Le=sl(Ir);if(Le)return Tn(Yn,Le.result,!1,{preventScrollReset:Y});if(Le=sl(ve),Le)return he.add(Le.key),Tn(Yn,Le.result,!1,{preventScrollReset:Y});let{loaderData:Zn,errors:Rr}=Um(m,In,Ir,void 0,Yt,ve,ot);if(m.fetchers.has(A)){let je=kr(ge.data);m.fetchers.set(A,je)}Pa(Ft),m.navigation.state==="loading"&&Ft>re?(pe(g,"Expected pending action"),w&&w.abort(),un(m.navigation.location,{matches:In,loaderData:Zn,errors:Rr,fetchers:new Map(m.fetchers)})):(Xe({errors:Rr,loaderData:jm(m.loaderData,Zn,In,Rr),fetchers:new Map(m.fetchers)}),it=!1)}async function li(A,x,L,j,W,Z,ie,Y,X){let K=m.fetchers.get(A);Xt(A,vs(X,K?K.data:void 0),{flushSync:ie});let ee=new AbortController,se=Yi(t.history,L,ee.signal);if(Z){let ge=await bn(W,new URL(se.url).pathname,se.signal,A);if(ge.type==="aborted")return;if(ge.type==="error"){cn(A,x,ge.error,{flushSync:ie});return}else if(ge.matches)W=ge.matches,j=Is(W,L);else{cn(A,x,$t(404,{pathname:L}),{flushSync:ie});return}}$.set(A,ee);let ce=ne,Pe=(await Tr("loader",m,se,[j],W,A))[j.route.id];if(Or(Pe)&&(Pe=await hf(Pe,se.signal,!0)||Pe),$.get(A)===ee&&$.delete(A),!se.signal.aborted){if($e.has(A)){Xt(A,kr(void 0));return}if(Ii(Pe))if(re>ce){Xt(A,kr(void 0));return}else{he.add(A),await Tn(se,Pe,!1,{preventScrollReset:Y});return}if(en(Pe)){cn(A,x,Pe.error);return}pe(!Or(Pe),"Unhandled fetcher deferred data"),Xt(A,kr(Pe.data))}}async function Tn(A,x,L,j){let{submission:W,fetcherSubmission:Z,preventScrollReset:ie,replace:Y}=j===void 0?{}:j;x.response.headers.has("X-Remix-Revalidate")&&(it=!0);let X=x.response.headers.get("Location");pe(X,"Expected a Location header on the redirect Response"),X=Fm(X,new URL(A.url),u);let K=ia(m.location,X,{_isRedirect:!0});if(n){let ge=!1;if(x.response.headers.has("X-Remix-Reload-Document"))ge=!0;else if(cf.test(X)){const Ne=t.history.createURL(X);ge=Ne.origin!==e.location.origin||Bo(Ne.pathname,u)==null}if(ge){Y?e.location.replace(X):e.location.assign(X);return}}w=null;let ee=Y===!0||x.response.headers.has("X-Remix-Replace")?tt.Replace:tt.Push,{formMethod:se,formAction:ce,formEncType:Ze}=m.navigation;!W&&!Z&&se&&ce&&Ze&&(W=Hm(m.navigation));let Pe=W||Z;if(NT.has(x.response.status)&&Pe&&Dn(Pe.formMethod))await Ue(ee,K,{submission:ze({},Pe,{formAction:X}),preventScrollReset:ie||E,enableViewTransition:L?C:void 0});else{let ge=Mc(K,W);await Ue(ee,K,{overrideNavigation:ge,fetcherSubmission:Z,preventScrollReset:ie||E,enableViewTransition:L?C:void 0})}}async function Tr(A,x,L,j,W,Z){let ie,Y={};try{ie=await jT(h,A,x,L,j,W,Z,o,i)}catch(X){return j.forEach(K=>{Y[K.route.id]={type:ke.error,error:X}}),Y}for(let[X,K]of Object.entries(ie))if(WT(K)){let ee=K.result;Y[X]={type:ke.redirect,response:$T(ee,L,X,W,u,p.v7_relativeSplatPath)}}else Y[X]=await BT(K);return Y}async function at(A,x,L,j,W){let Z=A.matches,ie=Tr("loader",A,W,L,x,null),Y=Promise.all(j.map(async ee=>{if(ee.matches&&ee.match&&ee.controller){let ce=(await Tr("loader",A,Yi(t.history,ee.path,ee.controller.signal),[ee.match],ee.matches,ee.key))[ee.match.route.id];return{[ee.key]:ce}}else return Promise.resolve({[ee.key]:{type:ke.error,error:$t(404,{pathname:ee.path})}})})),X=await ie,K=(await Y).reduce((ee,se)=>Object.assign(ee,se),{});return await Promise.all([QT(x,X,W.signal,Z,A.loaderData),XT(x,K,j)]),{loaderResults:X,fetcherResults:K}}function lt(){it=!0,ln.push(...hi()),Ie.forEach((A,x)=>{$.has(x)&&At.add(x),Sn(x)})}function Xt(A,x,L){L===void 0&&(L={}),m.fetchers.set(A,x),Xe({fetchers:new Map(m.fetchers)},{flushSync:(L&&L.flushSync)===!0})}function cn(A,x,L,j){j===void 0&&(j={});let W=Ei(m.matches,x);$i(A),Xe({errors:{[W.route.id]:L},fetchers:new Map(m.fetchers)},{flushSync:(j&&j.flushSync)===!0})}function Yo(A){return gt.set(A,(gt.get(A)||0)+1),$e.has(A)&&$e.delete(A),m.fetchers.get(A)||VT}function $i(A){let x=m.fetchers.get(A);$.has(A)&&!(x&&x.state==="loading"&&Te.has(A))&&Sn(A),Ie.delete(A),Te.delete(A),he.delete(A),p.v7_fetcherPersist&&$e.delete(A),At.delete(A),m.fetchers.delete(A)}function ui(A){let x=(gt.get(A)||0)-1;x<=0?(gt.delete(A),$e.add(A),p.v7_fetcherPersist||$i(A)):gt.set(A,x),Xe({fetchers:new Map(m.fetchers)})}function Sn(A){let x=$.get(A);x&&(x.abort(),$.delete(A))}function Jo(A){for(let x of A){let L=Yo(x),j=kr(L.data);m.fetchers.set(x,j)}}function Hi(){let A=[],x=!1;for(let L of he){let j=m.fetchers.get(L);pe(j,"Expected fetcher: "+L),j.state==="loading"&&(he.delete(L),A.push(L),x=!0)}return Jo(A),x}function Pa(A){let x=[];for(let[L,j]of Te)if(j<A){let W=m.fetchers.get(L);pe(W,"Expected fetcher: "+L),W.state==="loading"&&(Sn(L),Te.delete(L),x.push(L))}return Jo(x),x.length>0}function tc(A,x){let L=m.blockers.get(A)||ys;return st.get(A)!==x&&st.set(A,x),L}function qi(A){m.blockers.delete(A),st.delete(A)}function ci(A,x){let L=m.blockers.get(A)||ys;pe(L.state==="unblocked"&&x.state==="blocked"||L.state==="blocked"&&x.state==="blocked"||L.state==="blocked"&&x.state==="proceeding"||L.state==="blocked"&&x.state==="unblocked"||L.state==="proceeding"&&x.state==="unblocked","Invalid blocker state transition: "+L.state+" -> "+x.state);let j=new Map(m.blockers);j.set(A,x),Xe({blockers:j})}function Zo(A){let{currentLocation:x,nextLocation:L,historyAction:j}=A;if(st.size===0)return;st.size>1&&Do(!1,"A router only supports one blocker at a time");let W=Array.from(st.entries()),[Z,ie]=W[W.length-1],Y=m.blockers.get(Z);if(!(Y&&Y.state==="proceeding")&&ie({currentLocation:x,nextLocation:L,historyAction:j}))return Z}function Xn(A){let x=$t(404,{pathname:A}),L=l||s,{matches:j,route:W}=Bm(L);return hi(),{notFoundMatches:j,route:W,error:x}}function hi(A){let x=[];return ot.forEach((L,j)=>{(!A||A(j))&&(L.cancel(),x.push(j),ot.delete(j))}),x}function es(A,x,L){if(P=A,V=x,k=L||null,!I&&m.navigation===Lc){I=!0;let j=di(m.location,m.matches);j!=null&&Xe({restoreScrollPosition:j})}return()=>{P=null,V=null,k=null}}function Fn(A,x){return k&&k(A,x.map(j=>cT(j,m.loaderData)))||A.key}function ka(A,x){if(P&&V){let L=Fn(A,x);P[L]=V()}}function di(A,x){if(P){let L=Fn(A,x),j=P[L];if(typeof j=="number")return j}return null}function fi(A,x,L){if(f)if(A){if(Object.keys(A[0].params).length>0)return{active:!0,matches:Rl(x,L,u,!0)}}else return{active:!0,matches:Rl(x,L,u,!0)||[]};return{active:!1,matches:null}}async function bn(A,x,L,j){if(!f)return{type:"success",matches:A};let W=A;for(;;){let Z=l==null,ie=l||s,Y=o;try{await f({signal:L,path:x,matches:W,fetcherKey:j,patch:(ee,se)=>{L.aborted||Om(ee,se,ie,Y,i)}})}catch(ee){return{type:"error",error:ee,partialMatches:W}}finally{Z&&!L.aborted&&(s=[...s])}if(L.aborted)return{type:"aborted"};let X=_i(ie,x,u);if(X)return{type:"success",matches:X};let K=Rl(ie,x,u,!0);if(!K||W.length===K.length&&W.every((ee,se)=>ee.route.id===K[se].route.id))return{type:"success",matches:null};W=K}}function Da(A){o={},l=nu(A,i,void 0,o)}function yt(A,x){let L=l==null;Om(A,x,l||s,o,i),L&&(s=[...s],Xe({}))}return H={get basename(){return u},get future(){return p},get state(){return m},get routes(){return s},get window(){return e},initialize:Qo,subscribe:_r,enableScrollRestoration:es,navigate:ae,fetch:wr,revalidate:Re,createHref:A=>t.history.createHref(A),encodeLocation:A=>t.history.encodeLocation(A),getFetcher:Yo,deleteFetcher:ui,dispose:vr,getBlocker:tc,deleteBlocker:qi,patchRoutes:yt,_internalFetchControllers:$,_internalActiveDeferreds:ot,_internalSetRoutes:Da},H}function OT(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function zh(t,e,n,r,i,o,s,l){let u,h;if(s){u=[];for(let p of e)if(u.push(p),p.route.id===s){h=p;break}}else u=e,h=e[e.length-1];let f=uf(i||".",lf(u,o),Bo(t.pathname,n)||t.pathname,l==="path");if(i==null&&(f.search=t.search,f.hash=t.hash),(i==null||i===""||i===".")&&h){let p=df(f.search);if(h.route.index&&!p)f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index";else if(!h.route.index&&p){let y=new URLSearchParams(f.search),T=y.getAll("index");y.delete("index"),T.filter(k=>k).forEach(k=>y.append("index",k));let P=y.toString();f.search=P?"?"+P:""}}return r&&n!=="/"&&(f.pathname=f.pathname==="/"?n:ar([n,f.pathname])),Vi(f)}function Nm(t,e,n,r){if(!r||!OT(r))return{path:n};if(r.formMethod&&!KT(r.formMethod))return{path:n,error:$t(405,{method:r.formMethod})};let i=()=>({path:n,error:$t(400,{type:"invalid-body"})}),o=r.formMethod||"get",s=t?o.toUpperCase():o.toLowerCase(),l=w_(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Dn(s))return i();let y=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((T,P)=>{let[k,V]=P;return""+T+k+"="+V+`
`},""):String(r.body);return{path:n,submission:{formMethod:s,formAction:l,formEncType:r.formEncType,formData:void 0,json:void 0,text:y}}}else if(r.formEncType==="application/json"){if(!Dn(s))return i();try{let y=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:s,formAction:l,formEncType:r.formEncType,formData:void 0,json:y,text:void 0}}}catch{return i()}}}pe(typeof FormData=="function","FormData is not available in this environment");let u,h;if(r.formData)u=$h(r.formData),h=r.formData;else if(r.body instanceof FormData)u=$h(r.body),h=r.body;else if(r.body instanceof URLSearchParams)u=r.body,h=bm(u);else if(r.body==null)u=new URLSearchParams,h=new FormData;else try{u=new URLSearchParams(r.body),h=bm(u)}catch{return i()}let f={formMethod:s,formAction:l,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:h,json:void 0,text:void 0};if(Dn(f.formMethod))return{path:n,submission:f};let p=ai(n);return e&&p.search&&df(p.search)&&u.append("index",""),p.search="?"+u,{path:Vi(p),submission:f}}function Vm(t,e,n){n===void 0&&(n=!1);let r=t.findIndex(i=>i.route.id===e);return r>=0?t.slice(0,n?r+1:r):t}function Lm(t,e,n,r,i,o,s,l,u,h,f,p,y,T,P,k){let V=k?en(k[1])?k[1].error:k[1].data:void 0,I=t.createURL(e.location),_=t.createURL(i),R=n;o&&e.errors?R=Vm(n,Object.keys(e.errors)[0],!0):k&&en(k[1])&&(R=Vm(n,k[0]));let M=k?k[1].statusCode:void 0,z=s&&M&&M>=400,H=R.filter((g,E)=>{let{route:w}=g;if(w.lazy)return!0;if(w.loader==null)return!1;if(o)return Bh(w,e.loaderData,e.errors);if(FT(e.loaderData,e.matches[E],g)||u.some(S=>S===g.route.id))return!0;let C=e.matches[E],D=g;return Mm(g,ze({currentUrl:I,currentParams:C.params,nextUrl:_,nextParams:D.params},r,{actionResult:V,actionStatus:M,defaultShouldRevalidate:z?!1:l||I.pathname+I.search===_.pathname+_.search||I.search!==_.search||__(C,D)}))}),m=[];return p.forEach((g,E)=>{if(o||!n.some(Ae=>Ae.route.id===g.routeId)||f.has(E))return;let w=_i(T,g.path,P);if(!w){m.push({key:E,routeId:g.routeId,path:g.path,matches:null,match:null,controller:null});return}let C=e.fetchers.get(E),D=Is(w,g.path),S=!1;y.has(E)?S=!1:h.has(E)?(h.delete(E),S=!0):C&&C.state!=="idle"&&C.data===void 0?S=l:S=Mm(D,ze({currentUrl:I,currentParams:e.matches[e.matches.length-1].params,nextUrl:_,nextParams:n[n.length-1].params},r,{actionResult:V,actionStatus:M,defaultShouldRevalidate:z?!1:l})),S&&m.push({key:E,routeId:g.routeId,path:g.path,matches:w,match:D,controller:new AbortController})}),[H,m]}function Bh(t,e,n){if(t.lazy)return!0;if(!t.loader)return!1;let r=e!=null&&e[t.id]!==void 0,i=n!=null&&n[t.id]!==void 0;return!r&&i?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!r&&!i}function FT(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function __(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function Mm(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function Om(t,e,n,r,i){var o;let s;if(t){let h=r[t];pe(h,"No route found to patch children into: routeId = "+t),h.children||(h.children=[]),s=h.children}else s=n;let l=e.filter(h=>!s.some(f=>E_(h,f))),u=nu(l,i,[t||"_","patch",String(((o=s)==null?void 0:o.length)||"0")],r);s.push(...u)}function E_(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,r)=>{var i;return(i=e.children)==null?void 0:i.some(o=>E_(n,o))}):!1}async function bT(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];pe(i,"No route found in manifest");let o={};for(let s in r){let u=i[s]!==void 0&&s!=="hasErrorBoundary";Do(!u,'Route "'+i.id+'" has a static property "'+s+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+s+'" will be ignored.')),!u&&!lT.has(s)&&(o[s]=r[s])}Object.assign(i,o),Object.assign(i,ze({},e(i),{lazy:void 0}))}async function UT(t){let{matches:e}=t,n=e.filter(i=>i.shouldLoad);return(await Promise.all(n.map(i=>i.resolve()))).reduce((i,o,s)=>Object.assign(i,{[n[s].route.id]:o}),{})}async function jT(t,e,n,r,i,o,s,l,u,h){let f=o.map(T=>T.route.lazy?bT(T.route,u,l):void 0),p=o.map((T,P)=>{let k=f[P],V=i.some(_=>_.route.id===T.route.id);return ze({},T,{shouldLoad:V,resolve:async _=>(_&&r.method==="GET"&&(T.route.lazy||T.route.loader)&&(V=!0),V?zT(e,r,T,k,_,h):Promise.resolve({type:ke.data,result:void 0}))})}),y=await t({matches:p,request:r,params:o[0].params,fetcherKey:s,context:h});try{await Promise.all(f)}catch{}return y}async function zT(t,e,n,r,i,o){let s,l,u=h=>{let f,p=new Promise((P,k)=>f=k);l=()=>f(),e.signal.addEventListener("abort",l);let y=P=>typeof h!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):h({request:e,params:n.params,context:o},...P!==void 0?[P]:[]),T=(async()=>{try{return{type:"data",result:await(i?i(k=>y(k)):y())}}catch(P){return{type:"error",result:P}}})();return Promise.race([T,p])};try{let h=n.route[t];if(r)if(h){let f,[p]=await Promise.all([u(h).catch(y=>{f=y}),r]);if(f!==void 0)throw f;s=p}else if(await r,h=n.route[t],h)s=await u(h);else if(t==="action"){let f=new URL(e.url),p=f.pathname+f.search;throw $t(405,{method:e.method,pathname:p,routeId:n.route.id})}else return{type:ke.data,result:void 0};else if(h)s=await u(h);else{let f=new URL(e.url),p=f.pathname+f.search;throw $t(404,{pathname:p})}pe(s.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(h){return{type:ke.error,result:h}}finally{l&&e.signal.removeEventListener("abort",l)}return s}async function BT(t){let{result:e,type:n}=t;if(T_(e)){let p;try{let y=e.headers.get("Content-Type");y&&/\bapplication\/json\b/.test(y)?e.body==null?p=null:p=await e.json():p=await e.text()}catch(y){return{type:ke.error,error:y}}return n===ke.error?{type:ke.error,error:new ru(e.status,e.statusText,p),statusCode:e.status,headers:e.headers}:{type:ke.data,data:p,statusCode:e.status,headers:e.headers}}if(n===ke.error){if($m(e)){var r,i;if(e.data instanceof Error){var o,s;return{type:ke.error,error:e.data,statusCode:(o=e.init)==null?void 0:o.status,headers:(s=e.init)!=null&&s.headers?new Headers(e.init.headers):void 0}}return{type:ke.error,error:new ru(((r=e.init)==null?void 0:r.status)||500,void 0,e.data),statusCode:oa(e)?e.status:void 0,headers:(i=e.init)!=null&&i.headers?new Headers(e.init.headers):void 0}}return{type:ke.error,error:e,statusCode:oa(e)?e.status:void 0}}if(GT(e)){var l,u;return{type:ke.deferred,deferredData:e,statusCode:(l=e.init)==null?void 0:l.status,headers:((u=e.init)==null?void 0:u.headers)&&new Headers(e.init.headers)}}if($m(e)){var h,f;return{type:ke.data,data:e.data,statusCode:(h=e.init)==null?void 0:h.status,headers:(f=e.init)!=null&&f.headers?new Headers(e.init.headers):void 0}}return{type:ke.data,data:e}}function $T(t,e,n,r,i,o){let s=t.headers.get("Location");if(pe(s,"Redirects returned/thrown from loaders/actions must have a Location header"),!cf.test(s)){let l=r.slice(0,r.findIndex(u=>u.route.id===n)+1);s=zh(new URL(e.url),l,i,!0,s,o),t.headers.set("Location",s)}return t}function Fm(t,e,n){if(cf.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),o=Bo(i.pathname,n)!=null;if(i.origin===e.origin&&o)return i.pathname+i.search+i.hash}return t}function Yi(t,e,n,r){let i=t.createURL(w_(e)).toString(),o={signal:n};if(r&&Dn(r.formMethod)){let{formMethod:s,formEncType:l}=r;o.method=s.toUpperCase(),l==="application/json"?(o.headers=new Headers({"Content-Type":l}),o.body=JSON.stringify(r.json)):l==="text/plain"?o.body=r.text:l==="application/x-www-form-urlencoded"&&r.formData?o.body=$h(r.formData):o.body=r.formData}return new Request(i,o)}function $h(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function bm(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function HT(t,e,n,r,i){let o={},s=null,l,u=!1,h={},f=n&&en(n[1])?n[1].error:void 0;return t.forEach(p=>{if(!(p.route.id in e))return;let y=p.route.id,T=e[y];if(pe(!Ii(T),"Cannot handle redirect results in processLoaderData"),en(T)){let P=T.error;f!==void 0&&(P=f,f=void 0),s=s||{};{let k=Ei(t,y);s[k.route.id]==null&&(s[k.route.id]=P)}o[y]=void 0,u||(u=!0,l=oa(T.error)?T.error.status:500),T.headers&&(h[y]=T.headers)}else Or(T)?(r.set(y,T.deferredData),o[y]=T.deferredData.data,T.statusCode!=null&&T.statusCode!==200&&!u&&(l=T.statusCode),T.headers&&(h[y]=T.headers)):(o[y]=T.data,T.statusCode&&T.statusCode!==200&&!u&&(l=T.statusCode),T.headers&&(h[y]=T.headers))}),f!==void 0&&n&&(s={[n[0]]:f},o[n[0]]=void 0),{loaderData:o,errors:s,statusCode:l||200,loaderHeaders:h}}function Um(t,e,n,r,i,o,s){let{loaderData:l,errors:u}=HT(e,n,r,s);return i.forEach(h=>{let{key:f,match:p,controller:y}=h,T=o[f];if(pe(T,"Did not find corresponding fetcher result"),!(y&&y.signal.aborted))if(en(T)){let P=Ei(t.matches,p==null?void 0:p.route.id);u&&u[P.route.id]||(u=ze({},u,{[P.route.id]:T.error})),t.fetchers.delete(f)}else if(Ii(T))pe(!1,"Unhandled fetcher revalidation redirect");else if(Or(T))pe(!1,"Unhandled fetcher deferred data");else{let P=kr(T.data);t.fetchers.set(f,P)}}),{loaderData:l,errors:u}}function jm(t,e,n,r){let i=ze({},e);for(let o of n){let s=o.route.id;if(e.hasOwnProperty(s)?e[s]!==void 0&&(i[s]=e[s]):t[s]!==void 0&&o.route.loader&&(i[s]=t[s]),r&&r.hasOwnProperty(s))break}return i}function zm(t){return t?en(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Ei(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function Bm(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function $t(t,e){let{pathname:n,routeId:r,method:i,type:o,message:s}=e===void 0?{}:e,l="Unknown Server Error",u="Unknown @remix-run/router error";return t===400?(l="Bad Request",i&&n&&r?u="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":o==="defer-action"?u="defer() is not supported in actions":o==="invalid-body"&&(u="Unable to encode submission body")):t===403?(l="Forbidden",u='Route "'+r+'" does not match URL "'+n+'"'):t===404?(l="Not Found",u='No route matches URL "'+n+'"'):t===405&&(l="Method Not Allowed",i&&n&&r?u="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(u='Invalid request method "'+i.toUpperCase()+'"')),new ru(t||500,l,new Error(u),!0)}function sl(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[r,i]=e[n];if(Ii(i))return{key:r,result:i}}}function w_(t){let e=typeof t=="string"?ai(t):t;return Vi(ze({},e,{hash:""}))}function qT(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function WT(t){return T_(t.result)&&xT.has(t.result.status)}function Or(t){return t.type===ke.deferred}function en(t){return t.type===ke.error}function Ii(t){return(t&&t.type)===ke.redirect}function $m(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function GT(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function T_(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function KT(t){return DT.has(t.toLowerCase())}function Dn(t){return PT.has(t.toLowerCase())}async function QT(t,e,n,r,i){let o=Object.entries(e);for(let s=0;s<o.length;s++){let[l,u]=o[s],h=t.find(y=>(y==null?void 0:y.route.id)===l);if(!h)continue;let f=r.find(y=>y.route.id===h.route.id),p=f!=null&&!__(f,h)&&(i&&i[h.route.id])!==void 0;Or(u)&&p&&await hf(u,n,!1).then(y=>{y&&(e[l]=y)})}}async function XT(t,e,n){for(let r=0;r<n.length;r++){let{key:i,routeId:o,controller:s}=n[r],l=e[i];t.find(h=>(h==null?void 0:h.route.id)===o)&&Or(l)&&(pe(s,"Expected an AbortController for revalidating fetcher deferred result"),await hf(l,s.signal,!0).then(h=>{h&&(e[i]=h)}))}}async function hf(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:ke.data,data:t.deferredData.unwrappedData}}catch(i){return{type:ke.error,error:i}}return{type:ke.data,data:t.deferredData.data}}}function df(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function Is(t,e){let n=typeof e=="string"?ai(e).search:e.search;if(t[t.length-1].route.index&&df(n||""))return t[t.length-1];let r=g_(t);return r[r.length-1]}function Hm(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:o,json:s}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(o!=null)return{formMethod:e,formAction:n,formEncType:r,formData:o,json:void 0,text:void 0};if(s!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:s,text:void 0}}}function Mc(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function YT(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function vs(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function JT(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function kr(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function ZT(t,e){try{let n=t.sessionStorage.getItem(v_);if(n){let r=JSON.parse(n);for(let[i,o]of Object.entries(r||{}))o&&Array.isArray(o)&&e.set(i,new Set(o||[]))}}catch{}}function eS(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(v_,JSON.stringify(n))}catch(r){Do(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function iu(){return iu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iu.apply(this,arguments)}const Mu=U.createContext(null),S_=U.createContext(null),Fi=U.createContext(null),ff=U.createContext(null),bi=U.createContext({outlet:null,matches:[],isDataRoute:!1}),I_=U.createContext(null);function tS(t,e){let{relative:n}=e===void 0?{}:e;wa()||pe(!1);let{basename:r,navigator:i}=U.useContext(Fi),{hash:o,pathname:s,search:l}=A_(t,{relative:n}),u=s;return r!=="/"&&(u=s==="/"?r:ar([r,s])),i.createHref({pathname:u,search:l,hash:o})}function wa(){return U.useContext(ff)!=null}function Ou(){return wa()||pe(!1),U.useContext(ff).location}function R_(t){U.useContext(Fi).static||U.useLayoutEffect(t)}function nS(){let{isDataRoute:t}=U.useContext(bi);return t?pS():rS()}function rS(){wa()||pe(!1);let t=U.useContext(Mu),{basename:e,future:n,navigator:r}=U.useContext(Fi),{matches:i}=U.useContext(bi),{pathname:o}=Ou(),s=JSON.stringify(lf(i,n.v7_relativeSplatPath)),l=U.useRef(!1);return R_(()=>{l.current=!0}),U.useCallback(function(h,f){if(f===void 0&&(f={}),!l.current)return;if(typeof h=="number"){r.go(h);return}let p=uf(h,JSON.parse(s),o,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:ar([e,p.pathname])),(f.replace?r.replace:r.push)(p,f.state,f)},[e,r,s,o,t])}function A_(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=U.useContext(Fi),{matches:i}=U.useContext(bi),{pathname:o}=Ou(),s=JSON.stringify(lf(i,r.v7_relativeSplatPath));return U.useMemo(()=>uf(t,JSON.parse(s),o,n==="path"),[t,s,o,n])}function iS(t,e,n,r){wa()||pe(!1);let{navigator:i}=U.useContext(Fi),{matches:o}=U.useContext(bi),s=o[o.length-1],l=s?s.params:{};s&&s.pathname;let u=s?s.pathnameBase:"/";s&&s.route;let h=Ou(),f;f=h;let p=f.pathname||"/",y=p;if(u!=="/"){let k=u.replace(/^\//,"").split("/");y="/"+p.replace(/^\//,"").split("/").slice(k.length).join("/")}let T=_i(t,{pathname:y});return uS(T&&T.map(k=>Object.assign({},k,{params:Object.assign({},l,k.params),pathname:ar([u,i.encodeLocation?i.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?u:ar([u,i.encodeLocation?i.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),o,n,r)}function oS(){let t=fS(),e=oa(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},e),n?U.createElement("pre",{style:i},n):null,null)}const sS=U.createElement(oS,null);class aS extends U.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?U.createElement(bi.Provider,{value:this.props.routeContext},U.createElement(I_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function lS(t){let{routeContext:e,match:n,children:r}=t,i=U.useContext(Mu);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),U.createElement(bi.Provider,{value:e},r)}function uS(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let f=s.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);f>=0||pe(!1),s=s.slice(0,Math.min(s.length,f+1))}let u=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<s.length;f++){let p=s[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=f),p.route.id){let{loaderData:y,errors:T}=n,P=p.route.loader&&y[p.route.id]===void 0&&(!T||T[p.route.id]===void 0);if(p.route.lazy||P){u=!0,h>=0?s=s.slice(0,h+1):s=[s[0]];break}}}return s.reduceRight((f,p,y)=>{let T,P=!1,k=null,V=null;n&&(T=l&&p.route.id?l[p.route.id]:void 0,k=p.route.errorElement||sS,u&&(h<0&&y===0?(mS("route-fallback"),P=!0,V=null):h===y&&(P=!0,V=p.route.hydrateFallbackElement||null)));let I=e.concat(s.slice(0,y+1)),_=()=>{let R;return T?R=k:P?R=V:p.route.Component?R=U.createElement(p.route.Component,null):p.route.element?R=p.route.element:R=f,U.createElement(lS,{match:p,routeContext:{outlet:f,matches:I,isDataRoute:n!=null},children:R})};return n&&(p.route.ErrorBoundary||p.route.errorElement||y===0)?U.createElement(aS,{location:n.location,revalidation:n.revalidation,component:k,error:T,children:_(),routeContext:{outlet:null,matches:I,isDataRoute:!0}}):_()},null)}var C_=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(C_||{}),ou=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(ou||{});function cS(t){let e=U.useContext(Mu);return e||pe(!1),e}function hS(t){let e=U.useContext(S_);return e||pe(!1),e}function dS(t){let e=U.useContext(bi);return e||pe(!1),e}function P_(t){let e=dS(),n=e.matches[e.matches.length-1];return n.route.id||pe(!1),n.route.id}function fS(){var t;let e=U.useContext(I_),n=hS(ou.UseRouteError),r=P_(ou.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function pS(){let{router:t}=cS(C_.UseNavigateStable),e=P_(ou.UseNavigateStable),n=U.useRef(!1);return R_(()=>{n.current=!0}),U.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,iu({fromRouteId:e},o)))},[t,e])}const qm={};function mS(t,e,n){qm[t]||(qm[t]=!0)}function gS(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function yS(t){let{basename:e="/",children:n=null,location:r,navigationType:i=tt.Pop,navigator:o,static:s=!1,future:l}=t;wa()&&pe(!1);let u=e.replace(/^\/*/,"/"),h=U.useMemo(()=>({basename:u,navigator:o,static:s,future:iu({v7_relativeSplatPath:!1},l)}),[u,l,o,s]);typeof r=="string"&&(r=ai(r));let{pathname:f="/",search:p="",hash:y="",state:T=null,key:P="default"}=r,k=U.useMemo(()=>{let V=Bo(f,u);return V==null?null:{location:{pathname:V,search:p,hash:y,state:T,key:P},navigationType:i}},[u,f,p,y,T,P,i]);return k==null?null:U.createElement(Fi.Provider,{value:h},U.createElement(ff.Provider,{children:n,value:k}))}new Promise(()=>{});function vS(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:U.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:U.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:U.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sa(){return sa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sa.apply(this,arguments)}function _S(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function ES(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function wS(t,e){return t.button===0&&(!e||e==="_self")&&!ES(t)}const TS=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],SS="6";try{window.__reactRouterVersion=SS}catch{}function IS(t,e){return MT({basename:e==null?void 0:e.basename,future:sa({},e==null?void 0:e.future,{v7_prependBasename:!0}),history:oT({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||RS(),routes:t,mapRouteProperties:vS,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window}).initialize()}function RS(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=sa({},e,{errors:AS(e.errors)})),e}function AS(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new ru(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let o=window[i.__subType];if(typeof o=="function")try{let s=new o(i.message);s.stack="",n[r]=s}catch{}}if(n[r]==null){let o=new Error(i.message);o.stack="",n[r]=o}}else n[r]=i;return n}const CS=U.createContext({isTransitioning:!1}),PS=U.createContext(new Map),kS="startTransition",Wm=WE[kS],DS="flushSync",Gm=iT[DS];function xS(t){Wm?Wm(t):t()}function _s(t){Gm?Gm(t):t()}let NS=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function VS(t){let{fallbackElement:e,router:n,future:r}=t,[i,o]=U.useState(n.state),[s,l]=U.useState(),[u,h]=U.useState({isTransitioning:!1}),[f,p]=U.useState(),[y,T]=U.useState(),[P,k]=U.useState(),V=U.useRef(new Map),{v7_startTransition:I}=r||{},_=U.useCallback(g=>{I?xS(g):g()},[I]),R=U.useCallback((g,E)=>{let{deletedFetchers:w,flushSync:C,viewTransitionOpts:D}=E;g.fetchers.forEach((Ae,it)=>{Ae.data!==void 0&&V.current.set(it,Ae.data)}),w.forEach(Ae=>V.current.delete(Ae));let S=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!D||S){C?_s(()=>o(g)):_(()=>o(g));return}if(C){_s(()=>{y&&(f&&f.resolve(),y.skipTransition()),h({isTransitioning:!0,flushSync:!0,currentLocation:D.currentLocation,nextLocation:D.nextLocation})});let Ae=n.window.document.startViewTransition(()=>{_s(()=>o(g))});Ae.finished.finally(()=>{_s(()=>{p(void 0),T(void 0),l(void 0),h({isTransitioning:!1})})}),_s(()=>T(Ae));return}y?(f&&f.resolve(),y.skipTransition(),k({state:g,currentLocation:D.currentLocation,nextLocation:D.nextLocation})):(l(g),h({isTransitioning:!0,flushSync:!1,currentLocation:D.currentLocation,nextLocation:D.nextLocation}))},[n.window,y,f,V,_]);U.useLayoutEffect(()=>n.subscribe(R),[n,R]),U.useEffect(()=>{u.isTransitioning&&!u.flushSync&&p(new NS)},[u]),U.useEffect(()=>{if(f&&s&&n.window){let g=s,E=f.promise,w=n.window.document.startViewTransition(async()=>{_(()=>o(g)),await E});w.finished.finally(()=>{p(void 0),T(void 0),l(void 0),h({isTransitioning:!1})}),T(w)}},[_,s,f,n.window]),U.useEffect(()=>{f&&s&&i.location.key===s.location.key&&f.resolve()},[f,y,i.location,s]),U.useEffect(()=>{!u.isTransitioning&&P&&(l(P.state),h({isTransitioning:!0,flushSync:!1,currentLocation:P.currentLocation,nextLocation:P.nextLocation}),k(void 0))},[u.isTransitioning,P]),U.useEffect(()=>{},[]);let M=U.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:g=>n.navigate(g),push:(g,E,w)=>n.navigate(g,{state:E,preventScrollReset:w==null?void 0:w.preventScrollReset}),replace:(g,E,w)=>n.navigate(g,{replace:!0,state:E,preventScrollReset:w==null?void 0:w.preventScrollReset})}),[n]),z=n.basename||"/",H=U.useMemo(()=>({router:n,navigator:M,static:!1,basename:z}),[n,M,z]),m=U.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return U.useEffect(()=>gS(r,n.future),[r,n.future]),U.createElement(U.Fragment,null,U.createElement(Mu.Provider,{value:H},U.createElement(S_.Provider,{value:i},U.createElement(PS.Provider,{value:V.current},U.createElement(CS.Provider,{value:u},U.createElement(yS,{basename:z,location:i.location,navigationType:i.historyAction,navigator:M,future:m},i.initialized||n.future.v7_partialHydration?U.createElement(LS,{routes:n.routes,future:n.future,state:i}):e))))),null)}const LS=U.memo(MS);function MS(t){let{routes:e,future:n,state:r}=t;return iS(e,void 0,r,n)}const OS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",FS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,k_=U.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:o,replace:s,state:l,target:u,to:h,preventScrollReset:f,viewTransition:p}=e,y=_S(e,TS),{basename:T}=U.useContext(Fi),P,k=!1;if(typeof h=="string"&&FS.test(h)&&(P=h,OS))try{let R=new URL(window.location.href),M=h.startsWith("//")?new URL(R.protocol+h):new URL(h),z=Bo(M.pathname,T);M.origin===R.origin&&z!=null?h=z+M.search+M.hash:k=!0}catch{}let V=tS(h,{relative:i}),I=bS(h,{replace:s,state:l,target:u,preventScrollReset:f,relative:i,viewTransition:p});function _(R){r&&r(R),R.defaultPrevented||I(R)}return U.createElement("a",sa({},y,{href:P||V,onClick:k||o?r:_,ref:n,target:u}))});var Km;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Km||(Km={}));var Qm;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Qm||(Qm={}));function bS(t,e){let{target:n,replace:r,state:i,preventScrollReset:o,relative:s,viewTransition:l}=e===void 0?{}:e,u=nS(),h=Ou(),f=A_(t,{relative:s});return U.useCallback(p=>{if(wS(p,n)){p.preventDefault();let y=r!==void 0?r:Vi(h)===Vi(f);u(t,{replace:y,state:i,preventScrollReset:o,relative:s,viewTransition:l})}},[h,u,f,r,i,n,t,o,s,l])}var aa=(t=>(t.LANDING_PAGE="/",t.PACKING_PAGE="pack",t))(aa||{});function US(){return de.jsxs("div",{children:[de.jsx("h1",{children:"Welcome to cellPACK"}),de.jsx("p",{children:"This is a simple landing page for the cellPACK client. You can navigate to the viewer to see recipes in action."}),de.jsx(k_,{to:aa.PACKING_PAGE,children:"Go to Packing Page →"})]})}const _t=[];for(let t=0;t<256;++t)_t.push((t+256).toString(16).slice(1));function jS(t,e=0){return(_t[t[e+0]]+_t[t[e+1]]+_t[t[e+2]]+_t[t[e+3]]+"-"+_t[t[e+4]]+_t[t[e+5]]+"-"+_t[t[e+6]]+_t[t[e+7]]+"-"+_t[t[e+8]]+_t[t[e+9]]+"-"+_t[t[e+10]]+_t[t[e+11]]+_t[t[e+12]]+_t[t[e+13]]+_t[t[e+14]]+_t[t[e+15]]).toLowerCase()}let Oc;const zS=new Uint8Array(16);function BS(){if(!Oc){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Oc=crypto.getRandomValues.bind(crypto)}return Oc(zS)}const $S=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Xm={randomUUID:$S};function HS(t,e,n){var i;if(Xm.randomUUID&&!e&&!t)return Xm.randomUUID();t=t||{};const r=t.random??((i=t.rng)==null?void 0:i.call(t))??BS();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,jS(r)}var Ym={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},qS=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],s=t[n++],l=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},x_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,l=s?t[i+1]:0,u=i+2<t.length,h=u?t[i+2]:0,f=o>>2,p=(o&3)<<4|l>>4;let y=(l&15)<<2|h>>6,T=h&63;u||(T=64,s||(y=64)),r.push(n[f],n[p],n[y],n[T])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(D_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):qS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||l==null||h==null||p==null)throw new WS;const y=o<<2|l>>4;if(r.push(y),h!==64){const T=l<<4&240|h>>2;if(r.push(T),p!==64){const P=h<<6&192|p;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class WS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const GS=function(t){const e=D_(t);return x_.encodeByteArray(e,!0)},su=function(t){return GS(t).replace(/\./g,"")},KS=function(t){try{return x_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS=()=>QS().__FIREBASE_DEFAULTS__,YS=()=>{if(typeof process>"u"||typeof Ym>"u")return;const t=Ym.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},JS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&KS(t[1]);return e&&JSON.parse(e)},pf=()=>{try{return XS()||YS()||JS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ZS=t=>{var e,n;return(n=(e=pf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},eI=t=>{const e=ZS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},N_=()=>{var t;return(t=pf())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[su(JSON.stringify(n)),su(JSON.stringify(s)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iI(){var t;const e=(t=pf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function oI(){return!iI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sI(){try{return typeof indexedDB=="object"}catch{return!1}}function aI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI="FirebaseError";class $o extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=lI,Object.setPrototypeOf(this,$o.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,V_.prototype.create)}}class V_{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?uI(o,r):"Error",l=`${this.serviceName}: ${s} (${i}).`;return new $o(i,l,r)}}function uI(t,e){return t.replace(cI,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const cI=/\{\$([^}]+)}/g;function Hh(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(Jm(o)&&Jm(s)){if(!Hh(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Jm(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xo(t){return t&&t._delegate?t._delegate:t}class la{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new tI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fI(e))try{this.getOrInitializeService({instanceIdentifier:vi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=vi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=vi){return this.instances.has(e)}getOptions(e=vi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(o);r===l&&s.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:dI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=vi){return this.component?this.component.multipleInstances?e:vi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dI(t){return t===vi?void 0:t}function fI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new hI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ee;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ee||(Ee={}));const mI={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},gI=Ee.INFO,yI={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},vI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=yI[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class L_{constructor(e){this.name=e,this._logLevel=gI,this._logHandler=vI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...e),this._logHandler(this,Ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...e),this._logHandler(this,Ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...e),this._logHandler(this,Ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...e),this._logHandler(this,Ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...e),this._logHandler(this,Ee.ERROR,...e)}}const _I=(t,e)=>e.some(n=>t instanceof n);let Zm,eg;function EI(){return Zm||(Zm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function wI(){return eg||(eg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const M_=new WeakMap,qh=new WeakMap,O_=new WeakMap,Fc=new WeakMap,mf=new WeakMap;function TI(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Wr(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&M_.set(n,t)}).catch(()=>{}),mf.set(e,t),e}function SI(t){if(qh.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});qh.set(t,e)}let Wh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return qh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||O_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Wr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function II(t){Wh=t(Wh)}function RI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(bc(this),e,...n);return O_.set(r,e.sort?e.sort():[e]),Wr(r)}:wI().includes(t)?function(...e){return t.apply(bc(this),e),Wr(M_.get(this))}:function(...e){return Wr(t.apply(bc(this),e))}}function AI(t){return typeof t=="function"?RI(t):(t instanceof IDBTransaction&&SI(t),_I(t,EI())?new Proxy(t,Wh):t)}function Wr(t){if(t instanceof IDBRequest)return TI(t);if(Fc.has(t))return Fc.get(t);const e=AI(t);return e!==t&&(Fc.set(t,e),mf.set(e,t)),e}const bc=t=>mf.get(t);function CI(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),l=Wr(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Wr(s.result),u.oldVersion,u.newVersion,Wr(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const PI=["get","getKey","getAll","getAllKeys","count"],kI=["put","add","delete","clear"],Uc=new Map;function tg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Uc.get(e))return Uc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=kI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||PI.includes(n)))return;const o=async function(s,...l){const u=this.transaction(s,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),i&&u.done]))[0]};return Uc.set(e,o),o}II(t=>({...t,get:(e,n,r)=>tg(e,n)||t.get(e,n,r),has:(e,n)=>!!tg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(xI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function xI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Gh="@firebase/app",ng="0.10.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fr=new L_("@firebase/app"),NI="@firebase/app-compat",VI="@firebase/analytics-compat",LI="@firebase/analytics",MI="@firebase/app-check-compat",OI="@firebase/app-check",FI="@firebase/auth",bI="@firebase/auth-compat",UI="@firebase/database",jI="@firebase/data-connect",zI="@firebase/database-compat",BI="@firebase/functions",$I="@firebase/functions-compat",HI="@firebase/installations",qI="@firebase/installations-compat",WI="@firebase/messaging",GI="@firebase/messaging-compat",KI="@firebase/performance",QI="@firebase/performance-compat",XI="@firebase/remote-config",YI="@firebase/remote-config-compat",JI="@firebase/storage",ZI="@firebase/storage-compat",eR="@firebase/firestore",tR="@firebase/vertexai",nR="@firebase/firestore-compat",rR="firebase",iR="11.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kh="[DEFAULT]",oR={[Gh]:"fire-core",[NI]:"fire-core-compat",[LI]:"fire-analytics",[VI]:"fire-analytics-compat",[OI]:"fire-app-check",[MI]:"fire-app-check-compat",[FI]:"fire-auth",[bI]:"fire-auth-compat",[UI]:"fire-rtdb",[jI]:"fire-data-connect",[zI]:"fire-rtdb-compat",[BI]:"fire-fn",[$I]:"fire-fn-compat",[HI]:"fire-iid",[qI]:"fire-iid-compat",[WI]:"fire-fcm",[GI]:"fire-fcm-compat",[KI]:"fire-perf",[QI]:"fire-perf-compat",[XI]:"fire-rc",[YI]:"fire-rc-compat",[JI]:"fire-gcs",[ZI]:"fire-gcs-compat",[eR]:"fire-fst",[nR]:"fire-fst-compat",[tR]:"fire-vertex","fire-js":"fire-js",[rR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const au=new Map,sR=new Map,Qh=new Map;function rg(t,e){try{t.container.addComponent(e)}catch(n){fr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function lu(t){const e=t.name;if(Qh.has(e))return fr.debug(`There were multiple attempts to register component ${e}.`),!1;Qh.set(e,t);for(const n of au.values())rg(n,t);for(const n of sR.values())rg(n,t);return!0}function aR(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Gr=new V_("app","Firebase",lR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new la("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Gr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR=iR;function F_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Kh,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Gr.create("bad-app-name",{appName:String(i)});if(n||(n=N_()),!n)throw Gr.create("no-options");const o=au.get(i);if(o){if(Hh(n,o.options)&&Hh(r,o.config))return o;throw Gr.create("duplicate-app",{appName:i})}const s=new pI(i);for(const u of Qh.values())s.addComponent(u);const l=new uR(n,r,s);return au.set(i,l),l}function hR(t=Kh){const e=au.get(t);if(!e&&t===Kh&&N_())return F_();if(!e)throw Gr.create("no-app",{appName:t});return e}function wo(t,e,n){var r;let i=(r=oR[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const l=[`Unable to register library "${i}" with version "${e}":`];o&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&l.push("and"),s&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fr.warn(l.join(" "));return}lu(new la(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR="firebase-heartbeat-database",fR=1,ua="firebase-heartbeat-store";let jc=null;function b_(){return jc||(jc=CI(dR,fR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ua)}catch(n){console.warn(n)}}}}).catch(t=>{throw Gr.create("idb-open",{originalErrorMessage:t.message})})),jc}async function pR(t){try{const n=(await b_()).transaction(ua),r=await n.objectStore(ua).get(U_(t));return await n.done,r}catch(e){if(e instanceof $o)fr.warn(e.message);else{const n=Gr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});fr.warn(n.message)}}}async function ig(t,e){try{const r=(await b_()).transaction(ua,"readwrite");await r.objectStore(ua).put(e,U_(t)),await r.done}catch(n){if(n instanceof $o)fr.warn(n.message);else{const r=Gr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});fr.warn(r.message)}}}function U_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR=1024,gR=30*24*60*60*1e3;class yR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new _R(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=og();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const l=new Date(s.date).valueOf();return Date.now()-l<=gR}),this._storage.overwrite(this._heartbeatsCache))}catch(r){fr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=og(),{heartbeatsToSend:r,unsentEntries:i}=vR(this._heartbeatsCache.heartbeats),o=su(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return fr.warn(n),""}}}function og(){return new Date().toISOString().substring(0,10)}function vR(t,e=mR){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),sg(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),sg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class _R{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sI()?aI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await pR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return ig(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return ig(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function sg(t){return su(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ER(t){lu(new la("platform-logger",e=>new DI(e),"PRIVATE")),lu(new la("heartbeat",e=>new yR(e),"PRIVATE")),wo(Gh,ng,t),wo(Gh,ng,"esm2017"),wo("fire-js","")}ER("");var wR="firebase",TR="11.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wo(wR,TR,"app");var ag=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Kr,j_;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(m,g){function E(){}E.prototype=g.prototype,m.D=g.prototype,m.prototype=new E,m.prototype.constructor=m,m.C=function(w,C,D){for(var S=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)S[Ae-2]=arguments[Ae];return g.prototype[C].apply(w,S)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(m,g,E){E||(E=0);var w=Array(16);if(typeof g=="string")for(var C=0;16>C;++C)w[C]=g.charCodeAt(E++)|g.charCodeAt(E++)<<8|g.charCodeAt(E++)<<16|g.charCodeAt(E++)<<24;else for(C=0;16>C;++C)w[C]=g[E++]|g[E++]<<8|g[E++]<<16|g[E++]<<24;g=m.g[0],E=m.g[1],C=m.g[2];var D=m.g[3],S=g+(D^E&(C^D))+w[0]+3614090360&4294967295;g=E+(S<<7&4294967295|S>>>25),S=D+(C^g&(E^C))+w[1]+3905402710&4294967295,D=g+(S<<12&4294967295|S>>>20),S=C+(E^D&(g^E))+w[2]+606105819&4294967295,C=D+(S<<17&4294967295|S>>>15),S=E+(g^C&(D^g))+w[3]+3250441966&4294967295,E=C+(S<<22&4294967295|S>>>10),S=g+(D^E&(C^D))+w[4]+4118548399&4294967295,g=E+(S<<7&4294967295|S>>>25),S=D+(C^g&(E^C))+w[5]+1200080426&4294967295,D=g+(S<<12&4294967295|S>>>20),S=C+(E^D&(g^E))+w[6]+2821735955&4294967295,C=D+(S<<17&4294967295|S>>>15),S=E+(g^C&(D^g))+w[7]+4249261313&4294967295,E=C+(S<<22&4294967295|S>>>10),S=g+(D^E&(C^D))+w[8]+1770035416&4294967295,g=E+(S<<7&4294967295|S>>>25),S=D+(C^g&(E^C))+w[9]+2336552879&4294967295,D=g+(S<<12&4294967295|S>>>20),S=C+(E^D&(g^E))+w[10]+4294925233&4294967295,C=D+(S<<17&4294967295|S>>>15),S=E+(g^C&(D^g))+w[11]+2304563134&4294967295,E=C+(S<<22&4294967295|S>>>10),S=g+(D^E&(C^D))+w[12]+1804603682&4294967295,g=E+(S<<7&4294967295|S>>>25),S=D+(C^g&(E^C))+w[13]+4254626195&4294967295,D=g+(S<<12&4294967295|S>>>20),S=C+(E^D&(g^E))+w[14]+2792965006&4294967295,C=D+(S<<17&4294967295|S>>>15),S=E+(g^C&(D^g))+w[15]+1236535329&4294967295,E=C+(S<<22&4294967295|S>>>10),S=g+(C^D&(E^C))+w[1]+4129170786&4294967295,g=E+(S<<5&4294967295|S>>>27),S=D+(E^C&(g^E))+w[6]+3225465664&4294967295,D=g+(S<<9&4294967295|S>>>23),S=C+(g^E&(D^g))+w[11]+643717713&4294967295,C=D+(S<<14&4294967295|S>>>18),S=E+(D^g&(C^D))+w[0]+3921069994&4294967295,E=C+(S<<20&4294967295|S>>>12),S=g+(C^D&(E^C))+w[5]+3593408605&4294967295,g=E+(S<<5&4294967295|S>>>27),S=D+(E^C&(g^E))+w[10]+38016083&4294967295,D=g+(S<<9&4294967295|S>>>23),S=C+(g^E&(D^g))+w[15]+3634488961&4294967295,C=D+(S<<14&4294967295|S>>>18),S=E+(D^g&(C^D))+w[4]+3889429448&4294967295,E=C+(S<<20&4294967295|S>>>12),S=g+(C^D&(E^C))+w[9]+568446438&4294967295,g=E+(S<<5&4294967295|S>>>27),S=D+(E^C&(g^E))+w[14]+3275163606&4294967295,D=g+(S<<9&4294967295|S>>>23),S=C+(g^E&(D^g))+w[3]+4107603335&4294967295,C=D+(S<<14&4294967295|S>>>18),S=E+(D^g&(C^D))+w[8]+1163531501&4294967295,E=C+(S<<20&4294967295|S>>>12),S=g+(C^D&(E^C))+w[13]+2850285829&4294967295,g=E+(S<<5&4294967295|S>>>27),S=D+(E^C&(g^E))+w[2]+4243563512&4294967295,D=g+(S<<9&4294967295|S>>>23),S=C+(g^E&(D^g))+w[7]+1735328473&4294967295,C=D+(S<<14&4294967295|S>>>18),S=E+(D^g&(C^D))+w[12]+2368359562&4294967295,E=C+(S<<20&4294967295|S>>>12),S=g+(E^C^D)+w[5]+4294588738&4294967295,g=E+(S<<4&4294967295|S>>>28),S=D+(g^E^C)+w[8]+2272392833&4294967295,D=g+(S<<11&4294967295|S>>>21),S=C+(D^g^E)+w[11]+1839030562&4294967295,C=D+(S<<16&4294967295|S>>>16),S=E+(C^D^g)+w[14]+4259657740&4294967295,E=C+(S<<23&4294967295|S>>>9),S=g+(E^C^D)+w[1]+2763975236&4294967295,g=E+(S<<4&4294967295|S>>>28),S=D+(g^E^C)+w[4]+1272893353&4294967295,D=g+(S<<11&4294967295|S>>>21),S=C+(D^g^E)+w[7]+4139469664&4294967295,C=D+(S<<16&4294967295|S>>>16),S=E+(C^D^g)+w[10]+3200236656&4294967295,E=C+(S<<23&4294967295|S>>>9),S=g+(E^C^D)+w[13]+681279174&4294967295,g=E+(S<<4&4294967295|S>>>28),S=D+(g^E^C)+w[0]+3936430074&4294967295,D=g+(S<<11&4294967295|S>>>21),S=C+(D^g^E)+w[3]+3572445317&4294967295,C=D+(S<<16&4294967295|S>>>16),S=E+(C^D^g)+w[6]+76029189&4294967295,E=C+(S<<23&4294967295|S>>>9),S=g+(E^C^D)+w[9]+3654602809&4294967295,g=E+(S<<4&4294967295|S>>>28),S=D+(g^E^C)+w[12]+3873151461&4294967295,D=g+(S<<11&4294967295|S>>>21),S=C+(D^g^E)+w[15]+530742520&4294967295,C=D+(S<<16&4294967295|S>>>16),S=E+(C^D^g)+w[2]+3299628645&4294967295,E=C+(S<<23&4294967295|S>>>9),S=g+(C^(E|~D))+w[0]+4096336452&4294967295,g=E+(S<<6&4294967295|S>>>26),S=D+(E^(g|~C))+w[7]+1126891415&4294967295,D=g+(S<<10&4294967295|S>>>22),S=C+(g^(D|~E))+w[14]+2878612391&4294967295,C=D+(S<<15&4294967295|S>>>17),S=E+(D^(C|~g))+w[5]+4237533241&4294967295,E=C+(S<<21&4294967295|S>>>11),S=g+(C^(E|~D))+w[12]+1700485571&4294967295,g=E+(S<<6&4294967295|S>>>26),S=D+(E^(g|~C))+w[3]+2399980690&4294967295,D=g+(S<<10&4294967295|S>>>22),S=C+(g^(D|~E))+w[10]+4293915773&4294967295,C=D+(S<<15&4294967295|S>>>17),S=E+(D^(C|~g))+w[1]+2240044497&4294967295,E=C+(S<<21&4294967295|S>>>11),S=g+(C^(E|~D))+w[8]+1873313359&4294967295,g=E+(S<<6&4294967295|S>>>26),S=D+(E^(g|~C))+w[15]+4264355552&4294967295,D=g+(S<<10&4294967295|S>>>22),S=C+(g^(D|~E))+w[6]+2734768916&4294967295,C=D+(S<<15&4294967295|S>>>17),S=E+(D^(C|~g))+w[13]+1309151649&4294967295,E=C+(S<<21&4294967295|S>>>11),S=g+(C^(E|~D))+w[4]+4149444226&4294967295,g=E+(S<<6&4294967295|S>>>26),S=D+(E^(g|~C))+w[11]+3174756917&4294967295,D=g+(S<<10&4294967295|S>>>22),S=C+(g^(D|~E))+w[2]+718787259&4294967295,C=D+(S<<15&4294967295|S>>>17),S=E+(D^(C|~g))+w[9]+3951481745&4294967295,m.g[0]=m.g[0]+g&4294967295,m.g[1]=m.g[1]+(C+(S<<21&4294967295|S>>>11))&4294967295,m.g[2]=m.g[2]+C&4294967295,m.g[3]=m.g[3]+D&4294967295}r.prototype.u=function(m,g){g===void 0&&(g=m.length);for(var E=g-this.blockSize,w=this.B,C=this.h,D=0;D<g;){if(C==0)for(;D<=E;)i(this,m,D),D+=this.blockSize;if(typeof m=="string"){for(;D<g;)if(w[C++]=m.charCodeAt(D++),C==this.blockSize){i(this,w),C=0;break}}else for(;D<g;)if(w[C++]=m[D++],C==this.blockSize){i(this,w),C=0;break}}this.h=C,this.o+=g},r.prototype.v=function(){var m=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);m[0]=128;for(var g=1;g<m.length-8;++g)m[g]=0;var E=8*this.o;for(g=m.length-8;g<m.length;++g)m[g]=E&255,E/=256;for(this.u(m),m=Array(16),g=E=0;4>g;++g)for(var w=0;32>w;w+=8)m[E++]=this.g[g]>>>w&255;return m};function o(m,g){var E=l;return Object.prototype.hasOwnProperty.call(E,m)?E[m]:E[m]=g(m)}function s(m,g){this.h=g;for(var E=[],w=!0,C=m.length-1;0<=C;C--){var D=m[C]|0;w&&D==g||(E[C]=D,w=!1)}this.g=E}var l={};function u(m){return-128<=m&&128>m?o(m,function(g){return new s([g|0],0>g?-1:0)}):new s([m|0],0>m?-1:0)}function h(m){if(isNaN(m)||!isFinite(m))return p;if(0>m)return V(h(-m));for(var g=[],E=1,w=0;m>=E;w++)g[w]=m/E|0,E*=4294967296;return new s(g,0)}function f(m,g){if(m.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(m.charAt(0)=="-")return V(f(m.substring(1),g));if(0<=m.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=h(Math.pow(g,8)),w=p,C=0;C<m.length;C+=8){var D=Math.min(8,m.length-C),S=parseInt(m.substring(C,C+D),g);8>D?(D=h(Math.pow(g,D)),w=w.j(D).add(h(S))):(w=w.j(E),w=w.add(h(S)))}return w}var p=u(0),y=u(1),T=u(16777216);t=s.prototype,t.m=function(){if(k(this))return-V(this).m();for(var m=0,g=1,E=0;E<this.g.length;E++){var w=this.i(E);m+=(0<=w?w:4294967296+w)*g,g*=4294967296}return m},t.toString=function(m){if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(P(this))return"0";if(k(this))return"-"+V(this).toString(m);for(var g=h(Math.pow(m,6)),E=this,w="";;){var C=M(E,g).g;E=I(E,C.j(g));var D=((0<E.g.length?E.g[0]:E.h)>>>0).toString(m);if(E=C,P(E))return D+w;for(;6>D.length;)D="0"+D;w=D+w}},t.i=function(m){return 0>m?0:m<this.g.length?this.g[m]:this.h};function P(m){if(m.h!=0)return!1;for(var g=0;g<m.g.length;g++)if(m.g[g]!=0)return!1;return!0}function k(m){return m.h==-1}t.l=function(m){return m=I(this,m),k(m)?-1:P(m)?0:1};function V(m){for(var g=m.g.length,E=[],w=0;w<g;w++)E[w]=~m.g[w];return new s(E,~m.h).add(y)}t.abs=function(){return k(this)?V(this):this},t.add=function(m){for(var g=Math.max(this.g.length,m.g.length),E=[],w=0,C=0;C<=g;C++){var D=w+(this.i(C)&65535)+(m.i(C)&65535),S=(D>>>16)+(this.i(C)>>>16)+(m.i(C)>>>16);w=S>>>16,D&=65535,S&=65535,E[C]=S<<16|D}return new s(E,E[E.length-1]&-2147483648?-1:0)};function I(m,g){return m.add(V(g))}t.j=function(m){if(P(this)||P(m))return p;if(k(this))return k(m)?V(this).j(V(m)):V(V(this).j(m));if(k(m))return V(this.j(V(m)));if(0>this.l(T)&&0>m.l(T))return h(this.m()*m.m());for(var g=this.g.length+m.g.length,E=[],w=0;w<2*g;w++)E[w]=0;for(w=0;w<this.g.length;w++)for(var C=0;C<m.g.length;C++){var D=this.i(w)>>>16,S=this.i(w)&65535,Ae=m.i(C)>>>16,it=m.i(C)&65535;E[2*w+2*C]+=S*it,_(E,2*w+2*C),E[2*w+2*C+1]+=D*it,_(E,2*w+2*C+1),E[2*w+2*C+1]+=S*Ae,_(E,2*w+2*C+1),E[2*w+2*C+2]+=D*Ae,_(E,2*w+2*C+2)}for(w=0;w<g;w++)E[w]=E[2*w+1]<<16|E[2*w];for(w=g;w<2*g;w++)E[w]=0;return new s(E,0)};function _(m,g){for(;(m[g]&65535)!=m[g];)m[g+1]+=m[g]>>>16,m[g]&=65535,g++}function R(m,g){this.g=m,this.h=g}function M(m,g){if(P(g))throw Error("division by zero");if(P(m))return new R(p,p);if(k(m))return g=M(V(m),g),new R(V(g.g),V(g.h));if(k(g))return g=M(m,V(g)),new R(V(g.g),g.h);if(30<m.g.length){if(k(m)||k(g))throw Error("slowDivide_ only works with positive integers.");for(var E=y,w=g;0>=w.l(m);)E=z(E),w=z(w);var C=H(E,1),D=H(w,1);for(w=H(w,2),E=H(E,2);!P(w);){var S=D.add(w);0>=S.l(m)&&(C=C.add(E),D=S),w=H(w,1),E=H(E,1)}return g=I(m,C.j(g)),new R(C,g)}for(C=p;0<=m.l(g);){for(E=Math.max(1,Math.floor(m.m()/g.m())),w=Math.ceil(Math.log(E)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),D=h(E),S=D.j(g);k(S)||0<S.l(m);)E-=w,D=h(E),S=D.j(g);P(D)&&(D=y),C=C.add(D),m=I(m,S)}return new R(C,m)}t.A=function(m){return M(this,m).h},t.and=function(m){for(var g=Math.max(this.g.length,m.g.length),E=[],w=0;w<g;w++)E[w]=this.i(w)&m.i(w);return new s(E,this.h&m.h)},t.or=function(m){for(var g=Math.max(this.g.length,m.g.length),E=[],w=0;w<g;w++)E[w]=this.i(w)|m.i(w);return new s(E,this.h|m.h)},t.xor=function(m){for(var g=Math.max(this.g.length,m.g.length),E=[],w=0;w<g;w++)E[w]=this.i(w)^m.i(w);return new s(E,this.h^m.h)};function z(m){for(var g=m.g.length+1,E=[],w=0;w<g;w++)E[w]=m.i(w)<<1|m.i(w-1)>>>31;return new s(E,m.h)}function H(m,g){var E=g>>5;g%=32;for(var w=m.g.length-E,C=[],D=0;D<w;D++)C[D]=0<g?m.i(D+E)>>>g|m.i(D+E+1)<<32-g:m.i(D+E);return new s(C,m.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,j_=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=h,s.fromString=f,Kr=s}).apply(typeof ag<"u"?ag:typeof self<"u"?self:typeof window<"u"?window:{});var al=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var z_,Rs,B_,Al,Xh,$_,H_,q_;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,c,d){return a==Array.prototype||a==Object.prototype||(a[c]=d.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof al=="object"&&al];for(var c=0;c<a.length;++c){var d=a[c];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=n(this);function i(a,c){if(c)e:{var d=r;a=a.split(".");for(var v=0;v<a.length-1;v++){var N=a[v];if(!(N in d))break e;d=d[N]}a=a[a.length-1],v=d[a],c=c(v),c!=v&&c!=null&&e(d,a,{configurable:!0,writable:!0,value:c})}}function o(a,c){a instanceof String&&(a+="");var d=0,v=!1,N={next:function(){if(!v&&d<a.length){var O=d++;return{value:c(O,a[O]),done:!1}}return v=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}i("Array.prototype.values",function(a){return a||function(){return o(this,function(c,d){return d})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},l=this||self;function u(a){var c=typeof a;return c=c!="object"?c:a?Array.isArray(a)?"array":c:"null",c=="array"||c=="object"&&typeof a.length=="number"}function h(a){var c=typeof a;return c=="object"&&a!=null||c=="function"}function f(a,c,d){return a.call.apply(a.bind,arguments)}function p(a,c,d){if(!a)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,v),a.apply(c,N)}}return function(){return a.apply(c,arguments)}}function y(a,c,d){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,y.apply(null,arguments)}function T(a,c){var d=Array.prototype.slice.call(arguments,1);return function(){var v=d.slice();return v.push.apply(v,arguments),a.apply(this,v)}}function P(a,c){function d(){}d.prototype=c.prototype,a.aa=c.prototype,a.prototype=new d,a.prototype.constructor=a,a.Qb=function(v,N,O){for(var q=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)q[xe-2]=arguments[xe];return c.prototype[N].apply(v,q)}}function k(a){const c=a.length;if(0<c){const d=Array(c);for(let v=0;v<c;v++)d[v]=a[v];return d}return[]}function V(a,c){for(let d=1;d<arguments.length;d++){const v=arguments[d];if(u(v)){const N=a.length||0,O=v.length||0;a.length=N+O;for(let q=0;q<O;q++)a[N+q]=v[q]}else a.push(v)}}class I{constructor(c,d){this.i=c,this.j=d,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function _(a){return/^[\s\xa0]*$/.test(a)}function R(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function M(a){return M[" "](a),a}M[" "]=function(){};var z=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function H(a,c,d){for(const v in a)c.call(d,a[v],v,a)}function m(a,c){for(const d in a)c.call(void 0,a[d],d,a)}function g(a){const c={};for(const d in a)c[d]=a[d];return c}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(a,c){let d,v;for(let N=1;N<arguments.length;N++){v=arguments[N];for(d in v)a[d]=v[d];for(let O=0;O<E.length;O++)d=E[O],Object.prototype.hasOwnProperty.call(v,d)&&(a[d]=v[d])}}function C(a){var c=1;a=a.split(":");const d=[];for(;0<c&&a.length;)d.push(a.shift()),c--;return a.length&&d.push(a.join(":")),d}function D(a){l.setTimeout(()=>{throw a},0)}function S(){var a=ne;let c=null;return a.g&&(c=a.g,a.g=a.g.next,a.g||(a.h=null),c.next=null),c}class Ae{constructor(){this.h=this.g=null}add(c,d){const v=it.get();v.set(c,d),this.h?this.h.next=v:this.g=v,this.h=v}}var it=new I(()=>new ln,a=>a.reset());class ln{constructor(){this.next=this.g=this.h=null}set(c,d){this.h=c,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let At,$=!1,ne=new Ae,re=()=>{const a=l.Promise.resolve(void 0);At=()=>{a.then(Te)}};var Te=()=>{for(var a;a=S();){try{a.h.call(a.g)}catch(d){D(d)}var c=it;c.j(a),100>c.h&&(c.h++,a.next=c.g,c.g=a)}$=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ie(a,c){this.type=a,this.g=this.target=c,this.defaultPrevented=!1}Ie.prototype.h=function(){this.defaultPrevented=!0};var gt=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,c=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const d=()=>{};l.addEventListener("test",d,c),l.removeEventListener("test",d,c)}catch{}return a}();function $e(a,c){if(Ie.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var d=this.type=a.type,v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=c,c=a.relatedTarget){if(z){e:{try{M(c.nodeName);var N=!0;break e}catch{}N=!1}N||(c=null)}}else d=="mouseover"?c=a.fromElement:d=="mouseout"&&(c=a.toElement);this.relatedTarget=c,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:ot[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&$e.aa.h.call(this)}}P($e,Ie);var ot={2:"touch",3:"pen",4:"mouse"};$e.prototype.h=function(){$e.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var st="closure_listenable_"+(1e6*Math.random()|0),yr=0;function Qo(a,c,d,v,N){this.listener=a,this.proxy=null,this.src=c,this.type=d,this.capture=!!v,this.ha=N,this.key=++yr,this.da=this.fa=!1}function vr(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function _r(a){this.src=a,this.g={},this.h=0}_r.prototype.add=function(a,c,d,v,N){var O=a.toString();a=this.g[O],a||(a=this.g[O]=[],this.h++);var q=un(a,c,v,N);return-1<q?(c=a[q],d||(c.fa=!1)):(c=new Qo(c,this.src,O,!!v,N),c.fa=d,a.push(c)),c};function Xe(a,c){var d=c.type;if(d in a.g){var v=a.g[d],N=Array.prototype.indexOf.call(v,c,void 0),O;(O=0<=N)&&Array.prototype.splice.call(v,N,1),O&&(vr(c),a.g[d].length==0&&(delete a.g[d],a.h--))}}function un(a,c,d,v){for(var N=0;N<a.length;++N){var O=a[N];if(!O.da&&O.listener==c&&O.capture==!!d&&O.ha==v)return N}return-1}var ae="closure_lm_"+(1e6*Math.random()|0),Re={};function Ue(a,c,d,v,N){if(Array.isArray(c)){for(var O=0;O<c.length;O++)Ue(a,c[O],d,v,N);return null}return d=Tr(d),a&&a[st]?a.K(c,d,h(v)?!!v.capture:!!v,N):Bt(a,c,d,!1,v,N)}function Bt(a,c,d,v,N,O){if(!c)throw Error("Invalid event type");var q=h(N)?!!N.capture:!!N,xe=li(a);if(xe||(a[ae]=xe=new _r(a)),d=xe.add(c,d,v,q,O),d.proxy)return d;if(v=wn(),d.proxy=v,v.src=a,v.listener=d,a.addEventListener)gt||(N=q),N===void 0&&(N=!1),a.addEventListener(c.toString(),v,N);else if(a.attachEvent)a.attachEvent(wr(c.toString()),v);else if(a.addListener&&a.removeListener)a.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return d}function wn(){function a(d){return c.call(a.src,a.listener,d)}const c=Xo;return a}function Er(a,c,d,v,N){if(Array.isArray(c))for(var O=0;O<c.length;O++)Er(a,c[O],d,v,N);else v=h(v)?!!v.capture:!!v,d=Tr(d),a&&a[st]?(a=a.i,c=String(c).toString(),c in a.g&&(O=a.g[c],d=un(O,d,v,N),-1<d&&(vr(O[d]),Array.prototype.splice.call(O,d,1),O.length==0&&(delete a.g[c],a.h--)))):a&&(a=li(a))&&(c=a.g[c.toString()],a=-1,c&&(a=un(c,d,v,N)),(d=-1<a?c[a]:null)&&Qn(d))}function Qn(a){if(typeof a!="number"&&a&&!a.da){var c=a.src;if(c&&c[st])Xe(c.i,a);else{var d=a.type,v=a.proxy;c.removeEventListener?c.removeEventListener(d,v,a.capture):c.detachEvent?c.detachEvent(wr(d),v):c.addListener&&c.removeListener&&c.removeListener(v),(d=li(c))?(Xe(d,a),d.h==0&&(d.src=null,c[ae]=null)):vr(a)}}}function wr(a){return a in Re?Re[a]:Re[a]="on"+a}function Xo(a,c){if(a.da)a=!0;else{c=new $e(c,this);var d=a.listener,v=a.ha||a.src;a.fa&&Qn(a),a=d.call(v,c)}return a}function li(a){return a=a[ae],a instanceof _r?a:null}var Tn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tr(a){return typeof a=="function"?a:(a[Tn]||(a[Tn]=function(c){return a.handleEvent(c)}),a[Tn])}function at(){he.call(this),this.i=new _r(this),this.M=this,this.F=null}P(at,he),at.prototype[st]=!0,at.prototype.removeEventListener=function(a,c,d,v){Er(this,a,c,d,v)};function lt(a,c){var d,v=a.F;if(v)for(d=[];v;v=v.F)d.push(v);if(a=a.M,v=c.type||c,typeof c=="string")c=new Ie(c,a);else if(c instanceof Ie)c.target=c.target||a;else{var N=c;c=new Ie(v,a),w(c,N)}if(N=!0,d)for(var O=d.length-1;0<=O;O--){var q=c.g=d[O];N=Xt(q,v,!0,c)&&N}if(q=c.g=a,N=Xt(q,v,!0,c)&&N,N=Xt(q,v,!1,c)&&N,d)for(O=0;O<d.length;O++)q=c.g=d[O],N=Xt(q,v,!1,c)&&N}at.prototype.N=function(){if(at.aa.N.call(this),this.i){var a=this.i,c;for(c in a.g){for(var d=a.g[c],v=0;v<d.length;v++)vr(d[v]);delete a.g[c],a.h--}}this.F=null},at.prototype.K=function(a,c,d,v){return this.i.add(String(a),c,!1,d,v)},at.prototype.L=function(a,c,d,v){return this.i.add(String(a),c,!0,d,v)};function Xt(a,c,d,v){if(c=a.i.g[String(c)],!c)return!0;c=c.concat();for(var N=!0,O=0;O<c.length;++O){var q=c[O];if(q&&!q.da&&q.capture==d){var xe=q.listener,vt=q.ha||q.src;q.fa&&Xe(a.i,q),N=xe.call(vt,v)!==!1&&N}}return N&&!v.defaultPrevented}function cn(a,c,d){if(typeof a=="function")d&&(a=y(a,d));else if(a&&typeof a.handleEvent=="function")a=y(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(a,c||0)}function Yo(a){a.g=cn(()=>{a.g=null,a.i&&(a.i=!1,Yo(a))},a.l);const c=a.h;a.h=null,a.m.apply(null,c)}class $i extends he{constructor(c,d){super(),this.m=c,this.l=d,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Yo(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ui(a){he.call(this),this.h=a,this.g={}}P(ui,he);var Sn=[];function Jo(a){H(a.g,function(c,d){this.g.hasOwnProperty(d)&&Qn(c)},a),a.g={}}ui.prototype.N=function(){ui.aa.N.call(this),Jo(this)},ui.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Hi=l.JSON.stringify,Pa=l.JSON.parse,tc=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function qi(){}qi.prototype.h=null;function ci(a){return a.h||(a.h=a.i())}function Zo(){}var Xn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function hi(){Ie.call(this,"d")}P(hi,Ie);function es(){Ie.call(this,"c")}P(es,Ie);var Fn={},ka=null;function di(){return ka=ka||new at}Fn.La="serverreachability";function fi(a){Ie.call(this,Fn.La,a)}P(fi,Ie);function bn(a){const c=di();lt(c,new fi(c))}Fn.STAT_EVENT="statevent";function Da(a,c){Ie.call(this,Fn.STAT_EVENT,a),this.stat=c}P(Da,Ie);function yt(a){const c=di();lt(c,new Da(c,a))}Fn.Ma="timingevent";function A(a,c){Ie.call(this,Fn.Ma,a),this.size=c}P(A,Ie);function x(a,c){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},c)}function L(){this.g=!0}L.prototype.xa=function(){this.g=!1};function j(a,c,d,v,N,O){a.info(function(){if(a.g)if(O)for(var q="",xe=O.split("&"),vt=0;vt<xe.length;vt++){var Se=xe[vt].split("=");if(1<Se.length){var Ct=Se[0];Se=Se[1];var Pt=Ct.split("_");q=2<=Pt.length&&Pt[1]=="type"?q+(Ct+"="+Se+"&"):q+(Ct+"=redacted&")}}else q=null;else q=O;return"XMLHTTP REQ ("+v+") [attempt "+N+"]: "+c+`
`+d+`
`+q})}function W(a,c,d,v,N,O,q){a.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+N+"]: "+c+`
`+d+`
`+O+" "+q})}function Z(a,c,d,v){a.info(function(){return"XMLHTTP TEXT ("+c+"): "+Y(a,d)+(v?" "+v:"")})}function ie(a,c){a.info(function(){return"TIMEOUT: "+c})}L.prototype.info=function(){};function Y(a,c){if(!a.g)return c;if(!c)return null;try{var d=JSON.parse(c);if(d){for(a=0;a<d.length;a++)if(Array.isArray(d[a])){var v=d[a];if(!(2>v.length)){var N=v[1];if(Array.isArray(N)&&!(1>N.length)){var O=N[0];if(O!="noop"&&O!="stop"&&O!="close")for(var q=1;q<N.length;q++)N[q]=""}}}}return Hi(d)}catch{return c}}var X={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},K={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ee;function se(){}P(se,qi),se.prototype.g=function(){return new XMLHttpRequest},se.prototype.i=function(){return{}},ee=new se;function ce(a,c,d,v){this.j=a,this.i=c,this.l=d,this.R=v||1,this.U=new ui(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ze}function Ze(){this.i=null,this.g="",this.h=!1}var Pe={},ge={};function Ne(a,c,d){a.L=1,a.v=La(er(c)),a.m=d,a.P=!0,Yn(a,null)}function Yn(a,c){a.F=Date.now(),Ft(a),a.A=er(a.v);var d=a.A,v=a.R;Array.isArray(v)||(v=[String(v)]),Yf(d.i,"t",v),a.C=0,d=a.j.J,a.h=new Ze,a.g=mp(a.j,d?c:null,!a.m),0<a.O&&(a.M=new $i(y(a.Y,a,a.g),a.O)),c=a.U,d=a.g,v=a.ca;var N="readystatechange";Array.isArray(N)||(N&&(Sn[0]=N.toString()),N=Sn);for(var O=0;O<N.length;O++){var q=Ue(d,N[O],v||c.handleEvent,!1,c.h||c);if(!q)break;c.g[q.key]=q}c=a.H?g(a.H):{},a.m?(a.u||(a.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,c)):(a.u="GET",a.g.ea(a.A,a.u,null,c)),bn(),j(a.i,a.u,a.A,a.l,a.R,a.m)}ce.prototype.ca=function(a){a=a.target;const c=this.M;c&&tr(a)==3?c.j():this.Y(a)},ce.prototype.Y=function(a){try{if(a==this.g)e:{const Pt=tr(this.g);var c=this.g.Ba();const Qi=this.g.Z();if(!(3>Pt)&&(Pt!=3||this.g&&(this.h.h||this.g.oa()||ip(this.g)))){this.J||Pt!=4||c==7||(c==8||0>=Qi?bn(3):bn(2)),Jn(this);var d=this.g.Z();this.X=d;t:if(Sr(this)){var v=ip(this.g);a="";var N=v.length,O=tr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){hn(this),Yt(this);var q="";break t}this.h.i=new l.TextDecoder}for(c=0;c<N;c++)this.h.h=!0,a+=this.h.i.decode(v[c],{stream:!(O&&c==N-1)});v.length=0,this.h.g+=a,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=d==200,W(this.i,this.u,this.A,this.l,this.R,Pt,d),this.o){if(this.T&&!this.K){t:{if(this.g){var xe,vt=this.g;if((xe=vt.g?vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(xe)){var Se=xe;break t}}Se=null}if(d=Se)Z(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ir(this,d);else{this.o=!1,this.s=3,yt(12),hn(this),Yt(this);break e}}if(this.P){d=!0;let Rn;for(;!this.J&&this.C<q.length;)if(Rn=In(this,q),Rn==ge){Pt==4&&(this.s=4,yt(14),d=!1),Z(this.i,this.l,null,"[Incomplete Response]");break}else if(Rn==Pe){this.s=4,yt(15),Z(this.i,this.l,q,"[Invalid Chunk]"),d=!1;break}else Z(this.i,this.l,Rn,null),Ir(this,Rn);if(Sr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pt!=4||q.length!=0||this.h.h||(this.s=1,yt(16),d=!1),this.o=this.o&&d,!d)Z(this.i,this.l,q,"[Invalid Chunked Response]"),hn(this),Yt(this);else if(0<q.length&&!this.W){this.W=!0;var Ct=this.j;Ct.g==this&&Ct.ba&&!Ct.M&&(Ct.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),oc(Ct),Ct.M=!0,yt(11))}}else Z(this.i,this.l,q,null),Ir(this,q);Pt==4&&hn(this),this.o&&!this.J&&(Pt==4?hp(this.j,this):(this.o=!1,Ft(this)))}else RE(this.g),d==400&&0<q.indexOf("Unknown SID")?(this.s=3,yt(12)):(this.s=0,yt(13)),hn(this),Yt(this)}}}catch{}finally{}};function Sr(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function In(a,c){var d=a.C,v=c.indexOf(`
`,d);return v==-1?ge:(d=Number(c.substring(d,v)),isNaN(d)?Pe:(v+=1,v+d>c.length?ge:(c=c.slice(v,v+d),a.C=v+d,c)))}ce.prototype.cancel=function(){this.J=!0,hn(this)};function Ft(a){a.S=Date.now()+a.I,Wi(a,a.I)}function Wi(a,c){if(a.B!=null)throw Error("WatchDog timer not null");a.B=x(y(a.ba,a),c)}function Jn(a){a.B&&(l.clearTimeout(a.B),a.B=null)}ce.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(ie(this.i,this.A),this.L!=2&&(bn(),yt(17)),hn(this),this.s=2,Yt(this)):Wi(this,this.S-a)};function Yt(a){a.j.G==0||a.J||hp(a.j,a)}function hn(a){Jn(a);var c=a.M;c&&typeof c.ma=="function"&&c.ma(),a.M=null,Jo(a.U),a.g&&(c=a.g,a.g=null,c.abort(),c.ma())}function Ir(a,c){try{var d=a.j;if(d.G!=0&&(d.g==a||je(d.h,a))){if(!a.K&&je(d.h,a)&&d.G==3){try{var v=d.Da.g.parse(c)}catch{v=null}if(Array.isArray(v)&&v.length==3){var N=v;if(N[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<a.F)ja(d),ba(d);else break e;ic(d),yt(18)}}else d.za=N[1],0<d.za-d.T&&37500>N[2]&&d.F&&d.v==0&&!d.C&&(d.C=x(y(d.Za,d),6e3));if(1>=Rr(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else mi(d,11)}else if((a.K||d.g==a)&&ja(d),!_(c))for(N=d.Da.g.parse(c),c=0;c<N.length;c++){let Se=N[c];if(d.T=Se[0],Se=Se[1],d.G==2)if(Se[0]=="c"){d.K=Se[1],d.ia=Se[2];const Ct=Se[3];Ct!=null&&(d.la=Ct,d.j.info("VER="+d.la));const Pt=Se[4];Pt!=null&&(d.Aa=Pt,d.j.info("SVER="+d.Aa));const Qi=Se[5];Qi!=null&&typeof Qi=="number"&&0<Qi&&(v=1.5*Qi,d.L=v,d.j.info("backChannelRequestTimeoutMs_="+v)),v=d;const Rn=a.g;if(Rn){const Ba=Rn.g?Rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ba){var O=v.h;O.g||Ba.indexOf("spdy")==-1&&Ba.indexOf("quic")==-1&&Ba.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Un(O,O.h),O.h=null))}if(v.D){const sc=Rn.g?Rn.g.getResponseHeader("X-HTTP-Session-Id"):null;sc&&(v.ya=sc,Me(v.I,v.D,sc))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-a.F,d.j.info("Handshake RTT: "+d.R+"ms")),v=d;var q=a;if(v.qa=pp(v,v.J?v.ia:null,v.W),q.K){ts(v.h,q);var xe=q,vt=v.L;vt&&(xe.I=vt),xe.B&&(Jn(xe),Ft(xe)),v.g=q}else up(v);0<d.i.length&&Ua(d)}else Se[0]!="stop"&&Se[0]!="close"||mi(d,7);else d.G==3&&(Se[0]=="stop"||Se[0]=="close"?Se[0]=="stop"?mi(d,7):rc(d):Se[0]!="noop"&&d.l&&d.l.ta(Se),d.v=0)}}bn(4)}catch{}}var ve=class{constructor(a,c){this.g=a,this.map=c}};function Le(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Zn(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Rr(a){return a.h?1:a.g?a.g.size:0}function je(a,c){return a.h?a.h==c:a.g?a.g.has(c):!1}function Un(a,c){a.g?a.g.add(c):a.h=c}function ts(a,c){a.h&&a.h==c?a.h=null:a.g&&a.g.has(c)&&a.g.delete(c)}Le.prototype.cancel=function(){if(this.i=xa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function xa(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let c=a.i;for(const d of a.g.values())c=c.concat(d.D);return c}return k(a.i)}function cE(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var c=[],d=a.length,v=0;v<d;v++)c.push(a[v]);return c}c=[],d=0;for(v in a)c[d++]=a[v];return c}function hE(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var c=[];a=a.length;for(var d=0;d<a;d++)c.push(d);return c}c=[],d=0;for(const v in a)c[d++]=v;return c}}}function qf(a,c){if(a.forEach&&typeof a.forEach=="function")a.forEach(c,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,c,void 0);else for(var d=hE(a),v=cE(a),N=v.length,O=0;O<N;O++)c.call(void 0,v[O],d&&d[O],a)}var Wf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dE(a,c){if(a){a=a.split("&");for(var d=0;d<a.length;d++){var v=a[d].indexOf("="),N=null;if(0<=v){var O=a[d].substring(0,v);N=a[d].substring(v+1)}else O=a[d];c(O,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function pi(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof pi){this.h=a.h,Na(this,a.j),this.o=a.o,this.g=a.g,Va(this,a.s),this.l=a.l;var c=a.i,d=new is;d.i=c.i,c.g&&(d.g=new Map(c.g),d.h=c.h),Gf(this,d),this.m=a.m}else a&&(c=String(a).match(Wf))?(this.h=!1,Na(this,c[1]||"",!0),this.o=ns(c[2]||""),this.g=ns(c[3]||"",!0),Va(this,c[4]),this.l=ns(c[5]||"",!0),Gf(this,c[6]||"",!0),this.m=ns(c[7]||"")):(this.h=!1,this.i=new is(null,this.h))}pi.prototype.toString=function(){var a=[],c=this.j;c&&a.push(rs(c,Kf,!0),":");var d=this.g;return(d||c=="file")&&(a.push("//"),(c=this.o)&&a.push(rs(c,Kf,!0),"@"),a.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&a.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&a.push("/"),a.push(rs(d,d.charAt(0)=="/"?mE:pE,!0))),(d=this.i.toString())&&a.push("?",d),(d=this.m)&&a.push("#",rs(d,yE)),a.join("")};function er(a){return new pi(a)}function Na(a,c,d){a.j=d?ns(c,!0):c,a.j&&(a.j=a.j.replace(/:$/,""))}function Va(a,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);a.s=c}else a.s=null}function Gf(a,c,d){c instanceof is?(a.i=c,vE(a.i,a.h)):(d||(c=rs(c,gE)),a.i=new is(c,a.h))}function Me(a,c,d){a.i.set(c,d)}function La(a){return Me(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function ns(a,c){return a?c?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function rs(a,c,d){return typeof a=="string"?(a=encodeURI(a).replace(c,fE),d&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function fE(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Kf=/[#\/\?@]/g,pE=/[#\?:]/g,mE=/[#\?]/g,gE=/[#\?@]/g,yE=/#/g;function is(a,c){this.h=this.g=null,this.i=a||null,this.j=!!c}function Ar(a){a.g||(a.g=new Map,a.h=0,a.i&&dE(a.i,function(c,d){a.add(decodeURIComponent(c.replace(/\+/g," ")),d)}))}t=is.prototype,t.add=function(a,c){Ar(this),this.i=null,a=Gi(this,a);var d=this.g.get(a);return d||this.g.set(a,d=[]),d.push(c),this.h+=1,this};function Qf(a,c){Ar(a),c=Gi(a,c),a.g.has(c)&&(a.i=null,a.h-=a.g.get(c).length,a.g.delete(c))}function Xf(a,c){return Ar(a),c=Gi(a,c),a.g.has(c)}t.forEach=function(a,c){Ar(this),this.g.forEach(function(d,v){d.forEach(function(N){a.call(c,N,v,this)},this)},this)},t.na=function(){Ar(this);const a=Array.from(this.g.values()),c=Array.from(this.g.keys()),d=[];for(let v=0;v<c.length;v++){const N=a[v];for(let O=0;O<N.length;O++)d.push(c[v])}return d},t.V=function(a){Ar(this);let c=[];if(typeof a=="string")Xf(this,a)&&(c=c.concat(this.g.get(Gi(this,a))));else{a=Array.from(this.g.values());for(let d=0;d<a.length;d++)c=c.concat(a[d])}return c},t.set=function(a,c){return Ar(this),this.i=null,a=Gi(this,a),Xf(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[c]),this.h+=1,this},t.get=function(a,c){return a?(a=this.V(a),0<a.length?String(a[0]):c):c};function Yf(a,c,d){Qf(a,c),0<d.length&&(a.i=null,a.g.set(Gi(a,c),k(d)),a.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],c=Array.from(this.g.keys());for(var d=0;d<c.length;d++){var v=c[d];const O=encodeURIComponent(String(v)),q=this.V(v);for(v=0;v<q.length;v++){var N=O;q[v]!==""&&(N+="="+encodeURIComponent(String(q[v]))),a.push(N)}}return this.i=a.join("&")};function Gi(a,c){return c=String(c),a.j&&(c=c.toLowerCase()),c}function vE(a,c){c&&!a.j&&(Ar(a),a.i=null,a.g.forEach(function(d,v){var N=v.toLowerCase();v!=N&&(Qf(this,v),Yf(this,N,d))},a)),a.j=c}function _E(a,c){const d=new L;if(l.Image){const v=new Image;v.onload=T(Cr,d,"TestLoadImage: loaded",!0,c,v),v.onerror=T(Cr,d,"TestLoadImage: error",!1,c,v),v.onabort=T(Cr,d,"TestLoadImage: abort",!1,c,v),v.ontimeout=T(Cr,d,"TestLoadImage: timeout",!1,c,v),l.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=a}else c(!1)}function EE(a,c){const d=new L,v=new AbortController,N=setTimeout(()=>{v.abort(),Cr(d,"TestPingServer: timeout",!1,c)},1e4);fetch(a,{signal:v.signal}).then(O=>{clearTimeout(N),O.ok?Cr(d,"TestPingServer: ok",!0,c):Cr(d,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(N),Cr(d,"TestPingServer: error",!1,c)})}function Cr(a,c,d,v,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),v(d)}catch{}}function wE(){this.g=new tc}function TE(a,c,d){const v=d||"";try{qf(a,function(N,O){let q=N;h(N)&&(q=Hi(N)),c.push(v+O+"="+encodeURIComponent(q))})}catch(N){throw c.push(v+"type="+encodeURIComponent("_badmap")),N}}function Ma(a){this.l=a.Ub||null,this.j=a.eb||!1}P(Ma,qi),Ma.prototype.g=function(){return new Oa(this.l,this.j)},Ma.prototype.i=function(a){return function(){return a}}({});function Oa(a,c){at.call(this),this.D=a,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(Oa,at),t=Oa.prototype,t.open=function(a,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=c,this.readyState=1,ss(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(c.body=a),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,os(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ss(this)),this.g&&(this.readyState=3,ss(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Jf(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Jf(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var c=a.value?a.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!a.done}))&&(this.response=this.responseText+=c)}a.done?os(this):ss(this),this.readyState==3&&Jf(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,os(this))},t.Qa=function(a){this.g&&(this.response=a,os(this))},t.ga=function(){this.g&&os(this)};function os(a){a.readyState=4,a.l=null,a.j=null,a.v=null,ss(a)}t.setRequestHeader=function(a,c){this.u.append(a,c)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],c=this.h.entries();for(var d=c.next();!d.done;)d=d.value,a.push(d[0]+": "+d[1]),d=c.next();return a.join(`\r
`)};function ss(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Oa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Zf(a){let c="";return H(a,function(d,v){c+=v,c+=":",c+=d,c+=`\r
`}),c}function nc(a,c,d){e:{for(v in d){var v=!1;break e}v=!0}v||(d=Zf(d),typeof a=="string"?d!=null&&encodeURIComponent(String(d)):Me(a,c,d))}function Ke(a){at.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(Ke,at);var SE=/^https?$/i,IE=["POST","PUT"];t=Ke.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,c,d,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);c=c?c.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ee.g(),this.v=this.o?ci(this.o):ci(ee),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(c,String(a),!0),this.B=!1}catch(O){ep(this,O);return}if(a=d||"",d=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var N in v)d.set(N,v[N]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const O of v.keys())d.set(O,v.get(O));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(d.keys()).find(O=>O.toLowerCase()=="content-type"),N=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(IE,c,void 0))||v||N||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,q]of d)this.g.setRequestHeader(O,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{rp(this),this.u=!0,this.g.send(a),this.u=!1}catch(O){ep(this,O)}};function ep(a,c){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=c,a.m=5,tp(a),Fa(a)}function tp(a){a.A||(a.A=!0,lt(a,"complete"),lt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,lt(this,"complete"),lt(this,"abort"),Fa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fa(this,!0)),Ke.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?np(this):this.bb())},t.bb=function(){np(this)};function np(a){if(a.h&&typeof s<"u"&&(!a.v[1]||tr(a)!=4||a.Z()!=2)){if(a.u&&tr(a)==4)cn(a.Ea,0,a);else if(lt(a,"readystatechange"),tr(a)==4){a.h=!1;try{const q=a.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var d;if(!(d=c)){var v;if(v=q===0){var N=String(a.D).match(Wf)[1]||null;!N&&l.self&&l.self.location&&(N=l.self.location.protocol.slice(0,-1)),v=!SE.test(N?N.toLowerCase():"")}d=v}if(d)lt(a,"complete"),lt(a,"success");else{a.m=6;try{var O=2<tr(a)?a.g.statusText:""}catch{O=""}a.l=O+" ["+a.Z()+"]",tp(a)}}finally{Fa(a)}}}}function Fa(a,c){if(a.g){rp(a);const d=a.g,v=a.v[0]?()=>{}:null;a.g=null,a.v=null,c||lt(a,"ready");try{d.onreadystatechange=v}catch{}}}function rp(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function tr(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<tr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var c=this.g.responseText;return a&&c.indexOf(a)==0&&(c=c.substring(a.length)),Pa(c)}};function ip(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function RE(a){const c={};a=(a.g&&2<=tr(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<a.length;v++){if(_(a[v]))continue;var d=C(a[v]);const N=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const O=c[N]||[];c[N]=O,O.push(d)}m(c,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function as(a,c,d){return d&&d.internalChannelParams&&d.internalChannelParams[a]||c}function op(a){this.Aa=0,this.i=[],this.j=new L,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=as("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=as("baseRetryDelayMs",5e3,a),this.cb=as("retryDelaySeedMs",1e4,a),this.Wa=as("forwardChannelMaxRetries",2,a),this.wa=as("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Le(a&&a.concurrentRequestLimit),this.Da=new wE,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=op.prototype,t.la=8,t.G=1,t.connect=function(a,c,d,v){yt(0),this.W=a,this.H=c||{},d&&v!==void 0&&(this.H.OSID=d,this.H.OAID=v),this.F=this.X,this.I=pp(this,null,this.W),Ua(this)};function rc(a){if(sp(a),a.G==3){var c=a.U++,d=er(a.I);if(Me(d,"SID",a.K),Me(d,"RID",c),Me(d,"TYPE","terminate"),ls(a,d),c=new ce(a,a.j,c),c.L=2,c.v=La(er(d)),d=!1,l.navigator&&l.navigator.sendBeacon)try{d=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!d&&l.Image&&(new Image().src=c.v,d=!0),d||(c.g=mp(c.j,null),c.g.ea(c.v)),c.F=Date.now(),Ft(c)}fp(a)}function ba(a){a.g&&(oc(a),a.g.cancel(),a.g=null)}function sp(a){ba(a),a.u&&(l.clearTimeout(a.u),a.u=null),ja(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function Ua(a){if(!Zn(a.h)&&!a.s){a.s=!0;var c=a.Ga;At||re(),$||(At(),$=!0),ne.add(c,a),a.B=0}}function AE(a,c){return Rr(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=c.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=x(y(a.Ga,a,c),dp(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const N=new ce(this,this.j,a);let O=this.o;if(this.S&&(O?(O=g(O),w(O,this.S)):O=this.S),this.m!==null||this.O||(N.H=O,O=null),this.P)e:{for(var c=0,d=0;d<this.i.length;d++){t:{var v=this.i[d];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(c+=v,4096<c){c=d;break e}if(c===4096||d===this.i.length-1){c=d+1;break e}}c=1e3}else c=1e3;c=lp(this,N,c),d=er(this.I),Me(d,"RID",a),Me(d,"CVER",22),this.D&&Me(d,"X-HTTP-Session-Id",this.D),ls(this,d),O&&(this.O?c="headers="+encodeURIComponent(String(Zf(O)))+"&"+c:this.m&&nc(d,this.m,O)),Un(this.h,N),this.Ua&&Me(d,"TYPE","init"),this.P?(Me(d,"$req",c),Me(d,"SID","null"),N.T=!0,Ne(N,d,null)):Ne(N,d,c),this.G=2}}else this.G==3&&(a?ap(this,a):this.i.length==0||Zn(this.h)||ap(this))};function ap(a,c){var d;c?d=c.l:d=a.U++;const v=er(a.I);Me(v,"SID",a.K),Me(v,"RID",d),Me(v,"AID",a.T),ls(a,v),a.m&&a.o&&nc(v,a.m,a.o),d=new ce(a,a.j,d,a.B+1),a.m===null&&(d.H=a.o),c&&(a.i=c.D.concat(a.i)),c=lp(a,d,1e3),d.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Un(a.h,d),Ne(d,v,c)}function ls(a,c){a.H&&H(a.H,function(d,v){Me(c,v,d)}),a.l&&qf({},function(d,v){Me(c,v,d)})}function lp(a,c,d){d=Math.min(a.i.length,d);var v=a.l?y(a.l.Na,a.l,a):null;e:{var N=a.i;let O=-1;for(;;){const q=["count="+d];O==-1?0<d?(O=N[0].g,q.push("ofs="+O)):O=0:q.push("ofs="+O);let xe=!0;for(let vt=0;vt<d;vt++){let Se=N[vt].g;const Ct=N[vt].map;if(Se-=O,0>Se)O=Math.max(0,N[vt].g-100),xe=!1;else try{TE(Ct,q,"req"+Se+"_")}catch{v&&v(Ct)}}if(xe){v=q.join("&");break e}}}return a=a.i.splice(0,d),c.D=a,v}function up(a){if(!a.g&&!a.u){a.Y=1;var c=a.Fa;At||re(),$||(At(),$=!0),ne.add(c,a),a.v=0}}function ic(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=x(y(a.Fa,a),dp(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,cp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=x(y(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yt(10),ba(this),cp(this))};function oc(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function cp(a){a.g=new ce(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var c=er(a.qa);Me(c,"RID","rpc"),Me(c,"SID",a.K),Me(c,"AID",a.T),Me(c,"CI",a.F?"0":"1"),!a.F&&a.ja&&Me(c,"TO",a.ja),Me(c,"TYPE","xmlhttp"),ls(a,c),a.m&&a.o&&nc(c,a.m,a.o),a.L&&(a.g.I=a.L);var d=a.g;a=a.ia,d.L=1,d.v=La(er(c)),d.m=null,d.P=!0,Yn(d,a)}t.Za=function(){this.C!=null&&(this.C=null,ba(this),ic(this),yt(19))};function ja(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function hp(a,c){var d=null;if(a.g==c){ja(a),oc(a),a.g=null;var v=2}else if(je(a.h,c))d=c.D,ts(a.h,c),v=1;else return;if(a.G!=0){if(c.o)if(v==1){d=c.m?c.m.length:0,c=Date.now()-c.F;var N=a.B;v=di(),lt(v,new A(v,d)),Ua(a)}else up(a);else if(N=c.s,N==3||N==0&&0<c.X||!(v==1&&AE(a,c)||v==2&&ic(a)))switch(d&&0<d.length&&(c=a.h,c.i=c.i.concat(d)),N){case 1:mi(a,5);break;case 4:mi(a,10);break;case 3:mi(a,6);break;default:mi(a,2)}}}function dp(a,c){let d=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(d*=2),d*c}function mi(a,c){if(a.j.info("Error code "+c),c==2){var d=y(a.fb,a),v=a.Xa;const N=!v;v=new pi(v||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Na(v,"https"),La(v),N?_E(v.toString(),d):EE(v.toString(),d)}else yt(2);a.G=0,a.l&&a.l.sa(c),fp(a),sp(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function fp(a){if(a.G=0,a.ka=[],a.l){const c=xa(a.h);(c.length!=0||a.i.length!=0)&&(V(a.ka,c),V(a.ka,a.i),a.h.i.length=0,k(a.i),a.i.length=0),a.l.ra()}}function pp(a,c,d){var v=d instanceof pi?er(d):new pi(d);if(v.g!="")c&&(v.g=c+"."+v.g),Va(v,v.s);else{var N=l.location;v=N.protocol,c=c?c+"."+N.hostname:N.hostname,N=+N.port;var O=new pi(null);v&&Na(O,v),c&&(O.g=c),N&&Va(O,N),d&&(O.l=d),v=O}return d=a.D,c=a.ya,d&&c&&Me(v,d,c),Me(v,"VER",a.la),ls(a,v),v}function mp(a,c,d){if(c&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=a.Ca&&!a.pa?new Ke(new Ma({eb:d})):new Ke(a.pa),c.Ha(a.J),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function gp(){}t=gp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function za(){}za.prototype.g=function(a,c){return new Jt(a,c)};function Jt(a,c){at.call(this),this.g=new op(c),this.l=a,this.h=c&&c.messageUrlParams||null,a=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(a?a["X-WebChannel-Content-Type"]=c.messageContentType:a={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(a?a["X-WebChannel-Client-Profile"]=c.va:a={"X-WebChannel-Client-Profile":c.va}),this.g.S=a,(a=c&&c.Sb)&&!_(a)&&(this.g.m=a),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!_(c)&&(this.g.D=c,a=this.h,a!==null&&c in a&&(a=this.h,c in a&&delete a[c])),this.j=new Ki(this)}P(Jt,at),Jt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Jt.prototype.close=function(){rc(this.g)},Jt.prototype.o=function(a){var c=this.g;if(typeof a=="string"){var d={};d.__data__=a,a=d}else this.u&&(d={},d.__data__=Hi(a),a=d);c.i.push(new ve(c.Ya++,a)),c.G==3&&Ua(c)},Jt.prototype.N=function(){this.g.l=null,delete this.j,rc(this.g),delete this.g,Jt.aa.N.call(this)};function yp(a){hi.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var c=a.__sm__;if(c){e:{for(const d in c){a=d;break e}a=void 0}(this.i=a)&&(a=this.i,c=c!==null&&a in c?c[a]:void 0),this.data=c}else this.data=a}P(yp,hi);function vp(){es.call(this),this.status=1}P(vp,es);function Ki(a){this.g=a}P(Ki,gp),Ki.prototype.ua=function(){lt(this.g,"a")},Ki.prototype.ta=function(a){lt(this.g,new yp(a))},Ki.prototype.sa=function(a){lt(this.g,new vp)},Ki.prototype.ra=function(){lt(this.g,"b")},za.prototype.createWebChannel=za.prototype.g,Jt.prototype.send=Jt.prototype.o,Jt.prototype.open=Jt.prototype.m,Jt.prototype.close=Jt.prototype.close,q_=function(){return new za},H_=function(){return di()},$_=Fn,Xh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},X.NO_ERROR=0,X.TIMEOUT=8,X.HTTP_ERROR=6,Al=X,K.COMPLETE="complete",B_=K,Zo.EventType=Xn,Xn.OPEN="a",Xn.CLOSE="b",Xn.ERROR="c",Xn.MESSAGE="d",at.prototype.listen=at.prototype.K,Rs=Zo,Ke.prototype.listenOnce=Ke.prototype.L,Ke.prototype.getLastError=Ke.prototype.Ka,Ke.prototype.getLastErrorCode=Ke.prototype.Ba,Ke.prototype.getStatus=Ke.prototype.Z,Ke.prototype.getResponseJson=Ke.prototype.Oa,Ke.prototype.getResponseText=Ke.prototype.oa,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Ha,z_=Ke}).apply(typeof al<"u"?al:typeof self<"u"?self:typeof window<"u"?window:{});const lg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nt.UNAUTHENTICATED=new Nt(null),Nt.GOOGLE_CREDENTIALS=new Nt("google-credentials-uid"),Nt.FIRST_PARTY=new Nt("first-party-uid"),Nt.MOCK_USER=new Nt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ho="11.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li=new L_("@firebase/firestore");function Ji(){return Li.logLevel}function G(t,...e){if(Li.logLevel<=Ee.DEBUG){const n=e.map(gf);Li.debug(`Firestore (${Ho}): ${t}`,...n)}}function pr(t,...e){if(Li.logLevel<=Ee.ERROR){const n=e.map(gf);Li.error(`Firestore (${Ho}): ${t}`,...n)}}function No(t,...e){if(Li.logLevel<=Ee.WARN){const n=e.map(gf);Li.warn(`Firestore (${Ho}): ${t}`,...n)}}function gf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(t="Unexpected state"){const e=`FIRESTORE (${Ho}) INTERNAL ASSERTION FAILED: `+t;throw pr(e),new Error(e)}function Ce(t,e){t||oe()}function ue(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends $o{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class SR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Nt.UNAUTHENTICATED))}shutdown(){}}class IR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class RR{constructor(e){this.t=e,this.currentUser=Nt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ce(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let o=new Qr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Qr,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Qr)}},0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ce(typeof r.accessToken=="string"),new W_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ce(e===null||typeof e=="string"),new Nt(e)}}class AR{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Nt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class CR{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new AR(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Nt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class PR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kR{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ce(this.o===void 0);const r=o=>{o.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,G("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ce(typeof n.token=="string"),this.R=n.token,new PR(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=DR(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}}function ye(t,e){return t<e?-1:t>e?1:0}function Vo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{static now(){return ht.fromMillis(Date.now())}static fromDate(e){return ht.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ht(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new J(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new J(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new J(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ye(this.nanoseconds,e.nanoseconds):ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{static fromTimestamp(e){return new le(e)}static min(){return new le(new ht(0,0))}static max(){return new le(new ht(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e,n,r){n===void 0?n=0:n>e.length&&oe(),r===void 0?r=e.length-n:r>e.length-n&&oe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Bn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Bn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=Bn.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return Math.sign(e.length-n.length)}static compareSegments(e,n){const r=Bn.isNumericId(e),i=Bn.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Bn.extractNumericId(e).compare(Bn.extractNumericId(n)):e<n?-1:e>n?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Kr.fromString(e.substring(4,e.length-2))}}class Fe extends Bn{construct(e,n,r){return new Fe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new J(b.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Fe(n)}static emptyPath(){return new Fe([])}}const xR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tt extends Bn{construct(e,n,r){return new Tt(e,n,r)}static isValidIdentifier(e){return xR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Tt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new J(b.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new J(b.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new J(b.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(s=!s,i++):l!=="."||s?(r+=l,i++):(o(),i++)}if(o(),s)throw new J(b.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tt(n)}static emptyPath(){return new Tt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(Fe.fromString(e))}static fromName(e){return new te(Fe.fromString(e).popFirst(5))}static empty(){return new te(Fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Fe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new Fe(e.slice()))}}function NR(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=le.fromTimestamp(r===1e9?new ht(n+1,0):new ht(n,r));return new Zr(i,te.empty(),e)}function VR(t){return new Zr(t.readTime,t.key,-1)}class Zr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Zr(le.min(),te.empty(),-1)}static max(){return new Zr(le.max(),te.empty(),-1)}}function LR(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:ye(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class OR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qo(t){if(t.code!==b.FAILED_PRECONDITION||t.message!==MR)throw t;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&oe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let i=0,o=0,s=!1;e.forEach(l=>{++i,l.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(i=>i?F.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new F((r,i)=>{const o=e.length,s=new Array(o);let l=0;for(let u=0;u<o;u++){const h=u;n(e[h]).next(f=>{s[h]=f,++l,l===o&&r(s)},f=>i(f))}})}static doWhile(e,n){return new F((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function FR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Wo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Fu.oe=-1;function bu(t){return t==null}function uu(t){return t===0&&1/t==-1/0}function bR(t){return typeof t=="number"&&Number.isInteger(t)&&!uu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=ug(e)),e=jR(t.get(n),e);return ug(e)}function jR(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function ug(t){return t+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ui(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function K_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e,n){this.comparator=e,this.root=n||wt.EMPTY}insert(e,n){return new Ge(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,wt.BLACK,null,null))}remove(e){return new Ge(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ll(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ll(this.root,e,this.comparator,!1)}getReverseIterator(){return new ll(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ll(this.root,e,this.comparator,!0)}}class ll{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wt{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??wt.RED,this.left=i??wt.EMPTY,this.right=o??wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new wt(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return wt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw oe();const e=this.left.check();if(e!==this.right.check())throw oe();return e+(this.isRed()?0:1)}}wt.EMPTY=null,wt.RED=!0,wt.BLACK=!1;wt.EMPTY=new class{constructor(){this.size=0}get key(){throw oe()}get value(){throw oe()}get color(){throw oe()}get left(){throw oe()}get right(){throw oe()}copy(e,n,r,i,o){return this}insert(e,n,r){return new wt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.comparator=e,this.data=new Ge(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new hg(this.data.getIterator())}getIteratorFrom(e){return new hg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof dt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new dt(this.comparator);return n.data=e,n}}class hg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.fields=e,e.sort(Tt.comparator)}static empty(){return new Nn([])}unionWith(e){let n=new dt(Tt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Nn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Vo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Q_("Invalid base64 string: "+o):o}}(e);return new Rt(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new Rt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rt.EMPTY_BYTE_STRING=new Rt("");const zR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ei(t){if(Ce(!!t),typeof t=="string"){let e=0;const n=zR.exec(t);if(Ce(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ye(t.seconds),nanos:Ye(t.nanos)}}function Ye(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ti(t){return typeof t=="string"?Rt.fromBase64String(t):Rt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Uu(t){const e=t.mapValue.fields.__previous_value__;return yf(e)?Uu(e):e}function ca(t){const e=ei(t.mapValue.fields.__local_write_time__.timestampValue);return new ht(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e,n,r,i,o,s,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h}}class ha{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ha("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ha&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ul={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ni(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?yf(t)?4:HR(t)?9007199254740991:$R(t)?10:11:oe()}function Kn(t,e){if(t===e)return!0;const n=ni(t);if(n!==ni(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ca(t).isEqual(ca(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=ei(i.timestampValue),l=ei(o.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return ti(i.bytesValue).isEqual(ti(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Ye(i.geoPointValue.latitude)===Ye(o.geoPointValue.latitude)&&Ye(i.geoPointValue.longitude)===Ye(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ye(i.integerValue)===Ye(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=Ye(i.doubleValue),l=Ye(o.doubleValue);return s===l?uu(s)===uu(l):isNaN(s)&&isNaN(l)}return!1}(t,e);case 9:return Vo(t.arrayValue.values||[],e.arrayValue.values||[],Kn);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},l=o.mapValue.fields||{};if(cg(s)!==cg(l))return!1;for(const u in s)if(s.hasOwnProperty(u)&&(l[u]===void 0||!Kn(s[u],l[u])))return!1;return!0}(t,e);default:return oe()}}function da(t,e){return(t.values||[]).find(n=>Kn(n,e))!==void 0}function Lo(t,e){if(t===e)return 0;const n=ni(t),r=ni(e);if(n!==r)return ye(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ye(t.booleanValue,e.booleanValue);case 2:return function(o,s){const l=Ye(o.integerValue||o.doubleValue),u=Ye(s.integerValue||s.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return dg(t.timestampValue,e.timestampValue);case 4:return dg(ca(t),ca(e));case 5:return ye(t.stringValue,e.stringValue);case 6:return function(o,s){const l=ti(o),u=ti(s);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const l=o.split("/"),u=s.split("/");for(let h=0;h<l.length&&h<u.length;h++){const f=ye(l[h],u[h]);if(f!==0)return f}return ye(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const l=ye(Ye(o.latitude),Ye(s.latitude));return l!==0?l:ye(Ye(o.longitude),Ye(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return fg(t.arrayValue,e.arrayValue);case 10:return function(o,s){var l,u,h,f;const p=o.fields||{},y=s.fields||{},T=(l=p.value)===null||l===void 0?void 0:l.arrayValue,P=(u=y.value)===null||u===void 0?void 0:u.arrayValue,k=ye(((h=T==null?void 0:T.values)===null||h===void 0?void 0:h.length)||0,((f=P==null?void 0:P.values)===null||f===void 0?void 0:f.length)||0);return k!==0?k:fg(T,P)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===ul.mapValue&&s===ul.mapValue)return 0;if(o===ul.mapValue)return 1;if(s===ul.mapValue)return-1;const l=o.fields||{},u=Object.keys(l),h=s.fields||{},f=Object.keys(h);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){const y=ye(u[p],f[p]);if(y!==0)return y;const T=Lo(l[u[p]],h[f[p]]);if(T!==0)return T}return ye(u.length,f.length)}(t.mapValue,e.mapValue);default:throw oe()}}function dg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ye(t,e);const n=ei(t),r=ei(e),i=ye(n.seconds,r.seconds);return i!==0?i:ye(n.nanos,r.nanos)}function fg(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=Lo(n[i],r[i]);if(o)return o}return ye(n.length,r.length)}function Mo(t){return Yh(t)}function Yh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ei(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ti(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=Yh(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${Yh(n.fields[s])}`;return i+"}"}(t.mapValue):oe()}function Cl(t){switch(ni(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Uu(t);return e?16+Cl(e):16;case 5:return 2*t.stringValue.length;case 6:return ti(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Cl(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Ui(r.fields,(o,s)=>{i+=o.length+Cl(s)}),i}(t.mapValue);default:throw oe()}}function pg(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Jh(t){return!!t&&"integerValue"in t}function vf(t){return!!t&&"arrayValue"in t}function mg(t){return!!t&&"nullValue"in t}function gg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Pl(t){return!!t&&"mapValue"in t}function $R(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Fs(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ui(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Fs(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Fs(t.arrayValue.values[n]);return e}return Object.assign({},t)}function HR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.value=e}static empty(){return new gn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Pl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fs(n)}setAll(e){let n=Tt.emptyPath(),r={},i=[];e.forEach((s,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}s?r[l.lastSegment()]=Fs(s):i.push(l.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());Pl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Kn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Pl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ui(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new gn(Fs(this.value))}}function X_(t){const e=[];return Ui(t.fields,(n,r)=>{const i=new Tt([n]);if(Pl(r)){const o=X_(r.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new Nn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,n,r,i,o,s,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=l}static newInvalidDocument(e){return new Lt(e,0,le.min(),le.min(),le.min(),gn.empty(),0)}static newFoundDocument(e,n,r,i){return new Lt(e,1,n,le.min(),r,i,0)}static newNoDocument(e,n){return new Lt(e,2,n,le.min(),le.min(),gn.empty(),0)}static newUnknownDocument(e,n){return new Lt(e,3,n,le.min(),le.min(),gn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Lt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Lt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,n){this.position=e,this.inclusive=n}}function yg(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(o.field.isKeyField()?r=te.comparator(te.fromName(s.referenceValue),n.key):r=Lo(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function vg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Kn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,n="asc"){this.field=e,this.dir=n}}function qR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{}class rt extends Y_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new GR(e,n,r):n==="array-contains"?new XR(e,r):n==="in"?new YR(e,r):n==="not-in"?new JR(e,r):n==="array-contains-any"?new ZR(e,r):new rt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new KR(e,r):new QR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Lo(n,this.value)):n!==null&&ni(this.value)===ni(n)&&this.matchesComparison(Lo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return oe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class On extends Y_{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new On(e,n)}matches(e){return J_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function J_(t){return t.op==="and"}function Z_(t){return WR(t)&&J_(t)}function WR(t){for(const e of t.filters)if(e instanceof On)return!1;return!0}function Zh(t){if(t instanceof rt)return t.field.canonicalString()+t.op.toString()+Mo(t.value);if(Z_(t))return t.filters.map(e=>Zh(e)).join(",");{const e=t.filters.map(n=>Zh(n)).join(",");return`${t.op}(${e})`}}function e0(t,e){return t instanceof rt?function(r,i){return i instanceof rt&&r.op===i.op&&r.field.isEqual(i.field)&&Kn(r.value,i.value)}(t,e):t instanceof On?function(r,i){return i instanceof On&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,l)=>o&&e0(s,i.filters[l]),!0):!1}(t,e):void oe()}function t0(t){return t instanceof rt?function(n){return`${n.field.canonicalString()} ${n.op} ${Mo(n.value)}`}(t):t instanceof On?function(n){return n.op.toString()+" {"+n.getFilters().map(t0).join(" ,")+"}"}(t):"Filter"}class GR extends rt{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class KR extends rt{constructor(e,n){super(e,"in",n),this.keys=n0("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class QR extends rt{constructor(e,n){super(e,"not-in",n),this.keys=n0("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function n0(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>te.fromName(r.referenceValue))}class XR extends rt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return vf(n)&&da(n.arrayValue,this.value)}}class YR extends rt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&da(this.value.arrayValue,n)}}class JR extends rt{constructor(e,n){super(e,"not-in",n)}matches(e){if(da(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!da(this.value.arrayValue,n)}}class ZR extends rt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!vf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>da(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e,n=null,r=[],i=[],o=null,s=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=l,this.ue=null}}function _g(t,e=null,n=[],r=[],i=null,o=null,s=null){return new eA(t,e,n,r,i,o,s)}function _f(t){const e=ue(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Zh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),bu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Mo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Mo(r)).join(",")),e.ue=n}return e.ue}function Ef(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!qR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!e0(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!vg(t.startAt,e.startAt)&&vg(t.endAt,e.endAt)}function ed(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,n=null,r=[],i=[],o=null,s="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function tA(t,e,n,r,i,o,s,l){return new Ta(t,e,n,r,i,o,s,l)}function r0(t){return new Ta(t)}function Eg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function i0(t){return t.collectionGroup!==null}function bs(t){const e=ue(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let l=new dt(Tt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new hu(o,r))}),n.has(Tt.keyField().canonicalString())||e.ce.push(new hu(Tt.keyField(),r))}return e.ce}function Wn(t){const e=ue(t);return e.le||(e.le=nA(e,bs(t))),e.le}function nA(t,e){if(t.limitType==="F")return _g(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new hu(i.field,o)});const n=t.endAt?new cu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new cu(t.startAt.position,t.startAt.inclusive):null;return _g(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function td(t,e){const n=t.filters.concat([e]);return new Ta(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function nd(t,e,n){return new Ta(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ju(t,e){return Ef(Wn(t),Wn(e))&&t.limitType===e.limitType}function o0(t){return`${_f(Wn(t))}|lt:${t.limitType}`}function Zi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>t0(i)).join(", ")}]`),bu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Mo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Mo(i)).join(",")),`Target(${r})`}(Wn(t))}; limitType=${t.limitType})`}function zu(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):te.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of bs(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,l,u){const h=yg(s,l,u);return s.inclusive?h<=0:h<0}(r.startAt,bs(r),i)||r.endAt&&!function(s,l,u){const h=yg(s,l,u);return s.inclusive?h>=0:h>0}(r.endAt,bs(r),i))}(t,e)}function rA(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function s0(t){return(e,n)=>{let r=!1;for(const i of bs(t)){const o=iA(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function iA(t,e,n){const r=t.field.isKeyField()?te.comparator(e.key,n.key):function(o,s,l){const u=s.data.field(o),h=l.data.field(o);return u!==null&&h!==null?Lo(u,h):oe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return oe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ui(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return K_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA=new Ge(te.comparator);function mr(){return oA}const a0=new Ge(te.comparator);function As(...t){let e=a0;for(const n of t)e=e.insert(n.key,n);return e}function l0(t){let e=a0;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ri(){return Us()}function u0(){return Us()}function Us(){return new ji(t=>t.toString(),(t,e)=>t.isEqual(e))}const sA=new Ge(te.comparator),aA=new dt(te.comparator);function me(...t){let e=aA;for(const n of t)e=e.add(n);return e}const lA=new dt(ye);function uA(){return lA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:uu(e)?"-0":e}}function c0(t){return{integerValue:""+t}}function cA(t,e){return bR(e)?c0(e):wf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(){this._=void 0}}function hA(t,e,n){return t instanceof du?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&yf(o)&&(o=Uu(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof fa?d0(t,e):t instanceof pa?f0(t,e):function(i,o){const s=h0(i,o),l=wg(s)+wg(i.Pe);return Jh(s)&&Jh(i.Pe)?c0(l):wf(i.serializer,l)}(t,e)}function dA(t,e,n){return t instanceof fa?d0(t,e):t instanceof pa?f0(t,e):n}function h0(t,e){return t instanceof fu?function(r){return Jh(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class du extends Bu{}class fa extends Bu{constructor(e){super(),this.elements=e}}function d0(t,e){const n=p0(e);for(const r of t.elements)n.some(i=>Kn(i,r))||n.push(r);return{arrayValue:{values:n}}}class pa extends Bu{constructor(e){super(),this.elements=e}}function f0(t,e){let n=p0(e);for(const r of t.elements)n=n.filter(i=>!Kn(i,r));return{arrayValue:{values:n}}}class fu extends Bu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function wg(t){return Ye(t.integerValue||t.doubleValue)}function p0(t){return vf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function fA(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof fa&&i instanceof fa||r instanceof pa&&i instanceof pa?Vo(r.elements,i.elements,Kn):r instanceof fu&&i instanceof fu?Kn(r.Pe,i.Pe):r instanceof du&&i instanceof du}(t.transform,e.transform)}class pA{constructor(e,n){this.version=e,this.transformResults=n}}class lr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new lr}static exists(e){return new lr(void 0,e)}static updateTime(e){return new lr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function kl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class $u{}function m0(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new y0(t.key,lr.none()):new Sa(t.key,t.data,lr.none());{const n=t.data,r=gn.empty();let i=new dt(Tt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new zi(t.key,r,new Nn(i.toArray()),lr.none())}}function mA(t,e,n){t instanceof Sa?function(i,o,s){const l=i.value.clone(),u=Sg(i.fieldTransforms,o,s.transformResults);l.setAll(u),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,n):t instanceof zi?function(i,o,s){if(!kl(i.precondition,o))return void o.convertToUnknownDocument(s.version);const l=Sg(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(g0(i)),u.setAll(l),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function js(t,e,n,r){return t instanceof Sa?function(o,s,l,u){if(!kl(o.precondition,s))return l;const h=o.value.clone(),f=Ig(o.fieldTransforms,u,s);return h.setAll(f),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof zi?function(o,s,l,u){if(!kl(o.precondition,s))return l;const h=Ig(o.fieldTransforms,u,s),f=s.data;return f.setAll(g0(o)),f.setAll(h),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),l===null?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(o,s,l){return kl(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l}(t,e,n)}function gA(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=h0(r.transform,i||null);o!=null&&(n===null&&(n=gn.empty()),n.set(r.field,o))}return n||null}function Tg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Vo(r,i,(o,s)=>fA(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Sa extends $u{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class zi extends $u{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function g0(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Sg(t,e,n){const r=new Map;Ce(t.length===n.length);for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,l=e.data.field(o.field);r.set(o.field,dA(s,l,n[i]))}return r}function Ig(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,hA(o,s,e))}return r}class y0 extends $u{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yA extends $u{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&mA(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=js(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=js(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=u0();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let l=this.applyToLocalView(s,o.mutatedFields);l=n.has(i.key)?null:l;const u=m0(s,l);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(le.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),me())}isEqual(e){return this.batchId===e.batchId&&Vo(this.mutations,e.mutations,(n,r)=>Tg(n,r))&&Vo(this.baseMutations,e.baseMutations,(n,r)=>Tg(n,r))}}class Tf{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ce(e.mutations.length===r.length);let i=function(){return sA}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new Tf(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et,_e;function wA(t){switch(t){default:return oe();case b.CANCELLED:case b.UNKNOWN:case b.DEADLINE_EXCEEDED:case b.RESOURCE_EXHAUSTED:case b.INTERNAL:case b.UNAVAILABLE:case b.UNAUTHENTICATED:return!1;case b.INVALID_ARGUMENT:case b.NOT_FOUND:case b.ALREADY_EXISTS:case b.PERMISSION_DENIED:case b.FAILED_PRECONDITION:case b.ABORTED:case b.OUT_OF_RANGE:case b.UNIMPLEMENTED:case b.DATA_LOSS:return!0}}function v0(t){if(t===void 0)return pr("GRPC error has no .code"),b.UNKNOWN;switch(t){case et.OK:return b.OK;case et.CANCELLED:return b.CANCELLED;case et.UNKNOWN:return b.UNKNOWN;case et.DEADLINE_EXCEEDED:return b.DEADLINE_EXCEEDED;case et.RESOURCE_EXHAUSTED:return b.RESOURCE_EXHAUSTED;case et.INTERNAL:return b.INTERNAL;case et.UNAVAILABLE:return b.UNAVAILABLE;case et.UNAUTHENTICATED:return b.UNAUTHENTICATED;case et.INVALID_ARGUMENT:return b.INVALID_ARGUMENT;case et.NOT_FOUND:return b.NOT_FOUND;case et.ALREADY_EXISTS:return b.ALREADY_EXISTS;case et.PERMISSION_DENIED:return b.PERMISSION_DENIED;case et.FAILED_PRECONDITION:return b.FAILED_PRECONDITION;case et.ABORTED:return b.ABORTED;case et.OUT_OF_RANGE:return b.OUT_OF_RANGE;case et.UNIMPLEMENTED:return b.UNIMPLEMENTED;case et.DATA_LOSS:return b.DATA_LOSS;default:return oe()}}(_e=et||(et={}))[_e.OK=0]="OK",_e[_e.CANCELLED=1]="CANCELLED",_e[_e.UNKNOWN=2]="UNKNOWN",_e[_e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_e[_e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_e[_e.NOT_FOUND=5]="NOT_FOUND",_e[_e.ALREADY_EXISTS=6]="ALREADY_EXISTS",_e[_e.PERMISSION_DENIED=7]="PERMISSION_DENIED",_e[_e.UNAUTHENTICATED=16]="UNAUTHENTICATED",_e[_e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_e[_e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_e[_e.ABORTED=10]="ABORTED",_e[_e.OUT_OF_RANGE=11]="OUT_OF_RANGE",_e[_e.UNIMPLEMENTED=12]="UNIMPLEMENTED",_e[_e.INTERNAL=13]="INTERNAL",_e[_e.UNAVAILABLE=14]="UNAVAILABLE",_e[_e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA=new Kr([4294967295,4294967295],0);function Rg(t){const e=TA().encode(t),n=new j_;return n.update(e),new Uint8Array(n.digest())}function Ag(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Kr([n,r],0),new Kr([i,o],0)]}class Sf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Cs(`Invalid padding: ${n}`);if(r<0)throw new Cs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Cs(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Cs(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ie=Kr.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(Kr.fromNumber(r)));return i.compare(SA)===1&&(i=new Kr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}Ee(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=Rg(e),[r,i]=Ag(n);for(let o=0;o<this.hashCount;o++){const s=this.de(r,i,o);if(!this.Ee(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new Sf(o,i,n);return r.forEach(l=>s.insert(l)),s}insert(e){if(this.Te===0)return;const n=Rg(e),[r,i]=Ag(n);for(let o=0;o<this.hashCount;o++){const s=this.de(r,i,o);this.Ae(s)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Cs extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ia.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Hu(le.min(),i,new Ge(ye),mr(),me())}}class Ia{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ia(r,n,me(),me(),me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class _0{constructor(e,n){this.targetId=e,this.me=n}}class E0{constructor(e,n,r=Rt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Cg{constructor(){this.fe=0,this.ge=Pg(),this.pe=Rt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=me(),n=me(),r=me();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:oe()}}),new Ia(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Pg()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ce(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class IA{constructor(e){this.Be=e,this.Le=new Map,this.ke=mr(),this.qe=cl(),this.Qe=cl(),this.Ke=new Ge(ye)}$e(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(n,e.Ve):this.We(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.We(n,e.key,e.Ve)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.je(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.De(e.resumeToken));break;default:oe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Le.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.me.count,i=this.Ye(n);if(i){const o=i.target;if(ed(o))if(r===0){const s=new te(o.path);this.We(n,s,Lt.newNoDocument(s,le.min()))}else Ce(r===1);else{const s=this.Ze(n);if(s!==r){const l=this.Xe(e),u=l?this.et(l,e,s):1;if(u!==0){this.He(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,h)}}}}}Xe(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,l;try{s=ti(r).toUint8Array()}catch(u){if(u instanceof Q_)return No("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Sf(s,i,o)}catch(u){return No(u instanceof Cs?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Te===0?null:l}et(e,n,r){return n.me.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Be.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.Be.nt(),l=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(l)||(this.We(n,o,null),i++)}),i}it(e){const n=new Map;this.Le.forEach((o,s)=>{const l=this.Ye(s);if(l){if(o.current&&ed(l.target)){const u=new te(l.target.path);this.st(u).has(s)||this.ot(s,u)||this.We(s,u,Lt.newNoDocument(u,e))}o.be&&(n.set(s,o.ve()),o.Ce())}});let r=me();this.Qe.forEach((o,s)=>{let l=!0;s.forEachWhile(u=>{const h=this.Ye(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));const i=new Hu(e,n,this.Ke,this.ke,r);return this.ke=mr(),this.qe=cl(),this.Qe=cl(),this.Ke=new Ge(ye),i}Ue(e,n){if(!this.je(e))return;const r=this.ot(e,n.key)?2:0;this.ze(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.ot(e,n)?i.Fe(n,1):i.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(e)),this.Qe=this.Qe.insert(n,this._t(n).add(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Le.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let n=this.Le.get(e);return n||(n=new Cg,this.Le.set(e,n)),n}_t(e){let n=this.Qe.get(e);return n||(n=new dt(ye),this.Qe=this.Qe.insert(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new dt(ye),this.qe=this.qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.Le.get(e);return n&&n.Se?null:this.Be.ut(e)}He(e){this.Le.set(e,new Cg),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}ot(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}}function cl(){return new Ge(te.comparator)}function Pg(){return new Ge(te.comparator)}const RA={asc:"ASCENDING",desc:"DESCENDING"},AA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},CA={and:"AND",or:"OR"};class PA{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function rd(t,e){return t.useProto3Json||bu(e)?e:{value:e}}function pu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function w0(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function kA(t,e){return pu(t,e.toTimestamp())}function Gn(t){return Ce(!!t),le.fromTimestamp(function(n){const r=ei(n);return new ht(r.seconds,r.nanos)}(t))}function If(t,e){return id(t,e).canonicalString()}function id(t,e){const n=function(i){return new Fe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function T0(t){const e=Fe.fromString(t);return Ce(C0(e)),e}function od(t,e){return If(t.databaseId,e.path)}function zc(t,e){const n=T0(e);if(n.get(1)!==t.databaseId.projectId)throw new J(b.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new J(b.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(I0(n))}function S0(t,e){return If(t.databaseId,e)}function DA(t){const e=T0(t);return e.length===4?Fe.emptyPath():I0(e)}function sd(t){return new Fe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function I0(t){return Ce(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function kg(t,e,n){return{name:od(t,e),fields:n.value.mapValue.fields}}function xA(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:oe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(h,f){return h.useProto3Json?(Ce(f===void 0||typeof f=="string"),Rt.fromBase64String(f||"")):(Ce(f===void 0||f instanceof Buffer||f instanceof Uint8Array),Rt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,l=s&&function(h){const f=h.code===void 0?b.UNKNOWN:v0(h.code);return new J(f,h.message||"")}(s);n=new E0(r,i,o,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=zc(t,r.document.name),o=Gn(r.document.updateTime),s=r.document.createTime?Gn(r.document.createTime):le.min(),l=new gn({mapValue:{fields:r.document.fields}}),u=Lt.newFoundDocument(i,o,s,l),h=r.targetIds||[],f=r.removedTargetIds||[];n=new Dl(h,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=zc(t,r.document),o=r.readTime?Gn(r.readTime):le.min(),s=Lt.newNoDocument(i,o),l=r.removedTargetIds||[];n=new Dl([],l,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=zc(t,r.document),o=r.removedTargetIds||[];n=new Dl([],o,i,null)}else{if(!("filter"in e))return oe();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new EA(i,o),l=r.targetId;n=new _0(l,s)}}return n}function NA(t,e){let n;if(e instanceof Sa)n={update:kg(t,e.key,e.value)};else if(e instanceof y0)n={delete:od(t,e.key)};else if(e instanceof zi)n={update:kg(t,e.key,e.data),updateMask:zA(e.fieldMask)};else{if(!(e instanceof yA))return oe();n={verify:od(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const l=s.transform;if(l instanceof du)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof fa)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof pa)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof fu)return{fieldPath:s.field.canonicalString(),increment:l.Pe};throw oe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:kA(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:oe()}(t,e.precondition)),n}function VA(t,e){return t&&t.length>0?(Ce(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?Gn(i.updateTime):Gn(o);return s.isEqual(le.min())&&(s=Gn(o)),new pA(s,i.transformResults||[])}(n,e))):[]}function LA(t,e){return{documents:[S0(t,e.path)]}}function MA(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=S0(t,i);const o=function(h){if(h.length!==0)return A0(On.create(h,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(h){if(h.length!==0)return h.map(f=>function(y){return{field:eo(y.field),direction:bA(y.dir)}}(f))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const l=rd(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ct:n,parent:i}}function OA(t){let e=DA(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ce(r===1);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let o=[];n.where&&(o=function(p){const y=R0(p);return y instanceof On&&Z_(y)?y.getFilters():[y]}(n.where));let s=[];n.orderBy&&(s=function(p){return p.map(y=>function(P){return new hu(to(P.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(y))}(n.orderBy));let l=null;n.limit&&(l=function(p){let y;return y=typeof p=="object"?p.value:p,bu(y)?null:y}(n.limit));let u=null;n.startAt&&(u=function(p){const y=!!p.before,T=p.values||[];return new cu(T,y)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const y=!p.before,T=p.values||[];return new cu(T,y)}(n.endAt)),tA(e,i,s,o,l,"F",u,h)}function FA(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function R0(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=to(n.unaryFilter.field);return rt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=to(n.unaryFilter.field);return rt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=to(n.unaryFilter.field);return rt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=to(n.unaryFilter.field);return rt.create(s,"!=",{nullValue:"NULL_VALUE"});default:return oe()}}(t):t.fieldFilter!==void 0?function(n){return rt.create(to(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return oe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return On.create(n.compositeFilter.filters.map(r=>R0(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return oe()}}(n.compositeFilter.op))}(t):oe()}function bA(t){return RA[t]}function UA(t){return AA[t]}function jA(t){return CA[t]}function eo(t){return{fieldPath:t.canonicalString()}}function to(t){return Tt.fromServerFormat(t.fieldPath)}function A0(t){return t instanceof rt?function(n){if(n.op==="=="){if(gg(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NAN"}};if(mg(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(gg(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NOT_NAN"}};if(mg(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:eo(n.field),op:UA(n.op),value:n.value}}}(t):t instanceof On?function(n){const r=n.getFilters().map(i=>A0(i));return r.length===1?r[0]:{compositeFilter:{op:jA(n.op),filters:r}}}(t):oe()}function zA(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function C0(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,n,r,i,o=le.min(),s=le.min(),l=Rt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Fr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e){this.ht=e}}function $A(t){const e=OA({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?nd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(){this.ln=new qA}addToCollectionParentIndex(e,n){return this.ln.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.ln.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Zr.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Zr.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class qA{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new dt(Fe.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new dt(Fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ht{static withCacheSize(e){return new Ht(e,Ht.DEFAULT_COLLECTION_PERCENTILE,Ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ht.DEFAULT_COLLECTION_PERCENTILE=10,Ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ht.DEFAULT=new Ht(41943040,Ht.DEFAULT_COLLECTION_PERCENTILE,Ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ht.DISABLED=new Ht(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new Oo(0)}static Qn(){return new Oo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg([t,e],[n,r]){const i=ye(t,n);return i===0?ye(e,r):i}class WA{constructor(e){this.Gn=e,this.buffer=new dt(xg),this.zn=0}jn(){return++this.zn}Hn(e){const n=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();xg(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class GA{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){G("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Wo(n)?G("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await qo(n)}await this.Yn(3e5)})}}class KA{constructor(e,n){this.Zn=e,this.params=n}calculateTargetCount(e,n){return this.Zn.Xn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return F.resolve(Fu.oe);const r=new WA(n);return this.Zn.forEachTarget(e,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(e,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(G("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(Dg)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(G("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Dg):this.tr(e,n))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,n){let r,i,o,s,l,u,h;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(G("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,l=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(h=Date.now(),Ji()<=Ee.DEBUG&&G("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(l-s)+`ms
	Removed ${o} targets in `+(u-l)+`ms
	Removed ${p} documents in `+(h-u)+`ms
Total Duration: ${h-f}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}}function QA(t,e){return new KA(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(){this.changes=new ji(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Lt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&js(r.mutation,i,Nn.empty(),ht.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,me()).next(()=>r))}getLocalViewOfDocuments(e,n,r=me()){const i=Ri();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=As();return o.forEach((l,u)=>{s=s.insert(l,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=Ri();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,me()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,l)=>{n.set(s,l)})})}computeViews(e,n,r,i){let o=mr();const s=Us(),l=function(){return Us()}();return n.forEach((u,h)=>{const f=r.get(h.key);i.has(h.key)&&(f===void 0||f.mutation instanceof zi)?o=o.insert(h.key,h):f!==void 0?(s.set(h.key,f.mutation.getFieldMask()),js(f.mutation,h,f.mutation.getFieldMask(),ht.now())):s.set(h.key,Nn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((h,f)=>s.set(h,f)),n.forEach((h,f)=>{var p;return l.set(h,new YA(f,(p=s.get(h))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Us();let i=new Ge((s,l)=>s-l),o=me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const l of s)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let f=r.get(u)||Nn.empty();f=l.applyToLocalView(h,f),r.set(u,f);const p=(i.get(l.batchId)||me()).add(u);i=i.insert(l.batchId,p)})}).next(()=>{const s=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,f=u.value,p=u0();f.forEach(y=>{if(!o.has(y)){const T=m0(n.get(y),r.get(y));T!==null&&p.set(y,T),o=o.add(y)}}),s.push(this.documentOverlayCache.saveOverlays(e,h,p))}return F.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return te.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):i0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):F.resolve(Ri());let l=-1,u=o;return s.next(h=>F.forEach(h,(f,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),o.get(f)?F.resolve():this.remoteDocumentCache.getEntry(e,f).next(y=>{u=u.insert(f,y)}))).next(()=>this.populateOverlays(e,h,o)).next(()=>this.computeViews(e,u,h,me())).next(f=>({batchId:l,changes:l0(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(r=>{let i=As();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=As();return this.indexManager.getCollectionParents(e,o).next(l=>F.forEach(l,u=>{const h=function(p,y){return new Ta(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(f=>{f.forEach((p,y)=>{s=s.insert(p,y)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,h)=>{const f=h.getKey();s.get(f)===null&&(s=s.insert(f,Lt.newInvalidDocument(f)))});let l=As();return s.forEach((u,h)=>{const f=o.get(u);f!==void 0&&js(f.mutation,h,Nn.empty(),ht.now()),zu(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,n){return F.resolve(this.Tr.get(n))}saveBundleMetadata(e,n){return this.Tr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Gn(i.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Ir.get(n))}saveNamedQuery(e,n){return this.Ir.set(n.name,function(i){return{name:i.name,query:$A(i.bundledQuery),readTime:Gn(i.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(){this.overlays=new Ge(te.comparator),this.dr=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ri();return F.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.Tt(e,n,o)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.dr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.dr.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const i=Ri(),o=n.length+1,s=new te(n.child("")),l=this.overlays.getIteratorFrom(s);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return F.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Ge((h,f)=>h-f);const s=this.overlays.getIterator();for(;s.hasNext();){const h=s.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let f=o.get(h.largestBatchId);f===null&&(f=Ri(),o=o.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const l=Ri(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,f)=>l.set(h,f)),!(l.size()>=i)););return F.resolve(l)}Tt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.dr.get(i.largestBatchId).delete(r.key);this.dr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new _A(n,r));let o=this.dr.get(n);o===void 0&&(o=me(),this.dr.set(n,o)),this.dr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(){this.sessionToken=Rt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(){this.Er=new dt(ft.Ar),this.Rr=new dt(ft.Vr)}isEmpty(){return this.Er.isEmpty()}addReference(e,n){const r=new ft(e,n);this.Er=this.Er.add(r),this.Rr=this.Rr.add(r)}mr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.gr(new ft(e,n))}pr(e,n){e.forEach(r=>this.removeReference(r,n))}yr(e){const n=new te(new Fe([])),r=new ft(n,e),i=new ft(n,e+1),o=[];return this.Rr.forEachInRange([r,i],s=>{this.gr(s),o.push(s.key)}),o}wr(){this.Er.forEach(e=>this.gr(e))}gr(e){this.Er=this.Er.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const n=new te(new Fe([])),r=new ft(n,e),i=new ft(n,e+1);let o=me();return this.Rr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new ft(e,0),r=this.Er.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ft{constructor(e,n){this.key=e,this.br=n}static Ar(e,n){return te.comparator(e.key,n.key)||ye(e.br,n.br)}static Vr(e,n){return ye(e.br,n.br)||te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new dt(ft.Ar)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new vA(o,n,r,i);this.mutationQueue.push(s);for(const l of i)this.vr=this.vr.add(new ft(l.key,o)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return F.resolve(s)}lookupMutationBatch(e,n){return F.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Fr(r),o=i<0?0:i;return F.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ft(n,0),i=new ft(n,Number.POSITIVE_INFINITY),o=[];return this.vr.forEachInRange([r,i],s=>{const l=this.Cr(s.br);o.push(l)}),F.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new dt(ye);return n.forEach(i=>{const o=new ft(i,0),s=new ft(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([o,s],l=>{r=r.add(l.br)})}),F.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;te.isDocumentKey(o)||(o=o.child(""));const s=new ft(new te(o),0);let l=new dt(ye);return this.vr.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(l=l.add(u.br)),!0)},s),F.resolve(this.Mr(l))}Mr(e){const n=[];return e.forEach(r=>{const i=this.Cr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ce(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return F.forEach(n.mutations,i=>{const o=new ft(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.vr=r})}Bn(e){}containsKey(e,n){const r=new ft(n,0),i=this.vr.firstAfterOrEqual(r);return F.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Or(e,n){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const n=this.Fr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e){this.Nr=e,this.docs=function(){return new Ge(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Nr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():Lt.newInvalidDocument(n))}getEntries(e,n){let r=mr();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Lt.newInvalidDocument(i))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=mr();const s=n.path,l=new te(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:f}}=u.getNext();if(!s.isPrefixOf(h.path))break;h.path.length>s.length+1||LR(VR(f),r)<=0||(i.has(f.key)||zu(n,f))&&(o=o.insert(f.key,f.mutableCopy()))}return F.resolve(o)}getAllFromCollectionGroup(e,n,r,i){oe()}Br(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new iC(this)}getSize(e){return F.resolve(this.size)}}class iC extends XA{constructor(e){super(),this.hr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.hr.addEntry(e,i)):this.hr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.hr.getEntry(e,n)}getAllFromCache(e,n){return this.hr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e){this.persistence=e,this.Lr=new ji(n=>_f(n),Ef),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.kr=0,this.qr=new Rf,this.targetCount=0,this.Qr=Oo.qn()}forEachTarget(e,n){return this.Lr.forEach((r,i)=>n(i)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.kr&&(this.kr=n),F.resolve()}Un(e){this.Lr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Qr=new Oo(n),this.highestTargetId=n),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,n){return this.Un(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Un(n),F.resolve()}removeTargetData(e,n){return this.Lr.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.Lr.forEach((s,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Lr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),F.waitFor(o).next(()=>i)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Lr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.qr.mr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.qr.pr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),F.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.qr.yr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.qr.Sr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e,n){this.Kr={},this.overlays={},this.$r=new Fu(0),this.Ur=!1,this.Ur=!0,this.Wr=new tC,this.referenceDelegate=e(this),this.Gr=new oC(this),this.indexManager=new HA,this.remoteDocumentCache=function(i){return new rC(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new BA(n),this.jr=new ZA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new eC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Kr[e.toKey()];return r||(r=new nC(n,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,n,r){G("MemoryPersistence","Starting transaction:",e);const i=new sC(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(o=>this.referenceDelegate.Jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Yr(e,n){return F.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,n)))}}class sC extends OR{constructor(e){super(),this.currentSequenceNumber=e}}class Af{constructor(e){this.persistence=e,this.Zr=new Rf,this.Xr=null}static ei(e){return new Af(e)}get ti(){if(this.Xr)return this.Xr;throw oe()}addReference(e,n,r){return this.Zr.addReference(r,n),this.ti.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Zr.removeReference(r,n),this.ti.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.ti.add(n.toString()),F.resolve()}removeTarget(e,n){this.Zr.yr(n.targetId).forEach(i=>this.ti.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.ti.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Hr(){this.Xr=new Set}Jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.ti,r=>{const i=te.fromPath(r);return this.ni(e,i).next(o=>{o||n.removeEntry(i,le.min())})}).next(()=>(this.Xr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ni(e,n).next(r=>{r?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(e){return 0}ni(e,n){return F.or([()=>F.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Yr(e,n)])}}class mu{constructor(e,n){this.persistence=e,this.ri=new ji(r=>UR(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=QA(this,n)}static ei(e,n){return new mu(e,n)}Hr(){}Jr(e){return F.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}Xn(e){const n=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}nr(e){let n=0;return this.er(e,r=>{n++}).next(()=>n)}er(e,n){return F.forEach(this.ri,(r,i)=>this.ir(e,r,i).next(o=>o?F.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.Br(e,s=>this.ir(e,s,n).next(l=>{l||(r++,o.removeEntry(s,le.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.ri.set(n,e.currentSequenceNumber),F.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),F.resolve()}removeReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,n){return this.ri.set(n,e.currentSequenceNumber),F.resolve()}zr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Cl(e.data.value)),n}ir(e,n,r){return F.or([()=>this.persistence.Yr(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.ri.get(n);return F.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Wi=r,this.Gi=i}static zi(e,n){let r=me(),i=me();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Cf(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return oI()?8:FR(rI())>0?6:4}()}initialize(e,n){this.Zi=e,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.Xi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.es(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new aC;return this.ts(e,n,s).next(l=>{if(o.result=l,this.Hi)return this.ns(e,n,s,l.size)})}).next(()=>o.result)}ns(e,n,r,i){return r.documentReadCount<this.Ji?(Ji()<=Ee.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",Zi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),F.resolve()):(Ji()<=Ee.DEBUG&&G("QueryEngine","Query:",Zi(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(Ji()<=Ee.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",Zi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wn(n))):F.resolve())}Xi(e,n){if(Eg(n))return F.resolve(null);let r=Wn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=nd(n,null,"F"),r=Wn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=me(...o);return this.Zi.getDocuments(e,s).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.rs(n,l);return this.ss(n,h,s,u.readTime)?this.Xi(e,nd(n,null,"F")):this.os(e,h,n,u)}))})))}es(e,n,r,i){return Eg(n)||i.isEqual(le.min())?F.resolve(null):this.Zi.getDocuments(e,r).next(o=>{const s=this.rs(n,o);return this.ss(n,s,r,i)?F.resolve(null):(Ji()<=Ee.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Zi(n)),this.os(e,s,n,NR(i,-1)).next(l=>l))})}rs(e,n){let r=new dt(s0(e));return n.forEach((i,o)=>{zu(e,o)&&(r=r.add(o))}),r}ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ts(e,n,r){return Ji()<=Ee.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",Zi(n)),this.Zi.getDocumentsMatchingQuery(e,n,Zr.min(),r)}os(e,n,r,i){return this.Zi.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,n,r,i){this.persistence=e,this._s=n,this.serializer=i,this.us=new Ge(ye),this.cs=new ji(o=>_f(o),Ef),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new JA(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.us))}}function cC(t,e,n,r){return new uC(t,e,n,r)}async function k0(t,e){const n=ue(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ps(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],l=[];let u=me();for(const h of i){s.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}for(const h of o){l.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(h=>({Ts:h,removedBatchIds:s,addedBatchIds:l}))})})}function hC(t,e){const n=ue(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.hs.newChangeBuffer({trackRemovals:!0});return function(l,u,h,f){const p=h.batch,y=p.keys();let T=F.resolve();return y.forEach(P=>{T=T.next(()=>f.getEntry(u,P)).next(k=>{const V=h.docVersions.get(P);Ce(V!==null),k.version.compareTo(V)<0&&(p.applyToRemoteDocument(k,h),k.isValidDocument()&&(k.setReadTime(h.commitVersion),f.addEntry(k)))})}),T.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=me();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function D0(t){const e=ue(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Gr.getLastRemoteSnapshotVersion(n))}function dC(t,e){const n=ue(t),r=e.snapshotVersion;let i=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.hs.newChangeBuffer({trackRemovals:!0});i=n.us;const l=[];e.targetChanges.forEach((f,p)=>{const y=i.get(p);if(!y)return;l.push(n.Gr.removeMatchingKeys(o,f.removedDocuments,p).next(()=>n.Gr.addMatchingKeys(o,f.addedDocuments,p)));let T=y.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?T=T.withResumeToken(Rt.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):f.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(f.resumeToken,r)),i=i.insert(p,T),function(k,V,I){return k.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(y,T,f)&&l.push(n.Gr.updateTargetData(o,T))});let u=mr(),h=me();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(o,f))}),l.push(fC(o,s,e.documentUpdates).next(f=>{u=f.Is,h=f.ds})),!r.isEqual(le.min())){const f=n.Gr.getLastRemoteSnapshotVersion(o).next(p=>n.Gr.setTargetsMetadata(o,o.currentSequenceNumber,r));l.push(f)}return F.waitFor(l).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,h)).next(()=>u)}).then(o=>(n.us=i,o))}function fC(t,e,n){let r=me(),i=me();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=mr();return n.forEach((l,u)=>{const h=o.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(le.min())?(e.removeEntry(l,u.readTime),s=s.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),s=s.insert(l,u)):G("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{Is:s,ds:i}})}function pC(t,e){const n=ue(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function mC(t,e){const n=ue(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Gr.getTargetData(r,e).next(o=>o?(i=o,F.resolve(i)):n.Gr.allocateTargetId(r).next(s=>(i=new Fr(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.us=n.us.insert(r.targetId,r),n.cs.set(e,r.targetId)),r})}async function ad(t,e,n){const r=ue(t),i=r.us.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!Wo(s))throw s;G("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.us=r.us.remove(e),r.cs.delete(i.target)}function Ng(t,e,n){const r=ue(t);let i=le.min(),o=me();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,h,f){const p=ue(u),y=p.cs.get(f);return y!==void 0?F.resolve(p.us.get(y)):p.Gr.getTargetData(h,f)}(r,s,Wn(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(s,l.targetId).next(u=>{o=u})}).next(()=>r._s.getDocumentsMatchingQuery(s,e,n?i:le.min(),n?o:me())).next(l=>(gC(r,rA(e),l),{documents:l,Es:o})))}function gC(t,e,n){let r=t.ls.get(e)||le.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.ls.set(e,r)}class Vg{constructor(){this.activeTargetIds=uA()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yC{constructor(){this._o=new Vg,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,n,r){this.ao[e]=n}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new Vg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){G("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){G("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hl=null;function Bc(){return hl===null?hl=function(){return 268435456+Math.round(2147483648*Math.random())}():hl++,"0x"+hl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xt="WebChannelConnection";class wC extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+n.host,this.Mo=`projects/${i}/databases/${o}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Oo(n,r,i,o,s){const l=Bc(),u=this.No(n,r.toUriEncodedString());G("RestConnection",`Sending RPC '${n}' ${l}:`,u,i);const h={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Bo(h,o,s),this.Lo(n,u,h,i).then(f=>(G("RestConnection",`Received RPC '${n}' ${l}: `,f),f),f=>{throw No("RestConnection",`RPC '${n}' ${l} failed with error: `,f,"url: ",u,"request:",i),f})}ko(n,r,i,o,s,l){return this.Oo(n,r,i,o,s)}Bo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ho}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}No(n,r){const i=_C[n];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Lo(e,n,r,i){const o=Bc();return new Promise((s,l)=>{const u=new z_;u.setWithCredentials(!0),u.listenOnce(B_.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Al.NO_ERROR:const f=u.getResponseJson();G(xt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),s(f);break;case Al.TIMEOUT:G(xt,`RPC '${e}' ${o} timed out`),l(new J(b.DEADLINE_EXCEEDED,"Request time out"));break;case Al.HTTP_ERROR:const p=u.getStatus();if(G(xt,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const T=y==null?void 0:y.error;if(T&&T.status&&T.message){const P=function(V){const I=V.toLowerCase().replace(/_/g,"-");return Object.values(b).indexOf(I)>=0?I:b.UNKNOWN}(T.status);l(new J(P,T.message))}else l(new J(b.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new J(b.UNAVAILABLE,"Connection failed."));break;default:oe()}}finally{G(xt,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(i);G(xt,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",h,r,15)})}qo(e,n,r){const i=Bc(),o=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=q_(),l=H_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Bo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=o.join("");G(xt,`Creating RPC '${e}' stream ${i}: ${f}`,u);const p=s.createWebChannel(f,u);let y=!1,T=!1;const P=new EC({Eo:V=>{T?G(xt,`Not sending because RPC '${e}' stream ${i} is closed:`,V):(y||(G(xt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),y=!0),G(xt,`RPC '${e}' stream ${i} sending:`,V),p.send(V))},Ao:()=>p.close()}),k=(V,I,_)=>{V.listen(I,R=>{try{_(R)}catch(M){setTimeout(()=>{throw M},0)}})};return k(p,Rs.EventType.OPEN,()=>{T||(G(xt,`RPC '${e}' stream ${i} transport opened.`),P.So())}),k(p,Rs.EventType.CLOSE,()=>{T||(T=!0,G(xt,`RPC '${e}' stream ${i} transport closed`),P.Do())}),k(p,Rs.EventType.ERROR,V=>{T||(T=!0,No(xt,`RPC '${e}' stream ${i} transport errored:`,V),P.Do(new J(b.UNAVAILABLE,"The operation could not be completed")))}),k(p,Rs.EventType.MESSAGE,V=>{var I;if(!T){const _=V.data[0];Ce(!!_);const R=_,M=(R==null?void 0:R.error)||((I=R[0])===null||I===void 0?void 0:I.error);if(M){G(xt,`RPC '${e}' stream ${i} received error:`,M);const z=M.status;let H=function(E){const w=et[E];if(w!==void 0)return v0(w)}(z),m=M.message;H===void 0&&(H=b.INTERNAL,m="Unknown error status: "+z+" with message "+M.message),T=!0,P.Do(new J(H,m)),p.close()}else G(xt,`RPC '${e}' stream ${i} received:`,_),P.vo(_)}}),k(l,$_.STAT_EVENT,V=>{V.stat===Xh.PROXY?G(xt,`RPC '${e}' stream ${i} detected buffering proxy`):V.stat===Xh.NOPROXY&&G(xt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{P.bo()},0),P}}function $c(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qu(t){return new PA(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(e,n,r=1e3,i=1.5,o=6e4){this.li=e,this.timerId=n,this.Qo=r,this.Ko=i,this.$o=o,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const n=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,n-r);i>0&&G("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e,n,r,i,o,s,l,u){this.li=e,this.Yo=r,this.Zo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new x0(e,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():n&&n.code===b.RESOURCE_EXHAUSTED?(pr(n.toString()),pr("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===b.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(n)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===n&&this.I_(r,i)},r=>{e(()=>{const i=new J(b.UNKNOWN,"Fetching auth token failed: "+r.message);return this.d_(i)})})}I_(e,n){const r=this.T_(this.Xo);this.stream=this.E_(e,n),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.d_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}d_(e){return G("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return n=>{this.li.enqueueAndForget(()=>this.Xo===e?n():(G("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class TC extends N0{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}E_(e,n){return this.connection.qo("Listen",e,n)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const n=xA(this.serializer,e),r=function(o){if(!("targetChange"in o))return le.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?le.min():s.readTime?Gn(s.readTime):le.min()}(e);return this.listener.R_(n,r)}V_(e){const n={};n.database=sd(this.serializer),n.addTarget=function(o,s){let l;const u=s.target;if(l=ed(u)?{documents:LA(o,u)}:{query:MA(o,u).ct},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){l.resumeToken=w0(o,s.resumeToken);const h=rd(o,s.expectedCount);h!==null&&(l.expectedCount=h)}else if(s.snapshotVersion.compareTo(le.min())>0){l.readTime=pu(o,s.snapshotVersion.toTimestamp());const h=rd(o,s.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=FA(this.serializer,e);r&&(n.labels=r),this.c_(n)}m_(e){const n={};n.database=sd(this.serializer),n.removeTarget=e,this.c_(n)}}class SC extends N0{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}E_(e,n){return this.connection.qo("Write",e,n)}A_(e){return Ce(!!e.streamToken),this.lastStreamToken=e.streamToken,Ce(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){Ce(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const n=VA(e.writeResults,e.commitTime),r=Gn(e.commitTime);return this.listener.y_(r,n)}w_(){const e={};e.database=sd(this.serializer),this.c_(e)}g_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>NA(this.serializer,r))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new J(b.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,n,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Oo(e,id(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new J(b.UNKNOWN,o.toString())})}ko(e,n,r,i,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.connection.ko(e,id(n,r),i,s,l,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new J(b.UNKNOWN,s.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class RC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(pr(n),this.C_=!1):G("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.B_=[],this.L_=new Map,this.k_=new Set,this.q_=[],this.Q_=o,this.Q_.uo(s=>{r.enqueueAndForget(async()=>{Bi(this)&&(G("RemoteStore","Restarting streams for network reachability change."),await async function(u){const h=ue(u);h.k_.add(4),await Ra(h),h.K_.set("Unknown"),h.k_.delete(4),await Wu(h)}(this))})}),this.K_=new RC(r,i)}}async function Wu(t){if(Bi(t))for(const e of t.q_)await e(!0)}async function Ra(t){for(const e of t.q_)await e(!1)}function V0(t,e){const n=ue(t);n.L_.has(e.targetId)||(n.L_.set(e.targetId,e),xf(n)?Df(n):Go(n).s_()&&kf(n,e))}function Pf(t,e){const n=ue(t),r=Go(n);n.L_.delete(e),r.s_()&&L0(n,e),n.L_.size===0&&(r.s_()?r.a_():Bi(n)&&n.K_.set("Unknown"))}function kf(t,e){if(t.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Go(t).V_(e)}function L0(t,e){t.U_.xe(e),Go(t).m_(e)}function Df(t){t.U_=new IA({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>t.L_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Go(t).start(),t.K_.F_()}function xf(t){return Bi(t)&&!Go(t).i_()&&t.L_.size>0}function Bi(t){return ue(t).k_.size===0}function M0(t){t.U_=void 0}async function CC(t){t.K_.set("Online")}async function PC(t){t.L_.forEach((e,n)=>{kf(t,e)})}async function kC(t,e){M0(t),xf(t)?(t.K_.O_(e),Df(t)):t.K_.set("Unknown")}async function DC(t,e,n){if(t.K_.set("Online"),e instanceof E0&&e.state===2&&e.cause)try{await async function(i,o){const s=o.cause;for(const l of o.targetIds)i.L_.has(l)&&(await i.remoteSyncer.rejectListen(l,s),i.L_.delete(l),i.U_.removeTarget(l))}(t,e)}catch(r){G("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await gu(t,r)}else if(e instanceof Dl?t.U_.$e(e):e instanceof _0?t.U_.Je(e):t.U_.Ge(e),!n.isEqual(le.min()))try{const r=await D0(t.localStore);n.compareTo(r)>=0&&await function(o,s){const l=o.U_.it(s);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const f=o.L_.get(h);f&&o.L_.set(h,f.withResumeToken(u.resumeToken,s))}}),l.targetMismatches.forEach((u,h)=>{const f=o.L_.get(u);if(!f)return;o.L_.set(u,f.withResumeToken(Rt.EMPTY_BYTE_STRING,f.snapshotVersion)),L0(o,u);const p=new Fr(f.target,u,h,f.sequenceNumber);kf(o,p)}),o.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){G("RemoteStore","Failed to raise snapshot:",r),await gu(t,r)}}async function gu(t,e,n){if(!Wo(e))throw e;t.k_.add(1),await Ra(t),t.K_.set("Offline"),n||(n=()=>D0(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{G("RemoteStore","Retrying IndexedDB access"),await n(),t.k_.delete(1),await Wu(t)})}function O0(t,e){return e().catch(n=>gu(t,n,e))}async function Gu(t){const e=ue(t),n=ri(e);let r=e.B_.length>0?e.B_[e.B_.length-1].batchId:-1;for(;xC(e);)try{const i=await pC(e.localStore,r);if(i===null){e.B_.length===0&&n.a_();break}r=i.batchId,NC(e,i)}catch(i){await gu(e,i)}F0(e)&&b0(e)}function xC(t){return Bi(t)&&t.B_.length<10}function NC(t,e){t.B_.push(e);const n=ri(t);n.s_()&&n.f_&&n.g_(e.mutations)}function F0(t){return Bi(t)&&!ri(t).i_()&&t.B_.length>0}function b0(t){ri(t).start()}async function VC(t){ri(t).w_()}async function LC(t){const e=ri(t);for(const n of t.B_)e.g_(n.mutations)}async function MC(t,e,n){const r=t.B_.shift(),i=Tf.from(r,e,n);await O0(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Gu(t)}async function OC(t,e){e&&ri(t).f_&&await async function(r,i){if(function(s){return wA(s)&&s!==b.ABORTED}(i.code)){const o=r.B_.shift();ri(r).__(),await O0(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Gu(r)}}(t,e),F0(t)&&b0(t)}async function Mg(t,e){const n=ue(t);n.asyncQueue.verifyOperationInProgress(),G("RemoteStore","RemoteStore received new credentials");const r=Bi(n);n.k_.add(3),await Ra(n),r&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.k_.delete(3),await Wu(n)}async function FC(t,e){const n=ue(t);e?(n.k_.delete(2),await Wu(n)):e||(n.k_.add(2),await Ra(n),n.K_.set("Unknown"))}function Go(t){return t.W_||(t.W_=function(n,r,i){const o=ue(n);return o.b_(),new TC(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Ro:CC.bind(null,t),mo:PC.bind(null,t),po:kC.bind(null,t),R_:DC.bind(null,t)}),t.q_.push(async e=>{e?(t.W_.__(),xf(t)?Df(t):t.K_.set("Unknown")):(await t.W_.stop(),M0(t))})),t.W_}function ri(t){return t.G_||(t.G_=function(n,r,i){const o=ue(n);return o.b_(),new SC(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Ro:()=>Promise.resolve(),mo:VC.bind(null,t),po:OC.bind(null,t),p_:LC.bind(null,t),y_:MC.bind(null,t)}),t.q_.push(async e=>{e?(t.G_.__(),await Gu(t)):(await t.G_.stop(),t.B_.length>0&&(G("RemoteStore",`Stopping write stream with ${t.B_.length} pending writes`),t.B_=[]))})),t.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,l=new Nf(e,n,s,i,o);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J(b.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vf(t,e){if(pr("AsyncQueue",`${e}: ${t}`),Wo(t))return new J(b.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{static emptySet(e){return new To(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=As(),this.sortedSet=new Ge(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof To)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new To;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(){this.z_=new Ge(te.comparator)}track(e){const n=e.doc.key,r=this.z_.get(n);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(n,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(n):e.type===1&&r.type===2?this.z_=this.z_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):oe():this.z_=this.z_.insert(n,e)}j_(){const e=[];return this.z_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Fo{constructor(e,n,r,i,o,s,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(l=>{s.push({type:0,doc:l})}),new Fo(e,n,To.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ju(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class UC{constructor(){this.queries=Fg(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,r){const i=ue(n),o=i.queries;i.queries=Fg(),o.forEach((s,l)=>{for(const u of l.J_)u.onError(r)})})(this,new J(b.ABORTED,"Firestore shutting down"))}}function Fg(){return new ji(t=>o0(t),ju)}async function jC(t,e){const n=ue(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.Y_()&&e.Z_()&&(r=2):(o=new bC,r=e.Z_()?0:1);try{switch(r){case 0:o.H_=await n.onListen(i,!0);break;case 1:o.H_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const l=Vf(s,`Initialization of query '${Zi(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,o),o.J_.push(e),e.ea(n.onlineState),o.H_&&e.ta(o.H_)&&Lf(n)}async function zC(t,e){const n=ue(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.J_.indexOf(e);s>=0&&(o.J_.splice(s,1),o.J_.length===0?i=e.Z_()?0:1:!o.Y_()&&e.Z_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function BC(t,e){const n=ue(t);let r=!1;for(const i of e){const o=i.query,s=n.queries.get(o);if(s){for(const l of s.J_)l.ta(i)&&(r=!0);s.H_=i}}r&&Lf(n)}function $C(t,e,n){const r=ue(t),i=r.queries.get(e);if(i)for(const o of i.J_)o.onError(n);r.queries.delete(e)}function Lf(t){t.X_.forEach(e=>{e.next()})}var ld,bg;(bg=ld||(ld={})).na="default",bg.Cache="cache";class HC{constructor(e,n,r){this.query=e,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Fo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ia?this.oa(e)&&(this.ra.next(e),n=!0):this._a(e,this.onlineState)&&(this.aa(e),n=!0),this.sa=e,n}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),n=!0),n}_a(e,n){if(!e.fromCache||!this.Z_())return!0;const r=n!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(e){e=Fo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==ld.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(e){this.key=e}}class j0{constructor(e){this.key=e}}class qC{constructor(e,n){this.query=e,this.Ea=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=me(),this.mutatedKeys=me(),this.Va=s0(e),this.ma=new To(this.Va)}get fa(){return this.Ea}ga(e,n){const r=n?n.pa:new Og,i=n?n.ma:this.ma;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{const y=i.get(f),T=zu(this.query,p)?p:null,P=!!y&&this.mutatedKeys.has(y.key),k=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let V=!1;y&&T?y.data.isEqual(T.data)?P!==k&&(r.track({type:3,doc:T}),V=!0):this.ya(y,T)||(r.track({type:2,doc:T}),V=!0,(u&&this.Va(T,u)>0||h&&this.Va(T,h)<0)&&(l=!0)):!y&&T?(r.track({type:0,doc:T}),V=!0):y&&!T&&(r.track({type:1,doc:y}),V=!0,(u||h)&&(l=!0)),V&&(T?(s=s.add(T),o=k?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{ma:s,pa:r,ss:l,mutatedKeys:o}}ya(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const s=e.pa.j_();s.sort((f,p)=>function(T,P){const k=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oe()}};return k(T)-k(P)}(f.type,p.type)||this.Va(f.doc,p.doc)),this.wa(r),i=i!=null&&i;const l=n&&!i?this.Sa():[],u=this.Ra.size===0&&this.current&&!i?1:0,h=u!==this.Aa;return this.Aa=u,s.length!==0||h?{snapshot:new Fo(this.query,e.ma,o,s,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:l}:{ba:l}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new Og,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.Ea.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(n=>this.Ea=this.Ea.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ea=this.Ea.delete(n)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=me(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const n=[];return e.forEach(r=>{this.Ra.has(r)||n.push(new j0(r))}),this.Ra.forEach(r=>{e.has(r)||n.push(new U0(r))}),n}va(e){this.Ea=e.Es,this.Ra=me();const n=this.ga(e.documents);return this.applyChanges(n,!0)}Ca(){return Fo.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class WC{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class GC{constructor(e){this.key=e,this.Fa=!1}}class KC{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ma={},this.xa=new ji(l=>o0(l),ju),this.Oa=new Map,this.Na=new Set,this.Ba=new Ge(te.comparator),this.La=new Map,this.ka=new Rf,this.qa={},this.Qa=new Map,this.Ka=Oo.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function QC(t,e,n=!0){const r=W0(t);let i;const o=r.xa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Ca()):i=await z0(r,e,n,!0),i}async function XC(t,e){const n=W0(t);await z0(n,e,!0,!1)}async function z0(t,e,n,r){const i=await mC(t.localStore,Wn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let l;return r&&(l=await YC(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&V0(t.remoteStore,i),l}async function YC(t,e,n,r,i){t.Ua=(p,y,T)=>async function(k,V,I,_){let R=V.view.ga(I);R.ss&&(R=await Ng(k.localStore,V.query,!1).then(({documents:m})=>V.view.ga(m,R)));const M=_&&_.targetChanges.get(V.targetId),z=_&&_.targetMismatches.get(V.targetId)!=null,H=V.view.applyChanges(R,k.isPrimaryClient,M,z);return jg(k,V.targetId,H.ba),H.snapshot}(t,p,y,T);const o=await Ng(t.localStore,e,!0),s=new qC(e,o.Es),l=s.ga(o.documents),u=Ia.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=s.applyChanges(l,t.isPrimaryClient,u);jg(t,n,h.ba);const f=new WC(e,n,s);return t.xa.set(e,f),t.Oa.has(n)?t.Oa.get(n).push(e):t.Oa.set(n,[e]),h.snapshot}async function JC(t,e,n){const r=ue(t),i=r.xa.get(e),o=r.Oa.get(i.targetId);if(o.length>1)return r.Oa.set(i.targetId,o.filter(s=>!ju(s,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ad(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Pf(r.remoteStore,i.targetId),ud(r,i.targetId)}).catch(qo)):(ud(r,i.targetId),await ad(r.localStore,i.targetId,!0))}async function ZC(t,e){const n=ue(t),r=n.xa.get(e),i=n.Oa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Pf(n.remoteStore,r.targetId))}async function eP(t,e,n){const r=aP(t);try{const i=await function(s,l){const u=ue(s),h=ht.now(),f=l.reduce((T,P)=>T.add(P.key),me());let p,y;return u.persistence.runTransaction("Locally write mutations","readwrite",T=>{let P=mr(),k=me();return u.hs.getEntries(T,f).next(V=>{P=V,P.forEach((I,_)=>{_.isValidDocument()||(k=k.add(I))})}).next(()=>u.localDocuments.getOverlayedDocuments(T,P)).next(V=>{p=V;const I=[];for(const _ of l){const R=gA(_,p.get(_.key).overlayedDocument);R!=null&&I.push(new zi(_.key,R,X_(R.value.mapValue),lr.exists(!0)))}return u.mutationQueue.addMutationBatch(T,h,I,l)}).next(V=>{y=V;const I=V.applyToLocalDocumentSet(p,k);return u.documentOverlayCache.saveOverlays(T,V.batchId,I)})}).then(()=>({batchId:y.batchId,changes:l0(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,l,u){let h=s.qa[s.currentUser.toKey()];h||(h=new Ge(ye)),h=h.insert(l,u),s.qa[s.currentUser.toKey()]=h}(r,i.batchId,n),await Aa(r,i.changes),await Gu(r.remoteStore)}catch(i){const o=Vf(i,"Failed to persist write");n.reject(o)}}async function B0(t,e){const n=ue(t);try{const r=await dC(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.La.get(o);s&&(Ce(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.Fa=!0:i.modifiedDocuments.size>0?Ce(s.Fa):i.removedDocuments.size>0&&(Ce(s.Fa),s.Fa=!1))}),await Aa(n,r,e)}catch(r){await qo(r)}}function Ug(t,e,n){const r=ue(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.xa.forEach((o,s)=>{const l=s.view.ea(e);l.snapshot&&i.push(l.snapshot)}),function(s,l){const u=ue(s);u.onlineState=l;let h=!1;u.queries.forEach((f,p)=>{for(const y of p.J_)y.ea(l)&&(h=!0)}),h&&Lf(u)}(r.eventManager,e),i.length&&r.Ma.R_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function tP(t,e,n){const r=ue(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.La.get(e),o=i&&i.key;if(o){let s=new Ge(te.comparator);s=s.insert(o,Lt.newNoDocument(o,le.min()));const l=me().add(o),u=new Hu(le.min(),new Map,new Ge(ye),s,l);await B0(r,u),r.Ba=r.Ba.remove(o),r.La.delete(e),Mf(r)}else await ad(r.localStore,e,!1).then(()=>ud(r,e,n)).catch(qo)}async function nP(t,e){const n=ue(t),r=e.batch.batchId;try{const i=await hC(n.localStore,e);H0(n,r,null),$0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Aa(n,i)}catch(i){await qo(i)}}async function rP(t,e,n){const r=ue(t);try{const i=await function(s,l){const u=ue(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return u.mutationQueue.lookupMutationBatch(h,l).next(p=>(Ce(p!==null),f=p.keys(),u.mutationQueue.removeMutationBatch(h,p))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>u.localDocuments.getDocuments(h,f))})}(r.localStore,e);H0(r,e,n),$0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Aa(r,i)}catch(i){await qo(i)}}function $0(t,e){(t.Qa.get(e)||[]).forEach(n=>{n.resolve()}),t.Qa.delete(e)}function H0(t,e,n){const r=ue(t);let i=r.qa[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.qa[r.currentUser.toKey()]=i}}function ud(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Oa.get(e))t.xa.delete(r),n&&t.Ma.Wa(r,n);t.Oa.delete(e),t.isPrimaryClient&&t.ka.yr(e).forEach(r=>{t.ka.containsKey(r)||q0(t,r)})}function q0(t,e){t.Na.delete(e.path.canonicalString());const n=t.Ba.get(e);n!==null&&(Pf(t.remoteStore,n),t.Ba=t.Ba.remove(e),t.La.delete(n),Mf(t))}function jg(t,e,n){for(const r of n)r instanceof U0?(t.ka.addReference(r.key,e),iP(t,r)):r instanceof j0?(G("SyncEngine","Document no longer in limbo: "+r.key),t.ka.removeReference(r.key,e),t.ka.containsKey(r.key)||q0(t,r.key)):oe()}function iP(t,e){const n=e.key,r=n.path.canonicalString();t.Ba.get(n)||t.Na.has(r)||(G("SyncEngine","New document in limbo: "+n),t.Na.add(r),Mf(t))}function Mf(t){for(;t.Na.size>0&&t.Ba.size<t.maxConcurrentLimboResolutions;){const e=t.Na.values().next().value;t.Na.delete(e);const n=new te(Fe.fromString(e)),r=t.Ka.next();t.La.set(r,new GC(n)),t.Ba=t.Ba.insert(n,r),V0(t.remoteStore,new Fr(Wn(r0(n.path)),r,"TargetPurposeLimboResolution",Fu.oe))}}async function Aa(t,e,n){const r=ue(t),i=[],o=[],s=[];r.xa.isEmpty()||(r.xa.forEach((l,u)=>{s.push(r.Ua(u,e,n).then(h=>{var f;if((h||n)&&r.isPrimaryClient){const p=h?!h.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(h){i.push(h);const p=Cf.zi(u.targetId,h);o.push(p)}}))}),await Promise.all(s),r.Ma.R_(i),await async function(u,h){const f=ue(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>F.forEach(h,y=>F.forEach(y.Wi,T=>f.persistence.referenceDelegate.addReference(p,y.targetId,T)).next(()=>F.forEach(y.Gi,T=>f.persistence.referenceDelegate.removeReference(p,y.targetId,T)))))}catch(p){if(!Wo(p))throw p;G("LocalStore","Failed to update sequence numbers: "+p)}for(const p of h){const y=p.targetId;if(!p.fromCache){const T=f.us.get(y),P=T.snapshotVersion,k=T.withLastLimboFreeSnapshotVersion(P);f.us=f.us.insert(y,k)}}}(r.localStore,o))}async function oP(t,e){const n=ue(t);if(!n.currentUser.isEqual(e)){G("SyncEngine","User change. New user:",e.toKey());const r=await k0(n.localStore,e);n.currentUser=e,function(o,s){o.Qa.forEach(l=>{l.forEach(u=>{u.reject(new J(b.CANCELLED,s))})}),o.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Aa(n,r.Ts)}}function sP(t,e){const n=ue(t),r=n.La.get(e);if(r&&r.Fa)return me().add(r.key);{let i=me();const o=n.Oa.get(e);if(!o)return i;for(const s of o){const l=n.xa.get(s);i=i.unionWith(l.view.fa)}return i}}function W0(t){const e=ue(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=B0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tP.bind(null,e),e.Ma.R_=BC.bind(null,e.eventManager),e.Ma.Wa=$C.bind(null,e.eventManager),e}function aP(t){const e=ue(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=rP.bind(null,e),e}class yu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=qu(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,n){return null}Ya(e,n){return null}Ha(e){return cC(this.persistence,new lC,e.initialUser,this.serializer)}ja(e){return new P0(Af.ei,this.serializer)}za(e){return new yC}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}yu.provider={build:()=>new yu};class lP extends yu{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,n){Ce(this.persistence.referenceDelegate instanceof mu);const r=this.persistence.referenceDelegate.garbageCollector;return new GA(r,e.asyncQueue,n)}ja(e){const n=this.cacheSizeBytes!==void 0?Ht.withCacheSize(this.cacheSizeBytes):Ht.DEFAULT;return new P0(r=>mu.ei(r,n),this.serializer)}}class cd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ug(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=oP.bind(null,this.syncEngine),await FC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new UC}()}createDatastore(e){const n=qu(e.databaseInfo.databaseId),r=function(o){return new wC(o)}(e.databaseInfo);return function(o,s,l,u){return new IC(o,s,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,l){return new AC(r,i,o,s,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Ug(this.syncEngine,n,0),function(){return Lg.p()?new Lg:new vC}())}createSyncEngine(e,n){return function(i,o,s,l,u,h,f){const p=new KC(i,o,s,l,u,h);return f&&(p.$a=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=ue(i);G("RemoteStore","RemoteStore shutting down."),o.k_.add(5),await Ra(o),o.Q_.shutdown(),o.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}cd.provider={build:()=>new cd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):pr("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Nt.UNAUTHENTICATED,this.clientId=G_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{G("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(G("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Vf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Hc(t,e){t.asyncQueue.verifyOperationInProgress(),G("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await k0(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function zg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await hP(t);G("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Mg(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Mg(e.remoteStore,i)),t._onlineComponents=e}async function hP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G("FirestoreClient","Using user provided OfflineComponentProvider");try{await Hc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===b.FAILED_PRECONDITION||i.code===b.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;No("Error using user provided cache. Falling back to memory cache: "+n),await Hc(t,new yu)}}else G("FirestoreClient","Using default OfflineComponentProvider"),await Hc(t,new lP(void 0));return t._offlineComponents}async function G0(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G("FirestoreClient","Using user provided OnlineComponentProvider"),await zg(t,t._uninitializedComponentsProvider._online)):(G("FirestoreClient","Using default OnlineComponentProvider"),await zg(t,new cd))),t._onlineComponents}function dP(t){return G0(t).then(e=>e.syncEngine)}async function fP(t){const e=await G0(t),n=e.eventManager;return n.onListen=QC.bind(null,e.syncEngine),n.onUnlisten=JC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=XC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=ZC.bind(null,e.syncEngine),n}function pP(t,e,n={}){const r=new Qr;return t.asyncQueue.enqueueAndForget(async()=>function(o,s,l,u,h){const f=new uP({next:y=>{f.eu(),s.enqueueAndForget(()=>zC(o,p)),y.fromCache&&u.source==="server"?h.reject(new J(b.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(y)},error:y=>h.reject(y)}),p=new HC(l,f,{includeMetadataChanges:!0,ua:!0});return jC(o,p)}(await fP(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bg=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(t,e,n){if(!n)throw new J(b.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function mP(t,e,n,r){if(e===!0&&r===!0)throw new J(b.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function $g(t){if(!te.isDocumentKey(t))throw new J(b.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Hg(t){if(te.isDocumentKey(t))throw new J(b.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ku(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":oe()}function ma(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new J(b.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ku(t);throw new J(b.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new J(b.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new J(b.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=K0((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new J(b.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new J(b.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new J(b.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qu{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qg({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new J(b.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new J(b.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qg(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new SR;switch(r.type){case"firstParty":return new CR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J(b.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Bg.get(n);r&&(G("ComponentProvider","Removing Datastore"),Bg.delete(n),r.terminate())}(this),Promise.resolve()}}function gP(t,e,n,r={}){var i;const o=(t=ma(t,Qu))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&No("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=Nt.MOCK_USER;else{l=nI(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new J(b.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Nt(h)}t._authCredentials=new IR(new W_(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ko(this.firestore,e,this._query)}}class rn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rn(this.firestore,e,this._key)}}class Xr extends Ko{constructor(e,n,r){super(e,n,r0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rn(this.firestore,null,new te(e))}withConverter(e){return new Xr(this.firestore,e,this._path)}}function Xu(t,e,...n){if(t=xo(t),Q0("collection","path",e),t instanceof Qu){const r=Fe.fromString(e,...n);return Hg(r),new Xr(t,null,r)}{if(!(t instanceof rn||t instanceof Xr))throw new J(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return Hg(r),new Xr(t.firestore,null,r)}}function yP(t,e,...n){if(t=xo(t),arguments.length===1&&(e=G_.newId()),Q0("doc","path",e),t instanceof Qu){const r=Fe.fromString(e,...n);return $g(r),new rn(t,null,new te(r))}{if(!(t instanceof rn||t instanceof Xr))throw new J(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return $g(r),new rn(t.firestore,t instanceof Xr?t.converter:null,new te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e=Promise.resolve()){this.Iu=[],this.du=!1,this.Eu=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new x0(this,"async_queue_retry"),this.fu=()=>{const r=$c();r&&G("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;const n=$c();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.du}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.du){this.du=!0,this.Vu=e||!1;const n=$c();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.du)return new Promise(()=>{});const n=new Qr;return this.yu(()=>this.du&&this.Vu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Wo(e))throw e;G("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const n=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;const i=function(s){let l=s.message||"";return s.stack&&(l=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),l}(r);throw pr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=n,n}enqueueAfterDelay(e,n,r){this.pu(),this.mu.indexOf(e)>-1&&(n=0);const i=Nf.createAndSchedule(this,e,n,r,o=>this.Su(o));return this.Eu.push(i),i}pu(){this.Au&&oe()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const n of this.Eu)if(n.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.Eu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Eu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const n=this.Eu.indexOf(e);this.Eu.splice(n,1)}}class Of extends Qu{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Wg,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Wg(e),this._firestoreClient=void 0,await e}}}function vP(t,e){const n=typeof t=="object"?t:hR(),r=typeof t=="string"?t:"(default)",i=aR(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=eI("firestore");o&&gP(i,...o)}return i}function X0(t){if(t._terminated)throw new J(b.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||_P(t),t._firestoreClient}function _P(t){var e,n,r;const i=t._freezeSettings(),o=function(l,u,h,f){return new BR(l,u,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,K0(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new cP(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bo(Rt.fromBase64String(e))}catch(n){throw new J(b.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new bo(Rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new J(b.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function Y0(){return new Yu("__name__")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new J(b.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new J(b.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ye(this._lat,e._lat)||ye(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP=/^__.*__$/;class wP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new zi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Sa(e,this.data,n,this.fieldTransforms)}}function Z0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oe()}}class Uf{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Fu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new Uf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.xu({path:r,Nu:!1});return i.Bu(e),i}Lu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.xu({path:r,Nu:!1});return i.Fu(),i}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return vu(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Bu(this.path.get(e))}Bu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(Z0(this.Mu)&&EP.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class TP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||qu(e)}$u(e,n,r,i=!1){return new Uf({Mu:e,methodName:n,Ku:r,path:Tt.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function eE(t){const e=t._freezeSettings(),n=qu(t._databaseId);return new TP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function SP(t,e,n,r,i,o={}){const s=t.$u(o.merge||o.mergeFields?2:0,e,n,i);rE("Data must be an object, but it was:",s,r);const l=tE(r,s);let u,h;if(o.merge)u=new Nn(s.fieldMask),h=s.fieldTransforms;else if(o.mergeFields){const f=[];for(const p of o.mergeFields){const y=RP(e,p,n);if(!s.contains(y))throw new J(b.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);CP(f,y)||f.push(y)}u=new Nn(f),h=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,h=s.fieldTransforms;return new wP(new gn(l),u,h)}function IP(t,e,n,r=!1){return jf(n,t.$u(r?4:3,e))}function jf(t,e){if(nE(t=xo(t)))return rE("Unsupported field value:",e,t),tE(t,e);if(t instanceof J0)return function(r,i){if(!Z0(i.Mu))throw i.qu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const l of r){let u=jf(l,i.ku(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=xo(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return cA(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=ht.fromDate(r);return{timestampValue:pu(i.serializer,o)}}if(r instanceof ht){const o=new ht(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:pu(i.serializer,o)}}if(r instanceof Ff)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof bo)return{bytesValue:w0(i.serializer,r._byteString)};if(r instanceof rn){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.qu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:If(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof bf)return function(s,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw l.qu("VectorValues must only contain numeric values.");return wf(l.serializer,u)})}}}}}}(r,i);throw i.qu(`Unsupported field value: ${Ku(r)}`)}(t,e)}function tE(t,e){const n={};return K_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ui(t,(r,i)=>{const o=jf(i,e.Ou(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function nE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ht||t instanceof Ff||t instanceof bo||t instanceof rn||t instanceof J0||t instanceof bf)}function rE(t,e,n){if(!nE(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Ku(n);throw r==="an object"?e.qu(t+" a custom object"):e.qu(t+" "+r)}}function RP(t,e,n){if((e=xo(e))instanceof Yu)return e._internalPath;if(typeof e=="string")return iE(t,e);throw vu("Field path arguments must be of type string or ",t,!1,void 0,n)}const AP=new RegExp("[~\\*/\\[\\]]");function iE(t,e,n){if(e.search(AP)>=0)throw vu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Yu(...e.split("."))._internalPath}catch{throw vu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function vu(t,e,n,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new J(b.INVALID_ARGUMENT,l+t+u)}function CP(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new rn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new PP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(zf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class PP extends oE{data(){return super.data()}}function zf(t,e){return typeof e=="string"?iE(t,e):e instanceof Yu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new J(b.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Bf{}class DP extends Bf{}function Ju(t,e,...n){let r=[];e instanceof Bf&&r.push(e),r=r.concat(n),function(o){const s=o.filter(u=>u instanceof Hf).length,l=o.filter(u=>u instanceof Zu).length;if(s>1||s>0&&l>0)throw new J(b.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Zu extends DP{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Zu(e,n,r)}_apply(e){const n=this._parse(e);return sE(e._query,n),new Ko(e.firestore,e.converter,td(e._query,n))}_parse(e){const n=eE(e.firestore);return function(o,s,l,u,h,f,p){let y;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new J(b.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Kg(p,f);const T=[];for(const P of p)T.push(Gg(u,o,P));y={arrayValue:{values:T}}}else y=Gg(u,o,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Kg(p,f),y=IP(l,s,p,f==="in"||f==="not-in");return rt.create(h,f,y)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function $f(t,e,n){const r=e,i=zf("where",t);return Zu._create(i,r,n)}class Hf extends Bf{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Hf(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:On.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i;const l=o.getFlattenedFilters();for(const u of l)sE(s,u),s=td(s,u)}(e._query,n),new Ko(e.firestore,e.converter,td(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Gg(t,e,n){if(typeof(n=xo(n))=="string"){if(n==="")throw new J(b.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!i0(e)&&n.indexOf("/")!==-1)throw new J(b.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Fe.fromString(n));if(!te.isDocumentKey(r))throw new J(b.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return pg(t,new te(r))}if(n instanceof rn)return pg(t,n._key);throw new J(b.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ku(n)}.`)}function Kg(t,e){if(!Array.isArray(t)||t.length===0)throw new J(b.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function sE(t,e){const n=function(i,o){for(const s of i)for(const l of s.getFlattenedFilters())if(o.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new J(b.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new J(b.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class xP{convertValue(e,n="none"){switch(ni(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ye(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ti(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw oe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ui(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;const o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ye(s.doubleValue));return new bf(o)}convertGeoPoint(e){return new Ff(Ye(e.latitude),Ye(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Uu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ca(e));default:return null}}convertTimestamp(e){const n=ei(e);return new ht(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Fe.fromString(e);Ce(C0(r));const i=new ha(r.get(1),r.get(3)),o=new te(r.popFirst(5));return i.isEqual(n)||pr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NP(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class VP extends oE{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new xl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(zf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class xl extends VP{data(e={}){return super.data(e)}}class LP{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new dl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new xl(this._firestore,this._userDataWriter,r.key,r,new dl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new J(b.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(l=>{const u=new xl(i._firestore,i._userDataWriter,l.doc.key,l.doc,new dl(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>o||l.type!==3).map(l=>{const u=new xl(i._firestore,i._userDataWriter,l.doc.key,l.doc,new dl(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,f=-1;return l.type!==0&&(h=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),l.type!==1&&(s=s.add(l.doc),f=s.indexOf(l.doc.key)),{type:MP(l.type),doc:u,oldIndex:h,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function MP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oe()}}class OP extends xP{constructor(e){super(),this.firestore=e}convertBytes(e){return new bo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new rn(this.firestore,null,n)}}function ec(t){t=ma(t,Ko);const e=ma(t.firestore,Of),n=X0(e),r=new OP(e);return kP(t._query),pP(n,t._query).then(i=>new LP(e,r,t,i))}function FP(t,e,n){t=ma(t,rn);const r=ma(t.firestore,Of),i=NP(t.converter,e);return bP(r,[SP(eE(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,lr.none())])}function bP(t,e){return function(r,i){const o=new Qr;return r.asyncQueue.enqueueAndForget(async()=>eP(await dP(r),i,o)),o.promise}(X0(t),e)}(function(e,n=!0){(function(i){Ho=i})(cR),lu(new la("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),l=new Of(new RR(r.getProvider("auth-internal")),new kR(r.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new J(b.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ha(h.options.projectId,f)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),wo(lg,"4.7.6",e),wo(lg,"4.7.6","esm2017")})();const qc={AUTH_DOMAIN:"cell-pack-database.firebaseapp.com",PROJECT_ID:"cell-pack-database",STORAGE_BUCKET:"cell-pack-database.firebasestorage.app"},Mt={RESULTS:"results",RECIPES:"recipes",CONFIGS:"configs",OBJECTS:"objects",GRADIENTS:"gradients",COMPOSITION:"composition",EXAMPLE_RECIPES:"example_recipes",EDITED_RECIPES:"recipes_edited",JOB_STATUS:"job_status"},dn={NAME:"name",BATCH_JOB_ID:"batch_job_id",ORIGINAL_LOCATION:"original_location",RECIPE_PATH:"recipe_path",INHERIT:"inherit",COMPOSITION:"composition",OBJECT:"object",REGIONS:"regions",INTERIOR:"interior",GRADIENT:"gradient"},mn=t=>t!=null&&typeof t=="string"&&t.startsWith("firebase"),UP=(t,e,n)=>{let r={};if(e===Mt.RECIPES)r=n.recipes;else if(e===Mt.COMPOSITION)r=n.composition;else if(e===Mt.OBJECTS)r=n.objects;else if(e===Mt.GRADIENTS)r=n.gradients;else return!1;return t in r},jP=(t,e,n,r)=>(e===Mt.RECIPES?r.recipes[t]=n:e===Mt.COMPOSITION?r.composition[t]=n:e===Mt.OBJECTS?r.objects[t]=n:e===Mt.GRADIENTS&&(r.gradients[t]=n),r),zP=t=>{if(typeof t=="object"&&Object.keys(t).length>0){for(const[e,n]of Object.entries(t))if(isNaN(Number(e))||!Array.isArray(n))return!1;return!0}return!1},hd=(t,e,n)=>{if(mn(t.gradient)){const r=e.gradients[t.gradient];t.gradient=r.name,n.gradients??(n.gradients={}),n.gradients[r.name]=r}if(mn(t.inherit)){const r=e.objects[t.inherit];t.inherit=r.name,n.objects??(n.objects={}),n.objects[r.name]=hd(r,e,n)}return t},BP=(t,e,n)=>{if(mn(t.object)){const r=e.objects[t.object];t.object=r.name,n.objects??(n.objects={}),n.objects[r.name]=hd(r,e,n)}if(t.regions)for(const r of Object.values(t.regions))for(let i=0;i<r.length;i++){const o=r[i];if(typeof o=="string"&&mn(o)){const s=e.composition[o];r[i]=s.name}else if(o instanceof Object&&mn(o.object)){const s=e.objects[o.object];n.objects??(n.objects={}),o.object=s.name,n.objects[s.name]=hd(s,e,n)}}return t},$P=t=>{const{name:e,id:n,dedup_hash:r,...i}=t;return i},Wc=t=>{if(!t)return{};const e={};for(const n in t)e[n]=$P(t[n]);return e},HP=t=>({name:t.name,version:t.version,format_version:t.format_version,bounding_box:t.bounding_box,grid_file_path:t.grid_file_path,composition:Wc(t.composition),objects:Wc(t.objects),gradients:Wc(t.gradients)}),qP=(t,e)=>{for(const r in t.composition){const i=t.composition[r].inherit;if(mn(i)){const o=e.composition[i];t.composition[r]=BP(o,e,t)}}if(t.bounding_box&&zP(t.bounding_box)){const r=[[]];for(const[i,o]of Object.entries(t.bounding_box))r[Number(i)]=o;t.bounding_box=r}return HP(t)},WP={apiKey:void 0,authDomain:qc.AUTH_DOMAIN,projectId:qc.PROJECT_ID,storageBucket:qc.STORAGE_BUCKET,messagingSenderId:void 0,appId:void 0,measurementId:void 0},GP=F_(WP),Ca=vP(GP),aE=async(t,e)=>{const n=Ju(Xu(Ca,t),$f(Y0(),"==",e));return await ec(n)},KP=async(t,e)=>{const n=Ju(Xu(Ca,t),$f(Y0(),"in",e));return await ec(n)},QP=async(t,e,n)=>{const r=Ju(Xu(Ca,t),$f(e,"==",n));return await ec(r)},XP=async t=>{const e=Ju(Xu(Ca,t));return await ec(e)},YP=t=>t.docs.map(e=>({id:e.id,...e.data()})),lE=(t,e)=>{let n="";return t.forEach(r=>{n=e?r.data()[e]:r.data()}),n},JP=async t=>{const e=await QP(Mt.RESULTS,dn.BATCH_JOB_ID,t);return lE(e,"url")},Qg=async t=>{const e=await aE(Mt.JOB_STATUS,t);return lE(e,"status")},uE=async t=>{const e=await XP(t);return YP(e)},Xg=async t=>(await uE(t)).reduce((r,i)=>{const o=i[dn.NAME],s=i.id;return o&&(r[o]={firebaseId:s}),r},{}),Yg=async(t,e)=>{const r=(await uE(t)).find(i=>i.id===e);return JSON.stringify(r,null,2)},ZP=async t=>{const n=(await aE(Mt.RECIPES,t)).docs.map(r=>({id:r.id,name:r.data().name,dedup_hash:r.data().dedup_hash,...r.data()}));if(n.length===0)throw new Error(`Recipe with ID ${t} not found`);return n[0]},ek=async(t,e)=>(await KP(t,e)).docs.map(i=>({id:i.id,name:i.data().name,dedup_hash:i.data().dedup_hash,...i.data()})),Gc=async(t,e)=>{const n={};t.forEach(r=>{const i=r.split(/:|\//),o=i[1];UP(r,o,e)||(o in n||(n[o]=[]),i[2]in n[o]||n[o].push(i[2]))});for(const r in n)(await ek(r,n[r])).forEach(o=>{const s="firebase:"+r+"/"+o.id;e=jP(s,r,o,e)});return e},tk=async t=>{let e=[];if(t.composition){const i=t.composition;for(const o of Object.values(i))mn(o.inherit)&&typeof o.inherit=="string"&&e.push(o.inherit)}let n={recipes:{},composition:{},gradients:{},objects:{}};n=await Gc(e,n),e=[];for(const i in n.composition)for(const[o,s]of Object.entries(n.composition[i]))if(o===dn.OBJECT)mn(s)&&e.push(s);else if(o===dn.REGIONS)for(const l in s){const u=s[l];u&&u.forEach(h=>{typeof h=="string"&&mn(h)?e.push(h):h instanceof Object&&mn(h[dn.OBJECT])&&e.push(h[dn.OBJECT])})}n=await Gc(e,n),e=[];for(const i in n.composition)for(const[o,s]of Object.entries(n.composition[i]))(o===dn.OBJECT||o===dn.INHERIT)&&mn(s)&&!(s in n.composition)&&e.push(s);for(const i in n.objects)for(const[o,s]of Object.entries(n.objects[i]))(o===dn.GRADIENT||o===dn.INHERIT)&&mn(s)&&!(s in n.objects)&&e.push(s);n=await Gc(e,n);const r=qP(t,n);return JSON.stringify(r,null,2)},Jg=async t=>{const e=await ZP(t);return await tk(e)},nk=async(t,e)=>{await FP(yP(Ca,Mt.EDITED_RECIPES,t),e)},rk="https://bda21vau5c.execute-api.us-west-2.amazonaws.com/production/start-packing",ik=(t,e)=>{let n=`${rk}?recipe=${t}`;return e&&(n+=`&config=${e}`),n};var Cn=(t=>(t.SUBMITTED="SUBMITTED",t.STARTING="STARTING",t.RUNNING="RUNNING",t.DONE="DONE",t.FAILED="FAILED",t))(Cn||{});const ok="https://simularium.allencell.org/embed?trajUrl=";function sk(){const[t,e]=U.useState({}),[n,r]=U.useState({}),[i,o]=U.useState(""),[s,l]=U.useState(""),[u,h]=U.useState(""),[f,p]=U.useState(""),[y,T]=U.useState(""),[P,k]=U.useState(""),[V,I]=U.useState(""),[_,R]=U.useState(""),[M,z]=U.useState(!0),[H,m]=U.useState(!0),[g,E]=U.useState(!1),[w,C]=U.useState(!0),[D,S]=U.useState(0);let Ae=0;async function it(ae){return new Promise(Re=>setTimeout(Re,ae))}const ln=async()=>await Jg(i)!=V,At=(ae,Re,Ue)=>{const Bt=JSON.parse(ae);if(Bt.bounding_box){const wn=Object.assign({},Bt.bounding_box);Bt.bounding_box=wn}return Bt[dn.RECIPE_PATH]=Re,Bt[dn.NAME]=Ue,Bt},$=async()=>{k(""),S(0);let ae="firebase:recipes/"+i;const Re="firebase:configs/"+s;if(await ln()){const wr=HS();ae="firebase:recipes_edited/"+wr;const Xo=At(V,ae,wr);try{await nk(wr,Xo)}catch(li){p(Cn.FAILED),T(String(li));return}}const Bt=ik(ae,Re),wn=new Request(Bt,{method:"POST"});Ae=Date.now();const Er=await fetch(wn);p(Cn.SUBMITTED);const Qn=await Er.json();if(Er.ok)return h(Qn.jobId),p(Cn.STARTING),Qn.jobId;p(Cn.FAILED),T(JSON.stringify(Qn))},ne=async()=>await Xg(Mt.RECIPES);U.useEffect(()=>{(async()=>{const Re=await ne();e(Re)})()},[]);const re=async()=>await Xg(Mt.CONFIGS);U.useEffect(()=>{(async()=>{const Re=await re();r(Re)})()},[]);const Te=async ae=>{const Re=ae||u;let Ue=await Qg(Re);for(;Ue!==Cn.DONE&&Ue!==Cn.FAILED;){await it(500);const wn=await Qg(Re);Ue!==wn&&(Ue=wn,p(wn))}const Bt=(Date.now()-Ae)/1e3;S(Bt),Ue==Cn.DONE?he(Re):Ue==Cn.FAILED&&Ie(Re)},he=async ae=>{const Ue=await JP(ae||u);k(ok+Ue)},Ie=async ae=>{const Re=ae||u,Ue=await Yg(Mt.JOB_STATUS,Re);T(Ue)},gt=async()=>{m(!1),z(!1),$().then(ae=>Te(ae))},$e=async ae=>{o(ae);const Re=await Jg(ae);I(Re)},ot=async ae=>{l(ae);const Re=await Yg(Mt.CONFIGS,ae);R(Re)},st=()=>{z(!M)},yr=()=>{m(!H)},Qo=()=>{P==""&&he(),E(!g)},vr=async()=>{y.length==0?await Ie():C(!w)},_r=f==Cn.DONE,Xe=f==Cn.FAILED,un=P&&g;return de.jsxs("div",{className:"app",children:[de.jsx("h1",{children:"Welcome to cellPACK"}),de.jsxs("div",{className:"input-container",children:[de.jsxs("select",{value:i,onChange:ae=>$e(ae.target.value),children:[de.jsx("option",{value:"",disabled:!0,children:"Select a recipe"}),Object.entries(t).map(([ae,Re])=>de.jsx("option",{value:Re.firebaseId,children:ae},ae))]}),de.jsxs("select",{value:s,onChange:ae=>ot(ae.target.value),children:[de.jsx("option",{value:"",disabled:!0,children:"Select a config"}),Object.entries(n).map(([ae,Re])=>de.jsx("option",{value:Re.firebaseId,children:ae},ae))]}),de.jsx("button",{onClick:gt,disabled:!i,children:"Pack"})]}),de.jsxs("div",{className:"box",children:[V.length>0&&de.jsxs("div",{className:"recipeBox",children:[de.jsx("button",{type:"button",className:"collapsible",onClick:st,children:"Recipe"}),de.jsx("div",{className:"recipeJSON",children:M&&de.jsx("textarea",{value:V,onChange:ae=>I(ae.target.value)})})]}),_.length>0&&de.jsxs("div",{className:"configBox",children:[de.jsx("button",{type:"button",className:"collapsible",onClick:yr,children:"Config"}),de.jsx("div",{className:"configJSON",children:H&&de.jsx("pre",{children:_})})]})]}),de.jsxs("h3",{children:["Job Status: ",f]}),_r&&de.jsxs("div",{children:[D>0&&de.jsxs("h4",{children:["Time to Run: ",D," sec"]}),de.jsx("button",{onClick:Qo,children:"Results"})]}),un&&de.jsx("div",{children:de.jsx("iframe",{src:P,style:{width:"1000px",height:"600px",border:"1px solid black"}})}),Xe&&de.jsxs("div",{children:[de.jsx("button",{className:"collapsible",onClick:vr,children:"Logs"}),w&&y.length>0&&de.jsx("div",{className:"logBox",children:de.jsx("pre",{children:y})})]}),de.jsx("div",{children:de.jsx(k_,{to:aa.LANDING_PAGE,children:"← Back to Home"})})]})}const Kc=new URL(window.location.toString());if(Kc.hash!==""||CE(Kc)){const t=PE(kE(Kc)),e=t.pathname+t.search+t.hash;console.log("Redirecting to "+e),window.history.replaceState(null,"",e)}const ak=IS([{path:aa.LANDING_PAGE,element:de.jsx(US,{})},{path:aa.PACKING_PAGE,element:de.jsx(sk,{})}],{basename:"/cellpack-client/pr-preview/pr-45"});f_(document.getElementById("root")).render(de.jsx(U.StrictMode,{children:de.jsx(VS,{router:ak})}));
